#include "memc_isr/PQL/PQLPlatformDefs.h"
#include "memc_isr/PQL/PQLContext.h"
#include "memc_isr/PQL/PQLGlobalDefs.h"
#include "memc_isr/PQL/IPR.h"
#include "memc_isr/PQL/BasicInfoCheck.h"
#include "memc_isr/Common/memc_type.h"
#include "memc_isr/HAL/hal_ip.h"
#include "memc_isr/HAL/hal_post.h"
#include "memc_isr/include/memc_lib.h"
#include <tvscalercontrol/scaler/scalerstruct.h>
#include "memc_reg_def.h"
#include "rbus/kme_dehalo4_reg.h"
#include <rbus/od_reg.h>
//dehalo me1 normal
#include "common/include/rbus/kme_dehalo5_reg.h"
#include "common/include/rbus/kme_me1_bg0_reg.h"
#include "common/include/rbus/kme_me1_bg1_reg.h"
#include "memc_isr/include/memc_identification.h"

#include <tvscalercontrol/panel/panelapi.h>  //FHD
#include "memc_isr/Platform/memc_change_size.h"
#include <tvscalercontrol/vip/scalerColor.h>
#include "memc_isr/PQL/MEMC_ParamTable.h"
#include "memc_isr/include/memc_identify_ctrl.h"
#include <tvscalercontrol/panel/panel_dlg.h>
#include "memc_isr/PQL/CalibMEMCInfo.h"


extern int LowDelay_mode;
extern unsigned char u8_MEMCMode;
extern unsigned int dejudder;
extern unsigned int g_cur_cadence_id;
extern unsigned int g_cur_cadence_out;
extern unsigned int g_Hist_Y_Mean_Value;
extern unsigned int vpq_project_id;
extern unsigned int vpqex_project_id;
extern bool g_new_sport_mode;
extern unsigned char g_ProjectID;
extern _MEMC_STYLE_TABLE MEMC_STYLE_TABLE;

extern unsigned int u32PLogo_HSize;
extern unsigned int u32PLogo_VSize;

#if 0 //merlin6
unsigned int mc_fb_lvl_force_en_tmp = 0;
unsigned int mc_logo_phase_fb_phase_en = 0;
unsigned int mc_pre_phase_fb_phase_en = 0;
unsigned int mc_pt_phase_fb_phase_en = 0;
unsigned int mc_fb_lvl_force_value = 0;
#else // to sync tv006 patch
//extern webos_strInfo_t webos_strToolOption;

unsigned char g_mc_fb_lvl_force_en = 0;
unsigned char g_mc_logo_phase_fb_phase_en = 0;
unsigned char g_mc_pre_phase_fb_phase_en = 0;
unsigned char g_mc_pt_phase_fb_phase_en = 0;
unsigned char g_mc_fb_lvl_force_value = 0;
#endif

extern unsigned char scalerVIP_Get_MEMCPatternFlag_Identification(unsigned short prj,unsigned short nNumber);
extern unsigned char scalerVIP_Get_MEMCRimFlag(void);
extern unsigned int g_case_num;
extern unsigned int g_frm_cnt;
extern unsigned char g_393_flag;
extern unsigned char u8_K24987_flag;
extern bool g_MEMC_Identify_Pattern_En;
extern bool g_MEMC_Identify_Pattern_Clear;
extern unsigned char get_MEMC_bypass_status_refer_platform_model(void);
extern unsigned int Get_DISP_ACT_END_VPOS(void);
extern unsigned char Scaler_MEMC_GetPanelSizeByDisp(void);
extern VOID MEMC_Lib_ME_overflow_Check(VOID);
extern _MEMC_PARAM_TABLE MEMC_PARAM_TABLE;
extern PQL_OUTPUT_RESOLUTION MEMC_LibGetResolution(void);
extern void Identify_ctrl_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput);
extern void Identify_ctrl_Status_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput);
extern VOID MEMC_SetRTKhdf_Project(VOID);
extern SLR_VIP_TABLE *fwif_colo_get_AP_vip_table_gVIP_Table(void);
extern unsigned char get_MEMC_Karaoke_flg(void);
extern unsigned char g_Q13722_flag;
extern unsigned char g_7006_flag;
extern unsigned char g_181_flag, g_393_flag, g_48_flag, g_190_flag;
extern unsigned char g_166_flag, g_510_flag, g_511_flag, g_474_flag, g_480_flag;
extern unsigned char g_291_flag, g_244_flag, g_cad_transient_flag, g_476_flag, g_186_flag;
extern unsigned char g_246_flag, g_62_flag, g_62_20_flag, g_72_60_flag, g_244_9_flag, g_248_flag, g_60028_flag;

#define	COLOR_ICM_D_ICM_CDS_SKIN_0_reg		0xB802A47C
#define	COLOR_ICM_D_ICM_AI_0_reg				0xB802A4BC
#define	COLOR_DCC_D_DCC_CDS_SKIN_0_reg		0xB802E500
#define	COLOR_SHARP_DM_CDS_CM0_U_BOUND_0_reg		0xB802B740
#ifndef Min
#define Min(a, b)   ( ((a) < (b)) ? (a) : (b) )
#endif
#ifndef MAX
#define MAX(a, b) (((a) > (b)) ? (a) : (b))
#endif

unsigned char MEMC_ID_flag = 0;
extern unsigned char MEMC_ID_GetFlag(unsigned short prj,unsigned short nNumber);
//unsigned char logo_check_K24014_flag = 0;
VOID Wrt_7segment_show(const _PARAM_WRT_COM_REG *pParam)
{
	unsigned int u1_show_identify = 0;
	od_od_ctrl_RBUS od_ctrl_reg;			
	od_ctrl_reg.regValue = rtd_inl(OD_OD_CTRL_reg);	
	
	ReadRegister(SOFTWARE2_SOFTWARE2_45_reg, 3,3,&u1_show_identify);

	if(od_ctrl_reg.dummy1802ca00_31_12>>11 & 1) // bit23 to show AI info
	{
	#if IS_ENABLED(CONFIG_RTK_AI_DRV)
	extern int show_ai_sc;
	//extern int scene_nn;
	extern int scene_pq;
	extern int sqm_pq;
	extern int ai_genre;
	extern int ai_content;
	extern int ai_resolution;
	unsigned int  u32_wrt_data;//, u32_wrt_data2;
	extern unsigned int debug_draw_cnt;
	// =======================================================================================================================
	// 7seg_0 [0~15]
	u32_wrt_data = ((rtd_inl(0xb802a47c)&0x00000001)||((rtd_inl(0xb802a4bc)&0x80000000)>>31))||(rtd_inl(0xb802e500)&0x00000001)||((rtd_inl(0xB802b740)&0x10000000)>>28);//shp
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, u32_wrt_data);
	u32_wrt_data = show_ai_sc;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, u32_wrt_data);
	u32_wrt_data = scene_pq;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);
	u32_wrt_data = sqm_pq;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, u32_wrt_data);

	/*u32_wrt_data = (rtd_inl(0xB802b740)&0x10000000)>>28;//shp
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, u32_wrt_data);
	u32_wrt_data = (rtd_inl(0xb802e500)&0x00000001);//dcc
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, u32_wrt_data);
	u32_wrt_data = (rtd_inl(0xb802a47c)&0x00000001)&&((rtd_inl(0xb802a4bc)&0x80000000)>>31);//icm
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);
	u32_wrt_data = 0;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, u32_wrt_data);*/
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_1 [16~31]
	u32_wrt_data = ai_genre;//scene_nn;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 31, u32_wrt_data);
	rtd_outl(KPOST_TOP_KPOST_TOP_B0_reg, 0x041f4000);// change position

	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_2 [0~15]

	u32_wrt_data = (0xf&debug_draw_cnt)|((0xf&ai_resolution)<<12);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 15, u32_wrt_data);

	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_3 [16~31]
	u32_wrt_data = ai_content;//scene_pq;
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 31, u32_wrt_data);
	rtd_outl(KPOST_TOP_KPOST_TOP_B8_reg, 0x00258000);// change position

	// =======================================================================================================================

	// for scene_detection
	#endif

	}
	else
	{
	
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();

	unsigned int  u32_wrt_data = 0;//, u32_wrt_data2;
	unsigned int  u1_show_special = 0, u1_show_FB_info = 0, u1_subtitle_info = 0, u1_show_AutoRegression_info = 0;
#ifdef BG_MV_GET
	signed short s11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	signed short s11_2nd_gmv_mvx = (s_pContext->_output_read_comreg.s11_me_GMV_2nd_vx_rb);
	int gmv_grp0_cnt = 0;
	int gmv_grp0_ucfa = 0;
	int gmv_grp1_cnt = 0;
	int gmv_grp1_ucfa = 0;
	int bg_transfer_mvx_u =0;
	int bg_transfer_mvy_v = 0;
	int print_cursor_mv_en = 0;
#endif

	// =======================================================================================================================
	// 7seg_0 [0~15]
	unsigned int u32_cad_data = 0;
	static unsigned int ES_Test_Show;
	ReadRegister(SOFTWARE1_SOFTWARE1_22_reg, 27, 27, &ES_Test_Show);		// YE Test 


	u32_cad_data = ((s_pContext->_output_filmDetectctrl.u1_mixMode == 1 || s_pContext->_output_filmDetectctrl.u8_BadEdit_flag == 1) ? 0xF : s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL])&0xF;
	u32_wrt_data = ((u32_cad_data<<4) | (s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL]&0xF)) & 0xFF;
	if(s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL]>0xf){
		u32_wrt_data = (0x90 + ((s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL]+1)&0xF)) & 0xFF;
	}
	u32_wrt_data = u1_show_identify ? s_pContext->_output_me_sceneAnalysis.u1_tool_detect_pattern +(s_pContext->_output_me_sceneAnalysis.u1_bin_detect_pattern<<4) : u32_wrt_data;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 7, u32_wrt_data);

	//u32_wrt_data = _MIN_(s_pContext->_output_frc_phtable.u8_deblur_lvl_pre >> 3, 0x0F);
	u32_wrt_data = ((rtd_inl(SYS_REG_SYS_CLKEN3_reg)>>30)&0x1)|
				   (((rtd_inl(LBMC_LBMC_24_reg)>>4)&0x1)<<1)|
				   (((rtd_inl(LBMC_LBMC_24_reg)>>13)&0x1)<<2)|
				   (LowDelay_mode<<3);
	u32_wrt_data = u1_show_identify ? 0 : u32_wrt_data;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);

	u32_wrt_data = _MIN_(s_pContext->_output_frc_phtable.u8_dejudder_lvl_pre >> 3, 0x0F);
	u32_wrt_data = u1_show_identify ? 0 : u32_wrt_data;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, u32_wrt_data);
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_1 [16~31]
	 u32_wrt_data = s_pContext->_output_wrt_comreg.u8_FB_lvl;  
	//u32_wrt_data=s_pContext->_output_read_comreg.u1_sc_status_rb;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 23, u32_wrt_data);
	//u32_wrt_data = g_frm_cnt;
	//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 23, u32_wrt_data);
#if 1
//	u32_wrt_data = s_pContext->_output_mc_lbmcswitch.u8_lf_lbmcMode;
	u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true|
	  			(s_pContext->_output_wrt_comreg.u1_casino_RP_detect_true<< 3);
	//u32_wrt_data = s_pContext->_output_fblevelctrl.u8_pan_scene_hold_cnt;
	// if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dhbypass==1)
		
	//  u32_wrt_data=s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dhbypass;
#else
	u32_wrt_data=s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_lowfgapl;
#endif

	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, u32_wrt_data);

	u32_wrt_data = s_pContext->_output_dh_close.u1_closeDh_act|
				  ((s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step!=0)?0x2:0)|
				  ((s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step!=0)?0x4:0)|
				  (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dhbypass<<3);

//	u32_wrt_data = s_pContext->_output_frc_sceneAnalysis.u1_RgRotat_true;
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 28, 31, u32_wrt_data);
//	u32_wrt_data = g_case_num;
//	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 31, u32_wrt_data);
	// =======================================================================================================================



if(ES_Test_Show==1)
{
		u32_wrt_data=0;

				if(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag==1){

					u32_wrt_data=0xA;
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

			 		u32_wrt_data =s_pContext->_output_bRMV_rFB_ctrl.u32_ES_RFB_ID_show;	
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 27, u32_wrt_data);

					}
				if (s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag2==1){
					u32_wrt_data=0xB;
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

			 		u32_wrt_data =s_pContext->_output_bRMV_rFB_ctrl.u32_ES_RFB_ID_show;	
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 27, u32_wrt_data);
			 		//u32_wrt_data =((0xB<<12))|(s_pContext->_output_bRMV_rFB_ctrl.u32_ES_RFB_ID_show);

					}
				if((s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag==0)&&(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag2==0))
					{
					u32_wrt_data=0;
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 31, u32_wrt_data);
					}
				

				
				//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 31, u32_wrt_data);

				//if((s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag==1)||(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag2==1))
				//	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 27, u32_wrt_data)
			
			      if(s_pContext->_output_me_sceneAnalysis.u1_RP_ID_flag==1){

					u32_wrt_data=0xC;
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);

					
			 		u32_wrt_data =s_pContext->_output_me_sceneAnalysis.u32_RP_ID_Show;	
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 11, u32_wrt_data);
			      		}
				else
					{
					u32_wrt_data=0;
					WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 15, u32_wrt_data);
					}
		

}
else if(pParam->u1_rFB_show_en == 0)
{
	// =======================================================================================================================
	// 7seg_2 [0~15]
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, s_pContext->_output_dh_close.u5_dh_bad_rgn_num);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, s_pContext->_output_dh_close.u5_dh_good_rgn_num);

	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.u8_logo_sc_FastDet_cntholdfrm);


	u32_wrt_data = s_pContext->_output_dh_close.u1_meAllDtl_close |
				   (s_pContext->_output_dh_close.u1_lbmc_switch_close << 1) |
				   (s_pContext->_output_dh_close.u1_fblvl_close << 2) |
				   (s_pContext->_output_dh_close.u1_pfvconf_close << 3) |
				   (frc_cadTable[s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL]].u1_isLowFrameRate << 4) |
				   (s_pContext->_output_dh_close.u1_dh_fadeInOut_close << 5) |
				   (s_pContext->_output_dh_close.u1_dh_sml_rgnAction_close << 6)|
				   (s_pContext->_output_dh_close.u1_panning_close<<7);


	
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, u32_wrt_data);
	
	// debug for special mode
	ReadRegister(SOFTWARE3_SOFTWARE3_10_reg, 0,0,&u1_show_special);
	ReadRegister(SOFTWARE3_SOFTWARE3_10_reg, 3,3,&u1_show_FB_info);
	ReadRegister(SOFTWARE3_SOFTWARE3_10_reg, 6,6,&u1_subtitle_info);
	ReadRegister(SOFTWARE3_SOFTWARE3_10_reg, 7,7,&u1_show_AutoRegression_info);
	if(u1_show_special) {
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u8_RepeatMode;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11, u32_wrt_data);
		u32_wrt_data = s_pContext->_external_data.u8_repeatCase;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_SportScene + (g_new_sport_mode<<1);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);
		u32_wrt_data = s_pContext->_external_data.u1_FixHighFreqFlick;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);
	}

	if(u1_show_FB_info){
		u32_wrt_data = s_pContext->_output_fblevelctrl.u1_detect_GMV_fast;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_fblevelctrl.u8_FastMotion_cnt;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_fblevelctrl.u1_large_mv_unconf;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_fblevelctrl.u1_MV_Chaos;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);
	}

	//gmv SR
	//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x,0,255);  //x
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 7, u32_wrt_data);
	//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y,0,255);  //y
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, u32_wrt_data);

	// 7seg_3 [16~31]
	//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_apl_diff_alpha,0,15);
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

	// 7seg_3, //// logo clear flag.
	//u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 16, u32_wrt_data);
	RTKReadRegister(PPOVERLAY_uzudtg_DVS_cnt_reg, &u32_wrt_data);
	u32_wrt_data = (270000000/(u32_wrt_data+1))+5;

	//output timing
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, (u32_wrt_data/10)%10);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, (u32_wrt_data/10)/10);

	// motion dir and dtl dir
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, s_pContext->_output_me_sceneAnalysis.u2_GMV_single_move);
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, s_pContext->_output_me_sceneAnalysis.u2_mcDtl_HV);

	//zoom[0],swing[1],RgRotat[2],EPG[3]
	if(1){
	u32_wrt_data = s_pContext->_output_frc_sceneAnalysis.u1_Zoom_true  |
			   (( MEMC_ID_flag | s_pContext->_output_wrt_comreg.u1_IP_preProcess_true | s_pContext->_output_wrt_comreg.u1_IP_wrtAction_true | s_pContext->_output_wrt_comreg.u1_Pattern_Update_true )<< 1) |
			   (s_pContext->_output_frc_sceneAnalysis.u1_RgRotat_true<<2) |
			   ((s_pContext->_output_me_vst_ctrl.u1_detect_blackBG_VST_trure)<<3);
	}else{
		u32_wrt_data = s_pContext->_output_Patch_Manage.u1_tri_ball_Detected;  
	}
			
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);



	// panning[0-1], logo clear flag[2], logo sc status[3]
#if 1  //ori
	u32_wrt_data = (s_pContext->_output_me_sceneAnalysis.u2_panning_flag) |
				   (s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus << 2) |
	               (s_pContext->_output_FRC_LgDet.u1_logo_sc_status << 3);
	//if(pParam->u1_rFB_show_en)
	//	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, (s_pContext->_output_bRMV_rFB_ctrl.u1_rFB_panning));
	//else
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, u32_wrt_data);

	#endif

	if(u1_subtitle_info){
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_moving_subtitle;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_bot_mv_match;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_cen_mv_match;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u8_subtitle_cnt;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);
	}

	if(u1_show_AutoRegression_info){
		const _CHECK_RESULT_AUTOREGRESSION* AutoRegression_Result = AutoRegression_Get_Result();

		u32_wrt_data = AutoRegression_Result->Result[AUTOREGRESSION_SC].u16_total_num;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 23, u32_wrt_data);
		
		u32_wrt_data = AutoRegression_Result->Result[AUTOREGRESSION_SC].u16_correct_num;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, u32_wrt_data);
		u32_wrt_data = AutoRegression_Result->Result[AUTOREGRESSION_GFB].u16_correct_num;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 7, u32_wrt_data);

		u32_wrt_data = AutoRegression_Result->Result[AUTOREGRESSION_LFB].u16_correct_num;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 31, u32_wrt_data);
		u32_wrt_data = AutoRegression_Result->Result[AUTOREGRESSION_LOGO].u16_correct_num;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 23, u32_wrt_data);
	}
}
else
{
	switch(s_pParam->_param_me_sceneAnalysis.u3_show_mode2)
	{
		case 0:
			// 7seg_2 [0~15]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  0, 15, (s_pContext->_output_read_comreg.u12_me_GMV_1st_unconf_rb));
			// 7seg_3 [16~31]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 31, (s_pContext->_output_read_comreg.u17_me_GMV_1st_cnt_rb >> 1));
			break;
		case 1:
			// 7seg_2 [0~15]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  0,  7, (s_pContext->_output_me_sceneAnalysis.u8_rTCss_cnt));
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  8, 15, (s_pContext->_output_me_sceneAnalysis.u8_rPrd_cnt));
			// 7seg_3 [16~31]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 23, (s_pContext->_output_me_sceneAnalysis.u8_rChaos_cnt));
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 31, (s_pContext->_output_me_sceneAnalysis.u8_big_relMV_cnt));
			break;
		case 2:
			// 7seg_2 [0~15]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, (s_pContext->_output_me_sceneAnalysis.b_2grp_GMV)); 	
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  8, 11, (s_pContext->_output_me_sceneAnalysis.b_Chaos)); 
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  4,  7, (s_pContext->_output_me_sceneAnalysis.b_big_relMV)); 
			//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  0,  3, (s_pContext->_output_me_sceneAnalysis.b_TCss)); 
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  0,  3, (s_pContext->_output_me_sceneAnalysis.b_prd_scene)); 
			// 7seg_3 [16~31]
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, (s_pContext->_output_me_sceneAnalysis.b_logo_scene)); 
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, (s_pContext->_output_me_sceneAnalysis.u2_panning_flag)); 
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, (s_pContext->_output_me_sceneAnalysis.b_g_panning)); 
			WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, (s_pContext->_output_me_sceneAnalysis.b_do_ME_medFLT)); 				
		default:
			break;
	}
}

	// =======================================================================================================================
	#ifdef BG_MV_GET   //ed
	
	bg_transfer_mvx_u = ((rtd_inl(MC_MC_F0_reg)>>10) & 0x3ff) - 512;
	bg_transfer_mvy_v = ((rtd_inl(MC_MC_F0_reg)>>20) & 0x3ff) - 512;
	gmv_grp0_cnt = ((rtd_inl(KME_ME1_TOP2_KME_ME1_TOP2_C0_reg)) & 0x1ffff);
	gmv_grp0_ucfa = ((rtd_inl(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg)) & 0xfff);
	gmv_grp1_cnt = ((rtd_inl(KME_ME1_TOP2_KME_ME1_TOP2_C4_reg)) & 0x1ffff);
	gmv_grp1_ucfa = ((rtd_inl(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg)>>12) & 0xfff);
	print_cursor_mv_en =  ((rtd_inl(HARDWARE_HARDWARE_26_reg)>>20) & 0x1);
	
	if(print_cursor_mv_en)
	{
		rtd_pr_memc_emerg(",%d,%d,%d,%d,%d,%d,%d,%d\n",
		s11_gmv_mvx,s11_2nd_gmv_mvx,bg_transfer_mvx_u,bg_transfer_mvy_v,gmv_grp0_cnt,gmv_grp1_cnt,gmv_grp0_ucfa,gmv_grp1_ucfa); 	
	}
	#endif

}

#if 0
	// arrange from left to right
	// =======================================================================================================================
	// 7seg_0 [0~15]
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, s_pContext->_output_me_sceneAnalysis.u2_panning_flag);
	u32_wrt_data = ( s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true + (s_pContext->_output_wrt_comreg.u1_casino_RP_detect_true << 3) );
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, s_pContext->_output_dh_close.u1_closeDh_act);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 0x0);
	// =======================================================================================================================
	// 7seg_1 [16~31]
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 28, 31, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 20, 23, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 19, 0x0);
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_2 [0~15]
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  8, 11, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  4,  7, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg,  0,  3, 0x0);
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_3 [16~31]
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, 0x0);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, s_pContext->_output_me_sceneAnalysis.u1_MainObject_Move);
	u32_wrt_data = (scalerVIP_Get_MEMCPatternFlag_Identification(100) || scalerVIP_Get_MEMCPatternFlag_Identification(101))? 3 : s_pContext->_output_me_sceneAnalysis.u3_occl_ext_level;
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, s_pContext->_output_me_sceneAnalysis.u3_occl_post_corr_level);
	// =======================================================================================================================
#endif

#if 0
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u32_wrt_data = 0;
	//unsigned int u32_RB_val;

	// =======================================================================================================================
	// 7seg_0 [0~15]
	u32_wrt_data = (s_pContext->_output_dh_close.u1_closeDh_act) + (s_pContext->_output_frc_sceneAnalysis.u6_mv_accord_hold_cnt  << 4);
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 15, u32_wrt_data);
	u32_wrt_data = 0;
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_1 [16~31]
	WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 31, 0);
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_2 [0~15]
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3,
		(s_pContext->_output_me_sceneAnalysis.u1_pure_TopDownPan_flag ) &&
		(s_pContext->_output_me_sceneAnalysis.u2_panning_flag) );
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, s_pContext->_output_me_sceneAnalysis.u1_pure_TopDownPan_flag);
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, s_pContext->_output_me_sceneAnalysis.u8_pure_TopDownPan_cnt);
	// =======================================================================================================================

	// =======================================================================================================================
	// 7seg_3 [16~31]
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, (s_pContext->_output_me_sceneAnalysis.u2_panning_flag) );
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, (s_pContext->_output_me_sceneAnalysis.u1_Natural_HighFreq_detect_true) );
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, (s_pContext->_output_me_sceneAnalysis.s10_me_GMV_1st_vy_rb_iir > 5) );
	WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31,
		( (s_pContext->_output_me_sceneAnalysis.u2_panning_flag != 0) &&
		  (s_pContext->_output_me_sceneAnalysis.u1_Natural_HighFreq_detect_true != 0) &&
		  (s_pContext->_output_me_sceneAnalysis.s10_me_GMV_1st_vy_rb_iir > 5)
		 )
	);
	// =======================================================================================================================
#endif

	//SE_Film
	//u32_wrt_data = g_cur_cadence_id;
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, u32_wrt_data);

	//u32_wrt_data = g_cur_cadence_out;
	//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);
#if 0

	if (pParam->u8_show7seg_mode == 0)  //common show
	{
		// 7seg_0

	//	u32_wrt_data = (s_pContext->_output_read_comreg.u3_ipme_filmMode_rb >> 1);
		unsigned int u32_cad_data = 0;
		u32_cad_data = ((s_pContext->_output_filmDetectctrl.u1_mixMode == 1) ? 0xF : s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL])&0xF;
	    	u32_wrt_data = ((u32_cad_data<<4) | (s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL]&0xF)) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 7, u32_wrt_data);

		u32_wrt_data = _MIN_(s_pContext->_output_frc_phtable.u8_deblur_lvl_pre >> 3, 0x0F);
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);

		u32_wrt_data = _MIN_(s_pContext->_output_frc_phtable.u8_dejudder_lvl_pre >> 3, 0x0F);
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, u32_wrt_data);

		// 7seg_1
			u32_wrt_data = s_pContext->_output_wrt_comreg.u8_FB_lvl;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 23, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_mc_lbmcswitch.u8_lf_lbmcMode;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_dh_close.u1_closeDh_act;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 28, 31, u32_wrt_data);

		// 7seg_2 SceneAnalysis
		//  fadeIn/out
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_cnt_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_acdc_sad_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_bv_sad_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_conf,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);

		//gmv SR
		//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x,0,255);  //x
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 7, u32_wrt_data);
		//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y,0,255);  //y
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, u32_wrt_data);

		// 7seg_3, //// logo clear flag.
		u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 16, u32_wrt_data);

		//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_apl_diff_alpha,0,15);
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

		RTKReadRegister(0xB80282E4, &u32_wrt_data);
		u32_wrt_data = (270000000/(u32_wrt_data+1))+5;

		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, (u32_wrt_data/10)%10);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, (u32_wrt_data/10)/10);

		//u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 16, u32_wrt_data);   //x
		//u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.u2_searchRange_x_status,15);
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, u32_wrt_data);
		//u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.u2_searchRange_y_status,15);  //y
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

		//dehalo close
		u32_wrt_data = s_pContext->_output_dh_close.u1_panning_close;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);

		//logo
		u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, u32_wrt_data);

	}
	else if (pParam->u8_show7seg_mode == 1) // for boundary
	{
		// 7seg_0
		//avgSC
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u32_insidePan_avgSc/32, 0, 255)  & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 7, u32_wrt_data);
		//avgTc
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u32_insidePan_avgTc/32,0,255) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 15, u32_wrt_data);

		//boundary small
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_BdySmall_lft_cnt,0,15) & 0x0F;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 19, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_BdySmall_rht_cnt,0,15) & 0x0F;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 20, 23, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_dynSAD_Diff_Gain,0,255) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 31, u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u8_is_insidePan,0,1);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u1_is_saddiff_large,0,1);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u32_insidePan_avgAbsMVY/8,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11,  u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u32_insidePan_avgAbsMVX/8,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);


		u32_wrt_data =  s_pContext->_output_dh_close.u1_closeDh_act;
		//u32_wrt_data = u32_wrt_data == 1 ? 0 : 1;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31,u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u1_is_BdySmall_MV,0,1);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27,u32_wrt_data);

		u32_wrt_data = s_pContext->_output_dh_close.u1_panning_close;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);

		//logo
		u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19,u32_wrt_data);

	}
	else if(pParam->u8_show7seg_mode == 2)  //fade in out
	{
		// 7seg_0 SceneAnalysis
		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_casino_RP_detect_true;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u1_ToL10_RP_true;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, u32_wrt_data);

		u32_wrt_data = s_pContext->_external_info.u1_PictureMode_Chg;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 12, 15, u32_wrt_data);

		// 7seg_1 SceneAnalysis

		// 7seg_2 SceneAnalysis
		//  fadeIn/out
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_cnt_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 3, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_cnt_Thr_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 4, 7, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_apl_diff_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 11, u32_wrt_data);
		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u4_fadeInOut_conf_iir,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 12, 15, u32_wrt_data);

		// 7seg_3, //// logo clear flag.
		u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_blkclr_glbstatus;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 16, u32_wrt_data);     //x

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u2_searchRange_y_status,0,15);  //y
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

		//u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u2_searchRange_x_status,0,15);
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, u32_wrt_data);

		u32_wrt_data = _CLIP_(s_pContext->_output_frc_sceneAnalysis.u5_dc_ac_bld_alpha,0,15);
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_dh_close.u1_closeDh_act;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);
	}
	else if (pParam->u8_show7seg_mode == 3)
	{
		u32_wrt_data = s_pContext->_output_frc_sceneAnalysis.s2m_12_cnt_iir  & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 7, u32_wrt_data);

		u32_wrt_data = _MIN_(_ABS_(s_pContext->_output_frc_sceneAnalysis.s2m_1st_mvx)/4, 255) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 15, u32_wrt_data);

		u32_wrt_data = _MIN_(_ABS_(s_pContext->_output_frc_sceneAnalysis.s2m_1st_mvy)/4, 255) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 23, u32_wrt_data);

		u32_wrt_data = _MIN_(_ABS_(s_pContext->_output_frc_sceneAnalysis.s2m_2nd_mvx)/8, 15) & 0xF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, u32_wrt_data);

		u32_wrt_data = _MIN_(_ABS_(s_pContext->_output_frc_sceneAnalysis.s2m_2nd_mvy)/8, 15) & 0xF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 28, 31, u32_wrt_data);

		//goodGMVcnt
		u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.u8_goodGmv_cnt, 255)  & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 7, u32_wrt_data);
		//diffGMVcnt
		u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.u8_diffGmv_cnt,255) & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 8, 15, u32_wrt_data);

		//
		u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.s2m_1st_cnt, 255)  & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 23, u32_wrt_data);

		u32_wrt_data = _CLIP_UBOUND_(s_pContext->_output_frc_sceneAnalysis.s2m_2nd_cnt, 255)  & 0xFF;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 31, u32_wrt_data);
	}
	else if(pParam->u8_show7seg_mode == 4)
	{

		u32_wrt_data = s_pContext->_output_me_sceneAnalysis.u8_EPG_apply>0;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 28, 31, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_Patch_Manage.u1_patch_highFreq_rp_true;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 24, 27,u32_wrt_data);

		u32_wrt_data = s_pContext->_output_Patch_Manage.u1_patch_highFreq_zmv_true;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 20, 23, u32_wrt_data);

		u32_wrt_data = s_pContext->_output_FRC_LgDet.u1_lg_UXN_patch_det;
		WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 19, u32_wrt_data);
	}
#endif
}

#if  0
//extern BOOL MEMC_LibSetMEMCFrameRepeatEnable(BOOL bEnable, BOOL bForce);
VOID FB_PureVideo_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	PQL_INPUT_FRAME_RATE in_fmRate = s_pContext->_external_data._input_frameRate;
	unsigned int Repeat_PureVideo_wrtAction_en = 0;
	unsigned char  u8_bPCMode_flag =  (s_pContext->_external_data._output_mode == _PQL_OUT_PC_MODE) ? 1 : 0;
	ReadRegister(SOFTWARE1_SOFTWARE1_00_reg, 24, 24, &Repeat_PureVideo_wrtAction_en);

	//rtd_pr_memc_notice("[FB_PureVideo_wrtAction][%d, %d]\n", in_fmRate, s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo);

	if(Repeat_PureVideo_wrtAction_en) // cadence / tru-motion / in frame rate
	{
		if(in_fmRate >= _PQL_IN_48HZ){
			if(s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo){

				WriteRegister(MC_MC_28_reg, 14, 14,0x1);
				WriteRegister(MC_MC_28_reg, 15, 22,0x0);
				WriteRegister(MC2_MC2_50_reg, 0, 1, 0x0);
				WriteRegister(MC_MC_B0_reg, 6, 7,0x2);
				WriteRegister(MC_MC_B0_reg, 12, 14,0x1);
			}else{

				if(!(( u8_MEMCMode == 0) || (u8_MEMCMode == 4 && dejudder == 0)|| u8_bPCMode_flag )){

					 WriteRegister(MC_MC_28_reg, 14, 14,0x0);
					 WriteRegister(MC_MC_28_reg, 15, 22,0x0);
					 WriteRegister(MC2_MC2_50_reg, 0, 1, 0x3);
				}

				WriteRegister(MC_MC_B0_reg, 6, 7,0x0);
				WriteRegister(MC_MC_B0_reg, 12, 14,0x3);
			}
		}else{

			WriteRegister(MC_MC_B0_reg, 6, 7,0x0);
			WriteRegister(MC_MC_B0_reg, 12, 14,0x3);

		}
	}
}
#endif

#define VarLpf_Coef_List_NUM	(13)
unsigned char VarLpf_Coef_Table[VarLpf_Coef_List_NUM][17]={
	{0, 60, 42, 38, 36, 0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0}, //9tap
	{0, 48, 38, 34, 32, 30, 0,	0,	0,	0,	0,	0,	0,	0,	0,	0,	0}, //11tap
	{0, 40, 35, 32, 30, 28, 26, 0,	0,	0,	0,	0,	0,	0,	0,	0,	0}, //13tap
	{0, 38, 34, 30, 27, 25, 24, 24, 0,	0,	0,	0,	0,	0,	0,	0,	0}, //15tap
	{0, 36, 31, 27, 25, 24, 23, 22, 22, 0,	0,	0,	0,	0,	0,	0,	0}, //17tap
	{0, 33, 29, 26, 24, 22, 22, 22, 20, 20, 0,	0,	0,	0,	0,	0,	0}, //19tap
	{0, 31, 28, 25, 24, 22, 19, 19, 18, 18, 18, 0,	0,	0,	0,	0,	0}, //21tap
	{0, 28, 26, 24, 22, 20, 19, 19, 18, 17, 17, 16, 0,	0,	0,	0,	0}, //23tap
	{0, 26, 24, 22, 20, 19, 19, 18, 18, 17, 16, 15, 14, 0,	0,	0,	0}, //25tap
	{0, 24, 22, 21, 20, 19, 18, 17, 17, 16, 15, 15, 14, 13, 0,	0,	0}, //27tap
	{0, 22, 21, 20, 19, 18, 17, 17, 16, 15, 15, 14, 14, 13, 12, 0,	0}, //29tap
	{0, 20, 19, 19, 18, 18, 17, 16, 16, 15, 15, 14, 13, 13, 12, 11, 0}, //31tap
	{0, 18, 18, 18, 18, 17, 17, 16, 16, 14, 14, 13, 13, 12, 12, 11, 11}, //33tap
};

VOID VarLpf_Coef_wrtAction(void)
{
	static unsigned char u8_current_id = 0;
	unsigned char u8_target_id = 0;
	unsigned int log_en, algo_en, old_mode_en;
	unsigned int tap_select;
	ReadRegister(SOFTWARE3_SOFTWARE3_27_reg,  0,  0, &algo_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_27_reg,  1,  1, &old_mode_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_27_reg,  2,  2, &log_en);	

	if(algo_en==false){
		return;
	}

	if(old_mode_en==true){
		//WriteRegister(MC2_MC2_68_reg, 18, 19, g_VarLpf_Tap);		
		ReadRegister(SOFTWARE3_SOFTWARE3_27_reg,  5,  8, &tap_select);
		u8_target_id = tap_select;
	}
	
	if(u8_current_id==u8_target_id){
		return;
	}

	if(u8_current_id > u8_target_id){
		u8_current_id--;
	}
	else if(u8_current_id < u8_target_id){
		u8_current_id++;
	}
	u8_current_id = _MIN_(u8_current_id, VarLpf_Coef_List_NUM-1);

	//force 33tap
	WriteRegister(MC2_MC2_68_reg, 18, 19, 2);
	//set coef
	WriteRegister(MC2_MC2_24_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][0]);
	WriteRegister(MC2_MC2_2C_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][1]);
	WriteRegister(MC2_MC2_50_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][2]);
	WriteRegister(MC2_MC2_58_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][3]);
	WriteRegister(MC2_MC2_5C_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][4]);
	WriteRegister(MC2_MC2_64_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][5]);
	WriteRegister(MC2_MC2_68_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][6]);
	WriteRegister(MC2_MC2_E0_reg, 14, 22, VarLpf_Coef_Table[u8_current_id][7]);
	WriteRegister(MC2_MC2_E0_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][8]);
	WriteRegister(MC2_MC2_F4_reg, 14, 22, VarLpf_Coef_Table[u8_current_id][9]);
	WriteRegister(MC2_MC2_F4_reg, 23, 31, VarLpf_Coef_Table[u8_current_id][10]);
	WriteRegister(MC2_MC2_F8_reg,  0,  8, VarLpf_Coef_Table[u8_current_id][11]);
	WriteRegister(MC2_MC2_F8_reg,  9, 17, VarLpf_Coef_Table[u8_current_id][12]);
	WriteRegister(MC2_MC2_F8_reg, 18, 26, VarLpf_Coef_Table[u8_current_id][13]);
	WriteRegister(MC2_MC2_FC_reg,  0,  8, VarLpf_Coef_Table[u8_current_id][14]);
	WriteRegister(MC2_MC2_FC_reg,  9, 17, VarLpf_Coef_Table[u8_current_id][15]);
	WriteRegister(MC2_MC2_FC_reg, 18, 26, VarLpf_Coef_Table[u8_current_id][16]);

	if(log_en){
		rtd_pr_memc_notice("[%s] cur_id,%d,  target_id,%d,  coef_1,%d\n",__func__, u8_current_id, u8_target_id,  VarLpf_Coef_Table[u8_current_id][1]);
	}
}

unsigned int i_dehalo_tightest_setting = 0;

void Wrt_ComReg_Dehalo_select_setting(void)
{
	ReadRegister(SOFTWARE3_SOFTWARE3_45_reg, 27, 27, &i_dehalo_tightest_setting);//0xB809D9B4
}


static _str_FRC_PureOffON_table FRC_PureOffON_table[2] = {
	{0x1,0x0,0x0,{CTRL_Replace,0x0}},/*OFF*/
	{0x0,0x0,0x1,{CTRL_N,0x0}},/*ON*/
};

_str_FRC_PureOffON_table *fwif_MEMC_get_FRC_PureOffON_table(unsigned char level)
{
//	if (FRC_PureOffON_table == NULL) {
//		return NULL;
//	}
	if(level > 1)
		return (_str_FRC_PureOffON_table *)&FRC_PureOffON_table[0];
	else
		return (_str_FRC_PureOffON_table *)&FRC_PureOffON_table[level];

}

VOID FB_NoNeedToDoFRC_wrtRegister(_str_FRC_PureOffON_table *FRC_PureOffON_table)
{
	WriteRegister(MC_MC_28_reg, 14, 14,FRC_PureOffON_table->mc_fb_lvl_force_en);
	WriteRegister(MC_MC_28_reg, 15, 22,FRC_PureOffON_table->mc_fb_lvl_force_value);
	WriteRegister(HARDWARE_HARDWARE_57_reg, 17, 17, FRC_PureOffON_table->u1_mc2_var_lpf_wrt_en);//u1_mc2_var_lpf_wrt_en
	if(FRC_PureOffON_table->mc_var_lpf_en_ctrl.CTRL_TYPE != CTRL_N){
		WriteRegister(MC2_MC2_50_reg, 0, 1, FRC_PureOffON_table->mc_var_lpf_en_ctrl.mc_var_lpf_en);
	}
}


VOID FB_NoNeedToDoFRC_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	unsigned int NoNeedToDoFRC_wrtAction_en = 0;
	unsigned char  u8_NoNeedToDoFRC = (u8_MEMCMode == 4 && dejudder == 0) ? 1 : 0;
	#if 1
	unsigned char table_level;
	_str_FRC_PureOffON_table *tmp_FRC_PureOffON_table = NULL;
	#endif
	static unsigned char  NoNeedToDoFRC_wrtAction_status = 0;
	ReadRegister(SOFTWARE1_SOFTWARE1_00_reg, 24, 24, &NoNeedToDoFRC_wrtAction_en);

	//rtd_pr_memc_notice("[FB_NoNeedToDoFRC_wrtAction][%d, %d]\n", in_fmRate, s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo);

	if(NoNeedToDoFRC_wrtAction_en && u8_NoNeedToDoFRC) // cadence / tru-motion / in frame rate
	{
		#if 1
		table_level = 0;
		tmp_FRC_PureOffON_table = fwif_MEMC_get_FRC_PureOffON_table(table_level);
		FB_NoNeedToDoFRC_wrtRegister(tmp_FRC_PureOffON_table);
		#else
		WriteRegister(MC_MC_28_reg, 14, 14,0x1);
		WriteRegister(MC_MC_28_reg, 15, 22,0x0);
		WriteRegister(HARDWARE_HARDWARE_57_reg, 17, 17, 0x0);//u1_mc2_var_lpf_wrt_en
		WriteRegister(MC2_MC2_50_reg, 0, 1, 0x0);
		#endif
		//WriteRegister(FRC_TOP__MC__mc_bld_flbk_bypass_ADDR, 6, 7,0x2);
		//WriteRegister(FRC_TOP__MC__mc_bld_z_type_flbk_ADDR, 12, 14,0x1);
		NoNeedToDoFRC_wrtAction_status = 1;
	}else{

		if(NoNeedToDoFRC_wrtAction_status == 1){
			#if 1
			table_level = 1;
			tmp_FRC_PureOffON_table = fwif_MEMC_get_FRC_PureOffON_table(table_level);
			FB_NoNeedToDoFRC_wrtRegister(tmp_FRC_PureOffON_table);
			#else
			WriteRegister(MC_MC_28_reg, 14, 14,0x0);
			WriteRegister(MC_MC_28_reg, 15, 22,0x0);
			WriteRegister(HARDWARE_HARDWARE_57_reg, 17, 17, 0x1);//u1_mc2_var_lpf_wrt_en
			//WriteRegister(MC_MC_B0_reg, 6, 7,0x0);
			//WriteRegister(MC_MC_B0_reg, 12, 14,0x3);
			#endif
		}
		NoNeedToDoFRC_wrtAction_status = 0;
	}
}

VOID mc_lbmcMode_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	PQL_OUTPUT_RESOLUTION output_Resolution = MEMC_LibGetResolution();

	unsigned char u8_lf_lbmcMode = s_pContext->_output_mc_lbmcswitch.u8_lf_lbmcMode;
	unsigned char u8_hf_lbmcMode = s_pContext->_output_mc_lbmcswitch.u8_hf_lbmcMode;
	unsigned char lbmc_mode_from_offset = 8;//enable_lbmc_mode_from

	if (pParam->u1_mc_lbmcMode_en == 1)
	{
		if(output_Resolution==_PQL_OUT_3840x1080 && s_pContext->_output_me_sceneAnalysis.u1_FixSubtitleBrokenLBMC_en==1)//tv010 50001_carOnGround_25fps.avi
		{
			WriteRegister(LBMC_LBMC_24_reg, 24, 27, 9);
			WriteRegister(LBMC_LBMC_24_reg, 28, 31, 9);
			WriteRegister(LBMC_LBMC_24_reg, 20, 23, 9);
			pOutput->u8_lf_lbmcMode_pre = 1;	
			pOutput->u8_hf_lbmcMode_pre = 1;
		}
		else{
			if (u8_lf_lbmcMode != pOutput->u8_lf_lbmcMode_pre)
			{
				//WriteRegister(KPHASE_kphase_00_reg,16,18, u8_lf_lbmcMode);
				WriteRegister(LBMC_LBMC_24_reg,24,27, u8_lf_lbmcMode+lbmc_mode_from_offset);
				pOutput->u8_lf_lbmcMode_pre = u8_lf_lbmcMode;
			}

			if (u8_hf_lbmcMode != pOutput->u8_hf_lbmcMode_pre)
			{
				//WriteRegister(KPHASE_kphase_54_reg,16,18, u8_hf_lbmcMode);
				WriteRegister(LBMC_LBMC_24_reg,28,31,  u8_hf_lbmcMode+lbmc_mode_from_offset);
				WriteRegister(LBMC_LBMC_24_reg,20,23, u8_hf_lbmcMode+lbmc_mode_from_offset);
				pOutput->u8_hf_lbmcMode_pre = u8_hf_lbmcMode;
			}
		}
	}
}

unsigned int wrtRegister_ctrl(_str_wrtRegister_ctrl *wrtRegister_ctrl)
{
	unsigned int wrtRegister_val = 0;
	unsigned int default_val =0, ctrl_val =0;

	default_val = wrtRegister_ctrl->default_val;
	ctrl_val = wrtRegister_ctrl->ctrl_val;

	if( wrtRegister_ctrl->type == CTRL_Pluse ){
		wrtRegister_val = default_val + ctrl_val;
	}else if( wrtRegister_ctrl->type  == CTRL_Minus ){
		wrtRegister_val = default_val - ctrl_val;
	}else if( wrtRegister_ctrl->type  == CTRL_Replace ){
		wrtRegister_val = ctrl_val;
	}else if(wrtRegister_ctrl->type  == CTRL_Default){
		wrtRegister_val = default_val;
	}

	return  wrtRegister_val;
}

VOID scCtrl_wrtRegister(_str_scCtrl_table *scCtrl_table)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_str_wrtRegister_ctrl _temp_wrtRegister_ctrl;
	unsigned int _temp_mc_scene_change_fb=0;
	unsigned int _temp_me1_sc_saddiff_th = 0;
	unsigned int _temp_big_apldiff_sc_hold_cnt = 0;

	_temp_wrtRegister_ctrl.default_val = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_scene_change_fb;
	_temp_wrtRegister_ctrl.type = (VAL_CTRL_TYPE)scCtrl_table->mc_scene_change_fb_ctrl.CTRL_TYPE;
	_temp_wrtRegister_ctrl.ctrl_val = scCtrl_table->mc_scene_change_fb_ctrl.mc_scene_change_fb;
	_temp_mc_scene_change_fb = (_temp_wrtRegister_ctrl.default_val>0x0 && _temp_wrtRegister_ctrl.default_val<=0xFF)?_temp_mc_scene_change_fb:_temp_wrtRegister_ctrl.default_val;
	if(_temp_wrtRegister_ctrl.type !=CTRL_N ){
		_temp_mc_scene_change_fb = wrtRegister_ctrl(&_temp_wrtRegister_ctrl);
		WriteRegister(MC_MC_30_reg, 10, 10, _temp_mc_scene_change_fb);
	}

	_temp_wrtRegister_ctrl.default_val = s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th;
	_temp_wrtRegister_ctrl.type = (VAL_CTRL_TYPE)scCtrl_table->me1_sc_saddiff_ctrl.CTRL_TYPE;
	_temp_wrtRegister_ctrl.ctrl_val = scCtrl_table->me1_sc_saddiff_ctrl.me1_sc_saddiff_th;
	_temp_me1_sc_saddiff_th=(_temp_wrtRegister_ctrl.default_val>0x0 && _temp_wrtRegister_ctrl.default_val<=0x3FFFFFFF)?_temp_me1_sc_saddiff_th:_temp_wrtRegister_ctrl.default_val;
	if(_temp_wrtRegister_ctrl.type !=CTRL_N ){
		_temp_me1_sc_saddiff_th = wrtRegister_ctrl(&_temp_wrtRegister_ctrl);
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, _temp_me1_sc_saddiff_th);
	}

	_temp_wrtRegister_ctrl.default_val =(unsigned int) s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_sc_hold_cnt;
	_temp_wrtRegister_ctrl.type = (VAL_CTRL_TYPE)scCtrl_table->me1_sc_me1_hold_ctrl.CTRL_TYPE;
	_temp_wrtRegister_ctrl.ctrl_val = (unsigned int)scCtrl_table->me1_sc_me1_hold_ctrl.me1_sc_me1_hold_cnt;
	_temp_big_apldiff_sc_hold_cnt=(_temp_wrtRegister_ctrl.default_val>0x0 && _temp_wrtRegister_ctrl.default_val<=0xFF)?_temp_big_apldiff_sc_hold_cnt:_temp_wrtRegister_ctrl.default_val;

	if(_temp_wrtRegister_ctrl.type !=CTRL_N ){
		_temp_big_apldiff_sc_hold_cnt =wrtRegister_ctrl(&_temp_wrtRegister_ctrl);
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_02_reg, 0, 7,  _temp_big_apldiff_sc_hold_cnt);
	}

}

static _str_scCtrl_table scCtrl_table[scCtrl_table_Num] = {
		{{CTRL_N,0}, 		{CTRL_N, 0}, 				{CTRL_Default,3}	},/* 0.load default */
		{{CTRL_Replace,0}, 	{CTRL_N, 0}, 				{CTRL_N,0}			},/* 1.seek control */
		{{CTRL_Replace,0}, 	{CTRL_Replace, 0x980000}, 	{CTRL_Replace,2}	},/* 2.video cadence case use large threshold to prevent easy scene change for moving video text */
		{{CTRL_Replace,0}, 	{CTRL_Pluse, 0x400000},		{CTRL_N,0}			},/*3. */
		{{CTRL_Replace,0}, 	{CTRL_Default, 0},			{CTRL_N,0}			},/*4. */
		{{CTRL_Default,0}, 	{CTRL_Default, 0}, 			{CTRL_Default,0}	},/*5. */
		{{CTRL_Default,0}, 	{CTRL_Default, 0}, 			{CTRL_Replace,1}	},/*6. (u8_cadence_Id == _CAD_22 || (in_fmRate == _PQL_IN_25HZ && u8_cadence_Id == _CAD_VIDEO)) */
		{{CTRL_Default,0}, 	{CTRL_Default, 0}, 			{CTRL_Replace,3}	},/*7. */
};

_str_scCtrl_table get_scCtrl_table(unsigned char u8_id)
{
	u8_id = (u8_id >= scCtrl_table_Num) ? scCtrl_table_Default : u8_id;
	return scCtrl_table[u8_id];
}

extern unsigned int cadence_transient_stream_flag;
_str_scCtrl_table *fwif_MEMC_get_scCtrl_table(unsigned char level)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	if(g_ProjectID==VIP_Project_ID_TV010){
		if(level==3 && s_pContext->_output_filmDetectctrl.u1_match_flag==0 && 
			s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL]==_CAD_11i23){
			scCtrl_table[3].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0xD00000;
		}
		else {
			scCtrl_table[3].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0x660000;
		}
	}
//	if (scCtrl_table == NULL) {
//		return NULL;
//	}
//	if(level==255 || level==0)
#if Pro_tv0302875P

	const _PQLCONTEXT *s_pContext = GetPQLContext();

	if(level==3 && s_pContext->_output_filmDetectctrl.u1_match_flag==0 && 
		s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL]==_CAD_11i23){
		scCtrl_table[3].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0xD00000;
	}
	else {
		scCtrl_table[3].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0x400000;
	}
#endif
	if(level >= scCtrl_table_Num)
		return (_str_scCtrl_table *)&scCtrl_table[scCtrl_table_Default];/*load default*/
	else
		return (_str_scCtrl_table *)&scCtrl_table[level];

}

VOID scCtrl_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	static unsigned char u1_ori_sc_me1_en = 0;
	static BOOL u1_sc_me1_en_chg = 0;
	static unsigned char scCtrl_wrt_cnt=0, pre_case_apply = 0;
	//static int SC_hold_panning_cnt = 0;
	unsigned int u32_RB_val;

	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned char  u8_cadence_Id = s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];
	PQL_INPUT_FRAME_RATE in_fmRate = s_pContext->_external_data._input_frameRate;
	_str_scCtrl_table *tmp_str_scCtrl_table = NULL;
	unsigned char case_apply = 0;
	unsigned int u32_RB_debug, u1_force_case, u3_case_id=0, u32_RB_sc=0 ;
	static unsigned char u8_pan_cnt = 0;
	static unsigned char u8_uniform_pan_cnt = 0;
	ReadRegister(SOFTWARE1_SOFTWARE1_25_reg, 31, 31, &u32_RB_debug);
	ReadRegister(SOFTWARE1_SOFTWARE1_25_reg, 24, 24, &u1_force_case);
	ReadRegister(SOFTWARE1_SOFTWARE1_25_reg, 25, 27, &u3_case_id);
	ReadRegister(KME_ME1_TOP1_ME1_WLC1_00_reg, 0, 5, &u32_RB_sc);

	u8_pan_cnt = (u8_pan_cnt>0) ? u8_pan_cnt-1 : 0;
	u8_uniform_pan_cnt = (u8_uniform_pan_cnt>0) ? u8_uniform_pan_cnt-1 : 0;

	if(pParam->u1_scCtrl_wrt_en == 0)
		return;

	//==== for voseek application, need to disable me1_sc when seek ====
	if(s_pContext->_external_info.s16_speed == 256 || s_pContext->_external_info.s16_speed == -256)  // normal speed
	{
		if(u1_sc_me1_en_chg  == 1) //need to recovery
		{
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg,9,9,  u1_ori_sc_me1_en);
			u1_sc_me1_en_chg = 0;
		}
	}
	else
	{
		if(u1_sc_me1_en_chg  == 0)
		{
			ReadRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg,9,9, &u32_RB_val);
			u1_ori_sc_me1_en = u32_RB_val;
			u1_sc_me1_en_chg = 1;
		}
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg,9,9, 0);
	}

	//==========================================================================

	//if(SC_hold_panning_cnt>0) SC_hold_panning_cnt--;

	if(s_pContext->_external_data._output_mode != _PQL_OUT_PC_MODE)
	{
		#if 1
		if(s_pContext->_output_frc_sceneAnalysis.u8_VOSeek_prt_apply>0)// add by LRL for VO_seek SC blending ghost @20161124
		{
			case_apply =1;
		}
		else if ((s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo) ||(s_pContext->_output_filmDetectctrl.u1_mixMode == 1) // video cadence case use large threshold to prevent easy scene change for moving video text
			|| (s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 && cadence_transient_stream_flag))// video cadence case use large threshold to prevent easy scene change for moving video text
		{
			case_apply =2;
		}
		//else if (( (s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1) || (s_pContext->_output_me_sceneAnalysis.u1_SC_sim_scenes_hold_panning_flag == 1)) && s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		else if (( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1) && s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		{
			case_apply = 3;
			u8_pan_cnt = 8;
		}
		else if (s_pContext->_output_me_sceneAnalysis.u2_uniform_panning>=MEMC_Uniform_Panning_Mid)
		{
			case_apply = 3;
			u8_uniform_pan_cnt = 12;
		}
		else if ((s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true && u8_pan_cnt>0)||u8_uniform_pan_cnt>0)
		{
			case_apply = 3;
		}
		else if(s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		{
			case_apply =4;
		}
		else if(s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_hold_cnt != 0)
		{
			case_apply = 5;
		}
		else
		{
			if (u8_cadence_Id == _CAD_22 || (in_fmRate == _PQL_IN_25HZ && u8_cadence_Id == _CAD_VIDEO)){
				case_apply =6;
			}else{
				case_apply = 7;
			}
		}

		if(u1_force_case){//d764[24]
			u3_case_id = _CLIP_(u3_case_id, 0, scCtrl_table_Num-1);//d764[25:27]
			case_apply = u3_case_id;
		}

		tmp_str_scCtrl_table = fwif_MEMC_get_scCtrl_table(case_apply);

		if(case_apply==2 && s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 && cadence_transient_stream_flag){
			if(scCtrl_wrt_cnt>0){
				scCtrl_wrt_cnt--;
			}else{
				scCtrl_wrt_cnt =0;
			}
			
			if((case_apply!=pre_case_apply) ){
				scCtrl_wrt_cnt = tmp_str_scCtrl_table->me1_sc_me1_hold_ctrl.me1_sc_me1_hold_cnt;			
			}

			if((case_apply!=pre_case_apply) || (scCtrl_wrt_cnt!=0)){		
				scCtrl_wrtRegister(tmp_str_scCtrl_table);
				pOutput->u4_sc_table_lvl = case_apply;
			}
		}
		else {
			scCtrl_wrtRegister(tmp_str_scCtrl_table);
			pOutput->u4_sc_table_lvl = case_apply;
		}
		if(pre_case_apply != case_apply && u32_RB_debug)
			rtd_pr_memc_emerg("[%s][%d]case_apply = %d\n",__func__,__LINE__,case_apply);
		pre_case_apply = case_apply;

		if(u32_RB_debug == 1){//d764[31]
			rtd_pr_memc_emerg("[%s][%d]case,%d, pan,%d,%d, fb,%d, purevideo,%d, mixmode,%d, Voseek,%d, holdcnt,%d, sc,%d,%d,%d,%d,%d,%d,%d\n",
				__FUNCTION__, __LINE__,case_apply,
				s_pContext->_output_me_sceneAnalysis.u2_panning_flag, s_pContext->_output_me_sceneAnalysis.u2_uniform_panning, s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true,
				s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo, s_pContext->_output_filmDetectctrl.u1_mixMode,
				s_pContext->_output_frc_sceneAnalysis.u8_VOSeek_prt_apply, s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_hold_cnt,
				(u32_RB_sc&0x1),(u32_RB_sc&0x2)>>1,(u32_RB_sc&0x4)>>2,(u32_RB_sc&0x8)>>3,(u32_RB_sc&0x10)>>4,
				rtd_inl(KME_ME1_TOP1_ME1_SCENE1_07_reg)&KME_ME1_TOP1_ME1_SCENE1_07_me1_sc_saddiff_th_mask,
				s_pContext->_output_read_comreg.u30_me_aSAD_rb);
		}

		#else
	//	if(u32_RB_debug == 1){
	//		rtd_pr_memc_emerg("(%d, %d),%d,%d, %d, %d\n", s_pContext->_output_me_sceneAnalysis.u2_panning_flag, s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true,SC_hold_panning_cnt
	//			, s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_hold_cnt, s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th, s_pContext->_output_me_sceneAnalysis.u32_big_apldiff_saddiff_th);
	//	}
		if(s_pContext->_output_frc_sceneAnalysis.u8_VOSeek_prt_apply>0)// add by LRL for VO_seek SC blending ghost @20161124
		{
	                WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
		}
		else if ((s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo) ||(s_pContext->_output_filmDetectctrl.u1_mixMode == 1) )// video cadence case use large threshold to prevent easy scene change for moving video text
		{
			WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, 0x980000);
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_02_reg, 0, 7, 0x2);
		}
		//else if (( (s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1) || (s_pContext->_output_me_sceneAnalysis.u1_SC_sim_scenes_hold_panning_flag == 1)) && s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		else if (( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1) && s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		{
			//SC_hold_panning_cnt = 18;
			WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th + 0x400000);
		}
		else if(s_pContext->_output_frc_sceneAnalysis.u1_specialscfb_true)
		{
				WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
				WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th);
		}
		else if(s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_hold_cnt != 0)
		{
			WriteRegister(MC_MC_30_reg, 10, 10, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_scene_change_fb);
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, s_pContext->_output_me_sceneAnalysis.u32_big_apldiff_saddiff_th);
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_02_reg, 0, 7, s_pContext->_output_me_sceneAnalysis.u8_big_apldiff_sc_hold_cnt);
		}
		else
		{

			//if( SC_hold_panning_cnt>3){
		//		WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
		//		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th + 0x500000);
		//	}else{
				WriteRegister(MC_MC_30_reg, 10, 10, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_scene_change_fb);
				WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg, 0, 30, s_pContext->_output_frc_sceneAnalysis.u32_new_saddiff_th);
		//	}

			if (u8_cadence_Id == _CAD_22 || (in_fmRate == _PQL_IN_25HZ && u8_cadence_Id == _CAD_VIDEO))
			{
				WriteRegister(KME_ME1_TOP1_ME1_SCENE1_02_reg, 0, 7, 0x1);
			}
			else
			{
				WriteRegister(KME_ME1_TOP1_ME1_SCENE1_02_reg, 0, 7, 0x3);
			}
		}
		#endif


	}
	else
	{
		ReadRegister(MC_MC_30_reg, 10, 10, &u32_RB_val);
		if(u32_RB_val)
		{
			rtd_pr_memc_notice("err: PC mode but sc fb not disable.\n");
			WriteRegister(MC_MC_30_reg, 10, 10, 0x0);
		}
	}

}

void N2M_for_Cadence_Cal(unsigned int cur_candence, unsigned char *N_for_Cad, unsigned char *M_for_Cad)
{
	if(cur_candence == _CAD_VIDEO){
		*N_for_Cad = 1;
		*M_for_Cad = 1;
	}
	else if(cur_candence == _CAD_22){
		*N_for_Cad = 1;
		*M_for_Cad = 2;
	}
	else if(cur_candence == _CAD_32){
		*N_for_Cad = 2;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_32322){
		*N_for_Cad = 5;
		*M_for_Cad = 12;
	}
	else if(cur_candence == _CAD_334){
		*N_for_Cad = 3;
		*M_for_Cad = 10;
	}
	else if(cur_candence == _CAD_22224){
		*N_for_Cad = 5;
		*M_for_Cad = 12;
	}
	else if(cur_candence == _CAD_2224){
		*N_for_Cad = 2;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_3223){
		*N_for_Cad = 2;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_55){
		*N_for_Cad = 1;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_66){
		*N_for_Cad = 1;
		*M_for_Cad = 6;
	}
	else if(cur_candence == _CAD_44){
		*N_for_Cad = 1;
		*M_for_Cad = 4;
	}
	else if(cur_candence == _CAD_1112){
		*N_for_Cad = 4;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_11112){
		*N_for_Cad = 5;
		*M_for_Cad = 6;
	}
	else if(cur_candence == _CAD_122){
		*N_for_Cad = 3;
		*M_for_Cad = 5;
	}
	else if(cur_candence == _CAD_11i23){
		*N_for_Cad = 12;
		*M_for_Cad = 25;
	}
	else if(cur_candence == _CAD_321){
		*N_for_Cad = 1;
		*M_for_Cad = 2;
	}
	else{
		*N_for_Cad = 1;
		*M_for_Cad = 1;
	}
}


VOID sc_enCtrl_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	static unsigned char  cur_cadence;
	static unsigned char  pre_cadence;
	static unsigned char  sc_cad_chg_frame_hold_cnt;
	kme_me1_top1_me1_scene1_01_RBUS kme_me1_top1_me1_scene1_01_reg;
	kme_me1_top1_me1_scene1_02_RBUS kme_me1_top1_me1_scene1_02_reg;
	kme_me1_top1_me1_scene1_03_RBUS kme_me1_top1_me1_scene1_03_reg;
	mc2_mc2_24_RBUS mc2_mc2_24;

	static unsigned char u8_pan_cnt = 0;	
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u25_meAllDtl = 0;
	unsigned int new_algo_en = 0;
	unsigned char u8_sys_N = 0, N_for_cadence = 0, tmp_N = 0;
	unsigned char u8_sys_M = 0, M_for_cadence = 0, tmp_M = 0;
	unsigned int me1_pre_cnt = 0, me2_pre_cnt = 0, me1_hold_cnt = 0, mc_hold_cnt = 0;
	unsigned int log_en = 0;
	
	if(pParam->u1_scCtrl_wrt_en == 0)//k23//if(pParam->u1_scholdCtrl_wrt_en == 0)
		return;
	
	kme_me1_top1_me1_scene1_01_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_SCENE1_01_reg);
	kme_me1_top1_me1_scene1_02_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_SCENE1_02_reg);
	kme_me1_top1_me1_scene1_03_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_SCENE1_03_reg);
	mc2_mc2_24.regValue = rtd_inl(MC2_MC2_24_reg);
	u25_meAllDtl = s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	u8_sys_N = s_pContext->_output_read_comreg.u8_sys_N_rb;
	u8_sys_M = s_pContext->_output_read_comreg.u8_sys_M_rb;
	cur_cadence  = s_pContext ->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 7, 7, &new_algo_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 8, 11, &me1_pre_cnt);
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 12, 19, &me2_pre_cnt);
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 20, 23, &me1_hold_cnt);
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 24, 27, &mc_hold_cnt);
	ReadRegister(SOFTWARE2_SOFTWARE2_04_reg, 31, 31, &log_en);
	if(u8_sys_N < 1) u8_sys_N = 1;

	N2M_for_Cadence_Cal(cur_cadence, &N_for_cadence, &M_for_cadence);
	tmp_N = u8_sys_N * N_for_cadence;
	tmp_M = u8_sys_M * M_for_cadence;

	if((cur_cadence == _CAD_2224)&&(pre_cadence ==_CAD_VIDEO))
	{
		sc_cad_chg_frame_hold_cnt = 16;
	}

	if(sc_cad_chg_frame_hold_cnt>0)
	{
		if(new_algo_en){
			kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt=0x1;
			kme_me1_top1_me1_scene1_02_reg.me1_sc_mc_hold_cnt = 0xf;//kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt = 0xf;
		}else{
			kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt = 0xf;
		}
		sc_cad_chg_frame_hold_cnt--;
	}
	else
	{
		if(new_algo_en){
			kme_me1_top1_me1_scene1_01_reg.me1_sc_me1_pre_cnt = 0; // me1_pre_cnt; // 
			kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt = 2*(tmp_M/tmp_N); // me1_hold_cnt; // 
			kme_me1_top1_me1_scene1_02_reg.me1_sc_mc_hold_cnt = 2*(tmp_M/tmp_N); // mc_hold_cnt; // 
			kme_me1_top1_me1_scene1_03_reg.me1_sc_logo_hold_cnt = 2*(tmp_M/tmp_N); // mc_hold_cnt; // 
		}else{
			if(u8_pan_cnt>0 || u25_meAllDtl>=1000000){
				kme_me1_top1_me1_scene1_01_reg.me1_sc_me1_pre_cnt = 0x0;	
				kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt = 0x3;//write to default setting, MEMC_SetRTKhdf()
			}else{	
				kme_me1_top1_me1_scene1_01_reg.me1_sc_me1_pre_cnt = 0x2;
				kme_me1_top1_me1_scene1_02_reg.me1_sc_me1_hold_cnt = 0x6;//write to default setting, MEMC_SetRTKhdf()
			}	
			kme_me1_top1_me1_scene1_03_reg.me1_sc_logo_hold_cnt = 0x14;
		}
	}

	if(new_algo_en){
		kme_me1_top1_me1_scene1_01_reg.me1_sc_me2_pre_cnt = 2*(tmp_M/tmp_N)+1; // me2_pre_cnt; // 
		kme_me1_top1_me1_scene1_01_reg.me1_sc_mc_pre_cnt = 2*(tmp_M/tmp_N)+1; // me2_pre_cnt; // 
		kme_me1_top1_me1_scene1_01_reg.me1_sc_dh_pre_cnt = 2*(tmp_M/tmp_N)+1; // me2_pre_cnt; // 
		kme_me1_top1_me1_scene1_01_reg.me1_sc_logo_pre_cnt = 2*(tmp_M/tmp_N)+1;
		//mc2_mc2_24.mc_sc_ret_1st_izpz_bld=1;
		//mc2_mc2_24.mc_sc_ret_1st_izpz_mod=3;
	}else{
		kme_me1_top1_me1_scene1_01_reg.me1_sc_me2_pre_cnt = 0;
		kme_me1_top1_me1_scene1_01_reg.me1_sc_mc_pre_cnt = 0;
		kme_me1_top1_me1_scene1_01_reg.me1_sc_dh_pre_cnt = 0;
		kme_me1_top1_me1_scene1_01_reg.me1_sc_logo_pre_cnt = 0;
		kme_me1_top1_me1_scene1_02_reg.me1_sc_mc_hold_cnt = 6;
		//mc2_mc2_24.mc_sc_ret_1st_izpz_bld=0;
		//mc2_mc2_24.mc_sc_ret_1st_izpz_mod=3;
	}

	if(log_en){
		rtd_pr_memc_notice("[%s][,%d,%d,][,%d,%d,][,%d,%d,]\n", __FUNCTION__, u8_sys_N, u8_sys_M, N_for_cadence, M_for_cadence, tmp_N, tmp_M);
	}

	rtd_outl(KME_ME1_TOP1_ME1_SCENE1_01_reg, kme_me1_top1_me1_scene1_01_reg.regValue);
	rtd_outl(KME_ME1_TOP1_ME1_SCENE1_02_reg, kme_me1_top1_me1_scene1_02_reg.regValue);
	rtd_outl(KME_ME1_TOP1_ME1_SCENE1_03_reg, kme_me1_top1_me1_scene1_03_reg.regValue);
	rtd_outl(MC2_MC2_24_reg, mc2_mc2_24.regValue);
	
	pre_cadence = cur_cadence;
}


extern unsigned int Scaler_MEMC_s16_speed_is_not_normal(void);

VOID fbCtrl_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();

	unsigned int u8_flbk_lvl_wrt = (unsigned int)(s_pContext->_output_fblevelctrl.u8_FBLevel);
	unsigned char  u8_flbk_system = s_pContext->_output_fblevelctrl.u8_FBSystem;

	unsigned char  u8_flbk_lvl_FB_FF_Speed = (Scaler_MEMC_s16_speed_is_not_normal()) ? _FB_LEVEL_MAX_ : 0;
	unsigned char  u8_flbk_lvl_zoom = (s_pContext->_output_frc_sceneAnalysis.u8_zoom_force_fb_cnt != 0) ? _FB_LEVEL_MAX_ : 0;
	#if CONFIG_MC_8_BUFFER
	unsigned char  u8_inFormat_PureVideo =  0;
	#else
	unsigned char  u8_inFormat_PureVideo =  (s_pContext->_external_data._output_frameRate > _PQL_OUT_60HZ) ? 0 :
									(s_pContext->_output_frc_phtable.u1_is_inFormat_PureVideo != 0) ? _FB_LEVEL_MAX_ : 0;
	#endif
	unsigned char  u8_NoNeedToDoFRC = (s_pContext->_external_data._output_frameRate > _PQL_OUT_60HZ) ? 0 :
								((u8_MEMCMode == 4 && dejudder == 0)||u8_MEMCMode ==5 ) ? _FB_LEVEL_MAX_ : 0; // FallBack to P_frame to avoid judder
	unsigned int NewLowDelay_en = 0, NewLowDelay_FB_close = 0, force_FB_lvl = 0, u1_GFB_force_MAX = 0;
	ReadRegister(SOFTWARE1_SOFTWARE1_62_reg, 2, 2, &NewLowDelay_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_13_reg, 0, 0, &NewLowDelay_FB_close);
	ReadRegister(SOFTWARE2_SOFTWARE2_01_reg, 0, 7, &force_FB_lvl);
	ReadRegister(SOFTWARE_SOFTWARE_11_reg, 31, 31, &u1_GFB_force_MAX);
	u8_flbk_lvl_wrt = _MAX_(_MAX_(_MAX_(_MAX_(_MAX_(u8_flbk_lvl_FB_FF_Speed
						, u8_flbk_lvl_zoom)
						, u8_flbk_system)
						, u8_flbk_lvl_wrt)
						, u8_inFormat_PureVideo)
						, u8_NoNeedToDoFRC);

	if(s_pContext->_output_wrt_comreg.u1_GFB_force_weak_type==1)
		u8_flbk_lvl_wrt=0x40;
	else if(s_pContext->_output_wrt_comreg.u1_GFB_force_weak_type==2)
		u8_flbk_lvl_wrt=0x60;
	else if(s_pContext->_output_wrt_comreg.u1_GFB_force_weak_type==3)
		u8_flbk_lvl_wrt=0x50;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true==1)
		u8_flbk_lvl_wrt=0xC0;
	else if(s_pContext->_output_frc_sceneAnalysis.u1_Swing_true)
		u8_flbk_lvl_wrt=0x00;
	else if(s_pParam->_param_me_sceneAnalysis.b_pan_noFB_en && s_pContext->_output_me_sceneAnalysis.b_g_panning)
		u8_flbk_lvl_wrt=0x00;
	else if(s_pContext->_output_wrt_comreg.u1_GFB_force_zero_true==1)
		u8_flbk_lvl_wrt=0x00;
	else if(s_pContext->_output_wrt_comreg.u1_GFB_force_MAX_true ==1)
		u8_flbk_lvl_wrt=0xff;
	else if(u1_GFB_force_MAX)
		u8_flbk_lvl_wrt=0xff;
#if Pro_tv0302875P
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true2==1)
		u8_flbk_lvl_wrt=0xC0;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true3==1)
		u8_flbk_lvl_wrt=0x00;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true4==1)
		u8_flbk_lvl_wrt=0x45;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true5==1)
		u8_flbk_lvl_wrt=0x20;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true6==1)
		u8_flbk_lvl_wrt=0x80;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true7==1)
		u8_flbk_lvl_wrt=0x25;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true8==1)
		u8_flbk_lvl_wrt=0x10;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true9==1)
		u8_flbk_lvl_wrt=0xA0;
	else if (s_pContext->_output_wrt_comreg.u1_GFB_force_Custom_true10==1)
		u8_flbk_lvl_wrt=0xf0;
#endif
	if(NewLowDelay_en){
		if(NewLowDelay_FB_close){//d934[0]
			u8_flbk_lvl_wrt=0x0;
		}
		else {
			u8_flbk_lvl_wrt=force_FB_lvl;
			//u8_flbk_lvl_wrt=0x55;
		}
	}
	if(s_pContext->_output_wrt_comreg.u1_GFB_modify_true==0)
		pOutput->u8_FB_lvl = u8_flbk_lvl_wrt;
#if Pro_tv0302875P

	if(s_pContext->_output_wrt_comreg.u1_is_special_fb && 0xf0>u8_flbk_lvl_wrt){
		u8_flbk_lvl_wrt=0xf0;
	}
#endif
	if (pParam->u1_FBLevelWr_en == 1)
	{
		WriteRegister(MC_MC_B0_reg,20,27,  pOutput->u8_FB_lvl);
	}

	if(pParam->u1_bigFBlvl_dis_SCdet_en == 1)
	{
		unsigned char u1_disable_saddiff_sc = s_pContext->_output_fblevelctrl.u3_FbLvl_dSCclr_wrt;
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg,2,2, u1_disable_saddiff_sc);
	}
}

extern unsigned char SLD_SW_En;
extern unsigned char MEMC_Pixel_LOGO_For_SW_SLD;
VOID RimCtrl_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	mc_mc_50_RBUS mc_mc_50;
	mc_mc_54_RBUS mc_mc_54;
	mc_mc_58_RBUS mc_mc_58;
	mc_mc_5c_RBUS mc_mc_5c;
	
	if ((pParam->u1_RimCtrl_wrt_en == 1) && (s_pContext->_output_rimctrl.u1_RimChange == 1))
	{
		// MC
		mc_mc_50.regValue = rtd_inl(MC_MC_50_reg);
		mc_mc_54.regValue = rtd_inl(MC_MC_54_reg);
		mc_mc_58.regValue = rtd_inl(MC_MC_58_reg);
		mc_mc_5c.regValue = rtd_inl(MC_MC_5C_reg);

		// Rim1
		mc_mc_58.mc_top_rim1 = s_pContext->_output_rimctrl.u12_mc_rim1[_RIM_TOP];
		mc_mc_58.mc_bot_rim1 = s_pContext->_output_rimctrl.u12_mc_rim1[_RIM_BOT];
		mc_mc_5c.mc_lft_rim1 = s_pContext->_output_rimctrl.u12_mc_rim1[_RIM_LFT];
		mc_mc_5c.mc_rht_rim1 = s_pContext->_output_rimctrl.u12_mc_rim1[_RIM_RHT];

		// Rim0
		mc_mc_50.mc_top_rim0 = s_pContext->_output_rimctrl.u12_mc_rim0[_RIM_TOP];
		mc_mc_50.mc_bot_rim0 = s_pContext->_output_rimctrl.u12_mc_rim0[_RIM_BOT];
		mc_mc_54.mc_lft_rim0 = s_pContext->_output_rimctrl.u12_mc_rim0[_RIM_LFT];
		mc_mc_54.mc_rht_rim0 = s_pContext->_output_rimctrl.u12_mc_rim0[_RIM_RHT];

		rtd_outl(MC_MC_50_reg, mc_mc_50.regValue);
		rtd_outl(MC_MC_54_reg, mc_mc_54.regValue);
		rtd_outl(MC_MC_58_reg, mc_mc_58.regValue);
		rtd_outl(MC_MC_5C_reg, mc_mc_5c.regValue);

#if 0
{
		unsigned char u8_LogoRim[_RIM_NUM];
		// LOGO 
		if(s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_LFT]>2){
			u8_LogoRim[_RIM_LFT]=s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_LFT]-2;
		}
		else {
			u8_LogoRim[_RIM_LFT]=0;
		}
		if(s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_TOP]>2){
			u8_LogoRim[_RIM_TOP]=s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_TOP]-2;
		}
		else {
			u8_LogoRim[_RIM_TOP]=0;
		}
		if(s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_RHT]<237){
			u8_LogoRim[_RIM_RHT]=s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_RHT]+2;
		}
		else {
			u8_LogoRim[_RIM_RHT]=239;
		}

		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,0,7, u8_LogoRim[_RIM_LFT]); // BLOCK
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,8,15, u8_LogoRim[_RIM_RHT]);
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,16,23, u8_LogoRim[_RIM_TOP]);
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,24,31, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_BOT]);
}
#else		
		// LOGO
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,0,7, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_LFT]); // BLOCK
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,8,15, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_RHT]);
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,16,23, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_TOP]);
		WriteRegister(KME_LOGO1_KME_LOGO1_04_reg,24,31, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_BOT]);
#endif

#ifdef CONFIG_SUPPORT_SLD_BY_MEMC_DEMURA
		if (/*strcmp(webos_strToolOption.eBackLight, "oled") == 0*//*SLD_SW_En == 1*/MEMC_Pixel_LOGO_For_SW_SLD == 1)
		{
			WriteRegister(KME_LOGO1_KME_LOGO1_D8_reg,0,9, 0); // PIXEL
			WriteRegister(KME_LOGO1_KME_LOGO1_D8_reg,10,19, u32PLogo_HSize-1);
			WriteRegister(KME_LOGO1_KME_LOGO1_DC_reg,0,9, 0);
			WriteRegister(KME_LOGO1_KME_LOGO1_DC_reg,10,19, u32PLogo_VSize-1);
		}
#else
		WriteRegister(KME_LOGO1_KME_LOGO1_D8_reg,0,9, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_LFT]); // PIXEL
		WriteRegister(KME_LOGO1_KME_LOGO1_D8_reg,10,19, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_RHT]);
		WriteRegister(KME_LOGO1_KME_LOGO1_DC_reg,0,9, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_TOP]);
		WriteRegister(KME_LOGO1_KME_LOGO1_DC_reg,10,19, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_BOT]);
#endif

		WriteRegister(MC2_MC2_9C_reg,0,9, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_LFT]); // BLOCK
		WriteRegister(MC2_MC2_9C_reg,10,19, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_RHT]);
		WriteRegister(MC2_MC2_9C_reg,20,29, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_TOP]);
		WriteRegister(MC2_MC2_A0_reg,0,9, s_pContext->_output_rimctrl.u8_LogoRim_Blk[_RIM_BOT]);

#ifdef CONFIG_SUPPORT_SLD_BY_MEMC_DEMURA
		if (/*strcmp(webos_strToolOption.eBackLight, "oled") == 0*//*SLD_SW_En == 1*/MEMC_Pixel_LOGO_For_SW_SLD == 1)
		{
			WriteRegister(MC2_MC2_A4_reg,0,9, 0); // PIXEL
			WriteRegister(MC2_MC2_A4_reg,10,19, u32PLogo_HSize-1);
			WriteRegister(MC2_MC2_A4_reg,20,29, 0);
			WriteRegister(MC2_MC2_A8_reg,0,9, u32PLogo_VSize-1);
		}
#else
		WriteRegister(MC2_MC2_A4_reg,0,9, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_LFT]); // PIXEL
		WriteRegister(MC2_MC2_A4_reg,10,19, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_RHT]);
		WriteRegister(MC2_MC2_A4_reg,20,29, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_TOP]);
		WriteRegister(MC2_MC2_A8_reg,0,9, s_pContext->_output_rimctrl.u12_LogoRim_Pxl[_RIM_BOT]);
#endif

		// Dehalo
		WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_LFT]); // Dehalo rim.
		WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,9,17,  s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_RHT]);
		WriteRegister(KME_DEHALO_KME_DEHALO_E4_reg,0,8,   s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_TOP]);
		WriteRegister(KME_DEHALO_KME_DEHALO_E4_reg,9,17,   s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_BOT]);

		WriteRegister(KME_DEHALO_KME_DEHALO_18_reg,0,8,  s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_LFT]); // Dehalo retimer rim.
		WriteRegister(KME_DEHALO_KME_DEHALO_18_reg,9,17, s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_RHT]);
		WriteRegister(KME_DEHALO_KME_DEHALO_18_reg,18,26,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_TOP]);
		WriteRegister(KME_DEHALO_KME_DEHALO_1C_reg,0,8,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_BOT]);

		WriteRegister(KME_DEHALO_KME_DEHALO_1C_reg,9,17,  s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_LFT]); // Dehalo retimer1 rim.
		WriteRegister(KME_DEHALO_KME_DEHALO_1C_reg,18,26, s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_RHT]);
		WriteRegister(KME_DEHALO_KME_DEHALO_20_reg,0,8,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_TOP]);
		WriteRegister(KME_DEHALO_KME_DEHALO_20_reg,9,17,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_BOT]);

		WriteRegister(KME_DEHALO_KME_DEHALO_20_reg,18,26,  s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_LFT]); // Dehalo retimer2 rim.
		WriteRegister(KME_DEHALO_KME_DEHALO_24_reg,0,8, s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_RHT]);
		WriteRegister(KME_DEHALO_KME_DEHALO_24_reg,9,17,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_TOP]);
		WriteRegister(KME_DEHALO_KME_DEHALO_24_reg,18,26,   s_pContext->_output_rimctrl.u9_dh_blk_oftrim[_RIM_BOT]);

		// IPME
		WriteRegister(KME_IPME_KME_IPME_A0_reg,0,9, s_pContext->_output_rimctrl.u12_ipme_rim[_RIM_TOP]); // IPME
		WriteRegister(KME_IPME_KME_IPME_A0_reg,10,19, s_pContext->_output_rimctrl.u12_ipme_rim[_RIM_BOT]);
		WriteRegister(KME_IPME_KME_IPME_9C_reg,0,9, s_pContext->_output_rimctrl.u12_ipme_rim[_RIM_LFT]);
		WriteRegister(KME_IPME_KME_IPME_9C_reg,10,19, s_pContext->_output_rimctrl.u12_ipme_rim[_RIM_RHT]);

		// ME1
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,16,24,   s_pContext->_output_rimctrl.u12_me1_vbuf_blk_rim[_RIM_TOP]); //blk rim
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_40_reg,18,26,   s_pContext->_output_rimctrl.u12_me1_vbuf_blk_rim[_RIM_BOT]);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_40_reg,0,8,  s_pContext->_output_rimctrl.u12_me1_vbuf_blk_rim[_RIM_LFT]);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_40_reg,9,17, s_pContext->_output_rimctrl.u12_me1_vbuf_blk_rim[_RIM_RHT]);

		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_44_reg,0,9,  s_pContext->_output_rimctrl.u12_me1_vbuf_pix_rim[_RIM_TOP]); //pixel rim
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_44_reg,10,19,  s_pContext->_output_rimctrl.u12_me1_vbuf_pix_rim[_RIM_BOT]);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_48_reg,0,9, s_pContext->_output_rimctrl.u12_me1_vbuf_pix_rim[_RIM_LFT]);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_48_reg,10,19,s_pContext->_output_rimctrl.u12_me1_vbuf_pix_rim[_RIM_RHT]);

		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_00_reg,0,10,  s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_LFT]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_00_reg,11,21,    s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_RHT]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_04_reg,0,10,  s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_TOP]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_04_reg,11,21,    s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_BOT]);

		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_1C_reg,0,10,  s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_LFT]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_1C_reg,11,21,    s_pContext->_output_rimctrl.u12_me1_lbme_rim[_RIM_RHT]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_20_reg,0,10,  s_pContext->_output_rimctrl.u12_me1_vbuf_meander_pix_rim[_RIM_TOP]);
		WriteRegister(KME_LBME_TOP_KME_LBME_TOP_20_reg,11,21,    s_pContext->_output_rimctrl.u12_me1_vbuf_meander_pix_rim[_RIM_BOT]);

		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_84_reg,0,8, s_pContext->_output_rimctrl.u12_me1_vbuf_meander_blk_rim[_RIM_TOP]); //meander rim
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_84_reg,9,17, s_pContext->_output_rimctrl.u12_me1_vbuf_meander_blk_rim[_RIM_BOT]);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_84_reg,18,27, s_pContext->_output_rimctrl.u12_me1_vbuf_meander_pix_rim[_RIM_TOP]);
// MEMC_K6L_BRING_UP //		WriteRegister(FRC_TOP__KME_TOP__vbuf_meander_pix_rim_bot_ADDR no mat,FRC_TOP__KME_TOP__vbuf_meander_pix_rim_bot_BITSTART no mat,FRC_TOP__KME_TOP__vbuf_meander_pix_rim_bot_BITEND no mat, s_pContext->_output_rimctrl.u12_me1_vbuf_meander_pix_rim[_RIM_BOT]);

		// ME2
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_20_reg,9,17,  s_pContext->_output_rimctrl.u12_me2_vbuf_pfv_blk_rim[_RIM_LFT]); // pfv blk rim
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_20_reg,18,26, s_pContext->_output_rimctrl.u12_me2_vbuf_pfv_blk_rim[_RIM_RHT]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_24_reg,0,8,   s_pContext->_output_rimctrl.u12_me2_vbuf_pfv_blk_rim[_RIM_TOP]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_24_reg,9,17,   s_pContext->_output_rimctrl.u12_me2_vbuf_pfv_blk_rim[_RIM_BOT]);

		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_24_reg,18,26,  s_pContext->_output_rimctrl.u12_me2_vbuf_ph_blk_rim[_RIM_LFT]); // ph blk rim
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_28_reg,0,8, s_pContext->_output_rimctrl.u12_me2_vbuf_ph_blk_rim[_RIM_RHT]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_28_reg,9,17,   s_pContext->_output_rimctrl.u12_me2_vbuf_ph_blk_rim[_RIM_TOP]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_28_reg,18,26,   s_pContext->_output_rimctrl.u12_me2_vbuf_ph_blk_rim[_RIM_BOT]);

		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D4_reg,12,21,  s_pContext->_output_rimctrl.u12_me2_vbuf_pix_rim[_RIM_LFT]); // pixel
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D4_reg,22,31, s_pContext->_output_rimctrl.u12_me2_vbuf_pix_rim[_RIM_RHT]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,0,9,   s_pContext->_output_rimctrl.u12_me2_vbuf_pix_rim[_RIM_TOP]);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,10,19,   s_pContext->_output_rimctrl.u12_me2_vbuf_pix_rim[_RIM_BOT]);

		WriteRegister(KME_LBME2_TOP_KME_LBME2_TOP_00_reg,0,10, s_pContext->_output_rimctrl.u12_me2_lbme_rim[_RIM_LFT]); // lbme2
		WriteRegister(KME_LBME2_TOP_KME_LBME2_TOP_00_reg,11,21,   s_pContext->_output_rimctrl.u12_me2_lbme_rim[_RIM_RHT]);
		WriteRegister(KME_LBME2_TOP_KME_LBME2_TOP_04_reg,0,10, s_pContext->_output_rimctrl.u12_me2_lbme_rim[_RIM_TOP]);
		WriteRegister(KME_LBME2_TOP_KME_LBME2_TOP_04_reg,11,21,   s_pContext->_output_rimctrl.u12_me2_lbme_rim[_RIM_BOT]);
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		if (s_pContext->_output_rimctrl.u1_RimTwoSide_balancing)
		{
			WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_38_reg, 0, 0, 0x1);
			WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_78_reg, 0, 0, 0x1);
		}
		else
		{
			WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_38_reg, 0, 0, 0x0);
			WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_78_reg, 0, 0, 0x0);
		}
		#endif
	}
}
#if 0
VOID dhLocalFbLvl_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();

	unsigned char u6_localfallback_lvl = s_pParam->_param_frc_sceneAnalysis.u6_localfallback_lvl;//((U32_DATA>>24) & 0x3f);
	unsigned char u1_fastMotion_lfb_en = s_pParam->_param_frc_sceneAnalysis.u1_fastMotion_lfb_en; //((U32_DATA>>31) & 0x1);

	if (pParam->u1_localfb_wrt_en == 0)
		return;

	if(s_pContext->_output_frc_sceneAnalysis.u1_fastMotion_det == 1)
	{
		if(u1_fastMotion_lfb_en == 1)
		{
			WriteRegister(KME_DEHALO_KME_DEHALO_D4_reg,18,23, u6_localfallback_lvl);
		}
	}
	else
	{
		WriteRegister(KME_DEHALO_KME_DEHALO_D4_reg,18,23, 0x20);


	}


}
#endif

VOID dhClose_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();

	unsigned int u1_dehalo_en = (s_pContext->_output_dh_close.u1_closeDh_act == 1)? 0 : 1;

	if (pParam->u1_dhClose_wrt_en == 1)
	{
		if (u1_dehalo_en == 0)
		{
			//WriteRegister(KME_DEHALO2_KME_DEHALO2_30_reg,17,17, 1);	//regional gain
			//WriteRegister(KME_DEHALO_KME_DEHALO_BC_reg,17,22, 0x3F);//old alogo
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x1); // merlin7 new algo
		}
		else
		{
			//WriteRegister(KME_DEHALO2_KME_DEHALO2_30_reg,17,17, 0);	//global gain
			//WriteRegister(KME_DEHALO_KME_DEHALO_BC_reg,17,22, 0x10); //old alogo
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); // merlin7 new algo
		}
	}


}

#ifdef BG_MV_GET
VOID gmvCtrl_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	
	
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();

	int s1_gmv_calc_mvx = s_pContext->_output_me_sceneAnalysis.s1_gmv_calc_mvx;
	int s1_gmv_calc_mvy = s_pContext->_output_me_sceneAnalysis.s1_gmv_calc_mvy;
	unsigned int swap_gmv_en = 0;

	rtd_pr_memc_emerg("gmvCtrl_wrtAction (in)\n");
	
	ReadRegister(HARDWARE_HARDWARE_26_reg, 21, 21, &swap_gmv_en);

	//write value to 0xb809ee38 bg_mv.
	if(swap_gmv_en)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, s1_gmv_calc_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, s1_gmv_calc_mvy);
	}
	else
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);
	}	
}
#endif

static _str_ME_obmeSelection_table ME_obmeSelection_table[5]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},/*0 load default*/
	{1,0,2,	1,0,2,	1,0,2,	1,0,2	},			/*1*/
	{0,CTRL_N,CTRL_N,0,CTRL_N,CTRL_N,1,3,0,1,3,0},	/*2*/
	{0,CTRL_N,CTRL_N,0,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},/*3*/
	{0,3,0, 0,3,0, 0,3,0, 0,3,0	},			/*quick convergence*/
};


_str_ME_obmeSelection_table *fwif_MEMC_get_ME_obmeSelection_table(unsigned char level)
{
	if(level > 4)
		return (_str_ME_obmeSelection_table *)&ME_obmeSelection_table[0];/*load default*/
	else
		return (_str_ME_obmeSelection_table *)&ME_obmeSelection_table[level];

}

VOID ME_obmeSelection_wrtRegister(const _str_ME_obmeSelection_table *ME_obmeSelection_table)
{
	kme_vbuf_top_kme_vbuf_top_8c_RBUS kme_vbuf_top_kme_vbuf_top_8c_reg;
	kme_me2_vbuf_top_kme_me2_vbuf_top_dc_RBUS kme_me2_vbuf_top_kme_me2_vbuf_top_dc_reg;
	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_RBUS kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg;
	kme_vbuf_top_kme_vbuf_top_8c_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg);
	kme_me2_vbuf_top_kme_me2_vbuf_top_dc_reg.regValue = rtd_inl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg);
	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.regValue = rtd_inl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg);

	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_ip_dc_obme_mode_sel = ME_obmeSelection_table->vbuf_ip_dc_obme_mode_sel;
	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_ip_dc_obme_mode = ME_obmeSelection_table->vbuf_ip_dc_obme_mode;
	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_ip_ac_obme_mode = ME_obmeSelection_table->vbuf_ip_ac_obme_mode;

	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_pi_dc_obme_mode_sel = ME_obmeSelection_table->vbuf_pi_dc_obme_mode_sel;
	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_pi_dc_obme_mode = ME_obmeSelection_table->vbuf_pi_dc_obme_mode;
	kme_vbuf_top_kme_vbuf_top_8c_reg.vbuf_pi_ac_obme_mode = ME_obmeSelection_table->vbuf_pi_ac_obme_mode;

	kme_me2_vbuf_top_kme_me2_vbuf_top_dc_reg.kme_me2_vbuf_1st_dc_obme_mode_sel = ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode_sel;
	kme_me2_vbuf_top_kme_me2_vbuf_top_dc_reg.kme_me2_vbuf_2nd_dc_obme_mode_sel = ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode_sel;
	//WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,2,2,ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode_sel);
	//WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,3,3,ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode_sel);

	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.kme_me2_vbuf_1st_dc_obme_mode = ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode;
	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.kme_me2_vbuf_1st_ac_obme_mode = ME_obmeSelection_table->kme_me2_vbuf_1st_ac_obme_mode;
	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.kme_me2_vbuf_2nd_dc_obme_mode = ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode;
	kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.kme_me2_vbuf_2nd_ac_obme_mode = ME_obmeSelection_table->kme_me2_vbuf_2nd_ac_obme_mode;

	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, kme_vbuf_top_kme_vbuf_top_8c_reg.regValue);
	rtd_outl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg, kme_me2_vbuf_top_kme_me2_vbuf_top_dc_reg.regValue);
	rtd_outl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg, kme_me2_vbuf_top_kme_me2_vbuf_top_d8_reg.regValue);

	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,22,22, ME_obmeSelection_table->vbuf_ip_dc_obme_mode_sel);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,18,19, ME_obmeSelection_table->vbuf_ip_dc_obme_mode); // 1
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,24,25, ME_obmeSelection_table->vbuf_ip_ac_obme_mode); // 1

	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,23,23, ME_obmeSelection_table->vbuf_pi_dc_obme_mode_sel);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,20,21, ME_obmeSelection_table->vbuf_pi_dc_obme_mode); // 1
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,26,27, ME_obmeSelection_table->vbuf_pi_ac_obme_mode); // 1

	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,2,2, 		ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode_sel);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,28,29, 	ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,21,22, 	ME_obmeSelection_table->kme_me2_vbuf_1st_ac_obme_mode);

	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,3,3, 			ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode_sel);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,30,31, 	ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,23,24, 	ME_obmeSelection_table->kme_me2_vbuf_2nd_ac_obme_mode);
	*/
}


VOID ME_obmeSelection_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;
	_str_ME_obmeSelection_table *tmp_ME_obmeSelection_table = fwif_MEMC_get_ME_obmeSelection_table(0);
	unsigned int u1_dehalo_en = (s_pContext->_output_dh_close.u1_closeDh_act == 1)? 0 : 1;

	#if 1
	if (pParam->u1_dynamic_obme_sel_wrt_en == 1)
	{
	#if Pro_tv0302875P
		if(s_pContext->_output_me_sceneAnalysis.u8_Panning_Adjust_obme==1)
		{
			table_level = 4;
			tmp_ME_obmeSelection_table = fwif_MEMC_get_ME_obmeSelection_table(table_level);
			WriteRegister(SOFTWARE3_SOFTWARE3_45_reg, 30, 30, 1);//0xB809D9B4
		}
		else if (u1_dehalo_en == 0)
	#else
		if (u1_dehalo_en == 0)
	#endif	
		{
			if( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 && s_pContext->_output_FRC_LgDet.u1_logo_rgn_distribute[LOGO_RGN_BOT] == 1 )
			{
				table_level = 1;
				tmp_ME_obmeSelection_table = fwif_MEMC_get_ME_obmeSelection_table(table_level);
			}
			else
			{
				table_level = 2;
				tmp_ME_obmeSelection_table = fwif_MEMC_get_ME_obmeSelection_table(table_level);

				tmp_ME_obmeSelection_table->vbuf_ip_dc_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_ip_dc_obme_mode_off;
				tmp_ME_obmeSelection_table->vbuf_ip_ac_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_ip_ac_obme_mode_off;

				tmp_ME_obmeSelection_table->vbuf_pi_dc_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_pi_dc_obme_mode_off;
				tmp_ME_obmeSelection_table->vbuf_pi_ac_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_pi_ac_obme_mode_off;
			}
		}
		else
		{
			table_level = 3;
			tmp_ME_obmeSelection_table = fwif_MEMC_get_ME_obmeSelection_table(table_level);

			tmp_ME_obmeSelection_table->vbuf_ip_dc_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_ip_dc_obme_mode_on;
			tmp_ME_obmeSelection_table->vbuf_ip_ac_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_ip_ac_obme_mode_on;

			tmp_ME_obmeSelection_table->vbuf_pi_dc_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_pi_dc_obme_mode_on;
			tmp_ME_obmeSelection_table->vbuf_pi_ac_obme_mode = s_pParam->_param_dh_close.u2_dh_me1_pi_ac_obme_mode_on;

			tmp_ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode_sel 		=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_dc_obme_mode_sel;
			tmp_ME_obmeSelection_table->kme_me2_vbuf_1st_dc_obme_mode		=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_dc_obme_mode;
			tmp_ME_obmeSelection_table->kme_me2_vbuf_1st_ac_obme_mode		=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_ac_obme_mode;

			tmp_ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode_sel 	=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_dc_obme_mode_sel;
			tmp_ME_obmeSelection_table->kme_me2_vbuf_2nd_dc_obme_mode		=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_dc_obme_mode;
			tmp_ME_obmeSelection_table->kme_me2_vbuf_2nd_ac_obme_mode		=	s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_ac_obme_mode;
		}
	}

#if Pro_tv0302875P
	if(tmp_ME_obmeSelection_table != NULL && pParam->u1_dynamic_obme_sel_wrt_en == 1){
		ME_obmeSelection_wrtRegister(tmp_ME_obmeSelection_table);
	}
#else
	if(tmp_ME_obmeSelection_table != NULL){
		ME_obmeSelection_wrtRegister(tmp_ME_obmeSelection_table);
	}
#endif

	#else
	if (pParam->u1_dynamic_obme_sel_wrt_en == 1)
	{
		if (u1_dehalo_en == 0)
		{
			if( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 && s_pContext->_output_FRC_LgDet.u1_logo_rgn_distribute[LOGO_RGN_BOT] == 1 )
			{
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,22,22, 1);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,18,19, 0);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,24,25, 2);

				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,23,23, 1);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,20,21, 0);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,26,27, 2);

				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,2,2, 1);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,28,29, 0);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,21,22, 2);

				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,3,3, 1);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,30,31, 0);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,23,24, 2);
			}
			else
			{
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,22,22, 0);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,18,19, s_pParam->_param_dh_close.u2_dh_me1_ip_dc_obme_mode_off); // 3
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,24,25, s_pParam->_param_dh_close.u2_dh_me1_ip_ac_obme_mode_off); // 0

				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,23,23, 0);
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,20,21, s_pParam->_param_dh_close.u2_dh_me1_pi_dc_obme_mode_off); // 3
				WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,26,27, s_pParam->_param_dh_close.u2_dh_me1_pi_ac_obme_mode_off); // 0

				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,2,2, 1);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,28,29, 3);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,21,22, 0);

				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,3,3, 1);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,30,31, 3);
				WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,23,24, 0);
			}
		}
		else
		{
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,22,22, 0);
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,18,19, s_pParam->_param_dh_close.u2_dh_me1_ip_dc_obme_mode_on); // 1
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,24,25, s_pParam->_param_dh_close.u2_dh_me1_ip_ac_obme_mode_on); // 1

			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,23,23, 0);
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,20,21, s_pParam->_param_dh_close.u2_dh_me1_pi_dc_obme_mode_on); // 1
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_8C_reg,26,27, s_pParam->_param_dh_close.u2_dh_me1_pi_ac_obme_mode_on); // 1

			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,2,2, s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_dc_obme_mode_sel);
			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,28,29, s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_dc_obme_mode);
			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,21,22, s_pContext->_output_FRC_LgDet.DefaultVal.me2_1st_ac_obme_mode);

			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg,3,3, s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_dc_obme_mode_sel);
			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,30,31, s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_dc_obme_mode);
			WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg,23,24, s_pContext->_output_FRC_LgDet.DefaultVal.me2_2nd_ac_obme_mode);
		}
	}
	#endif
}

#define MC_VARLPF_COEF_TABLE_NUM (2)
#define STATICS_COV_NUM	(18)

static _str_MC_VarLpf_table  MC_VarLpf_Coef_table[MC_VARLPF_COEF_TABLE_NUM]={
	{0x4, 0xf, 0x3}, //normal
	{0x9, 0xf, 0xb}, //blur dehalo
};

_str_MC_VarLpf_table *fwif_MEMC_get_MC_VarLpf_Coef_table(unsigned char level)
{
	if(level >= MC_VARLPF_COEF_TABLE_NUM)
		return (_str_MC_VarLpf_table *)&MC_VarLpf_Coef_table[0];
	else
		return (_str_MC_VarLpf_table *)&MC_VarLpf_Coef_table[level];

}

VOID MC_VarLpf_Coef_wrtRegister(_str_MC_VarLpf_table *_MC_VarLpf_Coef_table)
{
	mc2_mc2_58_RBUS mc2_mc2_58_reg;
	mc2_mc2_58_reg.regValue = rtd_inl(MC2_MC2_58_reg);

	mc2_mc2_58_reg.mc_var_fir_slope = _MC_VarLpf_Coef_table->mc_var_fir_slope; 
	mc2_mc2_58_reg.mc_var_fir_y_max = _MC_VarLpf_Coef_table->mc_var_fir_y_max;
	mc2_mc2_58_reg.mc_var_fir_y_min = _MC_VarLpf_Coef_table->mc_var_fir_y_min;

	rtd_outl(MC2_MC2_58_reg, mc2_mc2_58_reg.regValue);
}


VOID MC_VarLpf_Coef_WrtAction(VOID)
{
#if (IC_K24||IC_K25)
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u17_cov = 0, u17_ucov = 0, log_en = 0, u8_cov_ucov_cnt_th = 0, u8_motion_th = 0, u26_dtl = 0, varlpf_bilateral_en = 0;
	unsigned int u17_statics_cov_ucov_max = 0, u17_statics_cov_ucov_min = 0xFFFFFFFF, u22_statics_cov_ucov_sum = 0, u17_statics_cov_ucov_avg = 0;

	unsigned int u26_statics_dtl_max = 0, u26_statics_dtl_min = 0xFFFFFFFF, u31_statics_dtl_sum = 0, u26_statics_dtl_avg = 0;
	signed short s11_mvx = 0, s11_mvy = 0;
	unsigned int u11_statics_motion_max = 0, u11_statics_motion_min = 0xFFFFFFFF, u16_statics_motion_sum = 0, u11_statics_motion_avg = 0;
	bool u1_SC = false;
	bool u1_uniform_pan = s_pContext->_output_me_sceneAnalysis.u1_uniform_panning;
	unsigned char u8_i, table_level = 0;
	static unsigned int u17_statics_cov_ucov[STATICS_COV_NUM] = {0};
	static unsigned int u26_statics_dtl[STATICS_COV_NUM] = {0};
	static unsigned int s11_statics_motion[STATICS_COV_NUM] = {0};

	kme_dehalo5_phmv_fix_4d_RBUS kme_dehalo5_phmv_fix_4d;
	kme_dehalo5_phmv_fix_4e_RBUS kme_dehalo5_phmv_fix_4e;
	kme_me1_top1_me1_wlc1_00_RBUS kme_me1_top1_me1_wlc1_00;
	_str_MC_VarLpf_table * tmp_MC_VarLpf_table = NULL;

	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg, 31, 31, &log_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg,  0, 15, &u8_cov_ucov_cnt_th);	//500
	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg, 16, 23, &u8_motion_th);
	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg, 27, 27, &varlpf_bilateral_en);


	if(varlpf_bilateral_en == 0){
		return;
	}


	kme_dehalo5_phmv_fix_4d.regValue = rtd_inl(KME_DEHALO5_PHMV_FIX_4D_reg);
	kme_dehalo5_phmv_fix_4e.regValue = rtd_inl(KME_DEHALO5_PHMV_FIX_4E_reg);
	kme_me1_top1_me1_wlc1_00.regValue = rtd_inl(KME_ME1_TOP1_ME1_WLC1_00_reg);

	if(kme_me1_top1_me1_wlc1_00.regr_me1_sc_sync_me1==1 || kme_me1_top1_me1_wlc1_00.regr_me1_sc_sync_me2==1 ||
		kme_me1_top1_me1_wlc1_00.regr_me1_sc_sync_mc==1 || kme_me1_top1_me1_wlc1_00.regr_me1_sc_sync_logo == 1){
		u1_SC = true;
	}

	// get the cover and unconver cnt
	u17_cov = kme_dehalo5_phmv_fix_4d.dh_bypass_cov_sum;
	u17_ucov = kme_dehalo5_phmv_fix_4e.dh_bypass_ucov_sum;	
	u26_dtl = s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	s11_mvx = (s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb)>>1;
	s11_mvy = (s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb)>>1;

	// save the static cover and unconver cnt
	for(u8_i=0; u8_i<STATICS_COV_NUM-1; u8_i++){
		//first in and first out	
		u17_statics_cov_ucov[u8_i]=u17_statics_cov_ucov[u8_i+1];
		u26_statics_dtl[u8_i]=u26_statics_dtl[u8_i+1];
		s11_statics_motion[u8_i]=s11_statics_motion[u8_i+1];

	}
	u17_statics_cov_ucov[STATICS_COV_NUM-1] = u17_cov + u17_ucov;
	u26_statics_dtl[STATICS_COV_NUM-1] = u26_dtl;
	s11_statics_motion[STATICS_COV_NUM-1] = _ABS_(s11_mvx)+_ABS_(s11_mvy);

	// get the info from recent cover and uncover data
	for(u8_i=0; u8_i<STATICS_COV_NUM; u8_i++){
		// get the max and min of recent cover and uncover cnt
		u17_statics_cov_ucov_max = _MAX_(u17_statics_cov_ucov_max, u17_statics_cov_ucov[u8_i]);
		u17_statics_cov_ucov_min = _MIN_(u17_statics_cov_ucov_min, u17_statics_cov_ucov[u8_i]);
		u26_statics_dtl_max = _MAX_(u26_statics_dtl_max, u26_statics_dtl[u8_i]);
		u26_statics_dtl_min = _MIN_(u26_statics_dtl_min, u26_statics_dtl[u8_i]);
		u11_statics_motion_max = _MAX_(u11_statics_motion_max, s11_statics_motion[u8_i]);
		u11_statics_motion_min = _MIN_(u11_statics_motion_min, s11_statics_motion[u8_i]);

		// get the sum of recent cover and uncover cnt
		u22_statics_cov_ucov_sum += u17_statics_cov_ucov[u8_i];
		u31_statics_dtl_sum += u26_statics_dtl[u8_i];
		u16_statics_motion_sum += s11_statics_motion[u8_i];
	}

	// calculate the sum of cover and uncover cnt without max and min to prevent peak affect the sum and average
	u22_statics_cov_ucov_sum = u22_statics_cov_ucov_sum - u17_statics_cov_ucov_max - u17_statics_cov_ucov_min;
	u31_statics_dtl_sum = u31_statics_dtl_sum - u26_statics_dtl_max - u26_statics_dtl_min;
	u16_statics_motion_sum = u16_statics_motion_sum - u11_statics_motion_max - u11_statics_motion_min;
	
	// get the average of cover and uncover cnt
	u17_statics_cov_ucov_avg = u22_statics_cov_ucov_sum>>4;
	u26_statics_dtl_avg = u31_statics_dtl_sum>>4;
	u11_statics_motion_avg = u16_statics_motion_sum>>4;

	//d898[28]
	if((u17_statics_cov_ucov_avg>=u8_cov_ucov_cnt_th) && (u26_statics_dtl_avg >= 600000 ) && u1_SC==0 && u11_statics_motion_avg >= u8_motion_th && u1_uniform_pan==false){//motion condition prevernt side effect in #127, u1_uniform_pan prevent side effect in #204, 205
		table_level = 1;
		dehalo_occl_unstable_check = 0;
	}
	//d898[29]
	else{
		table_level = 0;
		dehalo_occl_unstable_check = 1;
	}

	if(log_en){ //d898[31]
		rtd_pr_memc_emerg("[%s_cov_ucov] table,%d, sc,%d, cov_sum,%u, ucov_sum,%u, avg,%u,\n", __FUNCTION__, table_level, u1_SC, u17_cov, u17_ucov, u17_statics_cov_ucov_avg);
		rtd_pr_memc_emerg("[%s_dtl] table,%d, dtl,%u, avg,%u,\n", __FUNCTION__, table_level, u26_dtl, u26_statics_dtl_avg);
		rtd_pr_memc_emerg("[%s_motion] table,%d, unipan,%d, mvx,%u, mvy,%u, avg,%u,\n", __FUNCTION__, table_level, s_pContext->_output_me_sceneAnalysis.u1_uniform_panning, _ABS_(s11_mvx), _ABS_(s11_mvy), u11_statics_motion_avg);
	}

	tmp_MC_VarLpf_table = fwif_MEMC_get_MC_VarLpf_Coef_table(table_level);
	MC_VarLpf_Coef_wrtRegister(tmp_MC_VarLpf_table);
#endif
}


VOID mv_accord_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u1_dehalo_en = (s_pContext->_output_dh_close.u1_closeDh_act == 1)? 0 : 1;

	if (pParam->u1_dh_accord_ctrl_en == 1)
	{
		if(s_pContext->_output_frc_sceneAnalysis.u6_mv_accord_hold_cnt > 0)
		{
			WriteRegister(KME_DEHALO_KME_DEHALO_B4_reg,29,29, 1);
		}
		else if(u1_dehalo_en == 0)
		{
			WriteRegister(KME_DEHALO_KME_DEHALO_B4_reg,29,29, 1);
		}
		else
		{
			WriteRegister(KME_DEHALO_KME_DEHALO_B4_reg,29,29, 0);
		}
	}
}


VOID ME_acdcBld_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	if(pParam->u1_MEacdcBld_wrt_en== 0)
		return;
	if (pParam->u1_dynME_acdcBld_wrt_en == 1 && s_pContext->_output_wrt_comreg.u8_force_dc_bld_flag==0)
	{

		kme_me1_top1_me1_common1_00_RBUS kme_me1_top1_me1_common1_00_reg;
		kme_me1_top1_me1_common1_01_RBUS kme_me1_top1_me1_common1_01_reg;
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		kme_me2_calc0_kme_me2_calc0_50_RBUS kme_me2_calc0_kme_me2_calc0_50_reg;
		kme_me2_calc0_kme_me2_calc0_54_RBUS kme_me2_calc0_kme_me2_calc0_54_reg;
		#endif

		kme_me1_top1_me1_common1_00_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_00_reg);
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x1 = s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[0];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x2 = s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[1];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x3 = s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[2];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_y1 = s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[0];
		rtd_outl(KME_ME1_TOP1_ME1_COMMON1_00_reg, kme_me1_top1_me1_common1_00_reg.regValue);

		kme_me1_top1_me1_common1_01_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_01_reg);
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_y2 = s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[1];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_y3 = s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[2];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_slope1 = s_pContext->_output_frc_sceneAnalysis.s9_dynME_acdc_bld_s_act[0];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_slope2 = s_pContext->_output_frc_sceneAnalysis.s9_dynME_acdc_bld_s_act[1];
		rtd_outl(KME_ME1_TOP1_ME1_COMMON1_01_reg, kme_me1_top1_me1_common1_01_reg.regValue);
		/*
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,0,7, s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,8,15, s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[1]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,16,23, s_pContext->_output_frc_sceneAnalysis.u8_dynME_acdc_bld_x_act[2]);

		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,24,29, s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,0,5, s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[1]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,6,11, s_pContext->_output_frc_sceneAnalysis.u6_dynME_acdc_bld_y_act[2]);

		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,12,20, s_pContext->_output_frc_sceneAnalysis.s9_dynME_acdc_bld_s_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,21,29, s_pContext->_output_frc_sceneAnalysis.s9_dynME_acdc_bld_s_act[1]);
		*/
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_04_reg,24,31, s_pContext->_output_frc_sceneAnalysis.u8_dynME_ac_pix_sad_limt_act);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_44_reg,24,31, s_pContext->_output_frc_sceneAnalysis.u8_dynME_ac_pix_sad_limt_act);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_88_reg,0,3, s_pContext->_output_frc_sceneAnalysis.u4_acdc_bld_psad_shift_act);

		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		kme_me2_calc0_kme_me2_calc0_50_reg.regValue = rtd_inl(KME_ME2_CALC0_KME_ME2_CALC0_50_reg);
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x1 = s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[0];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x2 = s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[1];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x3 = s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[2];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_y1 = s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[0];
		rtd_outl(KME_ME2_CALC0_KME_ME2_CALC0_50_reg, kme_me2_calc0_kme_me2_calc0_50_reg.regValue);

		kme_me2_calc0_kme_me2_calc0_54_reg.regValue = rtd_inl(KME_ME2_CALC0_KME_ME2_CALC0_54_reg);
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_y2 = s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[1];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_y3 = s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[2];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_slope1 = s_pContext->_output_frc_sceneAnalysis.s9_dynME2_acdc_bld_s_act[0];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_slope2 = s_pContext->_output_frc_sceneAnalysis.s9_dynME2_acdc_bld_s_act[1];
		rtd_outl(KME_ME2_CALC0_KME_ME2_CALC0_54_reg, kme_me2_calc0_kme_me2_calc0_54_reg.regValue);
		#endif

		/*
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,0,7, s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,8,15, s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[1]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,16,23, s_pContext->_output_frc_sceneAnalysis.u8_dynME2_acdc_bld_x_act[2]);

		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,24,29, s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,0,5, s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[1]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,6,11, s_pContext->_output_frc_sceneAnalysis.u6_dynME2_acdc_bld_y_act[2]);

		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,12,20, s_pContext->_output_frc_sceneAnalysis.s9_dynME2_acdc_bld_s_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,21,29, s_pContext->_output_frc_sceneAnalysis.s9_dynME2_acdc_bld_s_act[1]);
		#endif
		*/
	}
	else
	{
		kme_me1_top1_me1_common1_00_RBUS kme_me1_top1_me1_common1_00_reg;
		kme_me1_top1_me1_common1_01_RBUS kme_me1_top1_me1_common1_01_reg;
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		kme_me2_calc0_kme_me2_calc0_50_RBUS kme_me2_calc0_kme_me2_calc0_50_reg;
		kme_me2_calc0_kme_me2_calc0_54_RBUS kme_me2_calc0_kme_me2_calc0_54_reg;
		#endif

		kme_me1_top1_me1_common1_00_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_00_reg);
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME_acdc_bld_x_act[0];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME_acdc_bld_x_act[1];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_x3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME_acdc_bld_x_act[2];
		kme_me1_top1_me1_common1_00_reg.me1_psad_alp_y1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME_acdc_bld_y_act[0];
		rtd_outl(KME_ME1_TOP1_ME1_COMMON1_00_reg, kme_me1_top1_me1_common1_00_reg.regValue);

		kme_me1_top1_me1_common1_01_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_01_reg);
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_y2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME_acdc_bld_y_act[1];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_y3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME_acdc_bld_y_act[2];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_slope1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME_acdc_bld_s_act[0];
		kme_me1_top1_me1_common1_01_reg.me1_psad_alp_slope2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME_acdc_bld_s_act[1];
		rtd_outl(KME_ME1_TOP1_ME1_COMMON1_01_reg, kme_me1_top1_me1_common1_01_reg.regValue);
		/*
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,0,7, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u8_dynME_acdc_bld_x_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,8,15, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u8_dynME_acdc_bld_x_act[1]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,16,23, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u8_dynME_acdc_bld_x_act[2]);

		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_00_reg,24,29, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u6_dynME_acdc_bld_y_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,0,5, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u6_dynME_acdc_bld_y_act[1]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,6,11, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u6_dynME_acdc_bld_y_act[2]);

		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,12,20, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .s9_dynME_acdc_bld_s_act[0]);
		WriteRegister(KME_ME1_TOP1_ME1_COMMON1_01_reg,21,29, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .s9_dynME_acdc_bld_s_act[1]);
		*/
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_04_reg,24,31, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u8_dynME_ac_pix_sad_limt_act);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_44_reg,24,31, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u8_dynME_ac_pix_sad_limt_act);

		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_88_reg,0,3, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS .u4_acdc_bld_psad_shift_act);

		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		kme_me2_calc0_kme_me2_calc0_50_reg.regValue = rtd_inl(KME_ME2_CALC0_KME_ME2_CALC0_50_reg);
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[0];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[1];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_x3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[2];
		kme_me2_calc0_kme_me2_calc0_50_reg.me2_psad_alp_y1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[0];
		rtd_outl(KME_ME2_CALC0_KME_ME2_CALC0_50_reg, kme_me2_calc0_kme_me2_calc0_50_reg.regValue);
		
		kme_me2_calc0_kme_me2_calc0_54_reg.regValue = rtd_inl(KME_ME2_CALC0_KME_ME2_CALC0_54_reg);
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_y2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[1];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_y3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[2];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_slope1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME2_acdc_bld_s_act[0];
		kme_me2_calc0_kme_me2_calc0_54_reg.me2_psad_alp_slope2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME2_acdc_bld_s_act[1];
		rtd_outl(KME_ME2_CALC0_KME_ME2_CALC0_54_reg, kme_me2_calc0_kme_me2_calc0_54_reg.regValue);
		#endif

		/*
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,0,7,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,8,15,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[1]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,16,23,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u8_dynME2_acdc_bld_x_act[2]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_50_reg,24,29,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,0,5,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[1]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,6,11,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.u6_dynME2_acdc_bld_y_act[2]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,12,20,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME2_acdc_bld_s_act[0]);
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_54_reg,21,29,  s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.s9_dynME2_acdc_bld_s_act[1]);
		#endif
		*/
	}
}

static _str_ME_dynSR_table ME_dynSR_table[4]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0 load default*/
	{0,0,0,0},						/*1*/
	{60,60,CTRL_N,CTRL_N},			/*2*/
	{CTRL_N,CTRL_N,70,70},			/*3*/
};

_str_ME_dynSR_table *fwif_MEMC_get_ME_dynSR_table(unsigned char level)
{
//	if (ME_dynSR_table == NULL) {
//		return NULL;
//	}
//	if(level==255 || level==0)
	if(level > 3)
		return (_str_ME_dynSR_table *)&ME_dynSR_table[0];/*load default*/
	else
		return (_str_ME_dynSR_table *)&ME_dynSR_table[level];

}

VOID ME_dynSR_wrtRegister(_str_ME_dynSR_table *ME_dynSR_table)
{
	kme_vbuf_top_kme_vbuf_top_3c_RBUS kme_vbuf_top_kme_vbuf_top_3c_reg;
	#if (IC_K5LP || IC_K6LP || IC_K8LP)
	kme_me2_vbuf_top_kme_me2_vbuf_top_e0_RBUS kme_me2_vbuf_top_kme_me2_vbuf_top_e0_reg;
	#endif
	
	kme_vbuf_top_kme_vbuf_top_3c_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg);
	kme_vbuf_top_kme_vbuf_top_3c_reg.vbuf_mvx_range = ME_dynSR_table->vbuf_mvx_range;
	kme_vbuf_top_kme_vbuf_top_3c_reg.vbuf_mvy_range = ME_dynSR_table->vbuf_mvy_range;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg, kme_vbuf_top_kme_vbuf_top_3c_reg.regValue);

	#if (IC_K5LP || IC_K6LP || IC_K8LP)
	kme_me2_vbuf_top_kme_me2_vbuf_top_e0_reg.regValue = rtd_inl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg);
	kme_me2_vbuf_top_kme_me2_vbuf_top_e0_reg.kme_me2_vbuf_mvx_clip_range = ME_dynSR_table->kme_me2_vbuf_mvx_clip_range;
	kme_me2_vbuf_top_kme_me2_vbuf_top_e0_reg.kme_me2_vbuf_mvy_clip_range = ME_dynSR_table->kme_me2_vbuf_mvy_clip_range;
	rtd_outl(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg, kme_me2_vbuf_top_kme_me2_vbuf_top_e0_reg.regValue);
	#endif

	/*WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg, 0,	8,	ME_dynSR_table->vbuf_mvx_range);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg, 9,	15,	ME_dynSR_table->vbuf_mvy_range);
	#if (IC_K5LP || IC_K6LP || IC_K8LP)
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,0,7,		ME_dynSR_table->kme_me2_vbuf_mvx_clip_range);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,8,14,	ME_dynSR_table->kme_me2_vbuf_mvy_clip_range);
	#endif*/
}

VOID ME_dynSR_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_dynSR_table *tmp_ME_dynSR_table = NULL;

	if (s_pParam->_param_frc_sceneAnalysis.u1_dynSR_en == 0)
		return;
#if 1
	if(s_pContext->_output_wrt_comreg.u8_force_caddpnt ==1 || s_pContext->_output_frc_sceneAnalysis.u1_still_frame || s_pContext->_output_Patch_Manage.u1_patch_highFreq_zmv_true
		|| s_pContext->_output_wrt_comreg.u1_24P_judder_test || s_pContext->_output_wrt_comreg.u1_is_test_video)
	{
		table_level = 1;
		tmp_ME_dynSR_table = fwif_MEMC_get_ME_dynSR_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u1_KME_SR_increaseX_true ==1)
	{
		table_level = 2;
		tmp_ME_dynSR_table = fwif_MEMC_get_ME_dynSR_table(table_level);
		tmp_ME_dynSR_table->vbuf_mvy_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y;
		tmp_ME_dynSR_table->kme_me2_vbuf_mvy_clip_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y;

	}
	else if(s_pContext->_output_wrt_comreg.u1_KME_SR_increaseY_true ==1)
	{
		table_level = 3;
		tmp_ME_dynSR_table = fwif_MEMC_get_ME_dynSR_table(table_level);
		tmp_ME_dynSR_table->vbuf_mvx_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x;
		tmp_ME_dynSR_table->kme_me2_vbuf_mvx_clip_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x;
	}
	else
	{
		table_level = 255;
		tmp_ME_dynSR_table = fwif_MEMC_get_ME_dynSR_table(table_level);
		tmp_ME_dynSR_table->vbuf_mvx_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x;
		tmp_ME_dynSR_table->vbuf_mvy_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y;
		tmp_ME_dynSR_table->kme_me2_vbuf_mvx_clip_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x;
		tmp_ME_dynSR_table->kme_me2_vbuf_mvy_clip_range = s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y;
	}

	ME_dynSR_wrtRegister(tmp_ME_dynSR_table);
#else
	if(s_pContext->_output_frc_sceneAnalysis.u1_still_frame || s_pContext->_output_Patch_Manage.u1_patch_highFreq_zmv_true)
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg, 0,8,0);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,9,15, 0);
		#if (IC_K5LP || IC_K6LP)
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,0,7,0);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,8,14,0);
		#endif
	}
	else if(s_pContext->_output_wrt_comreg.u1_KME_SR_increaseX_true ==1)
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg, 0,8,0x60);
		#if (IC_K5LP || IC_K6LP)
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,0,7,0x60);
		#endif
	}
	else if(s_pContext->_output_wrt_comreg.u1_KME_SR_increaseY_true ==1)
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,9,15, 0x70);
		#if (IC_K5LP || IC_K6LP)
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,8,14,0x70);
		#endif
	}
	else
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,0,8,
								s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,9,15,
								s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,0,7,
								s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_x);
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,8,14,
								s_pContext->_output_frc_sceneAnalysis.u8_ME1_searchRange_y);
	}
#endif
}


VOID ME_dynSAD_Diff_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	if (s_pParam->_param_frc_sceneAnalysis.u1_dyn_SAD_Diff_en == 1)
	{
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg,0,30,
			          (0xE0000 * s_pContext->_output_frc_sceneAnalysis.u8_dynSAD_Diff_Gain) / 255);
	}
	else
	{
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_07_reg,0,30, 0xE0000);
	}
}

static _str_ME_cand_table ME_cand_table[]={
//
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*0:load default*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,CTRL_NONE,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},				/*1*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,0,CTRL_NONE,0,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*2*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,CTRL_NONE,CTRL_NONE,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*3*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*4*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*5*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*6*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},	/*7*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,1},	/*8*///tv010 50001_carOnGround_25fps.avi
	{CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,0,0,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,0,0},	/*9 repeat broken*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,CTRL_NONE,CTRL_NONE,0,0},	/*10 small object*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,CTRL_NONE,CTRL_NONE,CTRL_NONE,1,0,0,0,1},	/*12 new sport mode*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0,CTRL_NONE,0,0,0,CTRL_NONE,0,0,1,1},/*12*/  //MOKA-1417
};

_str_ME_cand_table *fwif_MEMC_get_ME_cand_table(unsigned char level)
{
//	if (ME_cand_table == NULL) {
//		return NULL;
//	}
//	if(level==255 || level==0)
	if(level > sizeof(ME_cand_table)/sizeof(_str_ME_cand_table))
		return (_str_ME_cand_table *)&ME_cand_table[0];/*load default*/
	else
		return (_str_ME_cand_table *)&ME_cand_table[level];


}

VOID ME_cand_wrtRegister(_str_ME_cand_table *ME_cand_table)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	kme_vbuf_top_kme_vbuf_top_10_RBUS kme_vbuf_top_kme_vbuf_top_10_reg;
	kme_vbuf_top_kme_vbuf_top_14_RBUS kme_vbuf_top_kme_vbuf_top_14_reg;

	if (ME_cand_table->vbuf_ip_1st_cand0_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand0_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand0_en;
	if (ME_cand_table->vbuf_ip_1st_cand1_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand1_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand1_en;
	if (ME_cand_table->vbuf_ip_1st_cand2_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand2_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand2_en;
	if (ME_cand_table->vbuf_ip_1st_cand3_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand3_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en;
	if (ME_cand_table->vbuf_ip_1st_cand4_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand4_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en;
	if (ME_cand_table->vbuf_ip_1st_cand5_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand5_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand5_en;
	if (ME_cand_table->vbuf_ip_1st_cand6_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand6_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand6_en;
	if (ME_cand_table->vbuf_ip_1st_cand7_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand7_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand7_en;
	if (ME_cand_table->vbuf_ip_1st_cand8_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_cand8_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand8_en;
	if (ME_cand_table->vbuf_pi_1st_cand0_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand0_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand1_en;
	if (ME_cand_table->vbuf_pi_1st_cand1_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand1_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand0_en;
	if (ME_cand_table->vbuf_pi_1st_cand2_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand2_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand2_en;
	if (ME_cand_table->vbuf_pi_1st_cand3_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand3_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en;
	if (ME_cand_table->vbuf_pi_1st_cand4_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand4_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en;
	if (ME_cand_table->vbuf_pi_1st_cand5_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand5_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand5_en;
	if (ME_cand_table->vbuf_pi_1st_cand6_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand6_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand6_en;
	if (ME_cand_table->vbuf_pi_1st_cand7_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand7_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand7_en;
	if (ME_cand_table->vbuf_pi_1st_cand8_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_cand8_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand8_en;

	if (ME_cand_table->vbuf_ip_1st_update0_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_update0_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_en;
	if (ME_cand_table->vbuf_ip_1st_update1_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_update1_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_en;
	if (ME_cand_table->vbuf_ip_1st_update2_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_update2_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_en;
	if (ME_cand_table->vbuf_ip_1st_update3_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_update3_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update3_en;
	if (ME_cand_table->vbuf_pi_1st_update0_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_update0_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_en;
	if (ME_cand_table->vbuf_pi_1st_update1_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_update1_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_en;
	if (ME_cand_table->vbuf_pi_1st_update2_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_update2_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_en;
	if (ME_cand_table->vbuf_pi_1st_update3_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_update3_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update3_en;

	if (ME_cand_table->vbuf_ip_1st_gmv_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_gmv_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_gmv_en;
	if (ME_cand_table->vbuf_pi_1st_gmv_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_gmv_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_gmv_en;
	if (ME_cand_table->vbuf_ip_1st_zmv_en == CTRL_NONE) ME_cand_table->vbuf_ip_1st_zmv_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_zmv_en;
	if (ME_cand_table->vbuf_pi_1st_zmv_en == CTRL_NONE) ME_cand_table->vbuf_pi_1st_zmv_en = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_zmv_en;

	kme_vbuf_top_kme_vbuf_top_10_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_10_reg);
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand0_en = ME_cand_table->vbuf_ip_1st_cand0_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand1_en = ME_cand_table->vbuf_ip_1st_cand1_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand2_en = ME_cand_table->vbuf_ip_1st_cand2_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand3_en = ME_cand_table->vbuf_ip_1st_cand3_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand4_en = ME_cand_table->vbuf_ip_1st_cand4_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand5_en = ME_cand_table->vbuf_ip_1st_cand5_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand6_en = ME_cand_table->vbuf_ip_1st_cand6_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand7_en = ME_cand_table->vbuf_ip_1st_cand7_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_cand8_en = ME_cand_table->vbuf_ip_1st_cand8_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_update0_en = ME_cand_table->vbuf_ip_1st_update0_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_update1_en = ME_cand_table->vbuf_ip_1st_update1_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_update2_en = ME_cand_table->vbuf_ip_1st_update2_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_update3_en = ME_cand_table->vbuf_ip_1st_update3_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_gmv_en = ME_cand_table->vbuf_ip_1st_gmv_en;
	kme_vbuf_top_kme_vbuf_top_10_reg.vbuf_ip_1st_zmv_en = ME_cand_table->vbuf_ip_1st_zmv_en;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, kme_vbuf_top_kme_vbuf_top_10_reg.regValue);

	kme_vbuf_top_kme_vbuf_top_14_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_14_reg);
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand0_en = ME_cand_table->vbuf_pi_1st_cand0_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand1_en = ME_cand_table->vbuf_pi_1st_cand1_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand2_en = ME_cand_table->vbuf_pi_1st_cand2_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand3_en = ME_cand_table->vbuf_pi_1st_cand3_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand4_en = ME_cand_table->vbuf_pi_1st_cand4_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand5_en = ME_cand_table->vbuf_pi_1st_cand5_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand6_en = ME_cand_table->vbuf_pi_1st_cand6_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand7_en = ME_cand_table->vbuf_pi_1st_cand7_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_cand8_en = ME_cand_table->vbuf_pi_1st_cand8_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_update0_en = ME_cand_table->vbuf_pi_1st_update0_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_update1_en = ME_cand_table->vbuf_pi_1st_update1_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_update2_en = ME_cand_table->vbuf_pi_1st_update2_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_update3_en = ME_cand_table->vbuf_pi_1st_update3_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_gmv_en = ME_cand_table->vbuf_pi_1st_gmv_en;
	kme_vbuf_top_kme_vbuf_top_14_reg.vbuf_pi_1st_zmv_en = ME_cand_table->vbuf_pi_1st_zmv_en;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, kme_vbuf_top_kme_vbuf_top_14_reg.regValue);

	FixSubtitleBroken_Set();//50001_carOnGround_25fps.avi


	/*WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	1, 1,	ME_cand_table->vbuf_ip_1st_cand0_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	2, 2,	ME_cand_table->vbuf_ip_1st_cand1_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	3, 3,	ME_cand_table->vbuf_ip_1st_cand2_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	4, 4,	ME_cand_table->vbuf_ip_1st_cand3_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	5, 5,	ME_cand_table->vbuf_ip_1st_cand4_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	6, 6,	ME_cand_table->vbuf_ip_1st_cand5_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	7, 7,	ME_cand_table->vbuf_ip_1st_cand6_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	8, 8,	ME_cand_table->vbuf_ip_1st_cand7_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 	9, 9,	ME_cand_table->vbuf_ip_1st_cand8_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,  11, 11,  ME_cand_table->vbuf_ip_1st_update0_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,  12, 12,  ME_cand_table->vbuf_ip_1st_update1_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,  13, 13,  ME_cand_table->vbuf_ip_1st_update2_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,  14, 14,  ME_cand_table->vbuf_ip_1st_update3_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,  16, 16,  ME_cand_table->vbuf_ip_1st_zmv_en);

	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	0, 0,	ME_cand_table->vbuf_pi_1st_cand0_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	1, 1,	ME_cand_table->vbuf_pi_1st_cand1_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	2, 2,	ME_cand_table->vbuf_pi_1st_cand2_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	3, 3,	ME_cand_table->vbuf_pi_1st_cand3_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	4, 4,	ME_cand_table->vbuf_pi_1st_cand4_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	5, 5,	ME_cand_table->vbuf_pi_1st_cand5_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	6, 6,	ME_cand_table->vbuf_pi_1st_cand6_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	7, 7,	ME_cand_table->vbuf_pi_1st_cand7_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 	8, 8,	ME_cand_table->vbuf_pi_1st_cand8_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,  10, 10,  ME_cand_table->vbuf_pi_1st_update0_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,  11, 11,  ME_cand_table->vbuf_pi_1st_update1_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,  12, 12,  ME_cand_table->vbuf_pi_1st_update2_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,  13, 13,  ME_cand_table->vbuf_pi_1st_update3_en);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,  15, 15,  ME_cand_table->vbuf_pi_1st_zmv_en);
	*/
	FixSubtitleBroken_Set();//50001_carOnGround_25fps.avi

}


VOID ME_cand_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_cand_table *tmp_ME_cand_table = NULL;
	_str_ME_cand_table ME_cand_style_table = {0};
	static unsigned int u32_ID_Log_en=0;//,ES_Test_Value=0;
	unsigned char ME_Style = (MEMC_Lib_Get_ME_Sytle()>=ME_STYLE_NUM) ? ME_STYLE_NORMAL : MEMC_Lib_Get_ME_Sytle();
	ReadRegister(SOFTWARE1_SOFTWARE1_22_reg, 28,  28, &u32_ID_Log_en);//0xB809D758

	if(pParam->u1_MECand_wrt_en == 0)//d5e4[15]
		return;

	#if 1
	if(MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].u1_set_ME_cand){
		memcpy(&ME_cand_style_table, &MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].ME_cand_table, sizeof(_str_ME_cand_table));
		tmp_ME_cand_table = (_str_ME_cand_table *)&ME_cand_style_table;
	}
	else if( (s_pParam->_param_read_comreg.u1_powerSaving_en && s_pContext->_external_data.u1_powerSaving == 1) ||( s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==3) )
	{
		table_level = 1;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level); // disable ip/pi update0/1/2 by table, others the same

		//tmp_ME_cand_table->vbuf_ip_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_ip_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_SportScene) {
		if(g_new_sport_mode){
			table_level = 11;
		}else {
			table_level = 10;
		}
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u8_force_caddpnt ==1){//MOKA-1417
		table_level = 12;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}	
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en && 
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode!=RepeatMode_OFF)
	{
		if(s_pContext->_output_me_sceneAnalysis.u1_casino_RP_detect_true) {
			table_level = 9;
		}
		else if(s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_HIGH) {
			table_level = 9;
		}
		else {//LOW/MID
			table_level = 0;
		}
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
	 else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==1)
	 {
	 	table_level = 2;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level); // disable ip/pi update0/2 by table, others the same

		//tmp_ME_cand_table->vbuf_ip_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_ip_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en;

		//tmp_ME_cand_table->vbuf_ip_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_en;
	}
	 else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==2)
	 {
	 	table_level = 3;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level); // disable ip/pi update1/2 by table, others the same

		//tmp_ME_cand_table->vbuf_ip_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_ip_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en;

		//tmp_ME_cand_table->vbuf_ip_1st_update0_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update0_en	 =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_en;

	}
#if IC_K4LP
	else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true == 1 )
	{
		table_level = 4;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level); // disable ip/pi cand3/4 by table, others the same

		//tmp_ME_cand_table->vbuf_ip_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_en;
		//tmp_ME_cand_table->vbuf_ip_1st_update2_en	 =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_en;
		//tmp_ME_cand_table->vbuf_ip_1st_update0_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update2_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update0_en	 =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_en;
	}
#endif
#if 0
	else if( (s_pContext->_output_wrt_comreg.u1_casino_RP_detect_true == 1) && (s_pContext->_output_me_sceneAnalysis.b_do_ME_medFLT != 1) )
	{
		table_level = 5;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
#endif
	else if(s_pContext->_output_me_sceneAnalysis.u1_zmv_on_flag == 1 )
	{
		table_level = 6;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level); // turn on ip ZMV_en
	}
#if 0 //cause broken in 2.cadence_24hz_32
	else if(s_pContext->_output_me_sceneAnalysis.u2_strong_pure_panning_flag == 1){
		table_level = 7;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
#endif
	else if(s_pContext->_output_me_sceneAnalysis.u1_FixSubtitleBroken_en==1){//50001_carOnGround_25fps.avi
		table_level = 8;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en &&
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_OFF)
	{
		table_level = 0;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);
	}
	else
	{
		table_level = 0;
		tmp_ME_cand_table = fwif_MEMC_get_ME_cand_table(table_level);

		//tmp_ME_cand_table->vbuf_ip_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_ip_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand3_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en;
		//tmp_ME_cand_table->vbuf_pi_1st_cand4_en = 	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en;

		//tmp_ME_cand_table->vbuf_ip_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_en;
		//tmp_ME_cand_table->vbuf_ip_1st_update2_en	 =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_en;
		//tmp_ME_cand_table->vbuf_ip_1st_update0_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update1_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update2_en =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_en;
		//tmp_ME_cand_table->vbuf_pi_1st_update0_en	 =	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_en;

	}
	if(u32_ID_Log_en==1)//0xB809D758 [28]
	{
		static unsigned char counter = 0;
		if(counter % 10 == 0)
			rtd_pr_memc_info("[%s][%d]table_level =  %d, ME_Style,%d\n",__FUNCTION__, __LINE__,table_level, ME_Style);
		counter++;
	}

	ME_cand_wrtRegister(tmp_ME_cand_table);

#else
	 if(s_pParam->_param_read_comreg.u1_powerSaving_en && s_pContext->_external_data.u1_powerSaving == 1 )
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 11, 11,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 11, 11, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 10, 10, 0x00);
	}
	 else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==1)
	 {
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 11, 11,0x00);

		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 10, 10, 0x00);
	}
	 else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==2)
	 {
	 	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 11, 11, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12,0x00);
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCand_Slow_Convergence_type==3)
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 11, 11,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 11, 11, 0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 10, 10, 0x00);
	}
#if IC_K4LP
	else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true == 1 )
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3,0x00);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 4, 4,0x00);
	}
#endif
	else
	{
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4,s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5,s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3,s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 4, 4,s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_en);

		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 11, 11, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 11, 11, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_en);
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 10, 10, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_en);
	}
#endif
}


static _str_ME_candOfst_table  ME_candOfst_table[4]={
	/*0.load default*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
 	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
 	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},
	/*1*/
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,
	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,CTRL_NONE,0x6,
	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE},
	/*2 small object */
	{CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
	 CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,CTRL_NONE,
	 7,7, 7,1, 1,7, 1,1,
	 7,7, 7,1, 1,7, 1,1},
	/*3 small object strong setting*/
	{7,7, 0,7, 1,7, 6,0, 2,0, 6,2, 0,2, 2,2,
	 7,7, 0,7, 1,7, 6,0, 2,0, 6,2, 0,2, 2,2,
	 6,6, 0,6, 2,6, 6,2,
	 6,6, 0,6, 2,6, 2,2},
};

_str_ME_candOfst_table *fwif_MEMC_get_ME_candOfst_table(unsigned char level)
{
//	if (ME_candOfst_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 3)
		return (_str_ME_candOfst_table *)&ME_candOfst_table[0];
	else
		return (_str_ME_candOfst_table *)&ME_candOfst_table[level];
}

VOID  ME_candOfst_wrtRegister(_str_ME_candOfst_table *ME_candOfst_table)
{
	kme_vbuf_top_kme_vbuf_top_18_RBUS kme_vbuf_top_kme_vbuf_top_18_reg;
	kme_vbuf_top_kme_vbuf_top_1c_RBUS kme_vbuf_top_kme_vbuf_top_1c_reg;
	kme_vbuf_top_kme_vbuf_top_24_RBUS kme_vbuf_top_kme_vbuf_top_24_reg;
	kme_vbuf_top_kme_vbuf_top_28_RBUS kme_vbuf_top_kme_vbuf_top_28_reg;

	const _PQLCONTEXT *s_pContext = GetPQLContext();
	if (ME_candOfst_table->vbuf_ip_1st_cand0_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand0_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand0_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand0_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand0_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand0_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand1_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand1_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand1_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand1_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand1_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand1_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand2_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand2_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand2_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand2_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand2_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand2_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand3_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand3_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand3_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand3_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand4_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand4_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand4_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand4_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand5_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand5_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand5_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand5_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand5_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand5_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand6_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand6_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand6_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand6_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand6_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand6_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_cand7_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand7_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand7_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_cand7_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_cand7_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand7_offsety;

	if (ME_candOfst_table->vbuf_ip_1st_update0_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update0_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_update0_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update0_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update0_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_update1_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update1_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_update1_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update1_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update1_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_update2_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update2_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_update2_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update2_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update2_offsety;
	if (ME_candOfst_table->vbuf_ip_1st_update3_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update3_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update3_offsetx;
	if (ME_candOfst_table->vbuf_ip_1st_update3_offsety == CTRL_NONE) ME_candOfst_table->vbuf_ip_1st_update3_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_update3_offsety;

	if (ME_candOfst_table->vbuf_pi_1st_cand0_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand0_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand0_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand0_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand0_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand0_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand1_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand1_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand1_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand1_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand1_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand1_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand2_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand2_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand2_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand2_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand2_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand2_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand3_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand3_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand3_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand3_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand4_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand4_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand4_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand4_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand5_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand5_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand5_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand5_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand5_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand5_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand6_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand6_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand6_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand6_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand6_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand6_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_cand7_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand7_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand7_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_cand7_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_cand7_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand7_offsety;

	if (ME_candOfst_table->vbuf_pi_1st_update0_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update0_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_update0_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update0_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update0_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_update1_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update1_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_update1_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update1_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update1_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_update2_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update2_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_update2_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update2_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update2_offsety;
	if (ME_candOfst_table->vbuf_pi_1st_update3_offsetx == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update3_offsetx = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update3_offsetx;
	if (ME_candOfst_table->vbuf_pi_1st_update3_offsety == CTRL_NONE) ME_candOfst_table->vbuf_pi_1st_update3_offsety = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_update3_offsety;
		
	kme_vbuf_top_kme_vbuf_top_18_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_18_reg);
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand0_offsetx = ME_candOfst_table->vbuf_ip_1st_cand0_offsetx;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand0_offsety = ME_candOfst_table->vbuf_ip_1st_cand0_offsety;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand1_offsetx = ME_candOfst_table->vbuf_ip_1st_cand1_offsetx;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand1_offsety = ME_candOfst_table->vbuf_ip_1st_cand1_offsety;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand2_offsetx = ME_candOfst_table->vbuf_ip_1st_cand2_offsetx;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand2_offsety = ME_candOfst_table->vbuf_ip_1st_cand2_offsety;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand3_offsetx = ME_candOfst_table->vbuf_ip_1st_cand3_offsetx;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand3_offsety = ME_candOfst_table->vbuf_ip_1st_cand3_offsety;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand4_offsetx = ME_candOfst_table->vbuf_ip_1st_cand4_offsetx;
	kme_vbuf_top_kme_vbuf_top_18_reg.vbuf_ip_1st_cand4_offsety = ME_candOfst_table->vbuf_ip_1st_cand4_offsety;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, kme_vbuf_top_kme_vbuf_top_18_reg.regValue);

	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg,  0,  2, 	ME_candOfst_table->vbuf_ip_1st_cand0_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg,  3,  5, 	ME_candOfst_table->vbuf_ip_1st_cand0_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg,  6,  8, 	ME_candOfst_table->vbuf_ip_1st_cand1_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg,  9, 11, 	ME_candOfst_table->vbuf_ip_1st_cand1_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 12, 14, 	ME_candOfst_table->vbuf_ip_1st_cand2_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 15, 17, 	ME_candOfst_table->vbuf_ip_1st_cand2_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 18, 20, 	ME_candOfst_table->vbuf_ip_1st_cand3_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 21, 23, 	ME_candOfst_table->vbuf_ip_1st_cand3_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 24, 26, 	ME_candOfst_table->vbuf_ip_1st_cand4_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_18_reg, 27, 29, 	ME_candOfst_table->vbuf_ip_1st_cand4_offsety);*/
		
	kme_vbuf_top_kme_vbuf_top_1c_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg);
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand5_offsetx = ME_candOfst_table->vbuf_ip_1st_cand5_offsetx;
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand5_offsety = ME_candOfst_table->vbuf_ip_1st_cand5_offsety;
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand6_offsetx = ME_candOfst_table->vbuf_ip_1st_cand6_offsetx;
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand6_offsety = ME_candOfst_table->vbuf_ip_1st_cand6_offsety;
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand7_offsetx = ME_candOfst_table->vbuf_ip_1st_cand7_offsetx;
	kme_vbuf_top_kme_vbuf_top_1c_reg.vbuf_ip_1st_cand7_offsety = ME_candOfst_table->vbuf_ip_1st_cand7_offsety;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg, kme_vbuf_top_kme_vbuf_top_1c_reg.regValue);

	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg,  0,  2, 	ME_candOfst_table->vbuf_ip_1st_cand5_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg,  3,  5, 	ME_candOfst_table->vbuf_ip_1st_cand5_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg,  6,  8, 	ME_candOfst_table->vbuf_ip_1st_cand6_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg,  9, 11, 	ME_candOfst_table->vbuf_ip_1st_cand6_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg, 12, 14, 	ME_candOfst_table->vbuf_ip_1st_cand7_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_1C_reg, 15, 17, 	ME_candOfst_table->vbuf_ip_1st_cand7_offsety);
	*/
		
	kme_vbuf_top_kme_vbuf_top_24_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_24_reg);
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand0_offsetx = ME_candOfst_table->vbuf_pi_1st_cand0_offsetx;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand0_offsety = ME_candOfst_table->vbuf_pi_1st_cand0_offsety;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand1_offsetx = ME_candOfst_table->vbuf_pi_1st_cand1_offsetx;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand1_offsety = ME_candOfst_table->vbuf_pi_1st_cand1_offsety;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand2_offsetx = ME_candOfst_table->vbuf_pi_1st_cand2_offsetx;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand2_offsety = ME_candOfst_table->vbuf_pi_1st_cand2_offsety;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand3_offsetx = ME_candOfst_table->vbuf_pi_1st_cand3_offsetx;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand3_offsety = ME_candOfst_table->vbuf_pi_1st_cand3_offsety;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand4_offsetx = ME_candOfst_table->vbuf_pi_1st_cand4_offsetx;
	kme_vbuf_top_kme_vbuf_top_24_reg.vbuf_pi_1st_cand4_offsety = ME_candOfst_table->vbuf_pi_1st_cand4_offsety;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, kme_vbuf_top_kme_vbuf_top_24_reg.regValue);

	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg,  0,  2, 	ME_candOfst_table->vbuf_pi_1st_cand0_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg,  3,  5, 	ME_candOfst_table->vbuf_pi_1st_cand0_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg,  6,  8, 	ME_candOfst_table->vbuf_pi_1st_cand1_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg,  9, 11, 	ME_candOfst_table->vbuf_pi_1st_cand1_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 12, 14, 	ME_candOfst_table->vbuf_pi_1st_cand2_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 15, 17, 	ME_candOfst_table->vbuf_pi_1st_cand2_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 18, 20, 	ME_candOfst_table->vbuf_pi_1st_cand3_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 21, 23, 	ME_candOfst_table->vbuf_pi_1st_cand3_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 24, 26, 	ME_candOfst_table->vbuf_pi_1st_cand4_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_24_reg, 27, 29, 	ME_candOfst_table->vbuf_pi_1st_cand4_offsety);
	*/
		
	kme_vbuf_top_kme_vbuf_top_28_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_28_reg);
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand5_offsetx = ME_candOfst_table->vbuf_pi_1st_cand5_offsetx;
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand5_offsety = ME_candOfst_table->vbuf_pi_1st_cand5_offsety;
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand6_offsetx = ME_candOfst_table->vbuf_pi_1st_cand6_offsetx;
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand6_offsety = ME_candOfst_table->vbuf_pi_1st_cand6_offsety;
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand7_offsetx = ME_candOfst_table->vbuf_pi_1st_cand7_offsetx;
	kme_vbuf_top_kme_vbuf_top_28_reg.vbuf_pi_1st_cand7_offsety = ME_candOfst_table->vbuf_pi_1st_cand7_offsety;
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_28_reg, kme_vbuf_top_kme_vbuf_top_28_reg.regValue);
		
	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg,  0,  2, 	ME_candOfst_table->vbuf_pi_1st_cand5_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg,  3,  5, 	ME_candOfst_table->vbuf_pi_1st_cand5_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg,  6,  8, 	ME_candOfst_table->vbuf_pi_1st_cand6_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg,  9, 11, 	ME_candOfst_table->vbuf_pi_1st_cand6_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg, 12, 14, 	ME_candOfst_table->vbuf_pi_1st_cand7_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_28_reg, 15, 17, 	ME_candOfst_table->vbuf_pi_1st_cand7_offsety);
	*/

	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg,  0,  2, 	ME_candOfst_table->vbuf_ip_1st_update0_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg,  3,  5, 	ME_candOfst_table->vbuf_ip_1st_update0_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg,  6,  8, 	ME_candOfst_table->vbuf_ip_1st_update1_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg,  9, 11, 	ME_candOfst_table->vbuf_ip_1st_update1_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg, 12, 14, 	ME_candOfst_table->vbuf_ip_1st_update2_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg, 15, 17, 	ME_candOfst_table->vbuf_ip_1st_update2_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg, 18, 20, 	ME_candOfst_table->vbuf_ip_1st_update3_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_20_reg, 21, 23, 	ME_candOfst_table->vbuf_ip_1st_update3_offsety);
	
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg,  0,  2, 	ME_candOfst_table->vbuf_pi_1st_update0_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg,  3,  5, 	ME_candOfst_table->vbuf_pi_1st_update0_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg,  6,  8, 	ME_candOfst_table->vbuf_pi_1st_update1_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg,  9, 11, 	ME_candOfst_table->vbuf_pi_1st_update1_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg, 12, 14, 	ME_candOfst_table->vbuf_pi_1st_update2_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg, 15, 17, 	ME_candOfst_table->vbuf_pi_1st_update2_offsety);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg, 18, 20, 	ME_candOfst_table->vbuf_pi_1st_update3_offsetx);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_2C_reg, 21, 23, 	ME_candOfst_table->vbuf_pi_1st_update3_offsety);
}

VOID ME_candOfst_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u25_me_aDTL = s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	signed short u11_gmv_mvx = (s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb)>>1;
	signed short u10_gmv_mvy = (s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb)>>1;
	signed short u11_2nd_gmv_mvx = (s_pContext->_output_read_comreg.s11_me_GMV_2nd_vx_rb);
	//signed short u10_2nd_gmv_mvy = (s_pContext->_output_read_comreg.s10_me_GMV_2nd_vy_rb);
	unsigned int u32_gmv_cnt = s_pContext->_output_read_comreg.u17_me_GMV_1st_cnt_rb;
	unsigned int u32_gmv_unconf = s_pContext->_output_read_comreg.u12_me_GMV_1st_unconf_rb;
	unsigned int u26_aAPLi_rb = s_pContext->_output_read_comreg.u26_me_aAPLi_rb;
	static unsigned int  u25_me_aDTL_pre;
	unsigned int log_en;
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_candOfst_table *tmp_ME_candOfst_table = NULL;

	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 28,  28, &log_en);//0xB809D9EC

	if(pParam->u1_MECandOfst_wrt_en == 0)//d5e4[13]
		return;
	u25_me_aDTL = (u25_me_aDTL_pre*7 + u25_me_aDTL)>>3;

	if(s_pContext->_output_me_sceneAnalysis.u1_SportScene == true) {
		table_level = 2;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);	
	}
	else if( (s_pContext->_output_me_sceneAnalysis.u1_pure_TopDownPan_flag != 0) && (s_pContext->_output_me_sceneAnalysis.u2_panning_flag != 0)&&(u25_me_aDTL > 2800000))
	{
		table_level = 255;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);
	}
	else if((s_pContext->_output_FRC_LgDet.u1_logo_KeyRgn_status!=1)&&(u32_gmv_cnt>=25000)&&(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1)&&( (u32_gmv_unconf<=3) && (_ABS_(u10_gmv_mvy)<=2) )
			&&( (u25_me_aDTL > 770000) && (u25_me_aDTL < 1500000))&&( (u26_aAPLi_rb > 3500000) && (u26_aAPLi_rb < 5200000))
			&&(s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 2 ))
	{
		table_level = 1;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);		
	}
	else if((s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1)&&(u32_gmv_cnt>=20000)
			&&(_ABS_(u11_gmv_mvx)<=2) && (u10_gmv_mvy<=55 && u10_gmv_mvy>=5)&& (_ABS_(u11_2nd_gmv_mvx)<=5)&&(u32_gmv_unconf<=10)
			&&( (u25_me_aDTL > 1000000) && (u25_me_aDTL < 1600000)) &&( (u26_aAPLi_rb > 4000000) && (u26_aAPLi_rb < 5200000)))
	{
		table_level = 1;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);		
	}
	else if(g_new_sport_mode&&s_pContext->_output_me_sceneAnalysis.u1_SportScene)
	{
		table_level = 3;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);		
	}
	else
	{
		table_level = 255;
		tmp_ME_candOfst_table = fwif_MEMC_get_ME_candOfst_table(table_level);

		tmp_ME_candOfst_table->vbuf_ip_1st_cand3_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand3_offsety;
		tmp_ME_candOfst_table->vbuf_ip_1st_cand4_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand4_offsety;
		tmp_ME_candOfst_table->vbuf_ip_1st_cand5_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand5_offsety;
		tmp_ME_candOfst_table->vbuf_ip_1st_cand6_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand6_offsety;
		tmp_ME_candOfst_table->vbuf_ip_1st_cand7_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_cand7_offsety;

		tmp_ME_candOfst_table->vbuf_pi_1st_cand3_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand3_offsety;
		tmp_ME_candOfst_table->vbuf_pi_1st_cand4_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand4_offsety;
		tmp_ME_candOfst_table->vbuf_pi_1st_cand5_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand5_offsety;
		tmp_ME_candOfst_table->vbuf_pi_1st_cand6_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand6_offsety;
		tmp_ME_candOfst_table->vbuf_pi_1st_cand7_offsety =s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_cand7_offsety;
	}
	u25_me_aDTL_pre = u25_me_aDTL;

	ME_candOfst_wrtRegister(tmp_ME_candOfst_table);

	if(log_en){//D9EC[28]
		rtd_pr_memc_emerg("[candidate offset][table_level][%d]\n", table_level);
	}
}

static _str_ME_caddpnt_table  ME_caddpnt_table[]={
	/*0.load default*/
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*1*/
	{0xFF,0xFF,0xFF,CTRL_N,0xFF,0xFF,0xFF,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*2*/
	{0x23,0x23,0x23,CTRL_N,0x23,0x23,0x23,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
 	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*3*/
	{0x0,0x0,0x0,CTRL_N,0x0,0x0,0x0,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*4*/
	{0xFF,0xFF,0xFF,CTRL_N,0xFF,0xFF,0xFF,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,0x90,0x90,0x60,0x60,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,0x90,0x90,0x60,0x60,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*5*/
	{0xC0,0xC0,0xC0,CTRL_N,0xC0,0xC0,0xC0,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
	/*6*/
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 32,CTRL_N,CTRL_N,CTRL_N},
	/*7*/ //repeat LOW
	{0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,0xA0,
	 28,36,29,40,40,40,40,48,
	 28,36,29,40,40,48,48,48,
	 CTRL_N,CTRL_N,200,200},
	/*8*/ //repeat MID
	{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
	 0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
	 CTRL_N,CTRL_N,0,0},
	/*9*/ //repeat HIGH, casino
	{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	 0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	 CTRL_N,CTRL_N,0,0},	
	/*10*/ //repeat OFF
	{128,128,128,128,128,128,128,128,
	 28,36,29,40,40,40,40,48,
	 28,36,29,40,40,48,48,48,
	 CTRL_N,CTRL_N,300,300},
	/*11*/ //case:small object
	{64,64,64,64,64,64,64,64,
	 28,36,29,40,40,40,40,48,
	 28,36,29,40,40,48,48,48,
	 CTRL_N,CTRL_N,1000,1000},
	/*12*/ //case:strong small object
	{32,32,32,32,32,32,32,32,
	 28,36,29,40,40,40,40,48,
	 28,36,29,40,40,48,48,48,
	 CTRL_N,CTRL_N,1000,1000},
	 /*13*/ //case:MOKA-1417
	{0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,
	 CTRL_N,CTRL_N,CTRL_N,CTRL_N},	
};

_str_ME_caddpnt_table *fwif_MEMC_get_ME_caddpnt_table(unsigned char level)
{
//	if (ME_caddpnt_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > sizeof(ME_caddpnt_table)/sizeof(_str_ME_caddpnt_table))
		return (_str_ME_caddpnt_table *)&ME_caddpnt_table[0];
	else
		return (_str_ME_caddpnt_table *)&ME_caddpnt_table[level];

}

VOID  ME_caddpnt_wrtRegister(_str_ME_caddpnt_table *ME_caddpnt_table)
{
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_24_reg, 16, 23, 	ME_caddpnt_table->me1_ip_cddpnt_rnd0);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_24_reg, 24, 31, 	ME_caddpnt_table->me1_ip_cddpnt_rnd1);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_28_reg, 0, 7, 		ME_caddpnt_table->me1_ip_cddpnt_rnd2);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_28_reg, 8, 15, 		ME_caddpnt_table->me1_ip_cddpnt_rnd3);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_64_reg, 16, 23, 	ME_caddpnt_table->me1_pi_cddpnt_rnd0);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_64_reg, 24, 31, 	ME_caddpnt_table->me1_pi_cddpnt_rnd1);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_68_reg, 0, 7, 		ME_caddpnt_table->me1_pi_cddpnt_rnd2);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_68_reg, 8, 15, 		ME_caddpnt_table->me1_pi_cddpnt_rnd3);

	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg, 0, 7, 		ME_caddpnt_table->me1_ip_cddpnt_st0);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg, 8, 15, 		ME_caddpnt_table->me1_ip_cddpnt_st1);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg, 16, 23, 	ME_caddpnt_table->me1_ip_cddpnt_st2);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg, 24, 31, 	ME_caddpnt_table->me1_ip_cddpnt_st3);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg, 0, 7, 		ME_caddpnt_table->me1_ip_cddpnt_st4);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg, 8, 15, 		ME_caddpnt_table->me1_ip_cddpnt_st5);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg, 16, 23, 	ME_caddpnt_table->me1_ip_cddpnt_st6);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg, 24, 31, 	ME_caddpnt_table->me1_ip_cddpnt_st7);

	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg, 0, 7, 		ME_caddpnt_table->me1_pi_cddpnt_st0);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg, 8, 15, 		ME_caddpnt_table->me1_pi_cddpnt_st1);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg, 16, 23, 	ME_caddpnt_table->me1_pi_cddpnt_st2);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg, 24, 31, 	ME_caddpnt_table->me1_pi_cddpnt_st3);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg, 0, 7, 		ME_caddpnt_table->me1_pi_cddpnt_st4);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg, 8, 15, 		ME_caddpnt_table->me1_pi_cddpnt_st5);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg, 16, 23, 	ME_caddpnt_table->me1_pi_cddpnt_st6);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg, 24, 31, 	ME_caddpnt_table->me1_pi_cddpnt_st7);
		
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_28_reg, 16, 28, 	ME_caddpnt_table->me1_ip_cddpnt_zmv);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_68_reg, 16, 28, 	ME_caddpnt_table->me1_pi_cddpnt_zmv);

	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg, 0, 12, 		ME_caddpnt_table->me1_ip_cddpnt_gmv);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_6C_reg, 0, 12, 		ME_caddpnt_table->me1_pi_cddpnt_gmv);
}

VOID ME_caddpnt_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_caddpnt_table *tmp_ME_caddpnt_table = NULL;
	static unsigned int u32_ID_Log_en=0;//,ES_Test_Value=0;
	ReadRegister(SOFTWARE1_SOFTWARE1_22_reg, 28,  28, &u32_ID_Log_en);//0xB809D758 [28]

	if(pParam->u1_MECandPnt_wrt_en == 0)//d5e4[16]
		return;

	if(s_pContext->_output_me_sceneAnalysis.u1_SportScene)
	{
		if(g_new_sport_mode){
			table_level = 12;
		}else{
			table_level = 11;
		}
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u8_force_caddpnt ==1)//MOKA-1417
	{
		table_level = 13;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);
          
          	//tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd0;
		//tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd1;
		//tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		//tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd0;
		//tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd1;
		//tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en && 
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode!=RepeatMode_OFF)
	{
		if(s_pContext->_output_me_sceneAnalysis.u1_casino_RP_detect_true || 
		   s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_HIGH){
			table_level = 9;
		}
		else if(s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_MID){
			table_level = 8;
		}
		else {//LOW
			table_level = 7;
		}
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_Avenger_RP_detect_true == 1 )
	{
		table_level = 1;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCanddpnt_Fast_Convergence_type ==1)
	{
		table_level = 2;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rndCanddpnt_Fast_Convergence_type ==2)
	{
		table_level = 3;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rnd_Slow_Convergence_true|| s_pContext->_output_me_sceneAnalysis.u2_panning_flag ==2) // pure slow pan | Slow Convergence
	{
		table_level = 4;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_Region_Periodic_detect_true == 3 &&(s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step!=0)&& (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step!=0) )
	{
		table_level = 5;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_zmv_on_flag == 1 )
	{
		table_level = 6;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en &&
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_OFF)
	{
		table_level = 10;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);
	}
	else
	{
		table_level = 0;
		tmp_ME_caddpnt_table = fwif_MEMC_get_ME_caddpnt_table(table_level);

		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_rnd3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_rnd3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_rnd3;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_pi_cddpnt_st0 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st0;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st1;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st2;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st3;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st4;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st5 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st5;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st6 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st6;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_st7 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_st7;

		tmp_ME_caddpnt_table->me1_ip_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_pi_cddpnt_gmv = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_cddpnt_gmv;
		tmp_ME_caddpnt_table->me1_ip_cddpnt_zmv = 255;
	}

	if(u32_ID_Log_en==1)//0xB809D758 [28]
	{
		static unsigned char counter = 0;
		if(counter % 10 == 0)
			rtd_pr_memc_info("[%s][%d]table_level =  %d",__FUNCTION__, __LINE__,table_level);
		counter++;
	}

	ME_caddpnt_wrtRegister(tmp_ME_caddpnt_table);
}

static _str_ME_Vbuf_LFSR_updStgh_table  ME_Vbuf_LFSR_updStgh_table[11]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3,0x3},	/*1*/
	{0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf,0xf},	/*2*/ //case: small object/fast convergency
	{0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N},	/*3*/
	{CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3,CTRL_N,0x3},	/*4*/
	{0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N},	/*5*/
	{0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3},	/*6*/
	{CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1,CTRL_N,0x1},	/*7*/
	{0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1,0x3,0x1},	/*8*/
	{0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1},	/*9*/ //repeat MID/HIGH
	{0x3,0x7,0x3,0x7,0x3,0x7,0x3,0x7,0x7,0x3,0x7,0x3,0x7,0x3,0x7,0x3},	/*10*/ //repeat LOW
};

_str_ME_Vbuf_LFSR_updStgh_table *fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(unsigned char level)
{
//	if (ME_Vbuf_LFSR_updStgh_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 10)
		return (_str_ME_Vbuf_LFSR_updStgh_table *)&ME_Vbuf_LFSR_updStgh_table[0];
	else
		return (_str_ME_Vbuf_LFSR_updStgh_table *)&ME_Vbuf_LFSR_updStgh_table[level];

}

unsigned char trans_lfsr_mask(unsigned char mask_size)
{
	PQL_OUTPUT_RESOLUTION output_Resolution = GetPQLContext()->_external_data._output_resolution;
	char mask_offset = MEMC_PARAM_TABLE.MV_SEARCHRANGE_Param[output_Resolution].random_mask_offset;

	if(mask_offset == -1){
		if(mask_size==3){
			return 1;
		}
		else if(mask_size==7){
			return 3;
		}
		else if(mask_size==15){
			return 7;
		}
		return 1;
	}
	return mask_size;
}

VOID  ME_Vbuf_LFSR_updStgh_wrtRegister(_str_ME_Vbuf_LFSR_updStgh_table *ME_Vbuf_LFSR_updStgh_table)
{
	kme_vbuf_top_kme_vbuf_top_0c_RBUS kme_vbuf_top_kme_vbuf_top_0c_reg;
	kme_vbuf_top_kme_vbuf_top_5c_RBUS kme_vbuf_top_kme_vbuf_top_5c_reg;

	kme_vbuf_top_kme_vbuf_top_0c_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg);
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask0_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x);
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask0_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y);
	
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask1_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x);
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask1_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y);
	
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask2_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x);
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask2_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y);
	
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask3_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x);
	kme_vbuf_top_kme_vbuf_top_0c_reg.vbuf_ip_1st_lfsr_mask3_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y);
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, kme_vbuf_top_kme_vbuf_top_0c_reg.regValue);

	kme_vbuf_top_kme_vbuf_top_5c_reg.regValue = rtd_inl(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg);
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask0_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x);
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask0_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y);
	
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask1_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x);
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask1_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y);
	
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask2_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x);
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask2_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y);
	
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask3_x = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x);
	kme_vbuf_top_kme_vbuf_top_5c_reg.vbuf_pi_1st_lfsr_mask3_y = trans_lfsr_mask(ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y);
	rtd_outl(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, kme_vbuf_top_kme_vbuf_top_5c_reg.regValue);

	/*
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 3, 		ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 4, 7, 		ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 8,11, 		ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 12, 15, 	ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 16, 19, 	ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 20, 23, 	ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 24, 27, 	ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 28, 31, 	ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y);

	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 3, 		ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 4, 7, 		ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 8,11, 		ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 12, 15, 	ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 16, 19, 	ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 20, 23, 	ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 24, 27, 	ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 28, 31, 	ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y);
	*/
}

VOID ME_Vbuf_LFSR_updStgh_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();

	static unsigned int print_cnt = 0 ;
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_Vbuf_LFSR_updStgh_table *tmp_ME_Vbuf_LFSR_updStgh_table = NULL;
	unsigned char ME_Style = (MEMC_Lib_Get_ME_Sytle()>=ME_STYLE_NUM) ? ME_STYLE_NORMAL : MEMC_Lib_Get_ME_Sytle();

	print_cnt++;

	if(pParam->u1_MEUpdStgh_wrt_en== 0)//d5e4[9]
		return;

	if(MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].u1_set_LFSR){
		tmp_ME_Vbuf_LFSR_updStgh_table = (_str_ME_Vbuf_LFSR_updStgh_table *)&MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].LFSR_table;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_SportScene){
		table_level = 2;
		tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en &&
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode!=RepeatMode_OFF) {
		if(s_pContext->_external_data.u8_repeatCase==RepeatCase_HoldOn||s_pContext->_external_data.u8_repeatCase==RepeatCase_SlowMV){
			table_level = 10;
		}
		else if(s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_LOW ||s_pContext->_output_wrt_comreg.u8_force_repeat_level_flag==1){
			table_level = 10;
		}
		else {//MID/HIGH
			table_level = 9;
		}
		tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rnd_Slow_Convergence_true || s_pContext->_output_me_sceneAnalysis.u2_panning_flag ==2 || s_pContext->_output_wrt_comreg.u1_ME1_rnd_mask_Slow_Convergence_true ) // pure slow pan | Slow Convergence
	{
		//  lfsr_mask
		table_level = 1;
		tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_rnd_mask_Fast_Convergence_true ==1)
	{
		//  lfsr_mask
		table_level = 2;
		tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
	}
	else if(((s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true ==1)||(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true ==4))&&
			((s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step != 0)&&(s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step == 0)))
	{
		//  lfsr_mask
		if(s_pContext->_output_read_comreg.s11_rgn_mvx_max < 30)
		{
			table_level = 6;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
		}
		else
		{
			table_level = 5;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_y;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_y;
		}
	}
	else if(((s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true ==1)||(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true ==4))&&
			((s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step == 0)&&(s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step != 0)))
	{
		//  lfsr_mask
		if(s_pContext->_output_read_comreg.s11_rgn_mvy_max < 30)
		{
			table_level = 8;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);	
		}
		else
		{
			table_level = 7;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);		

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_x;		
		}		
	}
	else
	{

		//  lfsr_mask
		if( (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step!= 0) && (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step != 0))
		{
			table_level = 1;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);
		}
		else if( (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step!= 0) && (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step == 0))
		{				
			table_level =3;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_y;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_y;
			
		}
		else if ( (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step == 0) && (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step != 0))
		{
			table_level =4;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_x;
			
		}
		else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en && 
			s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_OFF) {
			table_level = 0;
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_y;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_y;
		}
		else
		{
			table_level = 0;//load default
			tmp_ME_Vbuf_LFSR_updStgh_table = fwif_MEMC_get_ME_Vbuf_LFSR_updStgh_table(table_level);//load default structure address

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_x;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_x = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_x;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_ip_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_ip_1st_lfsr_mask3_y;

			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask0_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask0_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask1_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask1_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask2_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask2_y;
			tmp_ME_Vbuf_LFSR_updStgh_table->vbuf_pi_1st_lfsr_mask3_y = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_vbuf_pi_1st_lfsr_mask3_y;
		}		

	}

	ME_Vbuf_LFSR_updStgh_wrtRegister(tmp_ME_Vbuf_LFSR_updStgh_table);
}


static _str_ME_cost_table  ME_cost_table[5]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0xffffffff,0xa,0xffffffff,0xa,0x1,0x100,0x100,0x100,0x0,0x4,0x41,0xc,0x3,0x0,0x7fb,0x7fe,0x0,0x1e4,0x39c,0x0,0x5,0x33,0x0,0x0},	/*1*/
	{0x3e,0x3,0x0,0x1,0x1,0x88,0x88,0x24,0x0,0x4,0x41,0xc,0x3,0x0,0x7fb,0x7fe,0x0,0x1e4,0x39c,0x0,0x5,0x33,0x0,0x0},	/*2*/
	{0x0,0xf,0x0,0x1,0x1,0xa,0xa,0x24,0x0,0x4,0x41,0xc,0x3,0x0,0x7fb,0x7fe,0x0,0x1e4,0x39c,0x0,0x5,0x33,0x0,0x0},	/*3*/
	{0x0,0x1,0x0,0x1,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*4*/
};

_str_ME_cost_table *fwif_MEMC_get_ME_cost_table(unsigned char level)
{
//	if (ME_cost_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 4)
		return (_str_ME_cost_table *)&ME_cost_table[0];
	else
		return (_str_ME_cost_table *)&ME_cost_table[level];

}

VOID  ME_cost_wrtRegister(_str_ME_cost_table *ME_cost_table)
{
	kme_me1_top1_me1_common1_16_RBUS kme_me1_top1_me1_common1_16_reg;
	kme_me1_top1_me1_common1_17_RBUS kme_me1_top1_me1_common1_17_reg;
	kme_me1_top1_me1_common1_18_RBUS kme_me1_top1_me1_common1_18_reg;
	kme_me1_top1_me1_common1_19_RBUS kme_me1_top1_me1_common1_19_reg;
	kme_me1_top1_me1_common1_20_RBUS kme_me1_top1_me1_common1_20_reg;
	kme_me1_top1_me1_common1_21_RBUS kme_me1_top1_me1_common1_21_reg;

	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP1_GMVCOST_0_reg, 0, 31, 	ME_cost_table->me1_gmvcost_sel);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP1_GMVCOST_2_reg, 0, 5,		ME_cost_table->me1_gmvd_gain);
	WriteRegister(KME_ME2_CALC1_KME_ME2_GMVCOST_0_reg, 0, 31, 		ME_cost_table->me2_gmvcost_sel);
	WriteRegister(KME_ME2_CALC1_KME_ME2_GMVCOST_1_reg, 0, 5, 			ME_cost_table->me2_gmvd_gain);

	WriteRegister(HARDWARE_HARDWARE_18_reg, 2, 2, 					ME_cost_table->pql_me1_gmvd_sel_en);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_4C_reg, 0, 12, 			ME_cost_table->me1_pi_gmvd_cost_limt);
	WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_0C_reg, 0, 12, 			ME_cost_table->me1_ip_gmvd_cost_limt);
	WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_78_reg, 15, 27, 			ME_cost_table->me2_ph_gmvd_cost_limt);

	kme_me1_top1_me1_common1_16_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_16_reg);
	kme_me1_top1_me1_common1_16_reg.me1_gmvd_ucf_x1 = ME_cost_table->me1_gmvd_ucf_x1;
	kme_me1_top1_me1_common1_16_reg.me1_gmvd_ucf_x2 = ME_cost_table->me1_gmvd_ucf_x2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_16_reg, kme_me1_top1_me1_common1_16_reg.regValue);

	kme_me1_top1_me1_common1_17_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_17_reg);
	kme_me1_top1_me1_common1_17_reg.me1_gmvd_ucf_x3 = ME_cost_table->me1_gmvd_ucf_x3;
	kme_me1_top1_me1_common1_17_reg.me1_gmvd_ucf_y1 = ME_cost_table->me1_gmvd_ucf_y1;
	kme_me1_top1_me1_common1_17_reg.me1_gmvd_ucf_y2 = ME_cost_table->me1_gmvd_ucf_y2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_17_reg, kme_me1_top1_me1_common1_17_reg.regValue);

	kme_me1_top1_me1_common1_18_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_18_reg);
	kme_me1_top1_me1_common1_18_reg.me1_gmvd_ucf_y3 = ME_cost_table->me1_gmvd_ucf_y3;
	kme_me1_top1_me1_common1_18_reg.me1_gmvd_ucf_slope1 = ME_cost_table->me1_gmvd_ucf_slope1;
	kme_me1_top1_me1_common1_18_reg.me1_gmvd_ucf_slope2 = ME_cost_table->me1_gmvd_ucf_slope2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_18_reg, kme_me1_top1_me1_common1_18_reg.regValue);

	kme_me1_top1_me1_common1_19_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_19_reg);
	kme_me1_top1_me1_common1_19_reg.me1_gmvd_cnt_x1 = ME_cost_table->me1_gmvd_cnt_x1;
	kme_me1_top1_me1_common1_19_reg.me1_gmvd_cnt_x2 = ME_cost_table->me1_gmvd_cnt_x2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_19_reg, kme_me1_top1_me1_common1_19_reg.regValue);

	kme_me1_top1_me1_common1_20_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_20_reg);
	kme_me1_top1_me1_common1_20_reg.me1_gmvd_cnt_x3 = ME_cost_table->me1_gmvd_cnt_x3;
	kme_me1_top1_me1_common1_20_reg.me1_gmvd_cnt_y1 = ME_cost_table->me1_gmvd_cnt_y1;
	kme_me1_top1_me1_common1_20_reg.me1_gmvd_cnt_y2 = ME_cost_table->me1_gmvd_cnt_y2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_20_reg, kme_me1_top1_me1_common1_20_reg.regValue);

	kme_me1_top1_me1_common1_21_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_21_reg);
	kme_me1_top1_me1_common1_21_reg.me1_gmvd_cnt_y3 = ME_cost_table->me1_gmvd_cnt_y3;
	kme_me1_top1_me1_common1_21_reg.me1_gmvd_cnt_slope1 = ME_cost_table->me1_gmvd_cnt_slope1;
	kme_me1_top1_me1_common1_21_reg.me1_gmvd_cnt_slope2 = ME_cost_table->me1_gmvd_cnt_slope2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_21_reg, kme_me1_top1_me1_common1_21_reg.regValue);

}

VOID ME_cost_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_cost_table *tmp_ME_cost_table = NULL;

	if(pParam->u1_ME_Cost_Ctrl== 0)
		return;

	if( s_pContext->_output_wrt_comreg.u1_casino_RP_detect_true == 1 )
	{
		table_level = 1;
		tmp_ME_cost_table = fwif_MEMC_get_ME_cost_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u1_KME_gmvd_cost_type == 1 )
	{
		table_level = 2;
		tmp_ME_cost_table = fwif_MEMC_get_ME_cost_table(table_level);
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1 )
	{
		table_level = 3;
		tmp_ME_cost_table = fwif_MEMC_get_ME_cost_table(table_level);
	}
	else
	{
		table_level = 4;
		tmp_ME_cost_table = fwif_MEMC_get_ME_cost_table(table_level);

		tmp_ME_cost_table->pql_me1_gmvd_sel_en		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_sel;
		tmp_ME_cost_table->me1_pi_gmvd_cost_limt		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_pi_gmvd_cost_limt;
		tmp_ME_cost_table->me1_ip_gmvd_cost_limt		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_ip_gmvd_cost_limt;
		tmp_ME_cost_table->me2_ph_gmvd_cost_limt		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_ph_gmvd_cost_limt;

		tmp_ME_cost_table->me1_gmvd_ucf_x1	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_x1;
		tmp_ME_cost_table->me1_gmvd_ucf_x2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_x2;
		tmp_ME_cost_table->me1_gmvd_ucf_x3	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_x3;
		tmp_ME_cost_table->me1_gmvd_ucf_y1	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_y1;
		tmp_ME_cost_table->me1_gmvd_ucf_y2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_y2;
		tmp_ME_cost_table->me1_gmvd_ucf_y3	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_y3;
		tmp_ME_cost_table->me1_gmvd_ucf_slope1	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_slope1;
		tmp_ME_cost_table->me1_gmvd_ucf_slope2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_ucf_slope2;

		tmp_ME_cost_table->me1_gmvd_cnt_x1	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_x1;
		tmp_ME_cost_table->me1_gmvd_cnt_x2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_x2;
		tmp_ME_cost_table->me1_gmvd_cnt_x3	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_x3;
		tmp_ME_cost_table->me1_gmvd_cnt_y1	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_y1;
		tmp_ME_cost_table->me1_gmvd_cnt_y2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_y2;
		tmp_ME_cost_table->me1_gmvd_cnt_y3	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_y3;
		 tmp_ME_cost_table->me1_gmvd_cnt_slope1 	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_slope1;
		 tmp_ME_cost_table->me1_gmvd_cnt_slope2	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmvd_cnt_slope2;
	}

	ME_cost_wrtRegister(tmp_ME_cost_table);
}

VOID ME_gmv_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();

	if(pParam->u1_GMV_wrt_en== 0)
		return;

	if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true == 1 || s_pContext->_output_Patch_Manage.u1_patch_highFreq_rp_true)
	{
		//k4lp RP_detect no need
		//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0x0);

	}
	else
	{
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_gmv_sel);
	}
}

#define FLP_ALP_COE_NUM	(7)
#define FLP_ALP_COE_SUM (256)

// horizontal and vertical coefficients should be the same, if not, please modify the fwif_MEMC_get_ME_ipme_flp_alp_table
static _str_ME_ipme_flp_alp_table   ME_ipme_flp_alp_table[5]={
	{0x40,0x30,0x20,0x10,0x0,0x0,0x0,0x40,0x30,0x20,0x10,0x0,0x0,0x0},	/*0.load default*/
	{0x16,0x16,0x14,0x14,0x12,0x12,0x10,0x16,0x16,0x14,0x14,0x12,0x12,0x10},	/*1*/
	{0x20,0x1c,0x18,0x14,0x10,0xe,0xa,0x20,0x1c,0x18,0x14,0x10,0xe,0xa},	/*2*/ //repeat MID/HIGH
	{0x30,0x26,0x1C,0x12,0x8,0x7,0x5,0x30,0x26,0x1C,0x12,0x8,0x7,0x5},		/*3*/ //repeat LOW
	{0x40,0x30,0x20,0x10,0x0,0x0,0x0,0x40,0x30,0x20,0x10,0x0,0x0,0x0},		/*4*/ //repeat OFF
};

void finetune_flp_alp_cof(unsigned char *flp_alp_cof)
{
	char u8_j=0;
	unsigned char u8_k=0;
	unsigned short flp_alp_sum = flp_alp_cof[0]+2*(flp_alp_cof[1]+flp_alp_cof[2]+flp_alp_cof[3]+flp_alp_cof[4]+flp_alp_cof[5]+flp_alp_cof[6]);
	short compensation_num = 0;
 
	if(flp_alp_sum==FLP_ALP_COE_SUM){
		return;
	}

	// if sum of coefficient is odd, modify the coefficient0. let sum of coefficient be even
	if(((flp_alp_sum>>1)<<1)!=flp_alp_sum) {
		if(flp_alp_sum>FLP_ALP_COE_SUM){
			flp_alp_cof[0] -= 1;
		}else{
			flp_alp_cof[0] += 1;
		}
	}
	
	flp_alp_sum = flp_alp_cof[0]+2*(flp_alp_cof[1]+flp_alp_cof[2]+flp_alp_cof[3]+flp_alp_cof[4]+flp_alp_cof[5]+flp_alp_cof[6]);
	if(flp_alp_sum==FLP_ALP_COE_SUM){
		return;
	}

	// modify the coefficient when sum of coefficient isn't eqaul to 256
	if(flp_alp_sum>FLP_ALP_COE_SUM){
		compensation_num = (flp_alp_sum-FLP_ALP_COE_SUM)>>1;
		u8_k = FLP_ALP_COE_NUM-1;
		for(u8_j=0; u8_j<compensation_num; u8_j++){
			
			if(flp_alp_cof[u8_k]>1){
				flp_alp_cof[u8_k] -= 1;
			}else {
				u8_j--;
			}
			u8_k = (u8_k==0) ? FLP_ALP_COE_NUM-1 : u8_k-1;
		}
	}
	else if(flp_alp_sum<FLP_ALP_COE_SUM){
		compensation_num = (FLP_ALP_COE_SUM-flp_alp_sum)>>1;
		u8_k = FLP_ALP_COE_NUM-1;
		for(u8_j=0; u8_j<compensation_num; u8_j++){
			flp_alp_cof[u8_k]+=1;
			u8_k = (u8_k==0) ? FLP_ALP_COE_NUM-1 : u8_k-1;
		}
	}
}

#if 0
_str_ME_ipme_flp_alp_table *fwif_MEMC_get_ME_ipme_flp_alp_table(unsigned char level)
{
//	if (ME_ipme_flp_alp_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 4)
		return (_str_ME_ipme_flp_alp_table *)&ME_ipme_flp_alp_table[0];
	else
		return (_str_ME_ipme_flp_alp_table *)&ME_ipme_flp_alp_table[level];

}
#else
_str_ME_ipme_flp_alp_table *fwif_MEMC_get_ME_ipme_flp_alp_table(unsigned char level_cur)
{
	static _str_ME_ipme_flp_alp_table* flp_alp_table_cur = &ME_ipme_flp_alp_table[0];
	static _str_ME_ipme_flp_alp_table* flp_alp_table_pre = &ME_ipme_flp_alp_table[0];
	unsigned char flp_alp_cof_cal[FLP_ALP_COE_NUM]={0};
	unsigned int log_en, max_flp_alp_cnt = 20;
	static unsigned char level_pre = 0;
	static unsigned char u8_flp_alp_cnt = 0;
	ReadRegister(SOFTWARE3_SOFTWARE3_54_reg, 16, 22, &max_flp_alp_cnt);
	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 26, 26, &log_en);

	level_cur = (level_cur>4) ? 4 : level_cur;

	if(level_cur!=level_pre){
		memcpy(flp_alp_table_pre, flp_alp_table_cur, sizeof(_str_ME_ipme_flp_alp_table));
		u8_flp_alp_cnt = 0;
		level_pre = level_cur;
	}

	if(u8_flp_alp_cnt<=max_flp_alp_cnt){
  		flp_alp_cof_cal[0] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp0 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp0 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[1] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp1 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp1 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[2] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp2 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp2 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[3] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp3 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp3 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[4] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp4 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp4 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[5] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp5 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp5 + 1)/(max_flp_alp_cnt*2);
  		flp_alp_cof_cal[6] = (u8_flp_alp_cnt*2*ME_ipme_flp_alp_table[level_cur].ipme_h_flp_alp6 + (max_flp_alp_cnt-u8_flp_alp_cnt)*2*flp_alp_table_pre->ipme_h_flp_alp6 + 1)/(max_flp_alp_cnt*2);

		finetune_flp_alp_cof(flp_alp_cof_cal);
		flp_alp_table_cur->ipme_v_flp_alp0 = flp_alp_cof_cal[0];
		flp_alp_table_cur->ipme_v_flp_alp1 = flp_alp_cof_cal[1];
		flp_alp_table_cur->ipme_v_flp_alp2 = flp_alp_cof_cal[2];
		flp_alp_table_cur->ipme_v_flp_alp3 = flp_alp_cof_cal[3];
		flp_alp_table_cur->ipme_v_flp_alp4 = flp_alp_cof_cal[4];
		flp_alp_table_cur->ipme_v_flp_alp5 = flp_alp_cof_cal[5];
		flp_alp_table_cur->ipme_v_flp_alp6 = flp_alp_cof_cal[6];
		flp_alp_table_cur->ipme_h_flp_alp0 = flp_alp_cof_cal[0];
		flp_alp_table_cur->ipme_h_flp_alp1 = flp_alp_cof_cal[1];
		flp_alp_table_cur->ipme_h_flp_alp2 = flp_alp_cof_cal[2];
		flp_alp_table_cur->ipme_h_flp_alp3 = flp_alp_cof_cal[3];
		flp_alp_table_cur->ipme_h_flp_alp4 = flp_alp_cof_cal[4];
		flp_alp_table_cur->ipme_h_flp_alp5 = flp_alp_cof_cal[5];
		flp_alp_table_cur->ipme_h_flp_alp6 = flp_alp_cof_cal[6];
		u8_flp_alp_cnt++;
	}

#if 1
	if(log_en){
		rtd_pr_memc_crit("[flp_alp_table] lvl,%d,%d, %d,%d,%d,%d,%d,%d,%d\n",level_pre, level_cur, flp_alp_table_cur->ipme_v_flp_alp0, flp_alp_table_cur->ipme_v_flp_alp1, 
				flp_alp_table_cur->ipme_v_flp_alp2, flp_alp_table_cur->ipme_v_flp_alp3, flp_alp_table_cur->ipme_v_flp_alp4, flp_alp_table_cur->ipme_v_flp_alp5, flp_alp_table_cur->ipme_v_flp_alp6);
	}
#endif
	return flp_alp_table_cur;
}
#endif

VOID   ME_ipme_flp_alp_wrtRegister(_str_ME_ipme_flp_alp_table *ME_ipme_flp_alp_table)
{
	kme_ipme_kme_ipme_8c_RBUS kme_ipme_kme_ipme_8c_reg;
	kme_ipme_kme_ipme_90_RBUS kme_ipme_kme_ipme_90_reg;
	kme_ipme_kme_ipme_94_RBUS kme_ipme_kme_ipme_94_reg;
	kme_ipme_kme_ipme_98_RBUS kme_ipme_kme_ipme_98_reg;
	kme_ipme_kme_ipme_04_RBUS kme_ipme_kme_ipme_04_reg;

	kme_ipme_kme_ipme_8c_reg.regValue = rtd_inl(KME_IPME_KME_IPME_8C_reg);
	kme_ipme_kme_ipme_8c_reg.ipme_h_flp_alp0 = ME_ipme_flp_alp_table->ipme_h_flp_alp0;
	kme_ipme_kme_ipme_8c_reg.ipme_h_flp_alp1 = ME_ipme_flp_alp_table->ipme_h_flp_alp1;
	kme_ipme_kme_ipme_8c_reg.ipme_h_flp_alp2 = ME_ipme_flp_alp_table->ipme_h_flp_alp2;
	rtd_outl(KME_IPME_KME_IPME_8C_reg, kme_ipme_kme_ipme_8c_reg.regValue);

	kme_ipme_kme_ipme_90_reg.regValue = rtd_inl(KME_IPME_KME_IPME_90_reg);
	kme_ipme_kme_ipme_90_reg.ipme_h_flp_alp3 = ME_ipme_flp_alp_table->ipme_h_flp_alp3;
	kme_ipme_kme_ipme_90_reg.ipme_h_flp_alp4 = ME_ipme_flp_alp_table->ipme_h_flp_alp4;
	kme_ipme_kme_ipme_90_reg.ipme_h_flp_alp5 = ME_ipme_flp_alp_table->ipme_h_flp_alp5;
	rtd_outl(KME_IPME_KME_IPME_90_reg, kme_ipme_kme_ipme_90_reg.regValue);

	kme_ipme_kme_ipme_94_reg.regValue = rtd_inl(KME_IPME_KME_IPME_94_reg);
	kme_ipme_kme_ipme_94_reg.ipme_h_flp_alp6 = ME_ipme_flp_alp_table->ipme_h_flp_alp6;
	kme_ipme_kme_ipme_94_reg.ipme_v_flp_alp0 = ME_ipme_flp_alp_table->ipme_v_flp_alp0;
	kme_ipme_kme_ipme_94_reg.ipme_v_flp_alp1 = ME_ipme_flp_alp_table->ipme_v_flp_alp1;
	rtd_outl(KME_IPME_KME_IPME_94_reg, kme_ipme_kme_ipme_94_reg.regValue);

	kme_ipme_kme_ipme_98_reg.regValue = rtd_inl(KME_IPME_KME_IPME_98_reg);
	kme_ipme_kme_ipme_98_reg.ipme_v_flp_alp2 = ME_ipme_flp_alp_table->ipme_v_flp_alp2;
	kme_ipme_kme_ipme_98_reg.ipme_v_flp_alp3 = ME_ipme_flp_alp_table->ipme_v_flp_alp3;
	kme_ipme_kme_ipme_98_reg.ipme_v_flp_alp4 = ME_ipme_flp_alp_table->ipme_v_flp_alp4;
	rtd_outl(KME_IPME_KME_IPME_98_reg, kme_ipme_kme_ipme_98_reg.regValue);

	kme_ipme_kme_ipme_04_reg.regValue = rtd_inl(KME_IPME_KME_IPME_04_reg);
	kme_ipme_kme_ipme_04_reg.ipme_v_flp_alp5 = ME_ipme_flp_alp_table->ipme_v_flp_alp5;
	kme_ipme_kme_ipme_04_reg.ipme_v_flp_alp6 = ME_ipme_flp_alp_table->ipme_v_flp_alp6;
	rtd_outl(KME_IPME_KME_IPME_04_reg, kme_ipme_kme_ipme_04_reg.regValue);

}

extern unsigned char total_frm;
VOID ME_ipme_flp_alp_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_ipme_flp_alp_table *tmp_ME_ipme_flp_alp_table = NULL;
	_str_ME_ipme_flp_alp_table tmmmp_ME_ipme_flp_alp_table = {0};
	unsigned char ME_Style = (MEMC_Lib_Get_ME_Sytle()>=ME_STYLE_NUM) ? ME_STYLE_NORMAL : MEMC_Lib_Get_ME_Sytle();
	unsigned int log_en;
	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 27, 27, &log_en);

	if(pParam->u1_ME_ipme_flp_alp_wrt_en== 0)//d5e4[18]
		return;

	if(MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].u1_set_flp_alp){
		tmp_ME_ipme_flp_alp_table = (_str_ME_ipme_flp_alp_table *)&MEMC_STYLE_TABLE.ME_STYLE_PARAM[ME_Style].flp_alp_table;
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en && 
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode!=RepeatMode_OFF) {
		//if(s_pContext->_output_me_sceneAnalysis.u1_casino_RP_detect_true){
		//	table_level = 3; {0x14,0x14,0x14,0x14,0x14,0x13,0x13,0x14,0x14,0x14,0x14,0x14,0x13,0x13}
		//}
		//else{
		//	table_level = 4; {60,50,16,16,8,4,2,60,50,16,16,8,4,2}
		//}
		if(s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_LOW) {
			table_level = 3;
		}
		else {//MID/HIGH
			table_level = 2;
		}
		tmp_ME_ipme_flp_alp_table = fwif_MEMC_get_ME_ipme_flp_alp_table(table_level);
	}
	else if(s_pContext->_output_wrt_comreg.u1_IPME_increase_flp_type==2)
	{
		table_level = 1;
		tmp_ME_ipme_flp_alp_table = fwif_MEMC_get_ME_ipme_flp_alp_table(table_level);
	}
	else if((s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1 && s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true !=3)|| s_pContext->_output_wrt_comreg.u1_IPME_increase_flp_type==1 )
	{
		table_level = 2;
		tmp_ME_ipme_flp_alp_table = fwif_MEMC_get_ME_ipme_flp_alp_table(table_level);
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en &&
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode==RepeatMode_OFF) {
		table_level = 4;
		tmp_ME_ipme_flp_alp_table = fwif_MEMC_get_ME_ipme_flp_alp_table(table_level);
	}
	else
	{
		table_level = 0;
		tmp_ME_ipme_flp_alp_table = fwif_MEMC_get_ME_ipme_flp_alp_table(table_level);

		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp0=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp0;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp1=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp1;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp2=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp2;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp3=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp3;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp4=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp4;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp5=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp5;
		tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp6=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp6;

		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp0=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp0;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp1=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp1;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp2=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp2;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp3=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp3;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp4=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp4;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp5=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp5;
		tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp6=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_v_flp_alp6;
	}

	if(s_pContext->_output_me_sceneAnalysis.u1_Brightness_Chg_Cnt > 0)
	{
		unsigned char alpha = s_pContext->_output_me_sceneAnalysis.u1_Brightness_Chg_Cnt;
		if(log_en == 1){
			//rtd_pr_memc_emerg("[g_Hist_Y_Mean_Value][aa][,%d,][,%d,%d,]\n", alpha, tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp0, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_ipme_h_flp_alp0);
		}

		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp0 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp0 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp1 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp1 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp2 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp2 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp3 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp3 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp4 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp4 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp5 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp5 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp6 = (tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp6 * ((total_frm * 5) + alpha))/(total_frm * 5);

		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp0 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp0 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp1 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp1 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp2 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp2 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp3 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp3 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp4 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp4 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp5 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp5 * ((total_frm * 5) + alpha))/(total_frm * 5);
		tmmmp_ME_ipme_flp_alp_table.ipme_v_flp_alp6 = (tmp_ME_ipme_flp_alp_table->ipme_v_flp_alp6 * ((total_frm * 5) + alpha))/(total_frm * 5);

		if(log_en == 1){
			//rtd_pr_memc_emerg("[g_Hist_Y_Mean_Value][bb][,%d,][,%d,%d,]\n", alpha, tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp0, tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp1);
		}
	}

	if(log_en == 1){
		rtd_pr_memc_emerg("[g_Hist_Y_Mean_Value][bb][,%d,][,%d,%d,][,%d,%d,][%d]\n", s_pContext->_output_me_sceneAnalysis.u1_Brightness_Chg_Cnt, tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp0, tmp_ME_ipme_flp_alp_table->ipme_h_flp_alp1, tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp0, tmmmp_ME_ipme_flp_alp_table.ipme_h_flp_alp1, table_level);
	}

	if(s_pContext->_output_me_sceneAnalysis.u1_Brightness_Chg_Cnt > 0){
		ME_ipme_flp_alp_wrtRegister((_str_ME_ipme_flp_alp_table *)&tmmmp_ME_ipme_flp_alp_table);
	}
	else{
		ME_ipme_flp_alp_wrtRegister(tmp_ME_ipme_flp_alp_table);
	}

	if(log_en) { //d9ec[27]
		rtd_pr_memc_emerg("[FLP ALP][table_level][%d] RM:%d\n", table_level, s_pContext->_output_me_sceneAnalysis.u8_RepeatMode);
	}
}

static _str_ME_mvd_cuv_table   ME_mvd_cuv_table[2]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0x0,0x1e5,0x321,0x0,0x26,0x4e,0x5,0x8},	/*1*/
};

_str_ME_mvd_cuv_table *fwif_MEMC_get_ME_mvd_cuv_table(unsigned char level)
{
//	if (ME_mvd_cuv_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 1)
		return (_str_ME_mvd_cuv_table *)&ME_mvd_cuv_table[0];
	else
		return (_str_ME_mvd_cuv_table *)&ME_mvd_cuv_table[level];

}

VOID   ME_mvd_cuv_wrtRegister(_str_ME_mvd_cuv_table *ME_mvd_cuv_table)
{
	kme_me1_top1_me1_common1_06_RBUS kme_me1_top1_me1_common1_06_reg;
	kme_me1_top1_me1_common1_07_RBUS kme_me1_top1_me1_common1_07_reg;
	kme_me1_top1_me1_common1_08_RBUS kme_me1_top1_me1_common1_08_reg;

	kme_me1_top1_me1_common1_06_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_06_reg);
	kme_me1_top1_me1_common1_06_reg.me1_mvd_cuv_x1 = ME_mvd_cuv_table->me1_mvd_cuv_x1;
	kme_me1_top1_me1_common1_06_reg.me1_mvd_cuv_x2 = ME_mvd_cuv_table->me1_mvd_cuv_x2;
	kme_me1_top1_me1_common1_06_reg.me1_mvd_cuv_x3 = ME_mvd_cuv_table->me1_mvd_cuv_x3;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_06_reg, kme_me1_top1_me1_common1_06_reg.regValue);

	kme_me1_top1_me1_common1_07_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_07_reg);
	kme_me1_top1_me1_common1_07_reg.me1_mvd_cuv_y1 = ME_mvd_cuv_table->me1_mvd_cuv_y1;
	kme_me1_top1_me1_common1_07_reg.me1_mvd_cuv_y2 = ME_mvd_cuv_table->me1_mvd_cuv_y2;
	kme_me1_top1_me1_common1_07_reg.me1_mvd_cuv_y3 = ME_mvd_cuv_table->me1_mvd_cuv_y3;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_07_reg, kme_me1_top1_me1_common1_07_reg.regValue);

	kme_me1_top1_me1_common1_08_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_08_reg);
	kme_me1_top1_me1_common1_08_reg.me1_mvd_cuv_slope1 = ME_mvd_cuv_table->me1_mvd_cuv_slope1;
	kme_me1_top1_me1_common1_08_reg.me1_mvd_cuv_slope2 = ME_mvd_cuv_table->me1_mvd_cuv_slope2;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_08_reg, kme_me1_top1_me1_common1_08_reg.regValue);

}

VOID ME_mvd_cuv_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_mvd_cuv_table *tmp_ME_mvd_cuv_table = NULL;

	if(pParam->u1_ME_mvd_cuv_wrt_en== 0)
		return;

	if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1 || s_pContext->_output_Patch_Manage.u1_patch_highFreq_rp_true)
	{
		table_level = 1;
		tmp_ME_mvd_cuv_table = fwif_MEMC_get_ME_mvd_cuv_table(table_level);
	}
	else
	{
		table_level = 0;
		tmp_ME_mvd_cuv_table = fwif_MEMC_get_ME_mvd_cuv_table(table_level);

		tmp_ME_mvd_cuv_table->me1_mvd_cuv_x1=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_x1;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_x2=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_x2;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_x3=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_x3;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_y1=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_y1;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_y2=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_y2;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_y3=		s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_y3;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_slope1=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_slope1;
		tmp_ME_mvd_cuv_table->me1_mvd_cuv_slope2=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_mvd_cuv_slope2;
	}

	ME_mvd_cuv_wrtRegister(tmp_ME_mvd_cuv_table);

}

static _str_ME_DRP_table   ME_DRP_table[3]={
	{0x0,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0x1,CTRL_N,CTRL_N,CTRL_N},	/*1*/
	{0x0,0x384,0x110,0xF8},	/*2*/
};

_str_ME_DRP_table *fwif_MEMC_get_ME_DRP_table(unsigned char level)
{
//	if (ME_DRP_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 2)
		return (_str_ME_DRP_table *)&ME_DRP_table[0];
	else
		return (_str_ME_DRP_table *)&ME_DRP_table[level];

}

VOID   ME_DRP_wrtRegister(_str_ME_DRP_table *ME_DRP_table)
{
	kme_me1_top0_kme_me1_drp_2_RBUS kme_me1_top0_kme_me1_drp_2_reg;

	kme_me1_top0_kme_me1_drp_2_reg.regValue = rtd_inl(KME_ME1_TOP0_KME_ME1_DRP_2_reg);
	kme_me1_top0_kme_me1_drp_2_reg.me1_drp_y0 = ME_DRP_table->me1_drp_cuv_y0;
	kme_me1_top0_kme_me1_drp_2_reg.me1_drp_y1 = ME_DRP_table->me1_drp_cuv_y1;
	kme_me1_top0_kme_me1_drp_2_reg.me1_drp_y2 = ME_DRP_table->me1_drp_cuv_y2;
	rtd_outl(KME_ME1_TOP0_KME_ME1_DRP_2_reg, kme_me1_top0_kme_me1_drp_2_reg.regValue);

	WriteRegister(KME_ME1_TOP0_KME_ME1_DRP_reg, 31, 31, 		ME_DRP_table->me1_drp_en);
}

VOID ME_DRP_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_DRP_table *tmp_ME_DRP_table = NULL;

	if(pParam->u1_ME1_DRP_en == 0)
		return;
	#if (IC_K5LP || IC_K6LP || IC_K8LP)
	if(s_pContext->_output_wrt_comreg.u1_ME1_DRP_type == 1)
	{
		table_level = 1;
		tmp_ME_DRP_table = fwif_MEMC_get_ME_DRP_table(table_level);

		tmp_ME_DRP_table->me1_drp_cuv_y2=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y2;
		tmp_ME_DRP_table->me1_drp_cuv_y1=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y1;
		tmp_ME_DRP_table->me1_drp_cuv_y0=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y0;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1 ) {

		 if(s_pContext->_output_me_sceneAnalysis.u1_RP_DTLPRD_move_check >= 3){
		 	table_level = 1;
			tmp_ME_DRP_table = fwif_MEMC_get_ME_DRP_table(table_level);

			tmp_ME_DRP_table->me1_drp_cuv_y2=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y2;
			tmp_ME_DRP_table->me1_drp_cuv_y1=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y1;
			tmp_ME_DRP_table->me1_drp_cuv_y0=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y0;
		 }else{
		 	table_level = 2;
			tmp_ME_DRP_table = fwif_MEMC_get_ME_DRP_table(table_level);
		 }
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_Region_Periodic_detect_true == 3 &&(s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVx_Step!=0)&& (s_pContext->_output_me_sceneAnalysis.u3_Dynamic_MVy_Step!=0) )
	{
		table_level = 2;
		tmp_ME_DRP_table = fwif_MEMC_get_ME_DRP_table(table_level);
	}
	else {
		table_level = 0;
		tmp_ME_DRP_table = fwif_MEMC_get_ME_DRP_table(table_level);

		tmp_ME_DRP_table->me1_drp_cuv_y2=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y2;
		tmp_ME_DRP_table->me1_drp_cuv_y1=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y1;
		tmp_ME_DRP_table->me1_drp_cuv_y0=s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_drp_cuv_y0;
	}
	#endif

	ME_DRP_wrtRegister(tmp_ME_DRP_table);

}

static _str_ME_adptpnt_rnd_cuv_table  ME_adptpnt_rnd_cuv_table[5]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0x30,0x28,0x24,0x22,CTRL_N},	/*1*/
	{0x3f,0x3f,0x3f,0x3f,CTRL_N},	/*2*/
	{0x24,0x1e,0x10,0xe,CTRL_N},		/*3*/
	{0x24,0x1e,0x0a,0x10,0x1fc},		/*4*/
};

_str_ME_adptpnt_rnd_cuv_table *fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(unsigned char level)
{
//	if (ME_adptpnt_rnd_cuv_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 4)
		return (_str_ME_adptpnt_rnd_cuv_table *)&ME_adptpnt_rnd_cuv_table[0];
	else
		return (_str_ME_adptpnt_rnd_cuv_table *)&ME_adptpnt_rnd_cuv_table[level];

}

VOID   ME_adptpnt_rnd_cuv_wrtRegister(_str_ME_adptpnt_rnd_cuv_table *ME_adptpnt_rnd_cuv_table)
{
	kme_me1_top1_me1_common1_23_RBUS kme_me1_top1_me1_common1_23_reg;

	kme_me1_top1_me1_common1_23_reg.regValue = rtd_inl(KME_ME1_TOP1_ME1_COMMON1_23_reg);
	kme_me1_top1_me1_common1_23_reg.me1_adptpnt_rnd_y1 = ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y1;
	kme_me1_top1_me1_common1_23_reg.me1_adptpnt_rnd_y2 = ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y2;
	kme_me1_top1_me1_common1_23_reg.me1_adptpnt_rnd_y3 = ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y3;
	kme_me1_top1_me1_common1_23_reg.me1_adptpnt_rnd_y4 = ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y4;
	rtd_outl(KME_ME1_TOP1_ME1_COMMON1_23_reg, kme_me1_top1_me1_common1_23_reg.regValue);

}

VOID ME_adptpnt_rnd_cuv_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
 	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME_adptpnt_rnd_cuv_table *tmp_ME_adptpnt_rnd_cuv_table = NULL;

	if(pParam->u1_ME_AdptPnt_rnd_wrt_en == 0)
		return;

	if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 2){   // pure slow pan
		table_level = 1;
		tmp_ME_adptpnt_rnd_cuv_table = fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(table_level);
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_slope2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_slope2;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_adptpnt_rnd_Slow_Convergence_true==1)
	{
		table_level = 2;
		tmp_ME_adptpnt_rnd_cuv_table = fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(table_level);
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_slope2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_slope2;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME1_adptpnt_rnd_gain_true==1)
	{
		table_level = 3;
		tmp_ME_adptpnt_rnd_cuv_table = fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(table_level);
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_slope2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_slope2;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_Avenger_RP_detect_true == 1 )
	{
		table_level = 4;
		tmp_ME_adptpnt_rnd_cuv_table = fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(table_level);
	}
	else
	{
		table_level = 1;
		tmp_ME_adptpnt_rnd_cuv_table = fwif_MEMC_get_ME_adptpnt_rnd_cuv_table(table_level);
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y1 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_y1;
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_y2;
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y3 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_y3;
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_y4 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_y4;
		tmp_ME_adptpnt_rnd_cuv_table->me1_adptpnt_rnd_slope2 = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me1_adptpnt_rnd_slope2;
	}

	ME_adptpnt_rnd_cuv_wrtRegister(tmp_ME_adptpnt_rnd_cuv_table);

}

static _str_Dh_Local_FB_table  Dh_Local_FB_table[24]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N},	/*0.load default*/
	{0x30,CTRL_N,CTRL_N,CTRL_N},		/*1*/
	{0x0,0x0,CTRL_N,CTRL_N},			/*2*/
	{0x60,0xff,CTRL_N,CTRL_N},		/*3*/
	{0x20,CTRL_N,CTRL_N,CTRL_N},		/*4*/
	{0x40,CTRL_N,CTRL_N,CTRL_N},		/*5*/
	{0x60,CTRL_N,CTRL_N,CTRL_N},		/*6*/
	{0x0,0x40,CTRL_N,CTRL_N},		/*7*/
	{0x0,CTRL_N,CTRL_N,CTRL_N},		/*8*/
	{0x30,CTRL_N,CTRL_N,CTRL_N},		/*9*/
	{0x0,0x12,CTRL_N,CTRL_N},		/*10*/
	{0x0,0x0,0x8,0x80},		/*11*/  // level 0  LFB+RFB level ctrl  //y1/y2/x1/x2
	{0x4,0x10,0x8,0x80},		/*12*/  
	{0x4,0x20,0x8,0x80},		/*13*/
	{0x4,0x30,0x8,0x80},		/*14*/
	{0x4,0x40,0x8,0x80},		/*15*/  
	{0x4,0x50,0x8,0x80},		/*16*/  //3
	{0x4,0x60,0x8,0x80},		/*17*/
	{0x4,0x70,0x8,0x80},		/*18*/
	{0xA,0x80,0x8,0x60},		/*19*/	// it's ori default value
	{0xA,0x90,0x8,0x60},		/*20*/
	{0xF,0xA0,0x8,0x60},		/*21*/  // level 10
	{0x18,0x48,0x0,0x0},		/*22*/	
	{0x0,0x0,0x0,0x0},		/*23*/	
};

_str_Dh_Local_FB_table *fwif_MEMC_get_Dh_Local_FB_table(unsigned char level)
{
//	if (Dh_Local_FB_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 23)
		return (_str_Dh_Local_FB_table *)&Dh_Local_FB_table[0];
	else
		return (_str_Dh_Local_FB_table *)&Dh_Local_FB_table[level];
}

VOID   Dh_Local_FB_wrtRegister(_str_Dh_Local_FB_table *Dh_Local_FB_table)
{
	//const _PQLCONTEXT *s_pContext = GetPQLContext();

	//if(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag ==0)//YE Test
	//	return;


	WriteRegister(KME_DEHALO_KME_DEHALO_F8_reg,24, 31, Dh_Local_FB_table->dh_dtl_curve_y1);
	WriteRegister(KME_DEHALO_KME_DEHALO_FC_reg,0, 7, 	Dh_Local_FB_table->dh_dtl_curve_y2);
	WriteRegister(KME_DEHALO_KME_DEHALO_F0_reg,24, 31, Dh_Local_FB_table->dh_dtl_curve_x1);
	WriteRegister(KME_DEHALO_KME_DEHALO_F4_reg,24, 31, 	Dh_Local_FB_table->dh_dtl_curve_x2);	
}

VOID Dh_Local_FB_wrtAction(const _PARAM_WRT_COM_REG * pParam, _OUTPUT_WRT_COM_REG * pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//unsigned int u32_rb_val = 0;
	//static unsigned char u1_panning_state;
	unsigned char table_level = 255;/* 255->load defaule */

	#if 1 //for YE Test temp test
	static unsigned int u32_ID_Log_en=0;//,ES_Test_Value=0;

	#endif

	int special_pattern_flag = 0; // djntest rotterdam
	int special_pattern_flag_transporter = 0; // djntest transporter
	int special_pattern_flag_insect = 0; // djntest transporter
	int special_pattern_flag_eagle = 0; // djntest eagle
#if Pro_tv0302875P	
	PQL_OUTPUT_FRAME_RATE  out_fmRate = 0;
#endif
	_str_Dh_Local_FB_table *tmp_Dh_Local_FB_table = NULL;
	unsigned int u1_curve_en, u8_curve_x1, u8_curve_x2, u8_curve_y1, u8_curve_y2;
	unsigned int u1_mvdiff_en, u12_mvdiff_y1, u12_mvdiff_y2, u12_mvdiff_y3;
	kme_dehalo_kme_dehalo_f4_RBUS kme_dehalo_kme_dehalo_f4;
	kme_dehalo_kme_dehalo_f8_RBUS kme_dehalo_kme_dehalo_f8;
	unsigned int dtl_gain_by_sad, mvdiff_gain_by_sad, sad_th, log_sad, algo_sad_en;
	unsigned int u30_sad = s_pContext->_output_read_comreg.u30_me_aSAD_rb;
	unsigned int dtl_gain_offset, mvdiff_gain_offset;
	unsigned long long tmp_dtl_multiple_sad, tmp_mv_diff_multiple_sad;
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 19, 19, &special_pattern_flag);
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 18, 18, &special_pattern_flag_transporter);
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 20, 20, &special_pattern_flag_insect);
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 17, 17, &special_pattern_flag_eagle);
	
	ReadRegister(SOFTWARE3_SOFTWARE3_55_reg, 0, 0, &u1_curve_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_56_reg, 0, 7, &u8_curve_x1);
	ReadRegister(SOFTWARE3_SOFTWARE3_56_reg, 8,15, &u8_curve_x2);
	ReadRegister(SOFTWARE3_SOFTWARE3_56_reg,16,23, &u8_curve_y1);
	ReadRegister(SOFTWARE3_SOFTWARE3_56_reg,24,31, &u8_curve_y2);
	
	ReadRegister(SOFTWARE3_SOFTWARE3_60_reg,31, 31, &u1_mvdiff_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_60_reg, 0,  7, &u12_mvdiff_y1);
	ReadRegister(SOFTWARE3_SOFTWARE3_60_reg, 8, 15, &u12_mvdiff_y2);
	ReadRegister(SOFTWARE3_SOFTWARE3_60_reg,16, 23, &u12_mvdiff_y3);

	ReadRegister(SOFTWARE3_SOFTWARE3_40_reg, 0,  7, &dtl_gain_by_sad);
	ReadRegister(SOFTWARE3_SOFTWARE3_40_reg, 8, 15, &mvdiff_gain_by_sad);
	ReadRegister(SOFTWARE3_SOFTWARE3_40_reg,16, 23, &sad_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_40_reg,30, 30, &log_sad);
	ReadRegister(SOFTWARE3_SOFTWARE3_40_reg,31, 31, &algo_sad_en);
	
	ReadRegister(SOFTWARE1_SOFTWARE1_22_reg, 28,  28, &u32_ID_Log_en);//YE Test debug dummy register
	//if((pParam->u1_localfb_wrt_en == 0)||((s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag==0))) //YE Test 20200728 to enable dh_dtl_curve x1/x2/y1/y2 AutoGUI
	//if((pParam->u1_localfb_wrt_en == 0)||((s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag==0))) //YE Test 20200728 to enable dh_dtl_curve x1/x2/y1/y2 AutoGUI
	if(pParam->u1_localfb_wrt_en == 0) //YE Test 20200728 to enable dh_dtl_curve x1/x2/y1/y2 AutoGUI
		return;

#if Pro_tv0302875P

	out_fmRate = s_pContext->_external_data._output_frameRate;

	if(s_pContext->_output_wrt_comreg.u1_is_special_local_fb== 1)
	{
		table_level = 23;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
	}
	else if(s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL]==_CAD_55 && out_fmRate<=_PQL_OUT_60HZ){
		table_level = 22;

		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
	}
	else if(s_pContext->_output_me_vst_ctrl.u1_detect_blackBG_VST_trure)
#else
	if(s_pContext->_output_me_vst_ctrl.u1_detect_blackBG_VST_trure)
#endif	
	{
		table_level = 1;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
		
	}
	else if((s_pContext->_output_wrt_comreg.u1_LFB_force_zero_true== 1) || special_pattern_flag || special_pattern_flag_transporter || special_pattern_flag_insect || special_pattern_flag_eagle)

	{
		table_level = 2;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;		
	}
	else if((s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL]&0xF) == _CAD_55)
	{
		table_level = 3;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
		
	}
	else if(s_pContext->_output_wrt_comreg.u1_LFB_Dtl_weak_type ==1)
	{
		table_level = 4;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
		
	}
	else if(s_pContext->_output_wrt_comreg.u1_LFB_Dtl_weak_type ==2)
	{
		table_level = 5;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;		
	}
	else if(s_pContext->_output_wrt_comreg.u1_LFB_Dtl_weak_type ==3)
	{
		table_level = 6;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_wrt_comreg.u1_LFB_Dtl_increase_true==1)
	{
		table_level = 7;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_wrt_comreg.u8_FB_lvl >0x60)
	{
		table_level = 8;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u1_Swing_true )
	{
		table_level = 2;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_dh_close.u1_dh_sml_rgnAction_close && s_pContext->_output_wrt_comreg.u8_FB_lvl ==0)
	{
		table_level = 9;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1)
	{
		table_level = 2;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 3)
	{
		table_level = 10;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	else
	{
		table_level = 0;
		tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_y2;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x1;
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_dtl_curve_x2;
	}
	if(u32_ID_Log_en==1)
		rtd_pr_memc_info("[MEMC_YE_LEVEL] ,u8_ES_Test_0_flag =%d,rFB_LFB_ctrl_level=%d, table_level=%d,\n"
		, s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag, s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level, table_level);


#if 1
//++YE Test for LFB/RFB level ctrl


if(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag ==0)
{

  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==0)
	{
			table_level =  11;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  11");
		
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==1)
	{
			table_level =  12;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  12");
			
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==2)
	{
			table_level =  13;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  13");

	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==3)
	{
			table_level =  14;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)			
			//rtd_pr_memc_info("table_level =  14");
			
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==4)
	{
			table_level =  15;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  15");
			
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==5) // it's ori default value
	{
			table_level =  16;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
  else	if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==6) // it's ori default value
	{
			table_level =  17;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
   else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==7) // it's ori default value
	{
			table_level =  18;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
	else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==8) // it's ori default value
	{
			table_level =  19;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==9) // it's ori default value
	{
			table_level =  20;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
 else  if(s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level ==10) // it's ori default value
	{
			table_level =  21;
			tmp_Dh_Local_FB_table = fwif_MEMC_get_Dh_Local_FB_table(table_level);
			//if(u32_ID_Log_en==1)
			//rtd_pr_memc_info("table_level =  16");
			
	}
	
	if(u32_ID_Log_en==1)
		rtd_pr_memc_info("[MEMC_YE_LEVEL] ,u8_ES_Test_0_flag =%d,rFB_LFB_ctrl_level=%d, table_level=%d,\n"
		,s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag ,s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_LFB_ctrl_level,table_level);


}



//--YE Test for LFB/RFB level ctrl
#endif
	  dtl_gain_by_sad = _MIN_(dtl_gain_by_sad, 100);
	  mvdiff_gain_by_sad = _MIN_(mvdiff_gain_by_sad, 100);

	  if(algo_sad_en){
		  sad_th *= 10000;
		  if(u30_sad > 2*sad_th){
			  dtl_gain_by_sad = 100;
			  mvdiff_gain_by_sad = 100;
		  }
		  else if(u30_sad > sad_th){
		  	tmp_dtl_multiple_sad = ((unsigned long long)(100-dtl_gain_by_sad))*(u30_sad-sad_th);
			tmp_mv_diff_multiple_sad = ((unsigned long long)(100-mvdiff_gain_by_sad))*(u30_sad-sad_th);

			#ifdef CONFIG_ARM64
			dtl_gain_offset = (unsigned int)(tmp_dtl_multiple_sad/sad_th);
			mvdiff_gain_offset = (unsigned int)(tmp_mv_diff_multiple_sad/sad_th);
			#else
			do_div(tmp_dtl_multiple_sad,sad_th);
			dtl_gain_offset = tmp_dtl_multiple_sad;
			do_div(tmp_mv_diff_multiple_sad,sad_th);
			mvdiff_gain_offset = tmp_mv_diff_multiple_sad;
			#endif
			dtl_gain_by_sad += dtl_gain_offset;
			mvdiff_gain_by_sad += mvdiff_gain_offset;
		  }
		  else{
			  //use original value
		  }
	  }
	  
	  if(log_sad){
		  rtd_pr_memc_emerg("[%s] sad,%u, th,%u, gain,%u,%u, y1,%d,%d\n",__FUNCTION__, u30_sad, sad_th, dtl_gain_by_sad, mvdiff_gain_by_sad, tmp_Dh_Local_FB_table->dh_dtl_curve_y1, tmp_Dh_Local_FB_table->dh_dtl_curve_y2);
	  
	  }

	  if(u1_curve_en){
		tmp_Dh_Local_FB_table->dh_dtl_curve_x1=_CLIP_((tmp_Dh_Local_FB_table->dh_dtl_curve_x1*u8_curve_x1)/20, 0, 255);
		tmp_Dh_Local_FB_table->dh_dtl_curve_x2=_CLIP_((tmp_Dh_Local_FB_table->dh_dtl_curve_x2*u8_curve_x2)/20, 0, 255);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y1=_CLIP_((dtl_gain_by_sad*tmp_Dh_Local_FB_table->dh_dtl_curve_y1*u8_curve_y1)/400, 0, 255);
		tmp_Dh_Local_FB_table->dh_dtl_curve_y2=_CLIP_((dtl_gain_by_sad*tmp_Dh_Local_FB_table->dh_dtl_curve_y2*u8_curve_y2)/400, 0, 255);
		}

		if(u1_mvdiff_en){
			kme_dehalo_kme_dehalo_f4.regValue = rtd_inl(KME_DEHALO_KME_DEHALO_F4_reg);
			kme_dehalo_kme_dehalo_f8.regValue = rtd_inl(KME_DEHALO_KME_DEHALO_F8_reg);
			kme_dehalo_kme_dehalo_f4.dh_fblvl_mvdiff_y1 = _CLIP_((mvdiff_gain_by_sad*s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_fblvl_mvdiff_y1*u12_mvdiff_y1)/2000, 0, 0xfff);
			kme_dehalo_kme_dehalo_f8.dh_fblvl_mvdiff_y2 = _CLIP_((mvdiff_gain_by_sad*s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_fblvl_mvdiff_y2*u12_mvdiff_y2)/2000, 0, 0xfff);
			kme_dehalo_kme_dehalo_f8.dh_fblvl_mvdiff_y3 = _CLIP_((mvdiff_gain_by_sad*s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_dh_fblvl_mvdiff_y3*u12_mvdiff_y3)/2000, 0, 0xfff);
			rtd_outl(KME_DEHALO_KME_DEHALO_F4_reg, kme_dehalo_kme_dehalo_f4.regValue);
			rtd_outl(KME_DEHALO_KME_DEHALO_F8_reg, kme_dehalo_kme_dehalo_f8.regValue);	
		}

	  //if(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_flag !=1) //YE Test Edge Shaking
	  if(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_DEHALO_flag!=1) //YE Test 20200521
		{
		Dh_Local_FB_wrtRegister(tmp_Dh_Local_FB_table);
		}
}

VOID dynamicME_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	if(pParam->u1_dynamicME_en==0)
		return;

	//const _PQLCONTEXT *s_pContext = GetPQLContext();
	ME_dynSR_wrtAction(pParam,pOutput);

	//ME_dynSAD_Diff_wrtAction(pParam,pOutput);
	#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
	ME_acdcBld_wrtAction(pParam,pOutput);
	ME_cand_wrtAction(pParam,pOutput);
	ME_caddpnt_wrtAction(pParam,pOutput);
	ME_candOfst_wrtAction(pParam,pOutput);
	//ME_gmv_wrtAction(pParam,pOutput);
	ME_ipme_flp_alp_wrtAction(pParam,pOutput);
	ME_mvd_cuv_wrtAction(pParam,pOutput);
	ME_adptpnt_rnd_cuv_wrtAction(pParam,pOutput);
	ME_cost_wrtAction(pParam,pOutput);
	ME_Vbuf_LFSR_updStgh_wrtAction(pParam,pOutput);
	#if (IC_K5LP || IC_K6LP || IC_K8LP)
	ME_DRP_wrtAction(pParam,pOutput);
	#endif
	#endif
}

void MEMC_me1_bgmask_2k_special_setting(const _PARAM_WRT_COM_REG *pParam , _OUTPUT_WRT_COM_REG *pOutput )
{
    const _PQLCONTEXT *s_pContext = GetPQLContext();
    int path3 =0 ;
    int fg_apl_s2_protect_th0_init=0x0;
    int fg_apl_s2_protect_th1_init=0x1e;
    int fg_apl_s2_protect_bgnum_th_init=0x32;  
    int fwcontrol_fast ,fwcontrol_ver,fwcontrol_ndblkon;
    int gmv_bgx;
    int rgnIdx;
    int rmvx[32]={0};
    int rmvy[32]={0};
    
    static bool video_leftmotion ,  video_fast ,video_spbg,video_ver,video_halobefore ;
    static int  holdframeeftmotion_2k ,  holdframefast  ,holdframespbg;  
    int set2_ycenter_init = 536 ;
    int set2_ucenter_init = 432 ;
    int set2_vcenter_init = 590 ;
    int set2_yrange_init = 400 ; //300
    int set2_urange_init = 100 ; //60
    int set2_vrange_init = 100 ; //72

    int u10_gmv_mvy , u11_gmv_mvx ;

    gmv_bgx=s_pContext->_output_read_comreg.dh_gmv_bgx;


    for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
    {
        
        rmvx[rgnIdx] =    s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]  ;
        rmvy[rgnIdx] =    s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[rgnIdx]  ;        
    }

    
    //==========2k1k specical setting++++++++++++++//
    ReadRegister(HARDWARE_HARDWARE_25_reg, 20,20 , &fwcontrol_fast);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_ver);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 23,23 , &fwcontrol_ndblkon);//d564
	
    u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
    u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
    
    if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
    {
   
        if(fwcontrol_fast)
        {        

            holdframefast = 30  ;  
            video_fast=1;
            path3 = 0xc;		
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	    	    
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,0); 	     
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7, 20);
        }
        else if(holdframefast>0)
        {

            holdframefast -- ;
            path3 = 0xc;		
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	    	    
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,0); 	     
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7, 20);
        }
        else if(video_fast)
        {

            video_fast=0;
            path3 = 0x0;		
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);
        }


        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_173_end_2k_flag == 1)
        {
                path3 = 0x4;
                video_leftmotion=1 ;
                holdframeeftmotion_2k = 200 ;
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 22); //bg_s1_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 12); //bg_s1_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,23); //bg_s2_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0);
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1); //range1_en
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,512); //v center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,512); // u center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,80); //y center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,50); //v range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,50); //u range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,80); //y range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,2);//colorprotect_cnt_th3 set to max value for hw bug
        }
        else if(holdframeeftmotion_2k>100)
        {
                holdframeeftmotion_2k--;
                path3 = 0x4;
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 22); //bg_s1_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 12); //bg_s1_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,23); //bg_s2_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0);
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1); //range1_en
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,512); //v center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,512); // u center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,80); //y center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,50); //v range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,50); //u range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,80); //y range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,2);//colorprotect_cnt_th3 set to max value for hw bug
        }
        else if(holdframeeftmotion_2k>0)
        {
                holdframeeftmotion_2k--;
                path3 = 0x5;
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 22); //bg_s1_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 12); //bg_s1_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,23); //bg_s2_num_yth1
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0);
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1); //range1_en
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,512); //v center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,512); // u center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,80); //y center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,50); //v range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,50); //u range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,80); //y range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,2);//colorprotect_cnt_th3 set to max value for hw bug

        }
        
        else if(video_leftmotion)
        {
                path3 = 0x0;
                video_leftmotion =0 ;
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
                WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
                WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);

                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x0); //range1_en
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,set2_vcenter_init); //v center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,set2_ucenter_init); // u center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,set2_ycenter_init); //y center
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,set2_vrange_init); //v range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,set2_urange_init); //u range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,set2_yrange_init); //y range
                WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,0x3f);//colorprotect_cnt_th3 set to max value for hw bug
        } 

        if((s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_off_case1==1||s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_off_case2==1)&& fwcontrol_ndblkon)
        {
            holdframespbg= 180;  
            video_spbg=1;         
            //WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //s3_protect_en
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //s2_protect_en
            path3 = 6 ;
           // WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, 0x2);
        }
        else if(holdframespbg>0)
        {
            //WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //s3_protect_en
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //s2_protect_en
             path3 =6 ;
             holdframespbg -- ; 
            // WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, 0x2);
        }
        else if(video_spbg)
        {
            video_spbg = 0 ;

           //WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //s3_protect_en
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //s2_protect_en
             path3 = 0 ;
             //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, 0x0);
        } 
  							   
	if(fwcontrol_ver || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214 == 1))
	{
	WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,1);
	WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,8);
	WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,2);
	WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,10);
	WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0); // init =1
	video_ver = 1;
	path3 = 0xc;
	}
	else if(video_ver)
	{
	WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
	WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
	WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
	WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);
	WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,1); // init =1
	video_ver= 0;
	path3 = 0x0;
	
	}

	if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_halobefore_flag == 1)
	{
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9, 0x1b);
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x1b);
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x1b);
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x20);
	
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 8); //bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 1); //bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,8);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,2); //bg_s2_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 1);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 1);
		video_halobefore = 1;
		
	}
	else if(video_halobefore)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);
		video_halobefore = 0;
	}

    }
    //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, path3); //path segment 
    
}
void MEMC_me1_bgmask_2k_normal_setting(const _PARAM_WRT_COM_REG *pParam , _OUTPUT_WRT_COM_REG *pOutput )
{
        int fwcontrol_ver;
        ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_ver);//d564
        if((Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)&&(fwcontrol_ver!=1))  //if((Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)&&(fwcontrol_ver!=1))  
        {
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,200); //large
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,100); //smallsad_th
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,200); //setbg_sad_th
            WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,220); //dubt_cov_SAD_th
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,100); //smallsad_th
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,200); //large
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,200); //setbg_sad_th
            WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,220); //dubt_ucov_sad_th
        }       
		else   //for 214 
        {
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa);
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,0x12c);  //large
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,0x78);
            WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,0x190);
            WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,0x1c2);//dubt_cov_SAD_th
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,0x78);
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,0x12c);
            WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,0x190);
            WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,0x1c2);  //dubt_ucov_sad_th

        }
        
}     

void MEMC_dehalo_2k_normal_setting(const _PARAM_WRT_COM_REG *pParam , _OUTPUT_WRT_COM_REG *pOutput )
{
        int fwcontrol_ver;
        ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_ver);//d564
        if((Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)&&(fwcontrol_ver!=1))//if((Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)&&(fwcontrol_ver!=1))  
        {
            //postflt
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
        }

}

void MEMC_dehalo_2k_special_setting(const _PARAM_WRT_COM_REG *pParam , _OUTPUT_WRT_COM_REG *pOutput )
{
    const _PQLCONTEXT *s_pContext = GetPQLContext();
    int path3 =0 ;
    int fwcontrol_fast,fwcontrol_vertical_case,fwcontrol_horn,fwcontrol_ndblkon ;
    int occl_filter_ucov_cut_init = 0x4;
    int occl_filter_cov_cut_init= 0x4;
    int   gmv_bgx;
    static bool video_leftmotion ,  video_fast,video_verticalcase,video_horn,FrameHoldflag_ghost_broken,video_halobefore,video_skatingbroken,video_rotateblackbroken,video_fixgmv ;
    static int  holdframeeftmotion_2k ,  holdframefast,holdframe_verticalcase,holdframe_horn,FrameHold_ghost_broken;   
    int fwcontrol_ver;
    static int holdframe_facebroken,video_facebroken;
    static int FrameHold_blkheadbroken,FrameHoldflag_blkheadbroken;


    //==========2k1k specical setting++++++++++++++//

	gmv_bgx=s_pContext->_output_read_comreg.dh_gmv_bgx;

	
    ReadRegister(HARDWARE_HARDWARE_25_reg, 20,20 , &fwcontrol_fast);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 17,17 , &fwcontrol_vertical_case);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 18,18 , &fwcontrol_horn);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_ver);//d564
    ReadRegister(HARDWARE_HARDWARE_25_reg, 23,23 , &fwcontrol_ndblkon);

    if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
    {
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_173_end_2k_flag == 1)
        {
            path3 = 0x4;	
            video_leftmotion=1 ;
            holdframeeftmotion_2k = 160 ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,54);// 3x29 fg th            

        }
        else if(holdframeeftmotion_2k>0)
        {
            holdframeeftmotion_2k--;
            path3 = 0x4;	
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,54);// 3x29 fg th      
            
        }
        else  if(video_leftmotion)
        {
            path3 = 0x0;	
            video_leftmotion =0 ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th

        }
        
        if(fwcontrol_fast)
        {        

            holdframefast = 30  ;  
            video_fast=1;
            path3 = 0xc;		
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x5);  //reg_dh_color_protect_th0_max 

        }
        else if(holdframefast>0)
        {

            holdframefast -- ;
            path3 = 0xc;		
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x5);  //reg_dh_color_protect_th0_max 

        }
        else if(video_fast)
        {

            video_fast=0;
            path3 = 0x0;		
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);  //reg_dh_color_protect_th0_max 
        }


        if(fwcontrol_vertical_case)
        {
                 holdframe_verticalcase = 160;
                 video_verticalcase = 1;
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,8);//mv_filter_th
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,1);//filter_cov_cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,1);//filter_ucov_cut	
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,30);// 3x29 fg th     
                path3 = 5;
        }
        else if(holdframe_verticalcase>0)
        {
                holdframe_verticalcase -- ;
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,8);//mv_filter_th
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,1);//filter_cov_cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,1);//filter_ucov_cut	
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,30);// 3x29 fg th      
                 path3 = 5;

        }
        else if(video_verticalcase)
        {
                video_verticalcase=0;
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th   
                path3 = 0;

        }
		
        if(fwcontrol_horn && (fwcontrol_ver==0))
        {
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,11);//mv_filter_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x8);//filter_cov_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,30);// 3x29 fg th
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,87);// 3x29 bg th
                       
            holdframe_horn = 1;
            video_horn = 1;
        }
        else if(video_horn>0)
        {
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
        
            video_horn = 0;
        }

  //---------------------------for both broken and ghost ----------------------------//
    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_43_flag == 1)
    {        

        FrameHold_ghost_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40  ;  
        FrameHoldflag_ghost_broken=1;
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
        //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
        WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter

       // WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, 2); //path segment 
                
    }
    else if(FrameHold_ghost_broken>0)
    {
        FrameHold_ghost_broken -- ;
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
       // WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
        WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter


        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, 2); //path segment 
                
    }
    else if(FrameHoldflag_ghost_broken)
    {
        FrameHoldflag_ghost_broken=0;
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
        //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x1); //only mv en
        WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); //mv filter

       // WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, 0); //path segment 

    }		

    }
 
	 if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_144_face==1)&&(s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb <88)&& gmv_bgx<70)
	 {
	 
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
		 holdframe_facebroken = 180;
		 video_facebroken= 1;

		 path3 = 4;
	 }
	 else if(holdframe_facebroken>0)
	 {
		 holdframe_facebroken--;
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
		 path3 = 4;	 
	 }
	 else if(video_facebroken)
	 {
		 video_facebroken = 0;
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
		 path3 = 0; 
	 }
	 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_blkheadbroken_flag == 1)
	 {		  
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		 FrameHold_blkheadbroken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80	;  
		 FrameHoldflag_blkheadbroken=1;
	  
	 }
	 else if(FrameHold_blkheadbroken>0)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		 FrameHold_blkheadbroken -- ;
				 
	 }
	 else if(FrameHoldflag_blkheadbroken)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		 FrameHoldflag_blkheadbroken=0;
	 
	 }
	 
	 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_halobefore_flag == 1)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,20);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,10);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,5);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,20);
		 video_halobefore = 1;
		 
	 }
	 else if(video_halobefore)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);//extend_ucov_th0
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);
		 video_halobefore = 0;
	 }
	 
	 
	 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_whitebgbroken_2k_flag == 1)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x55);// 3x29 fg th
		 video_skatingbroken = 1;
		 
	 }
	 else if(video_skatingbroken)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
		 video_skatingbroken = 0;
	 }
	 
	 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_rotateblackbroken_2k_flag == 1)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
		 video_rotateblackbroken = 1;
		 
	 }
	 else if(video_rotateblackbroken)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
		 video_rotateblackbroken = 0;
	 }

	 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_fixgmv_2k_flag == 1)
	 {
		// WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,final_mvx);
		// WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
	 
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,30);// 3x29 fg th
	 
		 video_fixgmv = 1;
		 
	 }
	 else if(video_fixgmv)
	 {
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
		 video_fixgmv = 0;
	 }

	 
 //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, path3); //path segment 
    
}
   


void MEMC_me1_bgmask_special_setting(const _PARAM_WRT_COM_REG *pParam , _OUTPUT_WRT_COM_REG *pOutput ,int th0 ,int gmv_mvx_final)
{ 
    const _PQLCONTEXT *s_pContext = GetPQLContext();
    signed short u11_gmv_mvx;
    signed short u10_gmv_mvy;
    
    static int holdframe128 , holdframe13,  holdframe339   ,holdframe299 ,holdframe189 , holdframe185 , holdframe317,holdframe226 ,holdframe192 ,holdframe72,holdframe200;
    static int holdframe306_2  , holdgmv399frame,holdframe183 , holdframe151 , holdframe432,holdframe195 ,holdframe214 ,holdframe317_2 ,holdframe317_3 /*,holdframe315*/;
    static int holdframe_96,holdframe_96_2 ,holdframe_421 ,holdframe431 ,holdframe163 ,holdframe49,holdframe343 ,FrameHold_PQ_Issue ;
    static bool video96,video96_2,video421,video219,holdframe_tinydtl,video343 ,FrameHoldflag_PQ_Issue,video_preden0_off;
    static bool video2271,video2272,video2273,video2274,video2275  ,video_tinydtl;

    static bool video128 , video339   ,video299 ,video189  , video185, video13 ,video317,video226 ,video192 ,video72 ,video183,video200 ;	
    static bool video214 ,video317_2 ,video317_3/*,video315*/ ,video431 ,video163,video49 ;	
    static bool video306_2 ,video151 ,video432,video195,video_transporter,video_dance,video_smallplane,video_soccer,video_dance2,video_skating,video_C001soccer,video30006,video_rotterdam,video_ridebike,video_toleftbike;	
	static int video_0026,video_insect,video_eagle,video_huapi2;

    int fwcontrol_128 ,fwcontrol3   ,fwcontrol_video339  ,fwcontrol_video299, fwcontrol_video189, fwcontrol_185,fwcontrol_13,fwcontrol_1282; //fwcontrol1 ,fwcontrol2 ,fwcontrol3 ;
    int fwcontrol_306, fwcontrol_214,fwcontrol_183;
    static int holdframe182,holdframe393,holdframe416,holdframe412,holdframe410,holdframe2144,holdframe419,holdframe1922,holdframe1511,holdframe1288;
    static bool video182,video393,video416,video412,video410,video2144,video419,video1922,video1511,video1288;
	static int video_IDT;
    int rgnIdx;
    //int path2 =0;
    int path3 = 0;
    int path4 = 0;
    int rmvx[32]={0},rmvy[32]={0};
	int final_mvx,final_mvy;
    static int video_fixgmv;
    
	int flag_avenger;
    static int flag_avenger2;
	int cond96 = 0;
	
    int readvald9501;
	static int logohalo_setting; 

    int bg_s3_dubt_cov_num_yth1_init=0xa;
    int bg_s3_dubt_cov_num_yth2_init=0x22;
    int bg_s3_dubt_cov_shift_init=0x1;
    int bg_s3_dubt_cov_slope_init=0x2;
    int bg_s3_dubt_ucov_yth1_init=0x8;
    int bg_s3_dubt_ucov_yth2_init=0x1e;
    int bg_s3_dubt_ucov_shift_init=0x1;
    int bg_s3_dubt_ucov_slope_init=0x3;
    int bg_s3_dubt_cov_sad_th_init = 0x1c2 ;  
    int fg_apl_s2_protect_th0_init=0x0;
    int fg_apl_s2_protect_th1_init=0x1e;
    int fg_apl_s2_protect_bgnum_th_init=0x32;  
    int fg_apl_s3_protect_th0_init=0x0;
    int fg_apl_s3_protect_th1_init=0x28;
    int fg_apl_s3_protect_bgnum_th_init=0x2d; 

    int bg_s3_cov_largesad_th_init=0x12c;
    int bg_s3_cov_smallsad_th_init=0x78;
    int bg_s3_cov_setbg_th_init=0x190;
    int bg_s3_dubt_ucov_sad_th_init = 0x1c2 ;  
    int bg_s3_ucov_smallsad_th_init=0x78;
    int bg_s3_ucov_largesad_th_init=0x12c;
    int bg_s3_ucov_setbg_sad_th_init=0x190;   
    int fg_apl_s2_protect_th0_299=0x96;
    int fg_apl_s2_protect_th1_299=0xfa;
    int fg_apl_s2_protect_bgnum_th_299=0x2d;   
    int fg_apl_s3_protect_th0=0x96;
    int fg_apl_s3_protect_th1=0xfa;
    int fg_apl_s3_protect_bgnum_th=0x2d;        
    int fg_mask_pfv_blend_dis=0x0; 
    //int pfv_corr_en=0x1;
    int fg_mask_pfv_blend_en_init=0x1;
    // int pfv_corr_en_init=0x0;
    int bg_s3_ucov_data_en_init=0x1;
    int bg_s3_cov_data_en_init=0x1;
    int fg_hold_en_init=0x0;
    int set2_ycenter_init = 536 ;
    int set2_ucenter_init = 432 ;
    int set2_vcenter_init =  590 ;
    int set2_yrange_init = 400 ; //300
    int set2_urange_init = 100 ; //60
    int set2_vrange_init =  100 ;   //72    
    int bg_color_protect_en_off = 0 ;  // init =1 
    int bg_color_protect_en_init =1 ;
    int set1_ycenter_init = 0x190 ;
    int set1_ucenter_init = 0x1b8 ;
    int set1_vcenter_init =  0x262 ;
    int set1_yrange_init = 0x12c ; 
    int set1_urange_init = 0x30 ; 
	int set1_vrange_init =  0x30 ;  
    signed short fg_apl_seg0_cnt=s_pContext->_output_read_comreg.dh_fg_apl_seg0_cnt;
	int forcegmvx , forcegmvy ;

	//test gmv 
    int u32_RB_val_d968,finalrmvx,finalrmvy,readval14,readval15;
    int readval0014;
    static int v_0014;    
    u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
    u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
    for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
    {
        
        rmvx[rgnIdx] =    s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]  ;
        rmvy[rgnIdx] =    s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[rgnIdx]  ;        
    }
	
    
    //+++++++++++video 128  code is disable ++++++++++++++++//
    ReadRegister(HARDWARE_HARDWARE_25_reg, 0, 0 , &fwcontrol_128);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 3,3 , &fwcontrol3);  
    ReadRegister(HARDWARE_HARDWARE_25_reg, 7, 7 , &fwcontrol_video339); 
    ReadRegister(HARDWARE_HARDWARE_25_reg , 9, 9, &fwcontrol_video189);
    ReadRegister(HARDWARE_HARDWARE_25_reg , 8, 8, &fwcontrol_video299);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 10,10 , &fwcontrol_185); 
    ReadRegister(HARDWARE_HARDWARE_25_reg, 11,11 , &fwcontrol_13);
    ReadRegister(HARDWARE_HARDWARE_25_reg, 17,17 , &fwcontrol_306); 
    ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_214);

    if((s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_apl==1) && (!fwcontrol_214))
    {

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,  5); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,  5);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);  
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x0);
        holdframe226 = 60;  
        video226=1;
        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15, 10);     
        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0x0);
        path3 = 0x3 ;
    } 
    else if(holdframe226>0)
    {

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,  5); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,  5);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);  
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x0);

        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15, 10);     
        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0x0);
         path3 = 0x3 ;
         holdframe226 -- ; 
    }
    else if(video226)
    {
        video226 = 0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);  
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x1);
        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);     
        WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0x0);
         path3 = 0  ;
    } 
    //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, (holdframe226>0)); 

   //+++++++++++++++++192 horn close th skin protect ++++++++++++++//

    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_horn_skin_off==1)
    {
        holdframe192 = 90;  
        video192=1;
        path3 = 0x3 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);  // init =1 
        WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,7,7,0x1);  //mv_diff_only_hor_en
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,9);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,1);  //bg_s1_num_yth1
       // WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,12);//bg_s2_num_yth2
      //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,1); //bg_s2_num_yth1   
        WriteRegister(HARDWARE_HARDWARE_25_reg, 18,18 , 1);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0);  //bg_s3_cov_data_en     
    }
    else if(holdframe192>0)
    {
         path3 = 0x3 ;
         holdframe192 -- ; 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);  // init =1 
        WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,7,7,0x1);  //mv_diff_only_hor_en
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,9);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,1);  //bg_s1_num_yth1
      //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,12);//bg_s2_num_yth2
      //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,1); //bg_s2_num_yth1      
        //WriteRegister(HARDWARE_HARDWARE_25_reg, 18,18 , 1);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0);  //bg_s3_cov_data_en     
    }
    else if(video192)
    {
         video192 = 0 ;
       //  path2 = 0 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_init);  // init =1 
        WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,7,7,0x0);  //mv_diff_only_hor_en
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
      //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
      //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1    
        //WriteRegister(HARDWARE_HARDWARE_25_reg, 18,18 , 0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);  //bg_s3_cov_data_en   

    } 


		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_128_flag )
		{
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0); 		 //s2_low	 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,15);	//		 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);	 //s3_low	 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,15); 

			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 1,7,0x28);	//s2_protect_ num_th
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 1,7, 25);	//s3_protect_ num_th
			//	WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);  // init =1 
			holdframe128 =	(s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 120 : 60 ;
			video128=1;
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,100); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,100); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,100); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,105); 
            WriteRegister(HARDWARE_HARDWARE_25_reg, 21,21 , 0x1);
             path3=4 ;
		}
		else if(holdframe128>0)
		{
			holdframe128 -- ;
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0); 		 //s2_low	 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,15);	//		 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);	 //s3_low	 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,15); 

			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 1,7,0x28);	//s2_protect_ num_th
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 1,7, 25);	//s3_protect_ num_th
			// WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);	// init =1 
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,100); 
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,100); 
			WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,100); 
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,105); 
			WriteRegister(HARDWARE_HARDWARE_25_reg, 21,21 , 0x1);
			  path3=4 ;
		}
		else if(video128)
		{
			video128=0;
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);			 //s2_low	 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init);	//		 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);	  //s3_low	  
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init); 

			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 1,7,fg_apl_s2_protect_bgnum_th_init);  //s2_protect_ num_th
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 1,7, fg_apl_s3_protect_bgnum_th_init);  //s3_protect_ num_th
			WriteRegister(HARDWARE_HARDWARE_25_reg, 21,21 , 0x0);
            // WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_init);  // init =1 
               path3=0 ;

		} 
		
        
		ReadRegister(HARDWARE_HARDWARE_25_reg, 21,21 , &fwcontrol_1282);
			
	 //+++++++++++video 339 code is enable	++++++++++++++++//

    if(fwcontrol_video339)
    {
        holdframe339 = 5 ;
        video339 = 1 ;    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,  0);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,70); 	  //s2_protect_th1     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7, 66);  //s2_protect_bgnum_th

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23, 0 );   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,70);    // s3_protect_th1 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7, 65);  //s3_protect_bgnum_th
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   
     //   WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,fg_hold_en_init); 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,0,7,0x0);  //range_min_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0xef);  //range_max_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,16,23,0x0);  //range_min_y_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0x86);   //range_max_y_2
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,bg_s3_cov_largesad_th_init+50);  //300
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,bg_s3_cov_smallsad_th_init);  //120
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,bg_s3_cov_setbg_th_init);    //400
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,0x1f4);   //s3_dubt_cov_sad   500         

        if( _ABS_(u11_gmv_mvx)>12)
        {
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,20); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,22);  
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, -30);
         //   rtd_pr_memc_info("339 pattern \n");   
            holdgmv399frame = 8 ; 
        }
        else if(holdgmv399frame>0)
        {
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,20); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,22);  
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, -30);
            holdgmv399frame --;
    }
     else
    {

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0+8); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0+8); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0+8); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+10);  
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, gmv_mvx_final);

    }
     
		 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);	//bg_s3_cov_data_en   
		path3=4 ;
    }
    else if(holdframe339>0)
    { 

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,  0);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,70); 	  //s2_protect_th1     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7, 66);  //s2_protect_bgnum_th

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23, 0 );   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,70);    // s3_protect_th1 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7, 65);  //s3_protect_bgnum_th
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis); 
      //  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,fg_hold_en_init); 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,0,7,0x0);  //range_min_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0xef);  //range_max_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,16,23,0x0);  //range_min_y_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0x86);   //range_max_y_2
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,bg_s3_cov_largesad_th_init+50);  //300
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,bg_s3_cov_smallsad_th_init);  //120
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,bg_s3_cov_setbg_th_init+50);    //400
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,0x1f4);   //s3_dubt_cov_sad   500 

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0+8); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0+8); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0+8); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+10);  
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, gmv_mvx_final);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);  //bg_s3_cov_data_en   
        holdframe339 --;
        path3=4 ;
     }
    else if(video339)
    {
        video339 =0 ;
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init); 
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_en_init);   
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,0,7,0x0);  //range_min_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0);  //range_max_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,16,23,0x0);  //range_min_y_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0);   //range_max_y_2
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,bg_s3_cov_largesad_th_init);  //300
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,bg_s3_cov_smallsad_th_init);  //120
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,bg_s3_cov_setbg_th_init);    //400
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,bg_s3_dubt_cov_sad_th_init);   //s3_dubt_cov_sad
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, gmv_mvx_final);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);  //bg_s3_cov_data_en   
        path3=0 ;
    }


    if(fwcontrol_video299)
    {
        holdframe299 = 30 ;
        video299 = 1 ; 
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_299);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_299); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_299);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th);

        if(pOutput->u1_me1_bg_pfv_corr_cond)
        {
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,25);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23, 41);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
        }
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);


        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,33); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,35); 
		path3=5 ;

    }
    else if(holdframe299>0)
    { 

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_299);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_299); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_299);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th);
        if(pOutput->u1_me1_bg_pfv_corr_cond)
        {
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,25);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23, 41);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
        }
        //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,corrth); 
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,33); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,35);  
  
        holdframe299 --;
		path3=5 ;
    }
    else if(video299)
    {
        video299 =0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);   

        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_en_init);  

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 
		path3=0 ;
              
    }


    if(fwcontrol_video189)
    {
        holdframe189= 15 ;
        video189 = 1 ; 
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15, 160);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_299); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_299);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,160);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th);
		path3=6 ;

        if(pOutput->u1_me1_bg_pfv_corr_cond)
        {

            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7, 89);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,28);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,134);

        }
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,33); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,33); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,35); 

        // WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 0x5); 

        //    path2 = 5 ;

    }
    else if(holdframe189>0)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15, 160);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_299); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_299);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,160);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th);


        if(pOutput->u1_me1_bg_pfv_corr_cond)
        {

            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7, 89);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,28);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,134);

        }
            WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   

            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);

            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,33); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,33); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,33); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,35); 
        //   path2=6 ;

        //   WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 0x6); 
        holdframe189--;
		path3=6;
    }
    else if(video189)
    {
        video189 =0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);   

        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_en_init);  

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 

    //  WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 0x7);       
		path3= 0 ;
    }

  
       //+++++++++++video 185 s1 s2 curve adjust ++++++++++++++++//

    if(fwcontrol_185)
    {
        holdframe185 = 50 ;
        video185 = 1 ;    
        //  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 20);  //bg_s1_num_yth2
        //   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 12);  //bg_s1_num_yth1
        //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,20);//bg_s2_num_yth2
        //  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,13); //bg_s2_num_yth1   
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 8);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 1);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12, 10);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,1); //bg_s2_num_yth1  


      //  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);  //s1_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);
     //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1);

        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1);  //range1_en
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,640);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,470); // u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,90);  //y center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,60);  //v range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,60);  //u range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,70);  //y range
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);  //range_min_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);  //range_max_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,24);  //range_min_y_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);   //range_max_y_2
   		path3 = 7 ;
  
    }
    else if(holdframe185>0)
    { 

        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12, 20);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17, 11);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,20);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,11); //bg_s2_num_yth1  

      //  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);  //s1_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);
     //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1);

        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1);  //range1_en
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,640);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,470); // u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,90);  //y center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,60);  //v range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,60);  //u range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,70);  //y range
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);  //range_min_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);  //range_max_x_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,24);  //range_min_y_2
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);   //range_max_y_2
       	path3 = 7 ;   
        holdframe185 --;

    }
    else if(video185)
    {
        video185 =0 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1         
       // WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x0);  //s1_clr_prot_en

        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);
     //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x0); //s2_clr_prot_en

        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x3);

        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x0);  //range1_en
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,set2_vcenter_init);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,set2_ucenter_init); // u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,set2_ycenter_init);  //y center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,set2_vrange_init);  //v range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,set2_urange_init);  //u range
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,set2_yrange_init);  //y range
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_en_init);  

        //      WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x19); //gmv y0
        path3 = 0 ;
    }     

    
    if(fwcontrol_13)
    {
        holdframe13 = 20 ;
        video13 = 1 ;    

          path3 =7 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,1); //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1); //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);  //bg_s1_slope

        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1);  //bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1); //bg_s2_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1); //bg_s2_slope

        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,650);   //s3_dubt_cov_sad    
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,600);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,250);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,600); 

        WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,650);  //cov_dubt_ucov_sad_th
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,600);  
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,600);        
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,250);    

        // WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);  //s1_clr_prot_en
        //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,0x0); //bg_s3_sad_sum_en
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5, fg_hold_en_init); 

        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,20); //bg_s3_dubt_cov_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,4);  //bg_s3_dubt_cov_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,0); //bg_s3_dubt_cov_shift
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,1); //bg_s3_dubt_cov_slope

        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,4);  //bg_s3_dubt_ucov_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,20);  //bg_s3_dubt_ucov_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,0);  //bg_s3_dubt_ucov_shift
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,1);  //bg_s3_dubt_ucov_slope
        
    } 
    else if(holdframe13)
    {
        holdframe13--;
        path3 =7 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,1); //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1); //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);  //bg_s1_slope

        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1);  //bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1); //bg_s2_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1); //bg_s2_slope

        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,650);   //s3_dubt_cov_sad    
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,600);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,250);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,600); 

        WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,650);  //cov_dubt_ucov_sad_th
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,600);  
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,600);        
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,250);    

     //   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);  //s1_clr_prot_en
     //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,0x0); //bg_s3_sad_sum_en
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5, fg_hold_en_init);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,20); //bg_s3_dubt_cov_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,4);  //bg_s3_dubt_cov_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,0); //bg_s3_dubt_cov_shift
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,1); //bg_s3_dubt_cov_slope
        
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,4);  //bg_s3_dubt_ucov_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,20);  //bg_s3_dubt_ucov_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,0);  //bg_s3_dubt_ucov_shift
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,1);  //bg_s3_dubt_ucov_slope
    }

    else if(video13)
    {
        video13 =0 ;
        path3 =0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);

        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x3);

        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,bg_s3_dubt_cov_sad_th_init);   //s3_dubt_cov_sad    
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,bg_s3_cov_largesad_th_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,bg_s3_cov_smallsad_th_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,bg_s3_cov_setbg_th_init); 

        WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,bg_s3_dubt_ucov_sad_th_init);  //cov_dubt_ucov_sad_th
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,bg_s3_ucov_smallsad_th_init);  
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,bg_s3_ucov_largesad_th_init);        
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,bg_s3_ucov_setbg_sad_th_init);    

      //  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x0);  //s1_clr_prot_en
     //   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x0); //s2_clr_prot_en
        WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,0x1); //bg_s3_sad_sum_en
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,0x1);  //fg_hold_en


        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,bg_s3_dubt_cov_num_yth2_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,bg_s3_dubt_cov_num_yth1_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,bg_s3_dubt_cov_shift_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,bg_s3_dubt_cov_slope_init);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,bg_s3_dubt_ucov_yth1_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,bg_s3_dubt_ucov_yth2_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,bg_s3_dubt_ucov_shift_init);
        WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,bg_s3_dubt_ucov_slope_init);

    }

	/*
    if(fwcontrol_306&&fg_apl_seg0_cnt<2100)
    {
        video306_2 =1 ;
        holdframe306_2 = 180 ;     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,40); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,66);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,40);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,66);  


     //   WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);  //s4_apl_force_bg_en
    //   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,180);  //s4_apl_force_bg_th0
    //   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);  //s4_apl_force_bg_th1

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en

   		path3=8 ;
    }
    else if(holdframe306_2>0)
    {
        holdframe306_2--;
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,35); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,66);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,35);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,66);     

     //  WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);  //s4_apl_force_bg_en
     //  WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,180);  //s4_apl_force_bg_th0
       // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);  //s4_apl_force_bg_th1

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
       	path3=8 ;
    }
    else if(video306_2)
    {
        video306_2 = 0 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);   
       // WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);                 
       // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0xff);
       // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
       	path3=0 ;
    }
	*/
  //  rtd_pr_memc_info("fgapl=%d %d %d %d %d %d%d %d\n" ,fg_apl_seg0_cnt,fg_apl_seg1_cnt,fg_apl_seg2_cnt,fg_apl_seg3_cnt,fg_apl_seg4_cnt,fg_apl_seg5_cnt,fg_apl_seg6_cnt,fg_apl_seg7_cnt ) ;
    if((s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag == 1)&&(!fwcontrol_1282))
    {
        path3=9  ;
        video317 =1 ;
        holdframe317 = 120 ; 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x16);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xc);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);      

        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x9);
        
    }
    else if(holdframe317>0)
    {
        path3=9  ;
        holdframe317--;
        pOutput->u1_me1_bg_pfv_corr_cond = 0; 
        pOutput->u1_me1_sad_bg_cond = 0 ;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x16);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xc);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);

        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x9);
    }
    else if(video317)
    {
        path3= 0x0  ;
        video317 =0 ;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);

        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x0);

    }


    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_72_face_flag == 1)
    {
        video72 =1 ;
        holdframe72 =50 ;
		if( s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
        {
            holdframe72 =  90 ;
        } 
        path3 = 0xa ; 

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,4); //djntest
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,4); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,4); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,4);

        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
    }
    else if(holdframe72>0)
    {
        holdframe72--;
        path3 = 0xa; 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);

        
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,4); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,4); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,4); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,4);

        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);


    }
    else if(video72)
    {
        video72 =0 ;
        path3 = 0  ; 
    }


 	///////// 183 /////////////////ori

 //   ReadRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,&mvth); 
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_151_broken == 1)
   {
	   video151 =1 ;
	   holdframe151 = s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ ? 360: 200; 

	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
	   path3 = 0xa ; 
   }
   else if(holdframe151>0)
   { 
	   holdframe151--;
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
        path3 = 0xa ; 
   }
   else if(video151)
   {
	   video151 =0 ;
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1	 
	   path3 = 0x0 ; 
   }


    
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_200_face_flag == 1)
   {
	   video200 =1 ;
	   holdframe200 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80 ;
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x0); //bg_s3_ucov_data_dis				 
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0); //bg_s3_cov_data_dis
	   path3 = 0xb ; 
   }
   else if(holdframe200>0)
   {
	   holdframe200--;
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x0); //bg_s3_ucov_data_dis				 
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0); //bg_s3_cov_data_dis
	   path3 = 0xb ; 
   }
   else if(video200)
   {
	   video200 =0 ;
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_en			   
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_en
	   path3 = 0xb ; 
   }

  if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag > 0)
  {
	  video432 =1 ;
	  holdframe432 = ( s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 360 : 180 ;
  
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1	
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
  
	  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
	  path3= 0xc ;
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,400);	//v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,655); // u center
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,620);  //y center
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,48);  //v range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,48);  //u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,200);  //y range 	 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1);	//range1_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,10,15,0x4);//colorprotect_cnt_th1  set to max value	 for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,29,29,0x0); //colorprotect_set1_fg
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,31,31,0x1); //range3_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,20,29,490);	//v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,10,19,475);//u center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,0,9,250); //y center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,18,26,40); //v range 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,9,17,40); //u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,0,8,100);   // y range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,4);//colorprotect_cnt_th3	set to max value   for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,16,25,150); //bg_s4_color_protect_sad_th
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,15,15,0x1);//bg_s4_color_protect_set_en
  
  }
  else if(holdframe432>0)
  {
	  holdframe432--;
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1	
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
	  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
  
	  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
	  path3 = 0xc ; 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,400);	//v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,655); // u center
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,620);  //y center
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,48);  //v range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,48);  //u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,200);  //y range 	 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x1);	//range1_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,10,15,0x4);//colorprotect_cnt_th1  set to max value	 for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,29,29,0x0); //colorprotect_set1_fg
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,31,31,0x1); //range3_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,20,29,490);	//v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,10,19,475);//u center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,0,9,250); //y center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,18,26,40); //v range 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,9,17,40); //u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,0,8,100);   // y range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,4);//colorprotect_cnt_th3	set to max value   for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,16,25,150); //bg_s4_color_protect_sad_th
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,15,15,0x1);//bg_s4_color_protect_set_en
  
  }
  else if(video432)
  {
	  video432 =0 ;
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
	  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1	
	  path3 = 0x0 ; 
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,20,29,set2_vcenter_init);  //v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,10,19,set2_ucenter_init); // u center
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,0,9,set2_ycenter_init);	//y center
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,18,26,set2_vrange_init);  //v range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,9,17,set2_urange_init);	//u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_2_reg,0,8,set2_yrange_init);  //y range	  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_1_reg,31,31,0x0);	//range1_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,10,15,0x3f);//colorprotect_cnt_th1  set to max value   for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,29,29,0x1); //colorprotect_set1_fg
  
  
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,31,31,0x0); //range3_en
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,20,29,0x0);	//v center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,10,19,0x0);//u center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_5_reg,0,9,0x0); //y center 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,18,26,0x0); //v range 
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,9,17,0x0); //u range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_6_reg,0,8,0x0);   // y range
	  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_7_reg,22,27,0x3f);//colorprotect_cnt_th3  set to max value   for hw bug 
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,16,25,0x12c); //bg_s4_color_protect_sad_th
	  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,15,15,0x0);//bg_s4_color_protect_set_en
  
  }

 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_195_face_broken == 1&&(!video192))
   {
	   video195 =1 ;
	   holdframe195 =  (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 220 : 110 ;

	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x10);	//bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,25);	//fg_apl_s2_protect_bgnum_th_init
	   path3 = 0xc ; 
   }
   else if(holdframe195>0)
   {
	   holdframe195--;

	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x10);	//bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,25);  //fg_apl_s2_protect_bgnum_th_init
		path3 = 0xc ; 
   }
   else if(video195)
   {

	   video195 = 0 ;

	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
	   WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1	
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
	   WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);
	   WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis);   
	   WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,16,16,0);    //bg_mask_pfv_blend_dis
	   path3 = 0x0 ; 
   }

    if(fwcontrol_214 || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214 == 1))
    {
        holdframe214 = 5 ;
        video214 =2  ;
        
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x20); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x20); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x20); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x25); 
        path3 =0xc;
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_dis); 
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,16,16,0);    //bg_mask_pfv_blend_dis
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);   // gmv candidtae choose gmv  not  rmv 
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);


    }
    else if(holdframe214>0)
    {
        holdframe214--;
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x20); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x20); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x20); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x25); 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);
		path3 =0xc;
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);   // gmv candidtae choose gmv  not  rmv 
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);
    }
    else if(video214)
    {
        video214 = 0 ;
        path3 =0;
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,24,24,fg_mask_pfv_blend_en_init); 
        WriteRegister(KME_ME1_BG0_ME1_BG_4_reg,16,16,1);    //bg_mask_pfv_blend_dis
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);   // gmv candidtae choose gmv  not  rmv 
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);

    }

    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag3&&(!video192))
    {
        holdframe317_3 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200 : 100 ;
        video317_3 =1 ;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
        path3 =2;
    }
    else if(holdframe317_3)
    {
        holdframe317_3--;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
         path3 =2;
    }
    else if(video317_3)
    {
        video317_3 = 0 ;
         path3 =0 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1   
    }

    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag2&&(!video306_2)&&(!video192))
    {
        video317_2 =1 ;
        holdframe317_2 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 500 : 250 ;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
         path3 =9;
    }
    else if(holdframe317_2)
    {
        holdframe317_2--;
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0);
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x18);  //bg_s1_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1a);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1a); //bg_s2_num_yth1  
         path3 =9 ;
    }
	else if(video317_2)
	{
		video317_2 = 0 ;
		 path3 =0;
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);	//bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);	//bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1  
	}
	
	
	
	//---------------------------	96	-----------------------------//
	//rtd_pr_memc_info("flag:%d\n",s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_96);
	//rtd_pr_memc_info("gmv:%d %d rmv:%d %d\n",u11_gmv_mvx,u10_gmv_mvy,rmvx[15],rmvy[15]);
	ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,30,30, &cond96);
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_96 == 1) ||(cond96 == 1))
	{

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[15]);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		holdframe_96 = 0;
		video96 = 1;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[15]);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[15]);
		
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);	//gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
		path3 = 0xd ; 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);   //range max  x 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); //range max y
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);  
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,16,20,0x0); //BG_S4_1_bg_s3_occl_rgn25_th
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,9,15,0x0);  //BG_S4_1_bg_s3_occl_rgn65_th
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,14,14,0x1);  //bg_occl_match_ver_en
		WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x1); //BG_10_bg_s3_occl_match_bypass  
	}
	else if(holdframe_96>0)
	{
		holdframe_96--;
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[15]);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[15]);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[15]);

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);	//gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
		path3 = 0xd ;
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);   //range max  x 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); //range max y
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);	  
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,16,20,0x0); //BG_S4_1_bg_s3_occl_rgn25_th
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,9,15,0x0);  //BG_S4_1_bg_s3_occl_rgn65_th
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,14,14,0x1);  //bg_occl_match_ver_en
		WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x1); //BG_10_bg_s3_occl_match_bypass  
	}
	else if(video96)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		video96 = 0;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

		
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);	//gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,16,20,0x5); //BG_S4_1_bg_s3_occl_rgn25_th
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,9,15,0xa);  //BG_S4_1_bg_s3_occl_rgn65_th
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,14,14,0x0);  //bg_occl_match_ver_en
		WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x0); //BG_10_bg_s3_occl_match_bypass


	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);   //range max  x 
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0); //range max y
		//path3 = 0x0 ;
	}

	if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_96_2_flag == 1) 
	{
		holdframe_96_2 = 0;
		video96_2 = 1;
		path3 = 0xd ;
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);   //range max  x 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); //range max y
		// WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
		// WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);  
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1  
	}
	else if(holdframe_96_2>0)
	{
		holdframe_96_2--;

		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);   //range max  x 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); //range max y
		// WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
		// WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1); 
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1  
	   path3 = 0xd ;
	}
	else if(video96_2)
	{

		path3 = 0x0 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1  
	}
	
    forcegmvx =  rmvx[8] ;
    forcegmvy =  rmvy[8] ;
    if( rmvx[0]<rmvx[8] )
    {
        forcegmvx =  rmvx[0] ;
        forcegmvy =  rmvy[0] ;
    }
    else   if( rmvx[9]<rmvx[8] )
    {
        forcegmvx =  rmvx[9] ;
        forcegmvy =  rmvy[9] ;
    }


	//---------------------------	421  -----------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_421 == 1&&(!s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_128_flag))
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[8]);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		holdframe_421 = 0;
		video421 = 1;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, forcegmvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, forcegmvy);
		   
		//	 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
		//	 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x3f);	//th0
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x3f);
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x3f);
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x44);
		path3 = 0xd ;

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,forcegmvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		
	}
	else if(holdframe_421>0)
	{
		holdframe_421--;
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,forcegmvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, forcegmvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, forcegmvy);

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);	//gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x3f);	//th0
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x3f);
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x3f);
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x44);
		path3 = 0xd ;		
        
	}
	else if(video421)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		video421 = 0;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

		
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);	//gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x14);	//th0
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x14);
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x14);
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x19);
		path3 = 0x0 ;

		
	}


		
	  //video315 = 0;
	  //holdframe315 = 0;


/*	  //+++++++++++++++++315 181 horse vertical moving video++++++++++++++//
	if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_ver_case1==1)
	{
		holdframe315=  (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 250 : 120 ; 
		video315=1;
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x4);  //bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1);	//bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x8);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x2); //bg_s2_num_yth1   
		
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,22);  //dubt_cov_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,4);  //dubt_cov_num_yth1
		//WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,bg_s3_dubt_cov_shift_init);
	   // WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,bg_s3_dubt_cov_slope_init);
		
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,4);  //dubt_ucov_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,22); //s3_dubt_ucov_yth2
	   // WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,bg_s3_dubt_ucov_shift_init);
	  //  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,bg_s3_dubt_ucov_slope_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_en				
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_en		
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);  // init =1 
		path3 = 0xd ;

	}
	else if(holdframe315>0)
	{
		path3 = 0xd ;
		holdframe315 -- ; 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);	//full range 
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x4);  //bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1);	//bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x8);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x2); //bg_s2_num_yth1   

				
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,22);  //dubt_cov_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,4);  //dubt_cov_num_yth1
		//WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,bg_s3_dubt_cov_shift_init);
	   // WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,bg_s3_dubt_cov_slope_init);
		
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,4);  //dubt_ucov_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,22); //s3_dubt_ucov_yth2
	   // WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,bg_s3_dubt_ucov_shift_init);
	  //  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,bg_s3_dubt_ucov_slope_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_en				
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_en		
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_off);  // init =1 
	}
	else if(video315)
	{
		video315 = 0 ;
		path3 = 0 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);	//bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);	//bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1   
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,bg_s3_dubt_cov_num_yth2_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,bg_s3_dubt_cov_num_yth1_init);
	 //   WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,bg_s3_dubt_cov_shift_init);
	  //  WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,bg_s3_dubt_cov_slope_init);
		
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,bg_s3_dubt_ucov_yth1_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,bg_s3_dubt_ucov_yth2_init);
	 //   WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,bg_s3_dubt_ucov_shift_init);
	  //  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,bg_s3_dubt_ucov_slope_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,bg_color_protect_en_init);  // init =1 
	} 

*/

 //------------------------- 219 -------------------------------//
	
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_219 == 1) 
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[7]);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		video219 = 1;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[7]);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[7]);
		
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        path3 =6 ;
	}
	else if(video219)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		video219 = 0;
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

		
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
        path3 =0 ;
	}


    //------------------------  227  -----------------------------------//
    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_1 == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[13]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2271 = 1;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[13]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[13]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        path3 =7 ;
    }
    else if(video2271)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2271 = 0;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
        path3 =0 ;
    }

    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_2 == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[11]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2272 = 1;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[11]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[11]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x60);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x60);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x60);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x65);
        path3 =7 ;
    }
    else if(video2272)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2272 = 0;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x14);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x14);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x14);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x19);
        path3 =0 ;
    }


    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_3 == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[20]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2273 = 1;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[20]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[20]);

        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x25);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x25);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x25);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x2a);

        path3 =7 ;
        
    }
    else if(video2273)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2273 = 0;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

        
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x14);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x14);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x14);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x19);

        path3 =0 ; 

        
    }


    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_4 == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[8]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2274 = 1;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[8]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[8]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0xb0);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0xb0);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0xb0);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0xb5);
        path3 =7 ;

    }
    else if(video2274)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2274 = 0;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

        
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x14);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x14);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x14);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x19);
        path3 = 0;
    }



    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_5 == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[11]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2275 = 1;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[11]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[11]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0); //pfv corr max x 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);//pfv corr max y

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x20);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x20);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x20);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x25);
        path3 =7 ;
    }
    else if(video2275)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        video2275 = 0;
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
        path3 =0 ;
    }


    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_2 ||
        s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_3 || s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_4 ||
        s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_5)
    {
        WriteRegister(HARDWARE_HARDWARE_25_reg, 22,22 , 1);
    }
    else
    {
        WriteRegister(HARDWARE_HARDWARE_25_reg, 22,22 , 0);
    }

    //+++++++++++++++++431 halo+++++++++++++++++++++++// 
    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_431_halo_flag==1)
    {
        holdframe431=  (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160 : 80; 
        video431=1;
        path3 = 0xd ;

        WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,1,1,1); //bg_s3_mode0_cond_en 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0);   //fg_apl_s3_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0);  //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,15,21,8); //reg_me1_bg_s3_mode0_ucov_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,8,14, 30); //reg_me1_bg_s3_mode0_ucov_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0xa);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x2); //bg_s2_num_yth1 
        WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,0x1);  //s2_ucov_cond_en
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,134);   //corr  range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,57);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
    }
    else if(holdframe431)
    {
        holdframe431--;
        path3 = 0xd ;

        WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,1,1,1); //bg_s3_mode0_cond_en 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0);   //fg_apl_s3_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0);  //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,15,21,8); //reg_me1_bg_s3_mode0_ucov_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,8,14, 30); //reg_me1_bg_s3_mode0_ucov_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0xa);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x2); //bg_s2_num_yth1 
        WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,0x1);  //s2_ucov_cond_en     
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,134);   //corr  range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,57);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
    }
    else if(video431)
    {
        video431=0 ;
        path3 = 0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,1,1,0); //bg_s3_mode0_cond_en 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1);   //fg_apl_s3_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1);  //s2_protect_en
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,15,21,0x2); //reg_me1_bg_s3_mode0_ucov_yth1
        WriteRegister(KME_ME1_BG0_ME1_BG_8_reg,8,14,0x14); //reg_me1_bg_s3_mode0_ucov_yth2

        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
        WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1    
        WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,0x0);  //s2_ucov_cond_en
    }
   //++++++++++++++++49 boy halo+++++++++++++++++++++++++//
    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_49_halo_flag==1)
    {
        holdframe49=  (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160 : 80; 
        video49=1;
        path3 =0xe ;

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,0); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,0);

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x20);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x20);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x20);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x25);

        WriteRegister(HARDWARE_HARDWARE_25_reg, 24,24 , 1);
            
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,20,29,580);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,10,19,460);  //u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,0,9, 400);//y center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,18,26,140);  //v range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,9,17,140);  //u range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,0,8,350);  // y range
    }
    else if(holdframe49>0)
    {
        holdframe49--;
        path3 =0xe ;
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,0); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,0);

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x20);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x20);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x20);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x25);
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,20,29,580);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,10,19,460);  //u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,0,9, 400);//y center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,18,26,140);  //v range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,9,17,140);  //u range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,0,8,350);  // y range
        
        WriteRegister(HARDWARE_HARDWARE_25_reg, 24,24 , 1);
              

    }
    else if(video49)
    {
        video49 =0 ;
        path3 =0x0 ;

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);
        WriteRegister(HARDWARE_HARDWARE_25_reg, 24,24 , 0);

        //  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,31,31,0x1);  //range2_en
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,20,29,set1_vcenter_init);  //v center 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,10,19,set1_ucenter_init);  //u center
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_3_reg,0,9, set1_ycenter_init);//y center 
        //  WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,27,27,0x0);
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,18,26,set1_vrange_init);  //v range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,9,17,set1_urange_init);  //u range 
        WriteRegister(IPPRE1_IPPRE1_COLOR_PROT_4_reg,0,8,set1_yrange_init);  // y range

        
    }

    
    //++++++++++++++++163 dog hortical move halo+++++++++++++++++++++++++//
    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_163==1)
    {
        holdframe163=  (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 300 : 150; 
        video163=1;
        path3 =0xe ;
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[11]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[11]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[11]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x10);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x10);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x10);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x12);
        //corr pfv full range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	  // fg_apl_s2_protect_th0   	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,80); //fg_apl_s2_protect_th1 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,65); //fg_apl_s2_protect_bgnum_th 

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);   //fg_apl_s3_protect_th0 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,80);   //fg_apl_s3_protect_th1 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,65); //fg_apl_s3_protect_bgnum_th  
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect

        WriteRegister(HARDWARE_HARDWARE_25_reg, 25,25 , 1);
    }
    else if(holdframe163>0)
    {
        holdframe163--;
        path3 =0xe ;
		
	  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[11]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[11]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[11]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x10);  //th0
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x10);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x10);
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x12);
                //corr pfv full range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);   


        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);	  // fg_apl_s2_protect_th0   	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,80); //fg_apl_s2_protect_th1 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,65); //fg_apl_s2_protect_bgnum_th 

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);   //fg_apl_s3_protect_th0 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,80);   //fg_apl_s3_protect_th1 
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,65); //fg_apl_s3_protect_bgnum_th  
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
       
        WriteRegister(HARDWARE_HARDWARE_25_reg, 25,25 , 1);
    }
    else if(video163)
    {
        video163 =0 ;
        path3 =0x0 ;
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);	    	    
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init); 	     
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);  

        WriteRegister(HARDWARE_HARDWARE_25_reg, 25,25 , 0);
    }


    //------------------------- 432 final gmv ------------------------------//

    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_432final == 1) 
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[6]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[6]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[6]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

        video_tinydtl = 1;

        //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x7); 
        //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x7); 
        //WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x7); 
        //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0xc); 

        //if( s_pContext->_external_data._output_frameRate == _PQL_OUT_60HZ);
        {
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,24);  //bg_s1_num_yth2
            WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,12);  //bg_s1_num_yth1
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
            WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,15); //bg_s2_num_yth1   
        }
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);
        
        if( s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
        {
            holdframe_tinydtl = 240;
        }
        else
        {
            holdframe_tinydtl = 120;
        }
        path3 =1 ;
    }
    else if(holdframe_tinydtl>0)
    {
    
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[6]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[6]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[6]);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
     
		 video_tinydtl = 1;
		 
		 holdframe_tinydtl--;
		 path3 =1 ;
		 //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x7); 
		 //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x7); 
		 //WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x7); 
		 //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0xc); 
		// if( s_pContext->_external_data._output_frameRate == _PQL_OUT_60HZ);
		 {
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,24);  //bg_s1_num_yth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,12);	//bg_s1_num_yth1
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,15); //bg_s2_num_yth1   
		 }
		
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

    }
    else if(video_tinydtl)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
		video_tinydtl = 0;
		path3 =0 ;
		  
		//	if( s_pContext->_external_data._output_frameRate == _PQL_OUT_60HZ);
		  {
			  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
			  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
			  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
			  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1	
		  }
		  //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
		  //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
		  //WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
		  //WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 

    }      
   

   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_343_bypass == 1) 
   {
	   video343= 1;
	   holdframe343  = 120 ;
	   path4 =1 ;
   }
   else if(holdframe343>0)
   {
	   holdframe343--;
	   path4 =1 ;
   }
   else if(video343)
   {
	   video343 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_182_bypass == 1) 
   {
	   video182= 1;
	   holdframe182  = 120 ;
	   path4 =2 ;
   }
   else if(holdframe182>0)
   {
	   holdframe182--;
	   path4 =2 ;
   }
   else if(video182)
   {
	   video182 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_393_scgarbage == 1) 
   {
	   video393= 1;
	   holdframe393  = 10 ;
	   path4 = 3;
   }
   else if(holdframe393>0)
   {
	   holdframe393--;
	   path4 = 3;
   }
   else if(video393)
   {
	   video393 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_410_scgarbage == 1) 
   {
	   video410= 1;
	   holdframe410  = 10 ;
	   path4 = 4;
   }
   else if(holdframe410>0)
   {
	   holdframe410--;
	   path4 = 4;
   }
   else if(video410)
   {
	   video410 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_416_bypass == 1) 
   {
	   video416= 1;
	   holdframe416  = 120 ;
	   path4 = 5;
   }
   else if(holdframe416>0)
   {
	   holdframe416--;
	   path4 = 5;
   }
   else if(video416)
   {
	   video416 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_412_bypass == 1) 
   {
	   video412= 1;
	   holdframe412  = 120 ;
	   path4 = 6;
   }
   else if(holdframe412>0)
   {
	   holdframe412--;
	   path4 = 6;
   }
   else if(video412)
   {
	   video412 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214 == 1) 
   {
	   video2144= 1;
	   holdframe2144  = 120 ;
	   path4 = 7;
   }
   else if(holdframe2144>0)
   {
	   holdframe2144--;
	   path4 = 7;
   }
   else if(video2144)
   {
	   video2144 =0 ;
	   path4 =0 ;
   }
   
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_419_flag == 1) 
   {
	   video419= 1;
	   holdframe419  = 120 ;
	   path4 = 8;
   }
   else if(holdframe419>0)
   {
	   holdframe419--;
	   path4 = 8;
   }
   else if(video419)
   {
	   video419 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_horn_skin_off == 1)  //192
   {
	   video1922= 1;
	   holdframe1922  = 120 ;
	   path4 = 0x9;
   }
   else if(holdframe1922>0)
   {
	   holdframe1922--;
	   path4 = 0x9;
   }
   else if(video1922)
   {
	   video1922 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_151_broken == 1)  //151
   {
	   video1511= 1;
	   holdframe1511  = 120 ;
	   path4 = 0xa;
   }
   else if(holdframe1511>0)
   {
	   holdframe1511--;
	   path4 = 0xa;
   }
   else if(video1511)
   {
	   video1511 =0 ;
	   path4 =0 ;
   }
   
   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_128_flag == 1)  //128
   {
	   video1288= 1;
	   holdframe1288  = 120 ;
	   path4 = 0xb;
   }
   else if(holdframe1288>0)
   {
	   holdframe1288--;
	   path4 = 0xb;
   }
   else if(video1288)
   {
	   video1288 =0 ;
	   path4 =0 ;
   }
   //rtd_pr_memc_info("%d %d %d %d %d %d %d %d %d %d %d\n",s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_343_bypass,s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_182_bypass,
   //s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_393_scgarbage,s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_410_scgarbage,s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_416_bypass,
   //s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_412_bypass,s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214,s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_419_flag,
   //s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_horn_skin_off,s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_151_broken,s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_128_flag);
   
   
   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, path4); //path segment 
   
	   //---------------------------pq issue pattern ----------------------------//
	   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_PQ_Issue == 1)
	   {		
   
		   FrameHold_PQ_Issue = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 60: 30  ;  
		   FrameHoldflag_PQ_Issue=1;
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);  //bg_s3_cov_data_en	 
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);	//bg_s3_ucov_data_en   
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);   // fg_apl_s3_protect_th0_init 
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,0);    //fg_apl_s3_protect_th1_init
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,0);	  // fg_apl_s3_protect_bgnum_th_init   
		   WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //s2_protect_en
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,10); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,10); 
		   WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,10); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,12); 
				 //path4 = 0xf;
					 // 	WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);   // gmv candidtae choose gmv  not	rmv 
		   WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
		   WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[9]+10);
		   WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[9]);
   
   
	   }
	   else if(FrameHold_PQ_Issue>0)
	   {
		   FrameHold_PQ_Issue -- ;
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,bg_s3_cov_data_en_init);  //bg_s3_cov_data_en	 
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,bg_s3_ucov_data_en_init);	//bg_s3_ucov_data_en   
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);   // fg_apl_s3_protect_th0_init 
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,0);    //fg_apl_s3_protect_th1_init
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,0);	  // fg_apl_s3_protect_bgnum_th_init   
		   WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //s2_protect_en
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,10); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,10); 
		   WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,10); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,12); 
						  //path4 = 0xf;
   
		   //  WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);	 // gmv candidtae choose gmv  not  rmv 
		   WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
						 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[9]+10);
		   WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[9]);
   
		 
	   }
	   else if(FrameHoldflag_PQ_Issue)
	   {
		   FrameHoldflag_PQ_Issue=0;
		   WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //s2_protect_en
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);	
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);   
		   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);   
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
		   WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
		   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 
							 //path4 = 0x0;
		   WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);	 // gmv candidtae choose gmv  not  rmv 
		   WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
   
	   }

		if((Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)&&(path3!=0xc))  
			{
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);
			WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,200); //large
			WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,100); //smallsad_th
			WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,200); //setbg_sad_th
			WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,220); //dubt_cov_SAD_th
			WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,100); //smallsad_th
			WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,200); //large
			WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,200); //setbg_sad_th
			WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,220); //dubt_ucov_sad_th
			}
		if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)
		{
			//postflt
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
			WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
			WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
			WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
		}



        if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)
        {
           if(_ABS_(rmvx[16])>_ABS_(rmvx[24]))
                final_mvx = rmvx[16];
           else
                final_mvx = rmvx[24];

           if(_ABS_(rmvy[16])>_ABS_(rmvy[24]))
                final_mvy = rmvy[16];
           else
                final_mvy = rmvy[24];
           
            if(_ABS_(rmvx[7])>_ABS_(final_mvx) && rmvx[7]<0)
                    final_mvx = rmvx[7];

            if(_ABS_(rmvy[7])>_ABS_(final_mvy) && rmvy[7]<0)
                    final_mvy = rmvy[7];

            if(_ABS_(final_mvx)<5)
                    final_mvx = -100;
            if(_ABS_(final_mvy)<5)
                    final_mvy = -25;

             if(final_mvx>60)
                    final_mvx = -80;
            // if(final_mvy>20)
            //         final_mvy = -25;

            if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_fixgmv_2k_flag == 1)
            {
               // WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,final_mvx);
               // WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, final_mvx);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, final_mvy);

                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,40);  //th0
                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,40);
                WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,40);
                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,45);


                video_fixgmv = 1;
                
            }
            else if(video_fixgmv)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0);  //th0
                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0);
                WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0);
                WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5);

                video_fixgmv = 0;
            }
        }







	    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_preden_mvdiffth_flag == 1)
        {        
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x10); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x10); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x10); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x15); 

			video_preden0_off = 1;        


        }
        else if(video_preden0_off)
        {
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 
            video_preden0_off = 0;
        }

		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_183_face_broken == 1)
		{
			video183 =1 ;
			holdframe183 = s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ? 360:  180 ;
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,14);  //bg_s1_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,6);  //bg_s1_num_yth1
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20); //bg_s2_num_yth1	
		
			//WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0xa);  //bg_s1_num_yth2
			//WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,3);	//bg_s1_num_yth1
			//WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x10);//bg_s2_num_yth2
			//WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,6); //bg_s2_num_yth1  
		
			
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,24,28,0x19);  //BG_16_bg_s3_clr_prot_th  0x12
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,18,22,0x19);  //BG_16_bg_s1_clr_prot_th
		 //   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1); //sad_cov_en  
		 //   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1); //sad_ucov_en  
		
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14, 38);  //bg_s3_dubt_cov_num_yth2_init
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21, 14); //bg_s3_dubt_cov_num_yth1_init 
			
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21, 10);//bg_s3_dubt_ucov_yth1_init
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14, 36);  //bg_s3_dubt_ucov_yth2_init
			WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x1); //BG_10_bg_s3_occl_match_bypass
			WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,21,21,0x1); //bg_s3_occl_rgn_match_en
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,65);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_en				
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0); //bg_s3_cov_data_en
			WriteRegister(HARDWARE_HARDWARE_25_reg, 23,23 , 1);
		
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,1);
		
			
			path3  = 0x5 ;
		}
		else if(holdframe183>0)
		{
			holdframe183--;
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,14);  //bg_s1_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,6);  //bg_s1_num_yth1
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);//bg_s2_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20); //bg_s2_num_yth1	
		
			//WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0xa);  //bg_s1_num_yth2
			//WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,3);	//bg_s1_num_yth1
			//WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x10);//bg_s2_num_yth2
			//WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,6); //bg_s2_num_yth1  
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,24,28,0x19);  //BG_16_bg_s3_clr_prot_th  0x12
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,18,22,0x19);  //BG_16_bg_s1_clr_prot_th
		 //   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1); //sad_cov_en  
		 //   WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1); //sad_ucov_en  
		
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14, 38);  //bg_s3_dubt_cov_num_yth2_init
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,14); //bg_s3_dubt_cov_num_yth1_init 
			
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21, 10);//bg_s3_dubt_ucov_yth1_init
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14, 36);  //bg_s3_dubt_ucov_yth2_init
			WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x1); //BG_10_bg_s3_occl_match_bypass
			WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,21,21,0x1); //bg_s3_occl_rgn_match_en
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,65);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_en				
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0); //bg_s3_cov_data_en
			WriteRegister(HARDWARE_HARDWARE_25_reg, 23,23 , 1);
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,1);
			
			path3  = 0x5 ;
		}
		else if(video183)
		{
			video183 =0 ;
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);	//bg_s1_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);	//bg_s1_num_yth1
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1   
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,24,28,0x14);  //BG_16_bg_s3_clr_prot_th  0x12
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,18,22,0x14);  //BG_16_bg_s1_clr_prot_th
		
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,bg_s3_dubt_cov_num_yth2_init); 
			WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,bg_s3_dubt_cov_num_yth1_init);
			
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,bg_s3_dubt_ucov_yth1_init);
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,bg_s3_dubt_ucov_yth2_init);
			WriteRegister(KME_ME1_BG0_ME1_BG_10_reg,2,2,0x0); //BG_10_bg_s3_occl_match_bypass
			WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,21,21,0x0); //bg_s3_occl_rgn_match_en
			WriteRegister(KME_ME1_BG0_ME1_BG_16_reg,9,9,0);
			WriteRegister(HARDWARE_HARDWARE_25_reg, 23,23 , 0);
			path3 =0 ;
		}		
			ReadRegister(HARDWARE_HARDWARE_25_reg, 23,23 ,&fwcontrol_183);
		
		if(fwcontrol_306&&fg_apl_seg0_cnt<2100 &&(fwcontrol_183==0))
		{
			video306_2 =1 ;
			holdframe306_2 = 180 ;	   
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);				
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,40);		 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,66);
		
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);	 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,40);	
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,66);  
		
		
		 //   WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);	//s4_apl_force_bg_en
		//	 WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,180);  //s4_apl_force_bg_th0
		//	 WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);  //s4_apl_force_bg_th1
		
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
		
			path3=8 ;
		}
		else if(holdframe306_2>0)
		{
			holdframe306_2--;
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);				
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,35);		 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,66);
		
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);	 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,35);	
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,66);	 
		
		 //  WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);  //s4_apl_force_bg_en
		 //  WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,180);  //s4_apl_force_bg_th0
		   // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);  //s4_apl_force_bg_th1
		
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
			path3=8 ;
		}
		else if(video306_2)
		{
			video306_2 = 0 ;
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);				
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init);		 
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);
		
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);	 
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);	
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);	
		   // WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);				   
		   // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0xff);
		   // WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);
			WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
			WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
			 path3=0 ;
		}


		
	   	/*if((Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)&&(path3!=0xc))  //if((Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)&&(path3!=0xc))  
	    {
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,8);
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,20);
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,25);
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,20);
		WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,200); //large
		WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,100); //smallsad_th
		WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,200); //setbg_sad_th
		WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,1,10,220); //dubt_cov_SAD_th
		WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,100); //smallsad_th
		WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,200); //large
		WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,200); //setbg_sad_th
		WriteRegister(KME_ME1_BG1_ME_BG_2x2_3_reg,0,9,220); //dubt_ucov_sad_th
	    }
		if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K){//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
		{
			//postflt
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
			WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
			WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
			WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
		}*/
//----------------------------  transporter -----------------------------//
if(s_pContext->_external_data._output_frameRate == _PQL_OUT_100HZ)
{
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter =1 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,25); // bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,14);  //  bg_s1_num_yth1 
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,31); // bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,31);  //  bg_s2_num_yth1 
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,6,6,0x0);//apl_set_en
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x0); //s3_ucov_data
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0x0); //s3_cov_data
		
	}
	else if(video_transporter)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10); // bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //  bg_s1_num_yth1 
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0xc); // bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa);  //  bg_s2_num_yth1 
		WriteRegister(KME_ME1_BG1_ME_BG_S4_1_reg,6,6,0x1);//apl_set_en
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x1); //s3_ucov_data
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0x1); //s3_cov_data
		video_transporter = 0 ;
	}

}
else
{
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter =1 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);  //bg_color_protect_en             
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en                           
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect                    
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en 	  
	}
	else if(video_transporter)
	{
		video_transporter = 0 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);  //bg_color_protect_en           
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en                         
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect                    
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en	  
	}



}




	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dance_status == 1)
	{
			WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);  //bg_color_protect_en        
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en          

		if(u11_gmv_mvx<20)
		{
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x10);         
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x10);         
			WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x10);        
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x10+5);

			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x8); //bg_s1_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1); //bg_s1_num_yth1
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x8);//bg_s2_num_yth2
			WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x2); //bg_s2_num_yth1
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,4);
			WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,20);
		}
		else
		{
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x18);         
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x18);         
			WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x18);        
			WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x18+5);	
		}
		video_dance = 1 ;
	}
	else if(video_dance)
	{

		video_dance = 0 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);  //bg_color_protect_en        
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en

		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10); //bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4); //bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);//bg_s2_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa); //bg_s2_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,bg_s3_dubt_ucov_yth1_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,bg_s3_dubt_ucov_yth2_init);



		
	}




	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_smallplane_status == 1)
	{
		video_smallplane =1 ;
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0); //pfv corr max x        
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);//pfv corr max y	
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0xa);  //bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x14);  //bg_s1_num_yth2
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x0); //bg_s3_ucov_data_dis
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x0); //bg_s3_cov_data_dis

	}
	else if(video_smallplane)
	{

		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);  //bg_s1_num_yth1
		WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);  //bg_s1_num_yth2
		video_smallplane = 0 ;
	}



	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_soccer_status == 1 || 
		s_pContext->_output_me_sceneAnalysis.u1_SportScene == 1)
	{
		video_soccer =1 ;
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  1  );  

	}
	else if(video_soccer)
	{
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  0  );  
		video_soccer = 0 ;
	}


	
	//---------------------  dacne 2 --------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dance_2_status == 1)
	{
		
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,(rmvx[14]+rmvx[9])/2);
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18,(rmvx[14]+rmvx[9])/2);
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28,(rmvy[14]+rmvy[9])/2);
	        
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
		
		video_dance2 =1 ;
	}
	else if(video_dance2)
	{
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
	        
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
	        
	        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
	        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

		video_dance2 = 0 ;
	}

if(s_pContext->_external_data._output_frameRate != _PQL_OUT_100HZ)
{
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0); //full range
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); 
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x0); //bg_s3_ucov_data_dis
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_dis
	}
}

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dance_status == 1)
	{
		if(u11_gmv_mvx<20)
		{		
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0); //full range
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
			WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86); 
		}
		
	}

	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status==0))
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_dis
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_dis
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,200); //bg_s4_apl_force_bg_th0
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,220); //bg_s4_apl_force_bg_th1
		WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);
		video_skating = 1;

		
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); 
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); 

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,1990);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

		//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 1990);
		//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0);

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en


		path3 = 0xe;
		
	}
	else if(video_skating)
	{
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0xff); //bg_s4_apl_force_bg_th0
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff); //bg_s4_apl_force_bg_th1
		WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);
		video_skating = 0;

		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); 
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); 

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);


		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
		path3 = 0xf;
		
	}


	if(s_pContext->_output_me_sceneAnalysis.u1_SportScene == 1){
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28, 1 ); // new algo switch enable
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 24, 25, 2 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 8, 15, 255 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7, 140 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 0, 9, 10 ); //penalty
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26, 20 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31, 9 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 2, 2, 0 ); //me1_small_obj_cand2_en
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 3, 3, 0 );

	}
	else if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_C001soccer_status)
	{

		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28, 1 ); // new algo switch enable
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 24, 25, 2 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7, 176 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 0, 9, 10 ); //penalty
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26, 20 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31, 9 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 2, 2, 0 ); //me1_small_obj_cand2_en
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 3, 3, 0 );

		video_C001soccer = 1;
	}
	else if(video_C001soccer)
	{

		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28, 0 ); // new algo switch enable
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 24, 25, 0 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 8, 15, 255 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7, 140 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 0, 9, 256 ); //penalty
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26, 13 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31, 7 );
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 2, 2, 0 ); //me1_small_obj_cand2_en
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 3, 3, 0 );

		video_C001soccer = 0;
	}



	//---------------------- 30006 ----------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_30006_status == 1)
	{
		video30006 = 1 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,0);
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,0);
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,0);

		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,0);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,0);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,0);

		
	}
	else if(video30006)
	{
		video30006 = 0 ;
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,8,15,fg_apl_s2_protect_th0_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,16,23,fg_apl_s2_protect_th1_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,1,7,fg_apl_s2_protect_bgnum_th_init);

		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,16,23,fg_apl_s3_protect_th0_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,8,15,fg_apl_s3_protect_th1_init);
		WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,1,7,fg_apl_s3_protect_bgnum_th_init);


	}


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status == 1)
	{
		
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);

	}

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status == 1)
	{
		
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);

	}

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_rotterdam2_status == 1)
	{
		video_rotterdam = 1 ;
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);

	}

	

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_ridebikegirl_status == 1)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[26]+10);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);

		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[26]+10);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[26]);

		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,17); 
		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,17); 
		//WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,17); 
		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,22); 

		WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1); //s4_apl_force_bg_en
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,180); //s4_apl_force_bg_th0
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff); //s4_apl_force_bg_th1
		
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0);

		
		video_ridebike = 1;
	}
	else if(video_ridebike>0)
	{
		video_ridebike = 0;
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);


		WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
		//WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
		//WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 

		WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0xff);
		WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);//???????????
		

	}
	

	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_toleft_bike_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status ==0))
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);  //bg_color_protect_en        
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en  
		
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0); //full range
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);
		
		video_toleftbike = 1;
	}
	else if(video_toleftbike>0)
	{
		WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);  //bg_color_protect_en        
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en          
		video_toleftbike = 0;
		
	}


	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 1))
	{
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, gmv_mvx_final);
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0);	
		video_0026 = 1;
	}
	else if(video_0026>0)
	{
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0);
						WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0);	

		video_0026 = 0;
		
	}
   
	   
   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_insect_status == 1)
   {
	   video_insect = 1;
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,32); 
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,32); 
	   WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,32); 
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,37); 
   
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,240);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,135);
   
   }
   else if(video_insect>0)
   {
	   video_insect = 0;
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
	   WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
	   WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 
	   
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0x0);
	   WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0x0);
	   
   }

   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_eagle_status == 1)
   {
	   video_eagle = 1;  
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,90);
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,160);			   
	   
   
	   
	 }
	 else if(video_eagle)
	 {
	   video_eagle = 0;
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0x0);
	   WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);	   
	 }

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status == 1)
	{
		video_huapi2 = 1;
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0);
	}
	else if(video_huapi2>0)
	{
		video_huapi2 = 0;
		WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1);
	}

	ReadRegister(HARDWARE_HARDWARE_44_reg, 0, 0, &readval0014); 
	if(readval0014)
	{
                WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0);  //s2_protect_en
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
                WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);  
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0);  //s3_protect_en
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en                    
		v_0014 = 1;
	} 
	else if(v_0014==1)
	{
                WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1);  //s2_protect_en
                WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);  
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1);  
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en                    
                v_0014 = 0;
	}










        
	 if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_IDT_flag == 1)
	 {
			 video_IDT = 1;
			 WriteRegister(0xb8099768, 18, 19,0x1);
			 WriteRegister(MC2_MC2_50_reg,0,1,0x0);
	
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31,0x1);// 0xb809EE38
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 10, 20,0x0);
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 21, 30,0x0);
	
			 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,  8, 15,240);// 0xb809EF3C 
			 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg, 24, 31,135);
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,  0,  9,5);//	0xb809EFA8
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg, 10, 19,5);
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg, 20, 29,8);
			 WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,  0,  7,5);//	0xb809EE34
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x0);  //s1_clr_prot_en
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,1); //bg_s1_num_yth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1); //bg_s1_num_yth1
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa); //bg_s1_xth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2); //bg_s1_xth1
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);  //bg_s1_slope
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x0); //s2_clr_prot_en			  
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1);	//bg_s2_num_yth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1); //bg_s2_num_yth1
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc); //bg_s2_xth2
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2); //bg_s2_xth1
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1); //bg_s2_slope
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x1);//	0xb809EE28
			 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0x1);//
			 WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,0x0);//0xb809EE30
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,4); //bg_s3_dubt_cov_num_yth2_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,1); // bg_s3_dubt_cov_num_yth1_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,3);   //bg_s3_dubt_cov_shift_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,2); //bg_s3_dubt_cov_slope_init
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21, 1); //bg_s3_dubt_ucov_yth1_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14, 4); //bg_s3_dubt_ucov_yth2_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,  3); //bg_s3_dubt_ucov_shift_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,  2); // bg_s3_dubt_ucov_slope_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,0);  //fg_hold_en_init
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,0,4,25);	//fg_hold_th
	 }
	 else if(video_IDT>0)
	 {
			 video_IDT = 0;
			 WriteRegister(0xb8099768, 18, 19,0x2);
			 //WriteRegister(0xb809d564, 15, 15,0x0);
			 //WriteRegister(0xb8099750, 0, 1,0x3);
			 WriteRegister(MC2_MC2_50_reg,0,1,0x1);
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,0);
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,0);
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
			 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0);
			 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0);
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,12);
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,12);
			 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,25);
			 WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,12);
			
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);  //s1_clr_prot_en
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
			 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);
			 
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa);
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc);
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2);
			 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x3);
		   
			 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
			 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);
			 WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,1);
	
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,0xa);
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,0x22);
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,0x1);
			 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,0x2);
			 
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,0x8);
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,0x1e);
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,0x1);
			 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,0x3);
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,0x0);	//fg_hold_en
			 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,0,4,0x19);
	
			 
	 }


	//avenger 42s halo
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,  31,  31, &flag_avenger);

    if(flag_avenger == 1)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x25); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x25); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x25); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x2A); 
        flag_avenger2 = 1;
    }
    else if(flag_avenger2>0)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,th0); 
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,th0); 
        WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,th0+5); 
        flag_avenger2 = 0;
    }
    ReadRegister(SOFTWARE3_SOFTWARE3_26_reg, 0, 31, &u32_RB_val_d968);//B809d968
    for(rgnIdx=0;rgnIdx<32;rgnIdx++)
    {
        if((u32_RB_val_d968>>rgnIdx) & 0x1)
        {
           finalrmvx = rmvx[rgnIdx];
           finalrmvy = rmvy[rgnIdx];

        }

    }
	ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,24 , 24 , &readval14);
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,25 , 25 , &readval15);
    if(readval14)
    {
    
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,finalrmvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,finalrmvy);

        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, finalrmvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, finalrmvy);
        
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
      //  WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
    }
    if(readval15)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,u10_gmv_mvy);

        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);

        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
     //   WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
    }	
	//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 8, 11, path2); //path segment 
	
	// WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 4, 7, path2); //path segment 



	ReadRegister(SOFTWARE3_SOFTWARE3_20_reg,1, 1 , &readvald9501);//b809D950
  	if(readvald9501)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,rmvx[18]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, rmvx[18]);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, rmvy[18]);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
        logohalo_setting = 1;

    }
    else if(logohalo_setting)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
        logohalo_setting = 0;

	 
    }

}


int MEMC_me1_bgmask_mvdiffth_set(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
    //unsigned int u32_RB_val;
    const _PQLCONTEXT *s_pContext = GetPQLContext();
    int th0 = 0;
    signed short gmv_fgx,gmv_fgy,gmv_bgx,gmv_bgy;
    int avr_region_fg_x,avr_region_fg_y;

    signed short u11_gmv_mvx;
    signed short u10_gmv_mvy;
    int mvdiff_bgfg  ;
    int mvdiff_gmvfg  ;  
    int mvdiff_bggmv  ; 
    int gmv_val;
    int mvdiff  ,fgmvdiff_x ,fgmvdiff_y,fgmvdiff;
    static unsigned int sum ;
    static unsigned int count,count_change ;
    int avr ;
    int path ;

    int me1_bg_pfv_corr_cond =0 ; 
    int me1_sad_bg_cond =1 ; 

//    int bg_s3_ucov_data_en_init=0x1;
//    int bg_s3_cov_data_en_init=0x1;
 //   int bg_s3_ucov_data_dis=0x0;
 //   int bg_s3_cov_data_dis=0x0;

    gmv_fgx = s_pContext->_output_read_comreg.dh_gmv_fgx;
    gmv_fgy = s_pContext->_output_read_comreg.dh_gmv_fgy;
    gmv_bgy = s_pContext->_output_read_comreg.dh_gmv_bgy;
    gmv_bgx =  s_pContext->_output_read_comreg.dh_gmv_bgx;

    u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
    u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;


    //   ReadRegister(KME_ME1_BG1_ME_BG_INFO_GMV00_reg,0,14,&gmv_bg_cnt); 

    gmv_val=_ABS_(u11_gmv_mvx)>_ABS_(u10_gmv_mvy)?  _ABS_(u11_gmv_mvx)+_ABS_(u10_gmv_mvy)/2:  _ABS_(u10_gmv_mvy)+_ABS_(u11_gmv_mvx)/2;
    avr_region_fg_x=s_pContext->_output_frc_sceneAnalysis.region_fg_x;
    avr_region_fg_y=s_pContext->_output_frc_sceneAnalysis.region_fg_y;
    path = 0xf ;
    if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_large_fg_mvx==1)  // for 439 fast movtion 
    {
        th0 =0x5f ;
        path=0xe;
    }
    else
    {

        fgmvdiff_x =  _ABS_DIFF_(gmv_fgx,avr_region_fg_x) ; 
        fgmvdiff_y =  _ABS_DIFF_(gmv_fgy,avr_region_fg_y) ; 
        fgmvdiff =  fgmvdiff_x> fgmvdiff_y  ? fgmvdiff_x+fgmvdiff_y/2 : fgmvdiff_x/2+fgmvdiff_y  ;
        
        if(fgmvdiff<30)  
        {
        mvdiff_bgfg = _ABS_DIFF_(gmv_bgx,avr_region_fg_x)> _ABS_DIFF_(gmv_bgy,avr_region_fg_y)  ? _ABS_DIFF_(gmv_bgx,avr_region_fg_x) : _ABS_DIFF_(gmv_bgy,avr_region_fg_y) ;
        mvdiff_gmvfg = _ABS_DIFF_(u11_gmv_mvx,avr_region_fg_x)> _ABS_DIFF_(u10_gmv_mvy,avr_region_fg_y)  ? _ABS_DIFF_(u11_gmv_mvx,avr_region_fg_x) : _ABS_DIFF_(u10_gmv_mvy,avr_region_fg_y) ;  
        }
        else
        {
            mvdiff_bgfg = _ABS_DIFF_(gmv_bgx,gmv_fgx)> _ABS_DIFF_(gmv_bgy,gmv_fgy)  ? _ABS_DIFF_(gmv_bgx,gmv_fgx) : _ABS_DIFF_(gmv_bgy,gmv_fgy) ;
            mvdiff_gmvfg = _ABS_DIFF_(u11_gmv_mvx,gmv_fgx)> _ABS_DIFF_(u10_gmv_mvy,gmv_fgy)  ? _ABS_DIFF_(u11_gmv_mvx,gmv_fgx) : _ABS_DIFF_(u10_gmv_mvy,gmv_fgy) ;             
        }
        if(mvdiff_bgfg> mvdiff_gmvfg)
        {
            mvdiff = mvdiff_bgfg ; 
        }
        else
        {
            mvdiff = mvdiff_gmvfg ; 
        }

		mvdiff_bggmv = _ABS_DIFF_(gmv_bgx,u11_gmv_mvx) + _ABS_DIFF_(gmv_bgy,u10_gmv_mvy) ;  
      //  rtd_pr_memc_info("gmv(%d %d %d %d)fg(%d %d) rmv(%d %d) diff(%d )\n",gmv_bgx , gmv_bgy ,u11_gmv_mvx,u10_gmv_mvy, gmv_fgx ,gmv_fgy, avr_region_fg_x,avr_region_fg_y ,mvdiff);

        if(mvdiff_bggmv<50)     
        {
            sum+=gmv_val;
            count++ ;
            avr=sum/count;
            if(_ABS_DIFF_(avr,gmv_val)>45)
            {
                count_change=count_change+1;
            }
            else
            {
                count_change=0;
            }
            if(count_change>5)
            {   
                avr=gmv_val;
                sum =0 ;
                count =0 ;
                count_change = 0 ;
            }
            else if(count>30&&count_change ==0)
            {
                sum = avr*4 ;
                count =4 ;
            }

            //  th0_pre = th0 ;
            // rtd_pr_memc_info("sum=%d count=%d avr=%d cnt=%d preth=%d\n",sum,count,avr,count_change , th0_pre);

            //	rtd_pr_memc_info("inmvdiff");				    

            if(avr>25||gmv_val>25)
            {
                if(avr>250||gmv_val>250||mvdiff>250)
                {
                    th0=85;
                    path = 0x2 ;
                }
                else if(avr>140||gmv_val>140||mvdiff>140)
                {
                    th0=68;
                    path = 0x3 ;
                }
                else if(avr>120||gmv_val>120||mvdiff>140)
                {
                    th0=58;
                    path = 0x3 ;
                }
                else if(avr>100||gmv_val>100||mvdiff>120)
                {
                    th0=50;
                    path = 0x4 ;
                }
                else if(avr>80||gmv_val>80||mvdiff>100)
                {
                    th0=45;
                    path = 0x4 ;
                }
                else if(avr>60||gmv_val>60)
                {
                    th0=25;
                    path = 0x5 ;
                }
				else if(avr>40||gmv_val>40)
                {
                    th0=18;
                    path = 0x6 ;
                }
                else
				//else if(avr>20||gmv_val>20)
                {
                    th0=15;
                    path = 0x7;
                }
				me1_bg_pfv_corr_cond =1 ; 
				
                if(path>5)
                {
                    me1_sad_bg_cond = 0; 
                }
                else
                {
                    me1_sad_bg_cond =1 ; 
                }

				if(mvdiff_bgfg>40&&path==6)
                {
                    me1_sad_bg_cond =1 ; 
                    path = 0xe ;
                }
				// rtd_pr_memc_info("avr=%d %d %d \n",avr,gmv_val , mvdiff );
            }
            else  //gmv  value is small 
            {
                if((_ABS_(gmv_fgy)<20)&&(_ABS_(gmv_fgx)<5)) //fg  move slow 
                {
                    me1_bg_pfv_corr_cond =0 ; 
                    me1_sad_bg_cond =1 ; 

                    if(i_dehalo_tightest_setting){
						th0= 20;
					}
					else{
						th0= 12;					
					}
					
                    path=0x8;
                } 
                else if((_ABS_(gmv_fgx)<20)&&(_ABS_(gmv_fgy)<5))  
                {
                    th0=15;
                    path=0x9;
                    me1_bg_pfv_corr_cond =0 ; 
                    me1_sad_bg_cond =0 ;   
                }
                else if((_ABS_(gmv_fgx)>38)||(_ABS_(gmv_fgy)>32)||(_ABS_(avr_region_fg_y)+(_ABS_(avr_region_fg_x))>52))
                {
                    th0=20;
                    path=0xb;
                    me1_bg_pfv_corr_cond =1 ; 
                    me1_sad_bg_cond =1 ;   
					if(_ABS_(gmv_bgy)>3) // for 224 
					{
						path=0xd;
						me1_bg_pfv_corr_cond =0 ; 
						me1_sad_bg_cond =1 ;  
					}
                }
                else
                {                            
					if(i_dehalo_tightest_setting){
	                    th0=20;
	                    path =0xc ;
	                    me1_bg_pfv_corr_cond =1 ; 
	                    me1_sad_bg_cond =0 ;  
					}
					else{
	                    th0=12;
	                    path =0xc ;
	                    me1_bg_pfv_corr_cond =0 ; 
	                    me1_sad_bg_cond =1 ;
					}

                }
            }
        }
        else   // if  bg mv and gmv diff >th , gmv may not  accurate  need to disable the pfv corr 
        {
            path=0x1; 
            th0=20;
            me1_bg_pfv_corr_cond =0 ; 
            me1_sad_bg_cond =1 ;   
        }
    }
	//  WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, path); //path segment 7

	pOutput->u1_me1_bg_pfv_corr_cond = me1_bg_pfv_corr_cond ;
    pOutput->u1_me1_sad_bg_cond = me1_sad_bg_cond ;

    return th0 ;
}

VOID MEMC_me1_bgmask_newalgo_WrtAction(const _PARAM_WRT_COM_REG *pParam ,_OUTPUT_WRT_COM_REG *pOutput)
{
	int enbale_readval;
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 11, 11, &enbale_readval);
	
	if((pParam->u1_dehalo_Newalgo_Proc_en_all)||(enbale_readval == 1))
    {

            const _PQLCONTEXT *s_pContext = GetPQLContext();
            static signed short gmv_fgx = 0;
            static signed short gmv_fgy = 0;
            static signed short gmv_bgx = 0;
            static signed short gmv_bgy = 0;
            int left_rim_pre;
            signed short u11_gmv_mvx;
            signed short u10_gmv_mvy;
            static int	holdframe_144face;
            static bool flag_144face ;


            //dehalo init
            int bg_useless_fix_bg_th_init=0x54;

            int posdiff_judge_th1_init=0x384;
            int pred_en_init=0x0;
            int pred_th0_init=0x16;//0xf;
            int pred_th1_init=0x3;
            int occl_correct_en_init=0x1;
            int bg_extend_cov_th1_init=0x5;
            int bg_extend_ucov_th1_init=0x5;
            int pred_ver_en_init=0x0;
            int bg_extend_ucov_th0_init= 0xc;
            int bg_extend_cov_th0_init= 0xc;
            int pred_me1_diff_cut_en_init= 0x0;
            int gmv_th_y2_init=0x4b;
            //int bg_extend_cond3_en_init=0x1;
            int occl_filter_ucov_cut_init = 0x4;
            int occl_filter_cov_cut_init= 0x4;
            int bg_extend_bg_sum_max_th_init= 0x57;
            int color_protect_th0_en_init=0x1;
            int color_protect_th1_en_init=0x0;
            int color_protect_th1_min_init=0x96;
            int fg_protect_by_apl_en_init=0x0;    
            int bg_extend_cond4_en_init=0x1;
            int useless_max_th_init=0x54;
            int extend_posdiff_th_init = 0x12c;
            int extend_flag_num_init = 0x57;
            int extend_mvdiff_th_init = 0x0;
            int clear_y0_init = 0x12;
            int clear_y1_init = 0x23;
            int clear_y2_init = 0x3c;
            int clear_posdiff_th_init = 0x0;
            int pfv_bg_change_th_init = 0x8;
            int ppfv_bg_change_th_init = 0x8;
            int judge_max_th0_init = 0x50;
            int judge_max_th1_init = 0x50;
            int old_pred_en_init = 0x1;
            int pred_old_diff_cut_init = 0x1;
            int bad_pred_cut_init = 0x1;
            int bad_old_cut_init = 0x1;
            int bg_change_cut_init = 0x1;
            int pred_bad_cut_init = 0x1;
            int gmv_th_y0_init = 0x15;
            int pred_y0_init = 0x14;
            int extend4_posdiff_th_init = 0x2bc;


            //dehalo change
            int pred_en_0=0x0;
            int bg_useless_fix_bg_th=0x57;
            //int posdiff_judge_divide_en=0x1;
            //int posdiff_judge_penalty_en=0x1;
            //int pred_en=0x1;
            //int pred_th0=0xb;
            int pred_th1=0x9;
            //int occl_correct_en=0x0;
            int bg_extend_cov_th1=0xa;
            int bg_extend_ucov_th0=0xa;
            int bg_extend_ucov_th1=0xa;
            int pred_ver_en=0x1; 
            int gmv_th_y2=0x65;
            //int bg_extend_cond3_en=0x0;
            int posdiff_judge_th1=0x33e;
            int occl_filter_ucov_cut= 0xC;
            int occl_filter_cov_cut = 0xC;
            //int bg_extend_ucov_th0_y0= 0x14;
            int bg_extend_cov_th0= 0x14;
            //int bg_extend_bg_sum_max_th = 0x54;
            //int pred_me1_diff_cut_en= 0x1;  
            int color_protect_th0_en=0x0;
            int color_protect_th1_en=0x1;
            int color_protect_th1_min=0x82; 
            int fg_protect_by_apl_en=0x1;
            int bg_extend_cond4_en=0x0;
            int useless_max_th=0x57;
            int extend_posdiff_th = 0x3ff;
            int extend_flag_num = 0x64;
            int extend_mvdiff_th = 0x14;
            int clear_y0 = 0x5;
            int clear_y1 = 0x19;
            int clear_y2 = 0x32;
            int clear_posdiff_th = 0x3f;
            int pfv_bg_change_th = 0x6;
            int ppfv_bg_change_th = 0x6;
            int judge_max_th0 = 0x96;
            int judge_max_th1 = 0x96;
            int old_pred_en = 0x0;
            int pred_old_diff_cut = 0x0;
            int bad_pred_cut = 0x0;
            int bad_old_cut = 0x0;
            int bg_change_cut = 0x0;
            int pred_bad_cut = 0x0;
            int gmv_th_y0 = 0x0;
            int extend4_posdiff_th = 0x12c;
            int pred_en_pre;
            int auto_extend_mvdiff_th = 0x14;
            int auto_extend_mvdiff_thfor128 = 0x14;
            int occl_more_1, occl_more_2, occl_more_3, occl_more_flag1=0, occl_more_flag2=0, occl_more_flag3=0, occl_more_hold1=0,  occl_more_hold2=0, occl_more_hold3=0;
            int readval8;
            static int FrameHold;
            static int FrameHoldflag;
            static int  FrameHold_13, FrameHold_299, FrameHold_189, FrameHold_339,FrameHold_299_begin ,FrameHold_214,FrameHold_185, FrameHold_306, FrameHold_192, FrameHold_301, FrameHold_226,FrameHold_153, FrameHold_317_broken, FrameHold_172_broken, FrameHold_200_broken, FrameHold_432_broken, FrameHold_43_broken, FrameHold_128, FrameHold_366, FrameHold_317_broken2, FrameHold_317_broken3, FrameHold_173_begin, FrameHold_96_begin, FrameHold_96_end, FrameHold_130, FrameHold_227_2, FrameHold_227_4, FrameHold_227_5, FrameHold_156, FrameHold_156_final, FrameHold_431, FrameHold_49, FrameHold_163, FrameHold_183, FrameHold_432_final;
            static int  FrameHoldflag_13, FrameHoldflag_299, FrameHoldflag_189, FrameHoldflag_339,FrameHoldflag_299_begin,FrameHoldflag_214, FrameHoldflag_185, FrameHoldflag_306, FrameHoldflag_192, FrameHoldflag_301, FrameHoldflag_226,FrameHoldflag_153,FrameHoldflag_317_broken,FrameHoldflag_172_broken,FrameHoldflag_200_broken,FrameHoldflag_432_broken,FrameHoldflag_43_broken,FrameHoldflag_128, FrameHoldflag_366, FrameHoldflag_317_broken2, FrameHoldflag_317_broken3, FrameHoldflag_173_begin, FrameHoldflag_96_begin, FrameHoldflag_96_end, FrameHoldflag_130, FrameHoldflag_227_2, FrameHoldflag_227_4, FrameHoldflag_227_5, FrameHoldflag_156, FrameHoldflag_156_final, FrameHoldflag_431, FrameHoldflag_49, FrameHoldflag_163, FrameHoldflag_183, FrameHoldflag_432_final;
            int fwcontrol0 , fwcontrol4, fwcontrol_13, fwcontrol_299, fwcontrol_189, fwcontrol_339, fwcontrol_299_begin, fwcontrol_214, fwcontrol_185, fwcontrol_306, fwcontrol_192, fwcontrol_301,fwcontrol_153,fwcontrol_128,fwcontrol_156=0,fwcontrol_183,fwcontrol_298;
            static int me_blackoff_flag , me_blackoff_frame_hold ,  color_pro_299_flag, color_pro_299_hold;
            static int  FrameHold_151_broken, FrameHold_fast_hor, FrameHold_419, FrameHold_PQ_Issue ;          
            static int  FrameHoldflag_151_broken, FrameHoldflag_fast_hor, FrameHoldflag_419, FrameHoldflag_PQ_Issue,FrameHoldflag_lessDTL; 
            static bool check_biglogo=0;
            static int video_clearbgflag;
            static int video_eagle,video_plane,video_smallplane,video_transporter,video_dance,video_skating,video30006,video_rotterdam,video_ridebike,video_30003man,vdieo_toleftbike,video_insect,video_huapi2,video_transporter_50hz;
            static int video_IDT;
            int cond96 = 0;
            int soccerhalo;
            static int v_soccerhalo;
            /*	
            //T add
            int flag_CGF=0,flag_Aeon=0,flag_skating=0,flag_filmj=0,flag_fof=0;
            static int v_CGF,v_Aeon,v_skating,v_filmj,v_fof, v_skating_test;
            */
            int rgnIdx,rmvx[32]={0},rmvy[32]={0};
            //int srmvx,srmvy;	
            int readval;	
            int readval0014;
            static int v_0014;

            static int flag_logooff=0,v_verticaldown=0,flag_slow_bgstable=0,flag_vertical2=0,flag_rotate=0,flag_midmove=0,video_predver=0,flag_sadoffveren=0,flag_bgfastmotion=0;

            gmv_fgx=s_pContext->_output_read_comreg.dh_gmv_fgx;
            gmv_fgy=s_pContext->_output_read_comreg.dh_gmv_fgy;
            gmv_bgx=s_pContext->_output_read_comreg.dh_gmv_bgx;
            gmv_bgy=s_pContext->_output_read_comreg.dh_gmv_bgy;   
		
		for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
		{
			rmvx[rgnIdx] =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]	;
			rmvy[rgnIdx] =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[rgnIdx]	;		 
		}

                u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
                u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
                ReadRegister(HARDWARE_HARDWARE_25_reg, 0, 0 , &fwcontrol0);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 2, 2 , &fwcontrol_298);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 4,4 , &fwcontrol4);  
                ReadRegister(HARDWARE_HARDWARE_25_reg, 10,10 , &fwcontrol_185);  
                ReadRegister(HARDWARE_HARDWARE_25_reg, 11,11 , &fwcontrol_13);  
                ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_214);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 8,8 , &fwcontrol_299); 
                ReadRegister(HARDWARE_HARDWARE_25_reg, 9,9 , &fwcontrol_189);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 7,7 , &fwcontrol_339);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 12,12 , &fwcontrol_299_begin);  
                ReadRegister(HARDWARE_HARDWARE_25_reg, 17,17 , &fwcontrol_306);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 18,18 , &fwcontrol_192);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 19,19 , &fwcontrol_301); 
                ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 0,0 , &occl_more_1);
                ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 1,1 , &occl_more_2);
                ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 2,2 , &occl_more_3);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 20,20 , &fwcontrol_153);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 21,21 , &fwcontrol_128);
                ReadRegister(HARDWARE_HARDWARE_25_reg, 23,23 ,& fwcontrol_183);

        if((pParam->u1_dehalo_Newalgo_Proc_en)||(enbale_readval == 1))
        {
			if(i_dehalo_tightest_setting)
			{
	            ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,18 ,18 , &readval);   // for KTC general settting 
	            if(readval==0)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect	
	            }

			}
		
            if(pParam->u1_dehalo_condition9)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_pred_en0==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
                }  
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
            }

            ReadRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,&pred_en_pre);
        
            if(pParam->u1_dehalo_condition1)
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_divide_en==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1))
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1);
					WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
                }
                else
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
                }
            }
            else
            {
                //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
            }
        
            if(pParam->u1_dehalo_condition2)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);         
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                }
				if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_hor_slow == 1))
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0);
                }
                else
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
            }
        
            if(pParam->u1_dehalo_condition3)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_large_mv_th_y2==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);
            }

			if(pParam->u1_dehalo_condition3)     //fast extend
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_extend_more==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
            }

             if(pParam->u1_dehalo_condition3)
            {
                if(pParam->u1_dehalo_condition7)
                {
                    auto_extend_mvdiff_th = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 200) ? 40 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
                }
                else
                {
                    auto_extend_mvdiff_th = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 100) ? 20 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
                }
				
				if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==1 && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken == 0))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_th);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2); 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
                }
				if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==2)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,extend4_posdiff_th); 
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,extend4_posdiff_th_init); 
                }

                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==2))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
            }
        
            if(pParam->u1_dehalo_condition7)
            {
            
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_fast_hor_in_cnt==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                    FrameHold_fast_hor = 2;
                    FrameHoldflag_fast_hor = 1; 
                }
                else if(FrameHold_fast_hor > 0)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                    FrameHold_fast_hor--;
                }
                else if(FrameHoldflag_fast_hor)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                    FrameHoldflag_fast_hor = 0;
            
                }
            }
            
			if(pParam->u1_dehalo_condition4)
            {
            
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_off == 0))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);        
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
            }
			
			 if(pParam->u1_dehalo_condition4)
			 {
				 if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_mv_th_y0==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==0))
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0xa); // gmv y0
					 WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa); // pred y0
				 }
				 else if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==1)
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x0);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
					 WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
				 }
			 }
			 if(pParam->u1_dehalo_condition5) 
			 {
				 if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_301 ||
					 s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_171) && 
					 (s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_apl == 0))
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
				 }
				 if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th); //for 176 ghost
					 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
					 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
				 }
			 }
			 else
			 {
				 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
				 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
				 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
			 }
			 
			 if(pParam->u1_dehalo_condition5) //for 301, me1 black protect off
			 {
				 if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_301 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229)
				 {
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x0);  //me1 black protect
					 me_blackoff_flag =1 ;
					 me_blackoff_frame_hold = 2 ; 
				 }
				 else if(me_blackoff_frame_hold>0)
				 {
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x0);  //me1 black protect
					 me_blackoff_frame_hold-- ;
				 }
				 else if(me_blackoff_flag)
				 {
					 me_blackoff_flag =0 ; 
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				 }
			 }
			 else
			 {
				 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
			 }
            if(pParam->u1_dehalo_condition5) 
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x1); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x78);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0x8c);  //color th max
                    color_pro_299_flag =1 ;
                    color_pro_299_hold = 2 ; 
                }
                else if(color_pro_299_hold>0)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
                    color_pro_299_hold-- ;
                }
                else if(color_pro_299_flag)
                {
                    color_pro_299_flag =0 ; 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
            }

            if(pParam->u1_dehalo_condition5)
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_predflag_dis))
                {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut);
                //rtd_pr_memc_info("white_protect_on\n");
                }
                else
                {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            }

	//for 144 face broken
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_144_face)); 
		   if(pParam->u1_dehalo_condition6)
		   {
			   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_144_face==1)
			   {
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en);	  
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);   
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0);  //mv filter en
				   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x0);  //bg cond th
					//path = 0xf;
				   if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				   {
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
				   }
				   holdframe_144face = 40;
				   flag_144face = 1;
			   }
			    else if(holdframe_144face>0)
			   {
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en);    
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);   
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0);  //mv filter en
		           WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x0);  //bg cond th
		           //path = 0xf;
				   if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				   {
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
				   }
				   holdframe_144face--;
			   }
			   else if(flag_144face>0)
			   {
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en_init); 
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);   
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1);  //mv filter en
				   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
				   //path = 0x0;
					if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
					{
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					}
					flag_144face = 0;
			   }
		   }
		   else
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en_init); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1);  //mv filter en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
		   }
			if(pParam->u1_dehalo_condition6)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_off==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
                    flag_logooff = 1;
                }
                else if(flag_logooff>0)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);  
                    flag_logooff = 0;
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);   
            }

            /*if(pParam->u1_dehalo_condition7)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_correct_cut_th==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init); 
            }*/
        
            if(pParam->u1_dehalo_condition8)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_aplfix_en==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init);
            }
#if 0
	 ReadRegister(SOFTWARE3_SOFTWARE3_27_reg, 31, 31, &general_setting_en);//B809d96C
	
	if(general_setting_en)
	{
	
				if(gmv_bgcnt>27500 && gmv_bgcnt<32400 && _ABS_(u11_gmv_mvx)<65 && _ABS_(u10_gmv_mvy)<20) 
				{
					hold_smallfg_slowmotion = 30;
					case_smallfg_slowmotion = 1;
	
					
			//dehalo
					WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//bg_change_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//bg_change_cut
	
					WriteRegister(0xb809eb78,0,6,8);//cov more
					WriteRegister(0xb809eb78,8,14,8);//cov less
					WriteRegister(0xb809eb78,16,22,8);//ucov more
					WriteRegister(0xb809eb78,24,30,8);//ucov less
	
					WriteRegister(0xb809eb18,16,21,0xa);//sum_cut_th
	
					WriteRegister(0xb809ebac,4,13,400);//cond4 posdiff th
	
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2);//occl cut 
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //occl cut	
	
				}
				else if(hold_smallfg_slowmotion>0)
				{
					hold_smallfg_slowmotion--;
					
			//dehalo
					WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//bg_change_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//bg_change_cut
	
					WriteRegister(0xb809eb78,0,6,8);//cov more
					WriteRegister(0xb809eb78,8,14,8);//cov less
					WriteRegister(0xb809eb78,16,22,8);//ucov more
					WriteRegister(0xb809eb78,24,30,8);//ucov less
	
					WriteRegister(0xb809eb18,16,21,0xa);//sum_cut_th
	
					WriteRegister(0xb809ebac,4,13,400);//cond4 posdiff th
	
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2);//occl cut 
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //occl cut	
	
				}
				else if(case_smallfg_slowmotion)
				{
					case_smallfg_slowmotion = 0;
	
					WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//bg_change_cut
					//WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//bg_change_cut
	
					WriteRegister(0xb809eb78,0,6,12);//cov more
					WriteRegister(0xb809eb78,8,14,5);//cov less
					WriteRegister(0xb809eb78,16,22,12);//ucov more
					WriteRegister(0xb809eb78,24,30,5);//ucov less
	
					WriteRegister(0xb809eb18,16,21,20);//sum_cut_th
	
					WriteRegister(0xb809ebac,4,13,700);//cond4 posdiff th
	
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//occl cut 
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //occl cut
	
				}
	
	}
	else
	{
					WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//bg_change_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//bg_change_cut
	
					WriteRegister(0xb809eb78,0,6,12);//cov more
					WriteRegister(0xb809eb78,8,14,5);//cov less
					WriteRegister(0xb809eb78,16,22,12);//ucov more
					WriteRegister(0xb809eb78,24,30,5);//ucov less
	
					WriteRegister(0xb809eb18,16,21,20);//sum_cut_th
	
					WriteRegister(0xb809ebac,4,13,700);//cond4 posdiff th
	
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//occl cut 
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //occl cut
	
	
	
	}
#endif

			//----------------------- logo rim ----------------------------//
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_rimoff==1) 
			{
			WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0);
				check_biglogo = 1;
			}
			else if(check_biglogo>0)
			{
			WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0);
				check_biglogo  = 0;
			} 


            //---------------------------for 189 ----------------------------------//
            if(fwcontrol_189 == 1)
            {
                FrameHold_189 = 30;  
                FrameHoldflag_189=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x2bc); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x23); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x3c); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x18); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                //WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x4b); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x61); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);				
				
				//add 20210719
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);//reg_dh_color_protect_th1_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x82);//color protect1 min
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x0);//extend occl cond1
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x0);//extend occl cond0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8);  //mvdiff_th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x154); //  //cond_posdiff_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
				


                
            }
            else if(FrameHold_189>0)
            {
                FrameHold_189 -- ;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x2bc); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x23); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x3c); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x18); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                //WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x4b); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x61); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);

			
				//add 20210719
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);//reg_dh_color_protect_th1_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x82);//color protect1 min
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x0);//extend occl cond1
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x0);//extend occl cond0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8);  //mvdiff_th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x154); //  //cond_posdiff_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
            }
            else if(FrameHoldflag_189)
            {
                FrameHoldflag_189=0;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
               WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x30); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x25); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);


                //add 20210719
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//reg_dh_color_protect_th1_en
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x96);//color protect1 min
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x1);//extend occl cond1
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x1);//extend occl cond0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0);  //mvdiff_th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //  //cond_posdiff_th
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);  //logo protect
               
                
                
            }
            //rtd_pr_memc_info("299 : %d    hold(%d)", ((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)), FrameHold_299);
            //-------------------------------------------------------------------//
            //---------------------------for 299 ----------------------------------//
            if(fwcontrol_299 == 1)
            {
                FrameHold_299 = 2;  
                FrameHoldflag_299=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x19); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x9); //bg change pfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x9); //bg change ppfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x6e); //color_protect_th1_min
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf); //cov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //ucov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
            }
            else if(FrameHold_299>0)
            {
                FrameHold_299 -- ;
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x19); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x9); //bg change pfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x9); //bg change ppfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x6e); //color_protect_th1_min
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf); //cov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //ucov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
            }
            else if(FrameHoldflag_299)
            {
                FrameHoldflag_299=0;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                
            }
            if(fwcontrol_299_begin == 1)
            {
                FrameHold_299_begin = 2;  
                FrameHoldflag_299_begin=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
            }
            else if(FrameHold_299_begin>0)
            {
                FrameHold_299_begin-- ;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
            }
            else if(FrameHoldflag_299_begin)
            {
                FrameHoldflag_299_begin =0 ;
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
            }
            //rtd_pr_memc_info("299 : %d    hold(%d)", ((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)), FrameHold_299);
            //-------------------------------------------------------------------//

            //---------------------------for 128 ----------------------------------//   
            if(fwcontrol4)
            {
                if(fwcontrol0 )
                {
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x5);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x11);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xb);
                    
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x5);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1);
                    FrameHold = 5  ;  
                    FrameHoldflag=1;
                    
                }
                else if(FrameHold>0)
                {
                    FrameHold -- ;
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x5);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x11);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xb);
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);


                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x5);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1);
                }
                else if(FrameHoldflag)
                {
                    FrameHoldflag=0;
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xf);
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);

                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0);


                }
            }
        //--------------------------------- ----------------------------------//

        //---------------------------for 172 broken ----------------------------------// 
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_172_black_th_flag)
        {        
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);

	FrameHold_172_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200 : 90	;  
	FrameHoldflag_172_broken=1;
			
        }
        else if(FrameHold_172_broken>0)
        {
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
	FrameHold_172_broken -- ;
			
        }
        else if(FrameHoldflag_172_broken)
        {
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	FrameHoldflag_172_broken=0;

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_200_face_flag); 
        //---------------------------for 339 ----------------------------------//
			if(fwcontrol_339)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x6e); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xb);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xb);

				FrameHold_339 = 5  ;  
				FrameHoldflag_339=1;
				
			}
			else if(FrameHold_339>0)
			{
				FrameHold_339 -- ;
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x6e); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xb);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xb);
			}
			else if(FrameHoldflag_339)
			{
				FrameHoldflag_339=0;
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			}
        //--------------------------------- ----------------------------------//

        //---------------------------for 185 ----------------------------------//
			if(fwcontrol_185)
			{
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x0); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x18); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xb);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				
				FrameHold_185 = 90	;  
				FrameHoldflag_185=1;

				 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_virtical_case5)
				{	 
				
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0); //gmv y0
					 WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x0); //gmv y1
				 }
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,25);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,46);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					
				}
			}
			else if(FrameHold_185>0)
			{
				FrameHold_185 -- ;
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x0); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x18); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xb);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_virtical_case5)
				 { 
						WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0); //gmv y0
						WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x0); //gmv y1
				}
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,25);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,46);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					
				}
			}
			else if(FrameHoldflag_185)
			{
				FrameHoldflag_185=0;
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xf);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);	//pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x30); //gmv y1
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,45);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th

				}
			}
		 //--------------------------------- ----------------------------------//
		 
		 //---------------------------for 13m2v ----------------------------------//
			 gmv_fgx=s_pContext->_output_read_comreg.dh_gmv_fgx;
			 gmv_fgy=s_pContext->_output_read_comreg.dh_gmv_fgy;
			 //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, (_ABS_(gmv_fgy) < 55)	&& (_ABS_(gmv_fgx) <10)); 
			if(fwcontrol_13/* && (!(_ABS_(gmv_fgy) < 55)  && (_ABS_(gmv_fgx) <10))*/)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x0); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xf);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x14); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x18); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xd); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);	//bg cond th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa); //cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14); //pred y th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x14); //pred y th1

				FrameHold_13 = 5  ;  
				FrameHoldflag_13=1;
				
			}
			else if(FrameHold_13>0)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x0); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xf);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x14); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x18); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xd); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);	//bg cond th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa); //cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14); //pred y th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x14); //pred y th1
				FrameHold_13 -- ;
			}
			else if(FrameHoldflag_13)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x1); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);	//pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //ucov th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //pred y th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf); //pred y th1
				FrameHoldflag_13=0; 
			}
		 //--------------------------------- ----------------------------------// 
		
		//---------------------------for 301 ----------------------------------//
		   if(fwcontrol_301)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x8); //cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x8); //ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x8); //ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x4);  //bg cond th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1);  //small en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x1);  //small min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x14); //extend mvdiff th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa); //filter cov th0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick phmv mv
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x8a); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xa);
			   
			   FrameHold_301 = 20  ;  
			   FrameHoldflag_301=1;
			   
		   }
		   else if(FrameHold_301>0)
		   {
				  FrameHold_301 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1); 
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
				  WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8); //cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x8); //cov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x8); //ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x8); //ucov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x4);	//bg cond th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);	//logo protect
				  WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1);	//small en
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x1);	//small min th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x14); //extend mvdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa); //filter cov th0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick phmv mv
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x8a); //color min4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xa);
		   }
		   else if(FrameHoldflag_301)
		   {
				  FrameHoldflag_301=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);	//penalty_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut
				  WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5); //cov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5); //ucov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); //ver_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);	//bg cond th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);	//logo protect
				  WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x0);  //small en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x3);  //small min th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2); //pick phmv mv
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_301>0)); 
		   //--------------------------------- ----------------------------------//
			   
			//---------------------------for 306 ----------------------------------//
		   if(fwcontrol_306)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xa); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
		
			   FrameHold_306 = 160	;  
			   FrameHoldflag_306=1;
			   
		   }
		   else if(FrameHold_306>0)
		   {
			   FrameHold_306 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xa); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut

		   }
		   else if(FrameHoldflag_306)
		   {
			   FrameHoldflag_306=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut

		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_306>0)); 
		   //--------------------------------- ----------------------------------//
		
		   //---------------------------for 192 ----------------------------------//
		   left_rim_pre=s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_LFT];
		   if(fwcontrol_192)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x11); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x28); //pred y0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);//old pred en
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  0xa3);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		
			   FrameHold_192 = 1 ;  
			   FrameHoldflag_192=1;
			   
		   }
		   else if(FrameHold_192>0)
		   {
			   FrameHold_192 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x11); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x28); //pred y0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);//old pred en
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  0xa3);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   }
		   else if(FrameHoldflag_192)
		   {
			   FrameHoldflag_192=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  left_rim_pre);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_192>0)); 
			/*rtd_pr_memc_info("l(%d) r(%d) t(%d) b(%d)", s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_LFT],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_RHT],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_TOP],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_BOT]);*/
			//--------------------------------- ----------------------------------//
		
		   //---------------------------------for 226 dark patten ----------------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_apl==1)
		   {
			   FrameHold_226 = 60;	
			   FrameHoldflag_226=1;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); //neg en
		   }
		   else if(FrameHold_226>0)
		   {
			   FrameHold_226 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); //neg en
		   }
		   else if(FrameHoldflag_226)
		   {
			   FrameHoldflag_226=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); //neg en
		   }
		   //---------------------------for 153 ----------------------------------//
		   if(fwcontrol_153)
		   {		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
			   FrameHold_153 = 30  ;  
			   FrameHoldflag_153=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,15); //color max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
					   
		   }
		   else if(FrameHold_153>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
			   FrameHold_153 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,15); //color max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
					   
		   }
		   else if(FrameHoldflag_153)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
			   FrameHoldflag_153=0;
		
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);
		   }
			//---------------------------for 317 broken ----------------------------------//
			if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K){
				if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken || s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag) && (!fwcontrol_153) && (!fwcontrol_128))
				{		 
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
					WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
					
					FrameHold_317_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80 : 50  ;  
					FrameHoldflag_317_broken=1;
		                    
		        }
		        else if(FrameHold_317_broken>0)
		        {
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		            WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		            FrameHold_317_broken -- ;
		                    
		        }
		        else if(FrameHoldflag_317_broken)
		        {
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		            WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		            FrameHoldflag_317_broken=0;

		        }	
			}else
	        {
	            if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken || s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag) && (!fwcontrol_153) && (!fwcontrol_128))
	            {        
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);

	                FrameHold_317_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80 : 50  ;  
	                FrameHoldflag_317_broken=1;
	                        
	            }
	            else if(FrameHold_317_broken>0)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
	                FrameHold_317_broken -- ;
	                        
	            }
	            else if(FrameHoldflag_317_broken)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	                FrameHoldflag_317_broken=0;

	            }

	        }




		
	        //---------------------------for 317 broken2 ----------------------------------//
	        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag2 == 1)     
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en            
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);        
	            FrameHold_317_broken2 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 800 : 400 ;          
	            FrameHoldflag_317_broken2=1;                            
	        }
	        else if(FrameHold_317_broken2>0)       
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en         
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);    
	            FrameHold_317_broken2 -- ;                           
	        }
	        else if(FrameHoldflag_317_broken2)        
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en   
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);         
	            FrameHoldflag_317_broken2=0;       
	        }
	        
	        //---------------------------for 317 broken3 ----------------------------------//
			if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag3 == 1) 
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en            
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);        
	            FrameHold_317_broken3 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200 : 100 ;          
	            FrameHoldflag_317_broken3=1;                            
	        }
	        else if(FrameHold_317_broken3>0)       
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en         
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);    
	            FrameHold_317_broken3 -- ;                           
	        }
	        else if(FrameHoldflag_317_broken3)        
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en   
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);         
	            FrameHoldflag_317_broken3=0;       
	        }
	        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_317_broken2>0 || FrameHold_317_broken3>0); 
	        
	        //---------------------------for 151 broken ----------------------------------//		   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_151_broken == 1)	  
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en			
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en			  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);		 
			   FrameHold_151_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 360 : 200 ;		  
			   FrameHoldflag_151_broken=1;							  
		   }
		   else if(FrameHold_151_broken>0)		 
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);			
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);	 
			   FrameHold_151_broken -- ;						   
		   }
		   else if(FrameHoldflag_151_broken)		
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en	 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);		  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);		   
			   FrameHoldflag_151_broken=0;		 
		   }
		   //---------------------------for 200 broken ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_200_face_flag == 1)
		   {		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		   
			   FrameHold_200_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80  ;  
			   FrameHoldflag_200_broken=1;
					   
		   }
		   else if(FrameHold_200_broken>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
			   FrameHold_200_broken -- ;
					   
		   }
		   else if(FrameHoldflag_200_broken)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   FrameHoldflag_200_broken=0;
		   
		   }
		 //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_200_broken>0); 
		 
		 //---------------------------for 366 broken ----------------------------//
		 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_blkheadbroken_flag == 1)
		 {		  
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		 
			 FrameHold_366 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80  ;  
			 FrameHoldflag_366=1;
					 
		 }
		 else if(FrameHold_366>0)
		 {
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
			 FrameHold_366 -- ;
					 
		 }
		 else if(FrameHoldflag_366)
		 {
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			 FrameHoldflag_366=0;
		 
		 }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_366>0); 
        
        //---------------------------for 432 bad gmv issue ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag > 0)
        {        
            FrameHold_432_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 400 : 260  ;  
            FrameHoldflag_432_broken=1;

            if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 1)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x77e);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x77e);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
			else if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 2)
			{
				WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
				WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x79c);
				//WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x79c);
				//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
			}
			//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);	//extend cond3 en
			WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x12);
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x12);
			WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
			WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
			WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
			WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		
			WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x1);
					
		}
        else if(FrameHold_432_broken>0)
        {
            FrameHold_432_broken -- ;
            if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 1)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x77e);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x77e);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
            else if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 2)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x79c);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x79c);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en

            WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x1);
                    
        }
        else if(FrameHoldflag_432_broken)
        {
            FrameHoldflag_432_broken=0;
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x0);
            //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x0);
            //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en

            WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x0);

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_432_broken>0); 

        //---------------------------for 432 final ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_432final == 1)
        {        

            FrameHold_432_final = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40  ;  
            FrameHoldflag_432_final=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
                    
        }
        else if(FrameHold_432_final>0)
        {
            FrameHold_432_final -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
                    
        }
        else if(FrameHoldflag_432_final)
        {
            FrameHoldflag_432_final=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
        }

        //---------------------------for 43 broken and ghost ----------------------------//
        //if0 test for 0014
        if(0){
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_43_flag == 1)
        {        

            FrameHold_43_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40  ;  
            FrameHoldflag_43_broken=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
                    
        }
        else if(FrameHold_43_broken>0)
        {
            FrameHold_43_broken -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
                    
        }
        else if(FrameHoldflag_43_broken)
        {
            FrameHoldflag_43_broken=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); //mv filter

        }
            }
         //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_43_broken>0); 

        //---------------------------for 130 wrong gmv ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_130_flag == 1)
        {        

            FrameHold_130 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150: 90  ;  
            FrameHoldflag_130=1;
            //s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]
                    
        }
        else if(FrameHold_130>0)
        {
            FrameHold_130 -- ;
                    
        }
        else if(FrameHoldflag_130)
        {
            FrameHoldflag_130=0;

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_130>0); 

        //---------------------------for 173 begin small and black fg ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_173_begin_flag == 1)
        {        

            FrameHold_173_begin = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150: 90  ;  
            FrameHoldflag_173_begin=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x14); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en  
                    
        }
        else if(FrameHold_173_begin>0)
        {
            FrameHold_173_begin -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x14); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en  
                    
        }
        else if(FrameHoldflag_173_begin)
        {
            FrameHoldflag_173_begin=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en  

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_173_begin>0);

        //---------------------------for 227 2 scene ----------------------------//
        //if0 test for 0014
        if(0){
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_2 == 1)
        {        

            FrameHold_227_2 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_2=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //filter cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x1e); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x19); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19); //ver pred y1
                    
        }
        else if(FrameHold_227_2>0)
        {
            FrameHold_227_2 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);//filter ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);//filter cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x1e); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x19); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19); //ver pred y1
                    
        }
        else if(FrameHoldflag_227_2)
        {
            FrameHoldflag_227_2=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf); //ver pred y1

        }
            }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_227_2>0);

        //---------------------------for 227 4 scene ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_4 == 1)
        {        

            FrameHold_227_4 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_4=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x10); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x50); //extend mvdiff th
                    
        }
        else if(FrameHold_227_4>0)
        {
            FrameHold_227_4 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x10); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x50); //extend mvdiff th
                    
        }
        else if(FrameHoldflag_227_4)
        {
            FrameHoldflag_227_4=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_227_4>0);

        //---------------------------for 227 5 scene ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_5 == 1)
        {        

            FrameHold_227_5 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_5=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);//extend cov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x20); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);        
                    
        }
        else if(FrameHold_227_5>0)
        {
            FrameHold_227_5 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);//extend cov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x20); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0); 
        }
        else if(FrameHoldflag_227_5)
        {
            FrameHoldflag_227_5=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0); 
        }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_227_5>0);
		
		//---------------------------for 156 ----------------------------//
		if(fwcontrol_156)
		   {		
            FrameHold_156 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 20: 10  ;  
			   FrameHoldflag_156=1;    
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);  //clopro
		   }
		   else if(FrameHold_156>0)
		   {
			   FrameHold_156 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);  //clopro
					   
		   }
		   else if(FrameHoldflag_156)
		   {
			   FrameHoldflag_156=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);  //clopro
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_156>0); 
if(0){	 
		//---------------------------for 156 final ----------------------------//
		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_156_final_flag)
		   {		
			   FrameHold_156_final = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40	;  
			   FrameHoldflag_156_final=1;	 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   }
		   else if(FrameHold_156_final>0)
		   {
			   FrameHold_156_final -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4);  //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
					   
		   }
		   else if(FrameHoldflag_156_final)
		   {
			   FrameHoldflag_156_final=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4);  //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x0); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_156_final>0); 
}
		
		//---------------------------for 431 ----------------------------//
		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_431_halo_flag)
		   {		
			   FrameHold_431 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160: 80  ;  
			   FrameHoldflag_431=1;   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
		   }
		   else if(FrameHold_431>0)
		   {
			   FrameHold_431 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
					   
		   }
		   else if(FrameHoldflag_431)
		   {
			   FrameHoldflag_431=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_431>0);
		
		
		   //---------------------------for 96 begin ----------------------------//
		   ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,30,30, &cond96); 
		   if((s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_96 == 1) ||(cond96 == 1))
		   {		
		
			   FrameHold_96_begin = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
			   FrameHoldflag_96_begin=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xa); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHold_96_begin>0)
		   {
			   FrameHold_96_begin -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xa); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHoldflag_96_begin)
		   {
			   FrameHoldflag_96_begin=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_96_begin>0); 
		
		   //---------------------------for 96 end ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_96_2_flag == 1)
		   {		
		
			   FrameHold_96_end = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5	;  
			   FrameHoldflag_96_end=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHold_96_end>0)
		   {
			   FrameHold_96_end -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x8); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHoldflag_96_end)
		   {
			   FrameHoldflag_96_end=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_96_end>0);
		
		   //---------------------------49 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_49_halo_flag == 1)
		   {		
		
			   FrameHold_49 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160: 80  ;  
			   FrameHoldflag_49=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
					   
		   }
		   else if(FrameHold_49>0)
		   {
			   FrameHold_49 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
					   
		   }
		   else if(FrameHoldflag_49)
		   {
			   FrameHoldflag_49=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_49>0);  
		
		   //---------------------------163 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_163 == 1)
		   {		
		
			   FrameHold_163 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 300: 150	;  
			   FrameHoldflag_163=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x8);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x50); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
					   
		   }
		   else if(FrameHold_163>0)
		   {
			   FrameHold_163 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x8);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x50); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
					   
		   }
		   else if(FrameHoldflag_163)
		   {
			   FrameHoldflag_163=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_163>0);
		
		   //---------------------------183 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_183_face_broken == 1)
		   {		
		
			   FrameHold_183 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 300: 150	;  
			   FrameHoldflag_183=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
					   
		   }
		   else if(FrameHold_183>0)
		   {
			   FrameHold_183 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
					   
		   }
		   else if(FrameHoldflag_183)
		   {
			   FrameHoldflag_183=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_183>0);
		   
		   //---------------------------419 ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_419_flag == 1)
		   {		
		   
			   FrameHold_419 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200: 100	;  
			   FrameHoldflag_419=1;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x14);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); //extend cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x2); //extend cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x2); //extend ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
					   
		   }
		   else if(FrameHold_419>0)
		   {
			   FrameHold_419 -- ;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); //extend cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x2); //extend cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x2); //extend ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x  
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
		   }
		   else if(FrameHoldflag_419)
		   {
			   FrameHoldflag_419=0;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
		   }
		   
		   //---------------------------pq issue pattern ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_PQ_Issue == 1)
		   {		
		   
			   FrameHold_PQ_Issue = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 60: 30  ;  
			   FrameHoldflag_PQ_Issue=1;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258);//judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x0); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x57);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x57); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x7);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x7);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x2d); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xaa); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x8); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x8); //old sun cut th
					   
		   }
		   else if(FrameHold_PQ_Issue>0)
		   {
			   FrameHold_PQ_Issue -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);  //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x0); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x57);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x57); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x7);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x7);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x2d);//color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xaa); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x8); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x8); //old sun cut th
		   
		   }
		   else if(FrameHoldflag_PQ_Issue)
		   {
			   FrameHoldflag_PQ_Issue=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);  //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x52); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   
		   }


	
	if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_relativemotion_lessDTL_flag)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,50);// 3x29 fg th
		FrameHoldflag_lessDTL = 1;
	}
	else if(FrameHoldflag_lessDTL)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x25);// 3x29 fg th
		
		FrameHoldflag_lessDTL = 0;
	}


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_ver_clearbg_flag == 1)
	{
		video_clearbgflag = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
	   
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,3);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,24,27,2);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,28,31,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,6);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,2);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,31);//cov th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,31);//ucov th
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,12);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,12);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,15);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,15);
	
	}
	else if(video_clearbgflag)
	{
		video_clearbgflag = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
	   
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,0x3);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,0x7);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,0x7);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,24,27,0x5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,28,31,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,6);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,2);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);//cov th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);//ucov th
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
	
	
		
	}


    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_greyslow == 1)
    {
        v_verticaldown = 1;

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 31, 31, 1);          
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 30, 30, 1);            
        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0xa); // gmv y0

        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,8); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,8); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,4); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,19,23,4); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,10); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,20); 


        
    }
    else if(v_verticaldown)
    {
        v_verticaldown = 0;

        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 31, 31, 1);          
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 30, 30, 1);         
     
        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init); // gmv y0


        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
        WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,4); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,19,23,4); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
        WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);//extend_ucov_th0

    }
        //-----------------------------128 --------------------------------//
        auto_extend_mvdiff_thfor128 = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 100) ? 20 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
        if(fwcontrol_128)
        {        

            FrameHold_128 = 5  ;  
            FrameHoldflag_128=1;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0xf); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe); //ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x19); //extend ucov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x1e); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x50); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_thfor128);
                    
        }
        else if(FrameHold_128>0)
        {
            FrameHold_128 -- ;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0xf); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);//ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //cov cut  
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x19);  //extend ucov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x1e); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x50); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_thfor128);
        }
        else if(FrameHoldflag_128)
        {
            FrameHoldflag_128=0;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x3c); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_128>0); 

		//--------------------  eagle  ---------------------------------//

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_eagle_status == 1)
	{
		video_eagle = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, 0x57); //useless max th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x56);  //bg min
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xf); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x5); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x5); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8); //extend mvdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xf); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x9);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //filter cov cut

		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,18);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,12);
	  }
	  else if(video_eagle)
	  {	
		video_eagle = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, 0x54); //useless max th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //filter cov cut

		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
	  }


	//---------------------------------  C005 plane -------------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_C005plane_status == 1)
	{
		video_plane = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xf); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf);
		//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
	  }
	  else if(video_plane)
	  {	
		video_plane = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x1); //only occl

	  }


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_smallplane_status == 1)
	{
		video_smallplane =1 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf); 

	}
	else if(video_smallplane)
	{
		video_smallplane = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); 
	}



	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter =1 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0); //white protect
		

	}
	else if(video_transporter)
	{

		video_transporter = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,1);

	}

if(s_pContext->_external_data._output_frameRate == _PQL_OUT_100HZ)
{
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter_50hz = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);//old_occl_en
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1);

		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,65);  //reg_dh_color_protect_th0_max 


	}
	else if(video_transporter_50hz)
	{
		video_transporter_50hz = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);  //reg_dh_color_protect_th0_max 
	}


}


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dance_status == 1)
	{
		if(u11_gmv_mvx<20)
		{
			WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x5); //pred sun cut th
			WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xb); //filter ucov th0
			WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		}
		video_dance = 1 ;
	}
	else if(video_dance)
	{

		video_dance = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1	
	}

	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status==0))
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
		//WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		//WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);//bad pred cut
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7);//reg_dh_pred_x_range
	
		video_skating = 1 ;
	}
	else if(video_skating)
	{
		video_skating = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //black protect en
		//WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		//WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);//bad pred cut
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);//reg_dh_pred_x_range	
	}



	//---------------------- 30006 ----------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_30006_status == 1)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);
		video30006 = 1 ;
	}
	else if(video30006)
	{
		video30006 = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);

	}

	   
	   //--------------------- rotterdam 1---------------------------//
	   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_rotterdam_status == 1)
	   {
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0xa); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x190); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
		   video_rotterdam = 1 ;
	   }
	   else if(video_rotterdam)
	   {
		   video_rotterdam = 0 ;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred cut en
	   }
	   
	   
	   //------------------------------- ride bike girl --------------------------------//
	   
	   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_ridebikegirl_status == 1)
	   {
		   video_ridebike = 1;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0xa); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1); //penalty_en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
		   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
	   }
	   else if(video_ridebike>0)
	   {
		   video_ridebike = 0;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0); //penalty_en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
		   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
	   
	   }
	   
	   
	   
		   //--------------------------- man ride bike 30003 -------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,12);//th_y0 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); 
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,10); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,10); 
	   
			   video_30003man = 1;
	   
			   
	   
		   }
		   else if(video_30003man>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1); 
			   video_30003man = 0;
		   }
	   
	   
	   
	   
		   //---------------  30003 2---------------------//
	   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_toleft_bike_status == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg_change_cond_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
	   
			   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5); //predflag_x_range
			   
	   
			   vdieo_toleftbike = 1;
	   
		   }
		   else if(vdieo_toleftbike>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //predflag_x_range
	   
			   vdieo_toleftbike = 0;
		   }


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_insect_status == 1)
	{
		video_insect = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,15);

		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,30);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,18);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,8);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,19);

		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,300);

		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,10);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,10);

		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,30);
		WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,30);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,8);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);


		
	}
	else if(video_insect>0)
	{
		video_insect = 0;

		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5);

		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);

		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28);

		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,1);

		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
		WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);


		
	}
	   
	   
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status == 1)
	{
		video_huapi2 = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,10);
	}
	else if(video_huapi2>0)
	{
		video_huapi2 = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);//reg_dh_color_protect_th0_max 
	}   
		if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_IDT_flag == 1)
        {

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);

            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg, 16, 25,   0x2  );//0xb809EB94
            WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg, 0, 11,   0x32 );//0xb809EB0C
            WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg, 24, 24,    0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg, 4,  4,   0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg, 16, 25,   0x3ff);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 0, 6,   0x5   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 8, 14,   0xc    );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 16, 22,   0x5   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 24, 30,   0xc   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg, 4, 13,   0x32  );

            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg, 15, 15,   0x0      );
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 7,  7,   0x0     );
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 6,  6,   0x0      );
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg, 0,  0,   0x0     );

            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 16, 21,   0xa);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 24, 29,    0xa);

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 16, 16,  0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 0, 7,   0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 8, 15,  0x50);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 17, 17,  0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 16, 23,  0x82);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 24, 31,  0xff);

            //	WriteRegister(0xb809d7c4, 31, 31, 0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,    0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,    0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,    0x2);


	      WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 28, 28, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 31, 31, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 30, 30, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 18, 18, 0);
            video_IDT = 1;
        }
        else if(video_IDT>0)
        {
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//white protect
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
            WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384);
            WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,150);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,255);
            //WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);

	      WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);

            //WriteRegister(HARDWARE_HARDWARE_24_reg, 28, 28, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 31, 31, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 30, 30, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 18, 18, 1);
            video_IDT = 0;
        }
        //---------------------------for 214 ----------------------------------//
			if(fwcontrol_214 ||(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214 == 1))
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick bg mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x4F); //phase_th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x32); //phase_th6
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x23); //phase th12
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);//pred_old_diff_cut_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad pred diff cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0x29); //bad old cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0x28); //bad pred cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xe); //pred sun cut th
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0x29); //bad old ucov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0x28); //bad pred ucov
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x9); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0x0); //extend cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //extend ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);  //extend cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x19); // color protect th max0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); // mv filter en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //posdiff th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0xdf); //posdiff th2
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x1a4); //posdiff th3
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x55); //useless bg th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xe); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2); //filter ucov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //filter cov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xe); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x1); //ver y range
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x14);  //pred y2
				WriteRegister(KME_DEHALO5_PHMV_FIX_43_reg,6,6,0x0); // blend
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);  //bg change en
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x0);  //bg sum en
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14);	//ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19);	//ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x3ff);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x64);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x3f);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
		   
				if(s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
				}
				else
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				}
		   
						//fw init
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,0x3); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,0x4b);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,0x0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, 0x12);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, 0x23);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, 0x3c); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x8);
				WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x8);
		   
				FrameHold_214 = 5  ;  
				FrameHoldflag_214=1;
				
			}
			else if(FrameHold_214>0)
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick bg mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x4F); //phase_th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x32); //phase_th6
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x23); //phase th12
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);//pred_old_diff_cut_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad pred diff cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0x29); //bad old cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0x28); //bad pred cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xe); //pred sun cut th
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0x29); //bad old ucov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0x28); //bad pred ucov
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x9); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0x0); //extend cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //extend ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);  //extend cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x19); // color protect th max0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); // mv filter en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //posdiff th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0xdf); //posdiff th2
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x1a4); //posdiff th3
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x55); //useless bg th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xe); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2); //filter ucov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //filter cov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xe); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x1); //ver y range
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x14);  //pred y2
				WriteRegister(KME_DEHALO5_PHMV_FIX_43_reg,6,6,0x0); // blend
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);  //bg change en
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x0);  //bg sum en
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14);	//ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19);	//ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x3ff);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x64);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x3f);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
		   
				if(s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
				}
				else
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				}
		   
						//fw init
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,0x3); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,0x4b);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,0x0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, 0x12);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, 0x23);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, 0x3c); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x8);
				WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x8);
				FrameHold_214 -- ;
		   
			}
			else if(FrameHoldflag_214)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2);  // init
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,27,27,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x62);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x46);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x28);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0xf);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x15e);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x54);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x19);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x52);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5);  //ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf);  //ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x12c);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x1); //only occl
		   
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				FrameHoldflag_214=0;
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //disable me1 flag 2022.06.23
		   
			}
		   //--------------------------------- ----------------------------------//
		
		   if(occl_more_1)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
		
			   occl_more_hold1 = 5;
			   occl_more_flag1 = 1;
		   }
		   else if(occl_more_hold1 > 0)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   occl_more_hold1--;
		   }
		   else if(occl_more_flag1)
		   {
			   occl_more_flag1 = 0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
		   }
		
		   if(occl_more_2)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   occl_more_hold2 = 5;
			   occl_more_flag2 = 1;
		   }
		   else if(occl_more_hold2 > 0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   occl_more_hold2 --;
		   }
		   else if(occl_more_flag2)
		   {
			   occl_more_flag2 = 0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		
		   if(occl_more_3)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   occl_more_hold3 = 5;
			   occl_more_flag3 = 1;
		   }
		   else if(occl_more_hold3 > 0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   occl_more_hold3--;
		   }
		   else if(occl_more_flag3)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   occl_more_flag3 = 0;
		   }
//djntest
                    ReadRegister(HARDWARE_HARDWARE_44_reg, 0, 0, &readval0014); //0x1809D5B0
                    if(readval0014)
                    {
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,44); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); ///////
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); 
                            
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,5); 
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,4); 
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,5); 
                          //  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,5); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,10); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,15); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30,8); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15,8); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0x9); 
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0x9); 
                        //    WriteRegister(0xb809eb78,0,6,8);//cov more
                        //    WriteRegister(0xb809eb78,8,14,8);//cov less
                        //    WriteRegister(0xb809eb78,16,22,8);//ucov more
                        //    WriteRegister(0xb809eb78,24,30,8);//ucov less
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1);//judge divide en

                            //WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,1); //ver_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,37);    
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
                            
							// WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa);//cov_th0                           
							//WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,10);//cov_th1
                        
                            v_0014 = 1;
                    } 
                    else if(v_0014==1)
                    {
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //black protect
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,37); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,9); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,3); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,7); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,7); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,8); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,4); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30,6); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15,6); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); 

                            WriteRegister(0xb809eb78,0,6,12);//cov more
                            WriteRegister(0xb809eb78,8,14,5);//cov less
                            WriteRegister(0xb809eb78,16,22,12);//ucov more
                            WriteRegister(0xb809eb78,24,30,5);//ucov less
                            v_0014 = 0;
							WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
							WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);//cov_th0                           
							WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,0x4);//cov_th1

                    }   

           
                    ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,20 ,20 , &soccerhalo);
                    if(soccerhalo==1)
                    {
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);
                            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);
                            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
                            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
                            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);           
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0);

                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);//gmv_th_y0
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0);//bad cut en                    
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,1);//posdiff4             
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,26,1023);     

                            WriteRegister(0xb809ebac,4,13,400);//cond4 posdiff th
                            WriteRegister(0xb809eb78,0,6,8);//cov more
                            WriteRegister(0xb809eb78,8,14,8);//cov less
                            WriteRegister(0xb809eb78,16,22,8);//ucov more
                            WriteRegister(0xb809eb78,24,30,8);//ucov less
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2);//occl cut 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //occl cut   
                            v_soccerhalo = 1;
                            //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x1);
                         
                    }
                    else if(v_soccerhalo==1)
                    {
                            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);  
                            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,1);//dh_pred_bg_change_cond_en
                            WriteRegister(0xb809ebac,4,13,700);//cond4 posdiff th
                            v_soccerhalo=0;
                    }

                    
                    ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,16 ,16 , &readval);
                    if(readval==1)
                    {
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en         
                        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
						WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
                        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);
                        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
						WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);                         
                    }


			ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg,8 , 8 , &readval8);
			if(!readval8)
			{
						if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
						{
							MEMC_dehalo_2k_normal_setting(pParam  ,pOutput) ;
							MEMC_dehalo_2k_special_setting(pParam  ,pOutput) ;
						}
			}   
			if(i_dehalo_tightest_setting){
				ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,18 ,18 , &readval);   // for KTC general settting 
				if(readval==0)
				{
	                 WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect	Tulia for KTC always close  dehalo logo protect 
				}
			}


		if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slowmotion_bgstable == 1)
		   {
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,1023); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,300);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,1);	//judge divide en
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,1);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,0,0,1);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,1); 			   
				WriteRegister(KME_DEHALO5_PHMV_FIX_C_reg,16,16,1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,3,12,0);//pos min th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,8,9,3);   
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,24,500); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,150); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,400);
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,500); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,255);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,255); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,10);    
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x5);	  
			   flag_slow_bgstable = 1;
		   }
		   else if(flag_slow_bgstable)
		   {
	   
			   flag_slow_bgstable = 0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0);	//judge divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0);  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,0,0,1);  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0); 			   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_C_reg,16,16,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,3,12,2);//pos min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,3);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,8,9,3);   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,24,0x12c); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x15e); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,0x50);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,0x50); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);	
		       WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
		   }
		   
	   
	   
	   if( s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_vertical2_flag== 1)
	   {
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,1023);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,1);//ver
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,1);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,10);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,20);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,25);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);
		 
		   //WriteRegister(0xB809ce60,19,21,5);
		  // WriteRegister(0xB809ce60,12,14,5);  
		   flag_vertical2 = 1;
	   }
	   else if(flag_vertical2>0)
	   {
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0);//ver		
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,1);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);//extend_ucov_th0
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x25);  
			flag_vertical2 = 0;
			  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);
		 // WriteRegister(0xB809ce60,19,21,0);
		  // WriteRegister(0xB809ce60,12,14,0);  
	   }
	   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_rotate_rmvdiff == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   flag_rotate = 1;
		   }
		   else if(flag_rotate)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
			   flag_rotate = 0;
		   }
   
	   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slowomtion_midmove == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,500);  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,1023);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   flag_midmove = 1;
		   }
		   else if(flag_midmove)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);  
			   flag_midmove = 0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);
		          WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
	   
		   }


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_predver_en == 1)
	    {
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0);
	        video_predver = 1;
	    }
	    else if(video_predver)
	    {
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1);
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);
	        video_predver = 0;
	        
	    }


	    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_sadoff_veren == 1)
	    {
	 
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); 
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); 
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0);      

	        flag_sadoffveren = 1;
	    }
	    else if(flag_sadoffveren)
	    {
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); 
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); 
	        WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);       

	        flag_sadoffveren = 0;
	        
	    }

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_fast_bgmotion == 1)
   {
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,30); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,10); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,40); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,2); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0); 

	   flag_bgfastmotion = 1;
   }
   else if(flag_bgfastmotion)
   {
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,12); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,12); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5); 
	   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); 

	   flag_bgfastmotion = 0;
	   
   }
        }
        else
        {
		/*WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);//198
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);          
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,bg_extend_cond3_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15, bg_extend_cond4_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);*/
		//  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); // reg_dh_postflt_bypass
        }

	/*
        ReadRegister(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg,12,23,&unconf_val1);
        ReadRegister(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg,0,11,&unconf_val2);
        rtd_pr_memc_info("grp1=%d grp0=%d\n",unconf_val1,unconf_val2);

        for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
           {
               ReadRegister(KME_ME1_TOP7_ME1_STATIS_SAD_01_reg+4*rgnIdx ,0,24,&u32_RB_val);   
               SAD_rgn[rgnIdx] = u32_RB_val ;

           }
       for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
           {  
               sum_sad+=SAD_rgn[rgnIdx];
           } 
       avr_sad=sum_sad/32;

        
	rtd_pr_memc_info("sad=%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d avr=%d\n",SAD_rgn[0],SAD_rgn[1],SAD_rgn[2],SAD_rgn[3],SAD_rgn[4],SAD_rgn[5],SAD_rgn[6],SAD_rgn[7],SAD_rgn[8],SAD_rgn[9],SAD_rgn[10],SAD_rgn[11],SAD_rgn[12],SAD_rgn[13],SAD_rgn[14],SAD_rgn[15],SAD_rgn[16],SAD_rgn[17],SAD_rgn[18],SAD_rgn[19],SAD_rgn[20],SAD_rgn[21],SAD_rgn[22],SAD_rgn[23],SAD_rgn[24],SAD_rgn[25],SAD_rgn[26],SAD_rgn[27],SAD_rgn[28],SAD_rgn[29],SAD_rgn[30],SAD_rgn[31],avr_sad);

	*/


	/*
		if(pParam->u1_me1_dehalo_Newalgo_print==1)
		{
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_divide_en==1)
			{
			    //rtd_pr_memc_info("dh_condition_divide_en");
			    rtd_pr_memc_info("dh_1");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1)
			{
			   // rtd_pr_memc_info("dh_condition_virtical");
			   rtd_pr_memc_info("dh_2");
			} 			
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_large_mv_th_y2==1)
			{
			//	rtd_pr_memc_info("dh_condition_large_mv_th_y2");
			rtd_pr_memc_info("dh_3");
		    }
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_mv_th_y0==1)
			{
			//	rtd_pr_memc_info("dh_condition_small_mv_th_y0");
			rtd_pr_memc_info("dh_4");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)
			{
			//	rtd_pr_memc_info("dh_condition_black_protect_off");
			rtd_pr_memc_info("dh_5");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_correct_cut_th==1)
			{
				//rtd_pr_memc_info("dh_condition_correct_cut_th");
				rtd_pr_memc_info("dh_6");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_aplfix_en==1)
			{
			  //  rtd_pr_memc_info("dh_condition_aplfix_en");
			  rtd_pr_memc_info("dh_7");
			}
		    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1)
			{
			//	rtd_pr_memc_info("dh_condition_white_protect_on\n");
			rtd_pr_memc_info("dh_8\n");
			}
	   }
	   */
	}
}


VOID MEMC_dehalo_newalgo_bgmaskBase_WrtAction(const _PARAM_WRT_COM_REG *pParam,_OUTPUT_WRT_COM_REG *pOutput)
{
	int enbale_readval;
	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg, 11, 11, &enbale_readval);
	
	if((pParam->u1_dehalo_Newalgo_Proc_en_all)||(enbale_readval == 1))
    {

	    const _PQLCONTEXT *s_pContext = GetPQLContext();
		static signed short gmv_fgx = 0;
	    static signed short gmv_fgy = 0;
		static signed short gmv_bgx = 0;
	    static signed short gmv_bgy = 0;
		int left_rim_pre;
		signed short u11_gmv_mvx;
    	signed short u10_gmv_mvy;
		static int	holdframe_144face;
		static bool flag_144face ;

		
        //dehalo init
        int bg_useless_fix_bg_th_init=0x54;

        int posdiff_judge_th1_init=0x384;
        int pred_en_init=0x0;
        int pred_th0_init=0x16;//0xf;
        int pred_th1_init=0x3;
        int occl_correct_en_init=0x1;
        int bg_extend_cov_th1_init=0x5;
        int bg_extend_ucov_th1_init=0x5;
        int pred_ver_en_init=0x0;
        int bg_extend_ucov_th0_init= 0xc;
        int bg_extend_cov_th0_init= 0xc;
        int pred_me1_diff_cut_en_init= 0x0;
        int gmv_th_y2_init=0x4b;
        //int bg_extend_cond3_en_init=0x1;
        int occl_filter_ucov_cut_init = 0x4;
        int occl_filter_cov_cut_init= 0x4;
        int bg_extend_bg_sum_max_th_init= 0x57;
        int color_protect_th0_en_init=0x1;
        int color_protect_th1_en_init=0x0;
        int color_protect_th1_min_init=0x96;
        int fg_protect_by_apl_en_init=0x0;    
		int bg_extend_cond4_en_init=0x1;
	    int useless_max_th_init=0x54;
	    int extend_posdiff_th_init = 0x12c;
	    int extend_flag_num_init = 0x57;
	    int extend_mvdiff_th_init = 0x0;
	    int clear_y0_init = 0x12;
	    int clear_y1_init = 0x23;
	    int clear_y2_init = 0x3c;
	    int clear_posdiff_th_init = 0x0;
		int pfv_bg_change_th_init = 0x8;
	    int ppfv_bg_change_th_init = 0x8;
	    int judge_max_th0_init = 0x50;
	    int judge_max_th1_init = 0x50;
	    int old_pred_en_init = 0x1;
	    int pred_old_diff_cut_init = 0x1;
	    int bad_pred_cut_init = 0x1;
	    int bad_old_cut_init = 0x1;
	    int bg_change_cut_init = 0x1;
	    int pred_bad_cut_init = 0x1;
		int gmv_th_y0_init = 0x15;
		int pred_y0_init = 0x14;
	    int extend4_posdiff_th_init = 0x2bc;
		
            
	    //dehalo change
	    int pred_en_0=0x0;
	    int bg_useless_fix_bg_th=0x57;
	    //int posdiff_judge_divide_en=0x1;
	    //int posdiff_judge_penalty_en=0x1;
	    //int pred_en=0x1;
	    //int pred_th0=0xb;
	    int pred_th1=0x9;
	    //int occl_correct_en=0x0;
	    int bg_extend_cov_th1=0xa;
	    int bg_extend_ucov_th0=0xa;
	    int bg_extend_ucov_th1=0xa;
	    int pred_ver_en=0x1; 
	    int gmv_th_y2=0x65;
	    //int bg_extend_cond3_en=0x0;
	    int posdiff_judge_th1=0x33e;
	    int occl_filter_ucov_cut= 0xC;
	    int occl_filter_cov_cut = 0xC;
	    //int bg_extend_ucov_th0_y0= 0x14;
	    int bg_extend_cov_th0= 0x14;
	    //int bg_extend_bg_sum_max_th = 0x54;
	    //int pred_me1_diff_cut_en= 0x1;  
	    int color_protect_th0_en=0x0;
	    int color_protect_th1_en=0x1;
	    int color_protect_th1_min=0x82; 
	    int fg_protect_by_apl_en=0x1;
		int bg_extend_cond4_en=0x0;
	    int useless_max_th=0x57;
	    int extend_posdiff_th = 0x3ff;
	    int extend_flag_num = 0x64;
	    int extend_mvdiff_th = 0x14;
	    int clear_y0 = 0x5;
	    int clear_y1 = 0x19;
	    int clear_y2 = 0x32;
	    int clear_posdiff_th = 0x3f;
		int pfv_bg_change_th = 0x6;
	    int ppfv_bg_change_th = 0x6;
	    int judge_max_th0 = 0x96;
	    int judge_max_th1 = 0x96;
	    int old_pred_en = 0x0;
	    int pred_old_diff_cut = 0x0;
	    int bad_pred_cut = 0x0;
	    int bad_old_cut = 0x0;
	    int bg_change_cut = 0x0;
	    int pred_bad_cut = 0x0;
		int gmv_th_y0 = 0x0;
		int extend4_posdiff_th = 0x12c;
	    int pred_en_pre;
		int auto_extend_mvdiff_th = 0x14;
		int auto_extend_mvdiff_thfor128 = 0x14;
        int occl_more_1, occl_more_2, occl_more_3, occl_more_flag1=0, occl_more_flag2=0, occl_more_flag3=0, occl_more_hold1=0,  occl_more_hold2=0, occl_more_hold3=0;
		int readval8;
        static int FrameHold;
        static int FrameHoldflag;
        static int  FrameHold_13, FrameHold_299, FrameHold_189, FrameHold_339,FrameHold_299_begin ,FrameHold_214,FrameHold_185, FrameHold_306, FrameHold_192, FrameHold_301, FrameHold_226,FrameHold_153, FrameHold_317_broken, FrameHold_172_broken, FrameHold_200_broken, FrameHold_432_broken, FrameHold_43_broken, FrameHold_128, FrameHold_366, FrameHold_317_broken2, FrameHold_317_broken3, FrameHold_173_begin, FrameHold_96_begin, FrameHold_96_end, FrameHold_130, FrameHold_227_2, FrameHold_227_4, FrameHold_227_5, FrameHold_156, FrameHold_156_final, FrameHold_431, FrameHold_49, FrameHold_163, FrameHold_183, FrameHold_432_final;
        static int  FrameHoldflag_13, FrameHoldflag_299, FrameHoldflag_189, FrameHoldflag_339,FrameHoldflag_299_begin,FrameHoldflag_214, FrameHoldflag_185, FrameHoldflag_306, FrameHoldflag_192, FrameHoldflag_301, FrameHoldflag_226,FrameHoldflag_153,FrameHoldflag_317_broken,FrameHoldflag_172_broken,FrameHoldflag_200_broken,FrameHoldflag_432_broken,FrameHoldflag_43_broken,FrameHoldflag_128, FrameHoldflag_366, FrameHoldflag_317_broken2, FrameHoldflag_317_broken3, FrameHoldflag_173_begin, FrameHoldflag_96_begin, FrameHoldflag_96_end, FrameHoldflag_130, FrameHoldflag_227_2, FrameHoldflag_227_4, FrameHoldflag_227_5, FrameHoldflag_156, FrameHoldflag_156_final, FrameHoldflag_431, FrameHoldflag_49, FrameHoldflag_163, FrameHoldflag_183, FrameHoldflag_432_final;
        int fwcontrol0 , fwcontrol4, fwcontrol_13, fwcontrol_299, fwcontrol_189, fwcontrol_339, fwcontrol_299_begin, fwcontrol_214, fwcontrol_185, fwcontrol_306, fwcontrol_192, fwcontrol_301,fwcontrol_153,fwcontrol_128,fwcontrol_156=0,fwcontrol_183,fwcontrol_298;
        static int me_blackoff_flag , me_blackoff_frame_hold ,  color_pro_299_flag, color_pro_299_hold;
        static int  FrameHold_151_broken, FrameHold_fast_hor, FrameHold_419, FrameHold_PQ_Issue ;          
        static int  FrameHoldflag_151_broken, FrameHoldflag_fast_hor, FrameHoldflag_419, FrameHoldflag_PQ_Issue,FrameHoldflag_lessDTL; 
        static bool check_biglogo=0;
        static int video_clearbgflag;
        static int video_eagle,video_plane,video_smallplane,video_transporter,video_dance,video_skating,video30006,video_rotterdam,video_ridebike,video_30003man,vdieo_toleftbike,video_insect,video_huapi2,video_transporter_50hz;
	static int video_IDT;
        int cond96 = 0;
        int soccerhalo;
        static int v_soccerhalo;
	 /*	
        //T add
        int flag_CGF=0,flag_Aeon=0,flag_skating=0,flag_filmj=0,flag_fof=0;
        static int v_CGF,v_Aeon,v_skating,v_filmj,v_fof, v_skating_test;
	 */
	int rgnIdx,rmvx[32]={0},rmvy[32]={0};
		//int srmvx,srmvy;	
	 int readval;	
        int readval0014;
        static int v_0014;
        gmv_fgx=s_pContext->_output_read_comreg.dh_gmv_fgx;
        gmv_fgy=s_pContext->_output_read_comreg.dh_gmv_fgy;
        gmv_bgx=s_pContext->_output_read_comreg.dh_gmv_bgx;
        gmv_bgy=s_pContext->_output_read_comreg.dh_gmv_bgy;   
		
		for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
		{
			rmvx[rgnIdx] =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]	;
			rmvy[rgnIdx] =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[rgnIdx]	;		 
		}

	u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
        ReadRegister(HARDWARE_HARDWARE_25_reg, 0, 0 , &fwcontrol0);
		ReadRegister(HARDWARE_HARDWARE_25_reg, 2, 2 , &fwcontrol_298);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 4,4 , &fwcontrol4);  
        ReadRegister(HARDWARE_HARDWARE_25_reg, 10,10 , &fwcontrol_185);  
        ReadRegister(HARDWARE_HARDWARE_25_reg, 11,11 , &fwcontrol_13);  
        ReadRegister(HARDWARE_HARDWARE_25_reg, 6,6 , &fwcontrol_214);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 8,8 , &fwcontrol_299); 
        ReadRegister(HARDWARE_HARDWARE_25_reg, 9,9 , &fwcontrol_189);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 7,7 , &fwcontrol_339);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 12,12 , &fwcontrol_299_begin);  
        ReadRegister(HARDWARE_HARDWARE_25_reg, 17,17 , &fwcontrol_306);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 18,18 , &fwcontrol_192);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 19,19 , &fwcontrol_301); 
        ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 0,0 , &occl_more_1);
        ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 1,1 , &occl_more_2);
        ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_3_reg, 2,2 , &occl_more_3);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 20,20 , &fwcontrol_153);
        ReadRegister(HARDWARE_HARDWARE_25_reg, 21,21 , &fwcontrol_128);
		ReadRegister(HARDWARE_HARDWARE_25_reg, 23,23 ,& fwcontrol_183);

        if((pParam->u1_dehalo_Newalgo_Proc_en)||(enbale_readval == 1))
        {
			if(i_dehalo_tightest_setting)
			{
	            ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,18 ,18 , &readval);   // for KTC general settting 
	            if(readval==0)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect	
	            }

			}
		
            if(pParam->u1_dehalo_condition9)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_pred_en0==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
                }  
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
            }

            ReadRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,&pred_en_pre);
        
            if(pParam->u1_dehalo_condition1)
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_divide_en==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1))
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1);
					WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
                }
                else
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
                }
            }
            else
            {
                //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
            }
        
            if(pParam->u1_dehalo_condition2)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);         
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                }
				if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_hor_slow == 1))
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0);
                }
                else
                {
                    //WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
            }
        
            if(pParam->u1_dehalo_condition3)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_large_mv_th_y2==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);
            }

			if(pParam->u1_dehalo_condition3)     //fast extend
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_extend_more==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
            }

             if(pParam->u1_dehalo_condition3)
            {
                if(pParam->u1_dehalo_condition7)
                {
                    auto_extend_mvdiff_th = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 200) ? 40 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
                }
                else
                {
                    auto_extend_mvdiff_th = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 100) ? 20 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
                }
				
				if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==1 && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken == 0))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_th);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2); 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
                }
				if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==2)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,extend4_posdiff_th); 
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,extend4_posdiff_th_init); 
                }

                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_noslow_easy_extend==2))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
            }
        
            if(pParam->u1_dehalo_condition7)
            {
            
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_fast_hor_in_cnt==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                    FrameHold_fast_hor = 2;
                    FrameHoldflag_fast_hor = 1; 
                }
                else if(FrameHold_fast_hor > 0)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                    FrameHold_fast_hor--;
                }
                else if(FrameHoldflag_fast_hor)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
                    WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                    FrameHoldflag_fast_hor = 0;
            
                }
            }
            
			if(pParam->u1_dehalo_condition4)
            {
            
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_off == 0))
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);        
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
            }
			
			 if(pParam->u1_dehalo_condition4)
			 {
				 if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_mv_th_y0==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==0))
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0xa); // gmv y0
					 WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa); // pred y0
				 }
				 else if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_slow_motion==1)
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x0);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
					 WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
				 }
			 }
			 if(pParam->u1_dehalo_condition5) 
			 {
				 if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_301 ||
					 s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_171) && 
					 (s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_apl == 0))
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
				 }
				 if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th); //for 176 ghost
					 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th);
				 }
				 else
				 {
					 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
					 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
				 }
			 }
			 else
			 {
				 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
				 WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
				 WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
			 }
			 
			 if(pParam->u1_dehalo_condition5) //for 301, me1 black protect off
			 {
				 if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_301 || s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229)
				 {
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x0);  //me1 black protect
					 me_blackoff_flag =1 ;
					 me_blackoff_frame_hold = 2 ; 
				 }
				 else if(me_blackoff_frame_hold>0)
				 {
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x0);  //me1 black protect
					 me_blackoff_frame_hold-- ;
				 }
				 else if(me_blackoff_flag)
				 {
					 me_blackoff_flag =0 ; 
					 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
					 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				 }
			 }
			 else
			 {
				 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
			 }
            if(pParam->u1_dehalo_condition5) 
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_229)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x1); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x78);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0x8c);  //color th max
                    color_pro_299_flag =1 ;
                    color_pro_299_hold = 2 ; 
                }
                else if(color_pro_299_hold>0)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
                    color_pro_299_hold-- ;
                }
                else if(color_pro_299_flag)
                {
                    color_pro_299_flag =0 ; 
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                    WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 20, 20, 0x0); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 0, 7, 0x0);  //color th min
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 8,15, 0xff);  //color th max
            }

            if(pParam->u1_dehalo_condition5)
            {
                if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) || (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_predflag_dis))
                {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut);
                //rtd_pr_memc_info("white_protect_on\n");
                }
                else
                {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            }

	//for 144 face broken
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_144_face)); 
		   if(pParam->u1_dehalo_condition6)
		   {
			   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_144_face==1)
			   {
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en);	  
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);   
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0);  //mv filter en
				   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x0);  //bg cond th
					//path = 0xf;
				   if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				   {
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
				   }
				   holdframe_144face = 40;
				   flag_144face = 1;
			   }
			    else if(holdframe_144face>0)
			   {
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en);    
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);   
		           WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0);  //mv filter en
		           WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x0);  //bg cond th
		           //path = 0xf;
				   if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				   {
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,55);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
				   }
				   holdframe_144face--;
			   }
			   else if(flag_144face>0)
			   {
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en_init); 
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);   
				   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1);  //mv filter en
				   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
				   //path = 0x0;
					if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
					{
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x2d);// 3x29 fg th
						WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					}
					flag_144face = 0;
			   }
		   }
		   else
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,bg_extend_cond4_en_init); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1);  //mv filter en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
		   }
		   
			if(pParam->u1_dehalo_condition6)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_off==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
                    ///////////////////////////
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);  
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);   
            }

            /*if(pParam->u1_dehalo_condition7)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_correct_cut_th==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init); 
            }*/
        
            if(pParam->u1_dehalo_condition8)
            {
                if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_aplfix_en==1)
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en);
                }
                else
                {
                    WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init);
                }
            }
            else
            {
                WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init);
            }



			//----------------------- logo rim ----------------------------//
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_logo_rimoff==1) 
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0);
				check_biglogo = 1;
			}
			else if(check_biglogo>0)
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0);
				check_biglogo  = 0;
			} 


            //---------------------------for 189 ----------------------------------//
            if(fwcontrol_189 == 1)
            {
                FrameHold_189 = 30;  
                FrameHoldflag_189=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x2bc); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x23); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x3c); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x18); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                //WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x4b); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x61); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);				
				
				//add 20210719
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);//reg_dh_color_protect_th1_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x82);//color protect1 min
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x0);//extend occl cond1
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x0);//extend occl cond0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8);  //mvdiff_th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x154); //  //cond_posdiff_th
				


                
            }
            else if(FrameHold_189>0)
            {
                FrameHold_189 -- ;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x2bc); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x23); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x3c); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x18); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                //WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x4b); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x61); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);

			
				//add 20210719
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);//reg_dh_color_protect_th1_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x82);//color protect1 min
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x0);//extend occl cond1
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x0);//extend occl cond0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8);  //mvdiff_th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x154); //  //cond_posdiff_th
            }
            else if(FrameHoldflag_189)
            {
                FrameHoldflag_189=0;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0); //extend cond4 en
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
               WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x30); //gmv y1
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x25); //useless fg th
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);


                //add 20210719
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//reg_dh_color_protect_th1_en
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//reg_dh_color_protect_th4_en
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,0xff);//color protect1 max
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x96);//color protect1 min
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,19,19,0x1);//extend occl cond2
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,18,18,0x1);//extend occl cond1
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,17,17,0x1);//extend occl cond0
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0);  //mvdiff_th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //  //cond_posdiff_th
               
                
                
            }
            //rtd_pr_memc_info("299 : %d    hold(%d)", ((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)), FrameHold_299);
            //-------------------------------------------------------------------//
            //---------------------------for 299 ----------------------------------//
            if(fwcontrol_299 == 1)
            {
                FrameHold_299 = 2;  
                FrameHoldflag_299=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x19); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x9); //bg change pfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x9); //bg change ppfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x6e); //color_protect_th1_min
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf); //cov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //ucov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
            }
            else if(FrameHold_299>0)
            {
                FrameHold_299 -- ;
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x3);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);   //extend       
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);

                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x19); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x9); //bg change pfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x9); //bg change ppfv th
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,0x6e); //color_protect_th1_min
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf); //cov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //ucov cut
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0);
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
            }
            else if(FrameHoldflag_299)
            {
                FrameHoldflag_299=0;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                
                WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
                WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
                WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
                //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
                WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
                WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
                WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
                
            }
            if(fwcontrol_299_begin == 1)
            {
                FrameHold_299_begin = 2;  
                FrameHoldflag_299_begin=1;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
            }
            else if(FrameHold_299_begin>0)
            {
                FrameHold_299_begin-- ;
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
            }
            else if(FrameHoldflag_299_begin)
            {
                FrameHoldflag_299_begin =0 ;
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);    
                WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);    
                WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
            }
            //rtd_pr_memc_info("299 : %d    hold(%d)", ((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1) && (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)), FrameHold_299);
            //-------------------------------------------------------------------//

            //---------------------------for 128 ----------------------------------//   
            if(fwcontrol4)
            {
                if(fwcontrol0 )
                {
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x5);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x11);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xb);
                    
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x5);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1);
                    FrameHold = 5  ;  
                    FrameHoldflag=1;
                    
                }
                else if(FrameHold>0)
                {
                    FrameHold -- ;
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x5);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x11);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xb);
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);


                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x5);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x5);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1);
                }
                else if(FrameHoldflag)
                {
                    FrameHoldflag=0;
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14);
                    WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,16,20,0xf);
                    WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);

                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);           
                    WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0);


                }
            }
        //--------------------------------- ----------------------------------//

        //---------------------------for 172 broken ----------------------------------// 
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_172_black_th_flag)
        {        
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);

	FrameHold_172_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200 : 90	;  
	FrameHoldflag_172_broken=1;
			
        }
        else if(FrameHold_172_broken>0)
        {
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
	FrameHold_172_broken -- ;
			
        }
        else if(FrameHoldflag_172_broken)
        {
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
	WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
	WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	FrameHoldflag_172_broken=0;

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_200_face_flag); 
        //---------------------------for 339 ----------------------------------//
			if(fwcontrol_339)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x6e); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xb);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xb);

				FrameHold_339 = 5  ;  
				FrameHoldflag_339=1;
				
			}
			else if(FrameHold_339>0)
			{
				FrameHold_339 -- ;
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x6e); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xf); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xb);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xb);
			}
			else if(FrameHoldflag_339)
			{
				FrameHoldflag_339=0;
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			}
        //--------------------------------- ----------------------------------//

        //---------------------------for 185 ----------------------------------//
			if(fwcontrol_185)
			{
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x0); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x18); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xb);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				
				FrameHold_185 = 90	;  
				FrameHoldflag_185=1;

				 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_virtical_case5)
				{	 
				
					 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0); //gmv y0
					 WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x0); //gmv y1
				 }
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,25);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,46);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					
				}
			}
			else if(FrameHold_185>0)
			{
				FrameHold_185 -- ;
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x0); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xc); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x18); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xb);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_virtical_case5)
				 { 
						WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0); //gmv y0
						WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x0); //gmv y1
				}
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,25);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,46);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th
					
				}
			}
			else if(FrameHoldflag_185)
			{
				FrameHoldflag_185=0;
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2); //pick phmv mv
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
				//WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);  //logo protect
				WriteRegister(KME_DEHALO5_PHMV_FIX_19_reg,16,22,0xf);  //only ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);	//pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);  //old occl en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg, 0, 0, 0x1);  //me1 black protect
				
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,0,9,0x30); //gmv y1
				if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
				{

					//postflt
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,5,5,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,23);//mv_filter_th
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);//filter_cov_cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);//filter_ucov_cut	
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,45);// 3x29 fg th
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,84);// 3x29 bg th

				}
			}
		 //--------------------------------- ----------------------------------//
		 
		 //---------------------------for 13m2v ----------------------------------//
			 gmv_fgx=s_pContext->_output_read_comreg.dh_gmv_fgx;
			 gmv_fgy=s_pContext->_output_read_comreg.dh_gmv_fgy;
			 //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, (_ABS_(gmv_fgy) < 55)	&& (_ABS_(gmv_fgx) <10)); 
			if(fwcontrol_13/* && (!(_ABS_(gmv_fgy) < 55)  && (_ABS_(gmv_fgx) <10))*/)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x0); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xf);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x14); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x18); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xd); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);	//bg cond th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa); //cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14); //pred y th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x14); //pred y th1

				FrameHold_13 = 5  ;  
				FrameHoldflag_13=1;
				
			}
			else if(FrameHold_13>0)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x0); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xf);  //pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x14); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x18); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xd); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1);	//bg cond th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa); //cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14); //pred y th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x14); //pred y th1
				FrameHold_13 -- ;
			}
			else if(FrameHoldflag_13)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,2,2,0x1); //dh black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en
				WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1); //me1 black protect en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); //ver_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred
				WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);	//pred diff y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0); //extend cond4 en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1); //pred old diff cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old occl en
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1); //bad old cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);  //bg cond th
           		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //ucov th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //pred y th0
	            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf); //pred y th1
				FrameHoldflag_13=0; 
			}
		 //--------------------------------- ----------------------------------// 
		
		//---------------------------for 301 ----------------------------------//
		   if(fwcontrol_301)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x8); //cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x8); //ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x8); //ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x4);  //bg cond th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);  //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1);  //small en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x1);  //small min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x14); //extend mvdiff th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa); //filter cov th0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick phmv mv
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x8a); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xa);
			   
			   FrameHold_301 = 20  ;  
			   FrameHoldflag_301=1;
			   
		   }
		   else if(FrameHold_301>0)
		   {
				  FrameHold_301 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x1); 
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x1);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
				  WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8); //cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x8); //cov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x8); //ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x8); //ucov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); //ver_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x4);	//bg cond th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);	//logo protect
				  WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0xa);  //pred diff y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1);	//small en
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x1);	//small min th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x14); //extend mvdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa); //filter cov th0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick phmv mv
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x8a); //color min4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xa);
		   }
		   else if(FrameHoldflag_301)
		   {
				  FrameHoldflag_301=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);		  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
				  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);	//penalty_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut
				  WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5); //cov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5); //ucov th1
				  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); //ver_en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3);	//bg cond th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);	//logo protect
				  WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);  //pred diff y0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x0);  //small en
				  WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,6,7,0x3);  //small min th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
				  WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); //gmv y0
				  //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2); //pick phmv mv
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
				  WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
				  WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_301>0)); 
		   //--------------------------------- ----------------------------------//
			   
			//---------------------------for 306 ----------------------------------//
		   if(fwcontrol_306)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xa); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
		
			   FrameHold_306 = 160	;  
			   FrameHoldflag_306=1;
			   
		   }
		   else if(FrameHold_306>0)
		   {
			   FrameHold_306 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0xa); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut

		   }
		   else if(FrameHoldflag_306)
		   {
			   FrameHoldflag_306=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16); //me1 pred th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut

		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_306>0)); 
		   //--------------------------------- ----------------------------------//
		
		   //---------------------------for 192 ----------------------------------//
		   left_rim_pre=s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_LFT];
		   if(fwcontrol_192)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x11); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x28); //pred y0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);//old pred en
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  0xa3);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		
			   FrameHold_192 = 1 ;  
			   FrameHoldflag_192=1;
			   
		   }
		   else if(FrameHold_192>0)
		   {
			   FrameHold_192 -- ;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x190); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x11); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x28); //pred y0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);//old pred en
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  0xa3);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   }
		   else if(FrameHoldflag_192)
		   {
			   FrameHoldflag_192=0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sum cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
	           WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //filter cov cut
	           WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
	           WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
	           WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	           //WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8,  left_rim_pre);//left rim
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, (FrameHold_192>0)); 
        	/*rtd_pr_memc_info("l(%d) r(%d) t(%d) b(%d)", s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_LFT],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_RHT],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_TOP],
                                                            s_pContext->_output_rimctrl.u9_dh_blk_rim[_RIM_BOT]);*/
 		   //--------------------------------- ----------------------------------//
		
		   //---------------------------------for 226 dark patten ----------------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_black_apl==1)
		   {
			   FrameHold_226 = 60;	
			   FrameHoldflag_226=1;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); //neg en
		   }
		   else if(FrameHold_226>0)
		   {
			   FrameHold_226 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x14); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); //neg en
		   }
		   else if(FrameHoldflag_226)
		   {
			   FrameHoldflag_226=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); //pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); //neg en
		   }
		   //---------------------------for 153 ----------------------------------//
		   if(fwcontrol_153)
		   {		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
			   FrameHold_153 = 30  ;  
			   FrameHoldflag_153=1;
					   
		   }
		   else if(FrameHold_153>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
			   FrameHold_153 -- ;
					   
		   }
		   else if(FrameHoldflag_153)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
			   FrameHoldflag_153=0;
		
		   }
			//---------------------------for 317 broken ----------------------------------//
			if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K){
				if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken || s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag) && (!fwcontrol_153) && (!fwcontrol_128))
				{		 
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
					WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
					WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
					WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
					WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
					
					FrameHold_317_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80 : 50  ;  
					FrameHoldflag_317_broken=1;
		                    
		        }
		        else if(FrameHold_317_broken>0)
		        {
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		            WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		            FrameHold_317_broken -- ;
		                    
		        }
		        else if(FrameHoldflag_317_broken)
		        {
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		            WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		            FrameHoldflag_317_broken=0;

		        }	
			}else
	        {
	            if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_317_broken || s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag) && (!fwcontrol_153) && (!fwcontrol_128))
	            {        
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);

	                FrameHold_317_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80 : 50  ;  
	                FrameHoldflag_317_broken=1;
	                        
	            }
	            else if(FrameHold_317_broken>0)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x1); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x50); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x8c); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
	                FrameHold_317_broken -- ;
	                        
	            }
	            else if(FrameHoldflag_317_broken)
	            {
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
	                WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,1,3,0x3); //bg cond th
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
	                WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
	                FrameHoldflag_317_broken=0;

	            }

	        }




		
	        //---------------------------for 317 broken2 ----------------------------------//
	        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag2 == 1)     
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en            
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);        
	            FrameHold_317_broken2 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 800 : 400 ;          
	            FrameHoldflag_317_broken2=1;                            
	        }
	        else if(FrameHold_317_broken2>0)       
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en         
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);    
	            FrameHold_317_broken2 -- ;                           
	        }
	        else if(FrameHoldflag_317_broken2)        
	        {
	            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en   
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);         
	            FrameHoldflag_317_broken2=0;       
	        }
	        
	        //---------------------------for 317 broken3 ----------------------------------//
			if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_317_face_flag3 == 1) 
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en            
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);        
	            FrameHold_317_broken3 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200 : 100 ;          
	            FrameHoldflag_317_broken3=1;                            
	        }
	        else if(FrameHold_317_broken3>0)       
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en         
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);    
	            FrameHold_317_broken3 -- ;                           
	        }
	        else if(FrameHoldflag_317_broken3)        
	        {
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en     
	            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en   
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);          
	            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);         
	            FrameHoldflag_317_broken3=0;       
	        }
	        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_317_broken2>0 || FrameHold_317_broken3>0); 
	        
	        //---------------------------for 151 broken ----------------------------------//		   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_151_broken == 1)	  
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en			
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en			  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);		 
			   FrameHold_151_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 360 : 200 ;		  
			   FrameHoldflag_151_broken=1;							  
		   }
		   else if(FrameHold_151_broken>0)		 
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);			
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);	 
			   FrameHold_151_broken -- ;						   
		   }
		   else if(FrameHoldflag_151_broken)		
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en	 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);		  
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);		   
			   FrameHoldflag_151_broken=0;		 
		   }
		   //---------------------------for 200 broken ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_200_face_flag == 1)
		   {		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		   
			   FrameHold_200_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80  ;  
			   FrameHoldflag_200_broken=1;
					   
		   }
		   else if(FrameHold_200_broken>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
			   FrameHold_200_broken -- ;
					   
		   }
		   else if(FrameHoldflag_200_broken)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   FrameHoldflag_200_broken=0;
		   
		   }
		 //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_200_broken>0); 
		 
		 //---------------------------for 366 broken ----------------------------//
		 if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_blkheadbroken_flag == 1)
		 {		  
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
		 
			 FrameHold_366 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150 : 80  ;  
			 FrameHoldflag_366=1;
					 
		 }
		 else if(FrameHold_366>0)
		 {
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xe);
			 FrameHold_366 -- ;
					 
		 }
		 else if(FrameHoldflag_366)
		 {
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			 WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			 FrameHoldflag_366=0;
		 
		 }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_366>0); 
        
        //---------------------------for 432 bad gmv issue ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag > 0)
        {        
            FrameHold_432_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 400 : 260  ;  
            FrameHoldflag_432_broken=1;

            if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 1)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x77e);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x77e);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
			else if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 2)
			{
				WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
				WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x79c);
				//WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x79c);
				//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
			}
			//WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);	//extend cond3 en
			WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x12);
			WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x12);
			WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
			WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
			WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
			WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		
			WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x1);
					
		}
        else if(FrameHold_432_broken>0)
        {
            FrameHold_432_broken -- ;
            if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 1)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x77e);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x77e);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
            else if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_432_flag == 2)
            {
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x1);
                WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x79c);
                //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x1);
                WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x79c);
                //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            }
            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x0);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en

            WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x1);
                    
        }
        else if(FrameHoldflag_432_broken)
        {
            FrameHoldflag_432_broken=0;
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0x0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, 0x0);
            //WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0x0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0x0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, 0x0);
            //WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0x0);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en

            WriteRegister(HARDWARE_HARDWARE_25_reg, 26,26 , 0x0);

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_432_broken>0); 

        //---------------------------for 432 final ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_432final == 1)
        {        

            FrameHold_432_final = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40  ;  
            FrameHoldflag_432_final=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
                    
        }
        else if(FrameHold_432_final>0)
        {
            FrameHold_432_final -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
                    
        }
        else if(FrameHoldflag_432_final)
        {
            FrameHoldflag_432_final=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);//black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//write protect en
        }

        //---------------------------for 43 broken and ghost ----------------------------//
        //if0 test for 0014
        if(0){
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_43_flag == 1)
        {        

            FrameHold_43_broken = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40  ;  
            FrameHoldflag_43_broken=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
                    
        }
        else if(FrameHold_43_broken>0)
        {
            FrameHold_43_broken -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
                    
        }
        else if(FrameHoldflag_43_broken)
        {
            FrameHoldflag_43_broken=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); //mv filter

        }
            }
         //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_43_broken>0); 

        //---------------------------for 130 wrong gmv ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_130_flag == 1)
        {        

            FrameHold_130 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150: 90  ;  
            FrameHoldflag_130=1;
            //s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]
                    
        }
        else if(FrameHold_130>0)
        {
            FrameHold_130 -- ;
                    
        }
        else if(FrameHoldflag_130)
        {
            FrameHoldflag_130=0;

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_130>0); 

        //---------------------------for 173 begin small and black fg ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_173_begin_flag == 1)
        {        

            FrameHold_173_begin = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 150: 90  ;  
            FrameHoldflag_173_begin=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x14); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en  
                    
        }
        else if(FrameHold_173_begin>0)
        {
            FrameHold_173_begin -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x14); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x0); //apl_s2_protect_extend_en  
                    
        }
        else if(FrameHoldflag_173_begin)
        {
            FrameHoldflag_173_begin=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
            //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);//reg_dh_pred_x_range 
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,31,31,0x1); //apl_s2_protect_extend_en  

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_173_begin>0);

        //---------------------------for 227 2 scene ----------------------------//
        //if0 test for 0014
        if(0){
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_2 == 1)
        {        

            FrameHold_227_2 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_2=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc); //filter ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //filter cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x1e); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x19); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19); //ver pred y1
                    
        }
        else if(FrameHold_227_2>0)
        {
            FrameHold_227_2 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xc);//filter ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc);//filter cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x1e); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x19); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19); //ver pred y1
                    
        }
        else if(FrameHoldflag_227_2)
        {
            FrameHoldflag_227_2=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); //pred me1 diff cut en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf); //ver pred y1

        }
            }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_227_2>0);

        //---------------------------for 227 4 scene ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_4 == 1)
        {        

            FrameHold_227_4 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_4=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x10); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x50); //extend mvdiff th
                    
        }
        else if(FrameHold_227_4>0)
        {
            FrameHold_227_4 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x10); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x50); //extend mvdiff th
                    
        }
        else if(FrameHoldflag_227_4)
        {
            FrameHoldflag_227_4=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_227_4>0);

        //---------------------------for 227 5 scene ----------------------------//
        if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_227_5 == 1)
        {        

            FrameHold_227_5 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
            FrameHoldflag_227_5=1;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);//extend cov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x20); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
                    
        }
        else if(FrameHold_227_5>0)
        {
            FrameHold_227_5 -- ;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);//extend cov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x20); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x0); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x0); //me1 black protect en
                    
        }
        else if(FrameHoldflag_227_5)
        {
            FrameHoldflag_227_5=0;
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0x1); //me1 black protect        
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0,0x1); //me1 black protect en

        }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_227_5>0);
		
		//---------------------------for 156 ----------------------------//
		if(fwcontrol_156)
		   {		
			   FrameHold_156 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;	
			   FrameHoldflag_156=1;    
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		   }
		   else if(FrameHold_156>0)
		   {
			   FrameHold_156 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
					   
		   }
		   else if(FrameHoldflag_156)
		   {
			   FrameHoldflag_156=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_156>0); 
		
		//---------------------------for 156 final ----------------------------//
		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_156_final_flag)
		   {		
			   FrameHold_156_final = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 80: 40	;  
			   FrameHoldflag_156_final=1;	 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   }
		   else if(FrameHold_156_final>0)
		   {
			   FrameHold_156_final -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4);  //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x1); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
					   
		   }
		   else if(FrameHoldflag_156_final)
		   {
			   FrameHoldflag_156_final=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x1f4);  //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,5,5,0x0); //small judge en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_156_final>0); 
		
		//---------------------------for 431 ----------------------------//
		if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_431_halo_flag)
		   {		
			   FrameHold_431 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160: 80  ;  
			   FrameHoldflag_431=1;   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
		   }
		   else if(FrameHold_431>0)
		   {
			   FrameHold_431 -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
					   
		   }
		   else if(FrameHoldflag_431)
		   {
			   FrameHoldflag_431=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
		   }
		//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_431>0);
		
		
		   //---------------------------for 96 begin ----------------------------//
		   ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,30,30, &cond96); 
		   if((s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_96 == 1) ||(cond96 == 1))
		   {		
		
			   FrameHold_96_begin = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5  ;  
			   FrameHoldflag_96_begin=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xa); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHold_96_begin>0)
		   {
			   FrameHold_96_begin -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xa); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHoldflag_96_begin)
		   {
			   FrameHoldflag_96_begin=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_96_begin>0); 
		
		   //---------------------------for 96 end ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_96_2_flag == 1)
		   {		
		
			   FrameHold_96_end = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 10: 5	;  
			   FrameHoldflag_96_end=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHold_96_end>0)
		   {
			   FrameHold_96_end -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xb); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x8); // pred ver y0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
					   
		   }
		   else if(FrameHoldflag_96_end)
		   {
			   FrameHoldflag_96_end=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_96_end>0);
		
		   //---------------------------49 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_49_halo_flag == 1)
		   {		
		
			   FrameHold_49 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 160: 80  ;  
			   FrameHoldflag_49=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
					   
		   }
		   else if(FrameHold_49>0)
		   {
			   FrameHold_49 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
					   
		   }
		   else if(FrameHoldflag_49)
		   {
			   FrameHoldflag_49=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_49>0);  
		
		   //---------------------------163 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_gmv_valchange_163 == 1)
		   {		
		
			   FrameHold_163 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 300: 150	;  
			   FrameHoldflag_163=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x8);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x50); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
					   
		   }
		   else if(FrameHold_163>0)
		   {
			   FrameHold_163 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x1f4); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x8);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0x50); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
					   
		   }
		   else if(FrameHoldflag_163)
		   {
			   FrameHoldflag_163=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);	//bg change en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_163>0);
		
		   //---------------------------183 halo ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_183_face_broken == 1)
		   {		
		
			   FrameHold_183 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 300: 150	;  
			   FrameHoldflag_183=1;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
					   
		   }
		   else if(FrameHold_183>0)
		   {
			   FrameHold_183 -- ;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
					   
		   }
		   else if(FrameHoldflag_183)
		   {
			   FrameHoldflag_183=0;
		
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		
		   }
		   //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,	0,	3, FrameHold_183>0);
		   
		   //---------------------------419 ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_419_flag == 1)
		   {		
		   
			   FrameHold_419 = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 200: 100	;  
			   FrameHoldflag_419=1;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x14);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); //extend cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x2); //extend cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x2); //extend ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
					   
		   }
		   else if(FrameHold_419>0)
		   {
			   FrameHold_419 -- ;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); //extend cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x2); //extend cov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x14); //extend ucov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x2); //extend ucov th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x  
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x0); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x0);  //extend cond4 en
		   }
		   else if(FrameHoldflag_419)
		   {
			   FrameHoldflag_419=0;
		   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); //mv filter
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
		   }
		   
		   //---------------------------pq issue pattern ----------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_PQ_Issue == 1)
		   {		
		   
			   FrameHold_PQ_Issue = (s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ) ? 60: 30  ;  
			   FrameHoldflag_PQ_Issue=1;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258);//judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x0); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x57);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x57); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x7);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x7);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x2d); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xaa); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x8); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x8); //old sun cut th
					   
		   }
		   else if(FrameHold_PQ_Issue>0)
		   {
			   FrameHold_PQ_Issue -- ;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);  //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x0); //filter ucov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x57);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x57); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x7);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x7);
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x12); //mv filter th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x8);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x1); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x2d);//color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xaa); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xd); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x8); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x8); //old sun cut th
		   
		   }
		   else if(FrameHoldflag_PQ_Issue)
		   {
			   FrameHoldflag_PQ_Issue=0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);  //black protect
			   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1); //bad_pred_diff_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x52); //extend min th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4); //correct cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
			   //WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,25,29,0x14); //mv filter th 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0); //color en4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,0,7,0x0); //color min4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,8,15,0xff); //color max4
			   WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   
		   }


	
	if(s_pContext->_output_frc_sceneAnalysis.u8_me1_condition_relativemotion_lessDTL_flag)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,50);// 3x29 fg th
		FrameHoldflag_lessDTL = 1;
	}
	else if(FrameHoldflag_lessDTL)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,0x25);// 3x29 fg th
		
		FrameHoldflag_lessDTL = 0;
	}


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_ver_clearbg_flag == 1)
	{
		video_clearbgflag = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
	   
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,3);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,24,27,2);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,28,31,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,6);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,2);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,31);//cov th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,31);//ucov th
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,12);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,12);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,15);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,15);
	
	}
	else if(video_clearbgflag)
	{
		video_clearbgflag = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
	   
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,0x3);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,0x7);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,0x7);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,24,27,0x5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,28,31,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,6);
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,2);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);//cov th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);//ucov th
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
	
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
	
	
		
	}


        //-----------------------------128 --------------------------------//
        auto_extend_mvdiff_thfor128 = (_ABS_DIFF_(gmv_fgx,gmv_bgx) > 100) ? 20 : _ABS_DIFF_(gmv_fgx,gmv_bgx)/5;
        if(fwcontrol_128)
        {        

            FrameHold_128 = 5  ;  
            FrameHoldflag_128=1;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0xf); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe); //ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x19); //extend ucov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x1e); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x50); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_thfor128);
                    
        }
        else if(FrameHold_128>0)
        {
            FrameHold_128 -- ;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0xf); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xe);//ucov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xc); //cov cut  
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x19);  //extend ucov th0
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x1e); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x50); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, auto_extend_mvdiff_thfor128);
        }
        else if(FrameHoldflag_128)
        {
            FrameHoldflag_128=0;
            WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);        
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);  //extend cond3 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1);  //extend cond4 en
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22); //color th0 max
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4); //correct cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14); //pred y0
            WriteRegister(KME_DEHALO5_PHMV_FIX_28_reg,0,9,0x3c); //pred y1
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);

        }
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg,  0,  3, FrameHold_128>0); 

		//--------------------  eagle  ---------------------------------//

	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_eagle_status == 1)
	{
	  	video_eagle = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, 0x57); //useless max th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x56);  //bg min
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xf); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x5); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x5); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x8); //extend mvdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xf); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x9);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x9); //filter cov cut

		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,18);
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,12);
	  }
	  else if(video_eagle)
	  {
	  	video_eagle = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, 0x54); //useless max th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); //filter cov cut

		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
	  }


	//---------------------------------  C005 plane -------------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_C005plane_status == 1)
	{
	  	video_plane = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0x1e); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x1e); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x0); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x0); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x0); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0xf); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0xa);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf);
		//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
	  }
	  else if(video_plane)
	  {
	  	video_plane = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc); //extend ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc); //extend cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2); //pred en
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,1,1,0x1); // hor en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0); // ver en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0x1); // pos en
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0x1); // neg en
		WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5); //ver pred y0
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x1); //only occl

	  }


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_smallplane_status == 1)
	{
		video_smallplane =1 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0x28); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0xf); 

	}
	else if(video_smallplane)
	{
		video_smallplane = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); 
	}



	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter =1 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0); //white protect
		

	}
	else if(video_transporter)
	{

		video_transporter = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf); //filter cov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,1);

	}

if(s_pContext->_external_data._output_frameRate == _PQL_OUT_100HZ)
{
	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_transporter_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_0026_1_status == 0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status==0)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status==0))
	{
		video_transporter_50hz = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en 
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);//old_occl_en
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x1);

		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,65);  //reg_dh_color_protect_th0_max 


	}
	else if(video_transporter_50hz)
	{
		video_transporter_50hz = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);  //reg_dh_color_protect_th0_max 
	}


}


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dance_status == 1)
	{
		if(u11_gmv_mvx<20)
		{
			WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x5); //pred sun cut th
			WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xb); //filter ucov th0
			WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		}
		video_dance = 1 ;
	}
	else if(video_dance)
	{

		video_dance = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
		WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1	
	}

	if((s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_skating_status == 1)&&(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status==0))
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect en
		//WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
		//WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect en
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0);//bad pred cut
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7);//reg_dh_pred_x_range
	
		video_skating = 1 ;
	}
	else if(video_skating)
	{
		video_skating = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //black protect en
		//WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
		//WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect en
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);//bad pred cut
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9);//reg_dh_pred_x_range	
	}



	//---------------------- 30006 ----------------------------//
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_30006_status == 1)
	{
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);
		video30006 = 1 ;
	}
	else if(video30006)
	{
		video30006 = 0 ;
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);

	}

	   
	   //--------------------- rotterdam 1---------------------------//
	   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_rotterdam_status == 1)
	   {
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0xa); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x190); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg change en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
		   video_rotterdam = 1 ;
	   }
	   else if(video_rotterdam)
	   {
		   video_rotterdam = 0 ;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); //bg change en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad pred cut en
	   }
	   
	   
	   //------------------------------- ride bike girl --------------------------------//
	   
	   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_ridebikegirl_status == 1)
	   {
		   video_ridebike = 1;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xa); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0xa); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1); //penalty_en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0xa); //extend mvdiff th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x7); //pred range x
		   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xc); //filter ucov th0
	   }
	   else if(video_ridebike>0)
	   {
		   video_ridebike = 0;
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
		   WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384); //judge th1
		   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); //logo protect
		   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0); //penalty_en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1); //old pred en
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23,0x0); //extend mvdiff th
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
		   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //pred range x
		   WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); //filter ucov th0
	   
	   }
	   
	   
	   
		   //--------------------------- man ride bike 30003 -------------------------//
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_3003man_status == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,12);//th_y0 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); 
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,10); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,10); 
	   
			   video_30003man = 1;
	   
			   
	   
		   }
		   else if(video_30003man>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,pred_y0_init); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14); //pred sun cut th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28); //old sun cut th
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1); 
			   video_30003man = 0;
		   }
	   
	   
	   
	   
		   //---------------  30003 2---------------------//
	   
		   if(s_pContext->_output_frc_sceneAnalysis.u8_dh_conditio_toleft_bike_status == 1)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); //bg_change_cond_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
	   
			   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x5); //predflag_x_range
			   
	   
			   vdieo_toleftbike = 1;
	   
		   }
		   else if(vdieo_toleftbike>0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //th0_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1); 
			   WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1); //bad_cut_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);
	   
			   WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,0x9); //predflag_x_range
	   
			   vdieo_toleftbike = 0;
		   }


	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_insect_status == 1)
	{
		video_insect = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,15);

		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,30);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,18);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,8);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,19);

		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,300);

		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,10);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,10);

		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,30);
		WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,30);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,8);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);


		
	}
	else if(video_insect>0)
	{
		video_insect = 0;

		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0);

		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5);

		WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);

		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28);

		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,3,3,1);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,4,4,1);

		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
		WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
		
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,4);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);


		
	}
	   
	   
	if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_huapi2_status == 1)
	{
		video_huapi2 = 1;
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,10);
	}
	else if(video_huapi2>0)
	{
		video_huapi2 = 0;
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);//reg_dh_color_protect_th0_max 
	}   
		if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_IDT_flag == 1)
        {

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);

            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg, 16, 25,   0x2  );//0xb809EB94
            WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg, 0, 11,   0x32 );//0xb809EB0C
            WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg, 24, 24,    0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg, 4,  4,   0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg, 16, 25,   0x3ff);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 0, 6,   0x5   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 8, 14,   0xc    );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 16, 22,   0x5   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 24, 30,   0xc   );
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg, 4, 13,   0x32  );

            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg, 15, 15,   0x0      );
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 7,  7,   0x0     );
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 6,  6,   0x0      );
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg, 0,  0,   0x0     );

            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 16, 21,   0xa);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 24, 29,    0xa);

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 16, 16,  0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 0, 7,   0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 8, 15,  0x50);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 17, 17,  0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 16, 23,  0x82);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 24, 31,  0xff);

            //	WriteRegister(0xb809d7c4, 31, 31, 0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,    0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,    0x2);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,    0x2);


	      WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 28, 28, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 31, 31, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 30, 30, 0);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 18, 18, 0);
            video_IDT = 1;
        }
        else if(video_IDT>0)
        {
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//white protect
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
            WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384);
            WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,12);
            WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28);
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,150);
            WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,255);
            //WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,1);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0);
            WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);

	      WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);

            //WriteRegister(HARDWARE_HARDWARE_24_reg, 28, 28, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 31, 31, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 30, 30, 1);
            //WriteRegister(HARDWARE_HARDWARE_24_reg, 18, 18, 1);
            video_IDT = 0;
        }
        //---------------------------for 214 ----------------------------------//
        	if(fwcontrol_214 ||(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_214 == 1))
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick bg mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x4F); //phase_th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x32); //phase_th6
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x23); //phase th12
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);//pred_old_diff_cut_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad pred diff cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0x29); //bad old cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0x28); //bad pred cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xe); //pred sun cut th
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0x29); //bad old ucov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0x28); //bad pred ucov
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x9); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0x0); //extend cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //extend ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);  //extend cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x19); // color protect th max0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); // mv filter en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //posdiff th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0xdf); //posdiff th2
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x1a4); //posdiff th3
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x55); //useless bg th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xe); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2); //filter ucov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //filter cov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xe); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x1); //ver y range
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x14);  //pred y2
				WriteRegister(KME_DEHALO5_PHMV_FIX_43_reg,6,6,0x0); // blend
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);  //bg change en
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x0);  //bg sum en
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14);	//ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19);	//ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x3ff);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x64);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x3f);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0); //old pred en
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
		   
				if(s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
				}
				else
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				}
		   
						//fw init
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,0x3); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,0x4b);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,0x0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, 0x12);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, 0x23);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, 0x3c); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x8);
				WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x8);
		   
				FrameHold_214 = 5  ;  
				FrameHoldflag_214=1;
				
			}
			else if(FrameHold_214>0)
			{
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x1); //pick bg mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);	//penalty_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x4F); //phase_th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x32); //phase_th6
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x23); //phase th12
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x0);//pred_old_diff_cut_en
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x0); //bad pred diff cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); //bad pred cut en
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0x29); //bad old cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0x28); //bad pred cov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0xe); //pred sun cut th
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0x29); //bad old ucov
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0x28); //bad pred ucov
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x9); //me1 pred th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x0); //correct cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,0x0); //extend cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xa); //extend ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xa);  //extend cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x19); // color protect th max0
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,2,2,0x1); // mv filter en
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x258); //posdiff th1
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0xdf); //posdiff th2
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x1a4); //posdiff th3
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x55); //useless bg th
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xe); //filter cov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2); //filter ucov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //filter cov cut
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xe); //filter ucov th0
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x1); // ver en
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x1); //ver y range
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x14);  //pred y2
				WriteRegister(KME_DEHALO5_PHMV_FIX_43_reg,6,6,0x0); // blend
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0);  //bg change en
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x0);  //bg sum en
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x54);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x14);	//ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0x19);	//ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x3ff);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x64);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x3f);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x0);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x0); //only occl
		   
				if(s_pContext->_external_data._output_frameRate == _PQL_OUT_120HZ)
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x3);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x0); //filter cov cut
					WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xc); //filter cov th0
				}
				else
				{
					WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
					WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				}
		   
						//fw init
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,0x3); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,0x5);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,0x4b);  
				WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,0x0); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, 0x12);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, 0x23);
				WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, 0x3c); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, 0x8);
				WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, 0x8);
				FrameHold_214 -- ;
		   
			}
			else if(FrameHoldflag_214)
			{
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,28,29,0x2);  // init
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,27,27,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2B_reg,8,15,0x62);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2C_reg,16,23,0x46);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2E_reg,0,7,0x28);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,24,29,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,16,21,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,8,13,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,0,5,0xf);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,0x16);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1A_reg,26,31,0x4);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,0xc);
				WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384);
				WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,18,26,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,16,24,0x15e);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,0x54);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x4);
				WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x4); 
				WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf);
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,8,9,0x2);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,0,7,0x19);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0x1);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,0x57);  //bg max
				WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,0,6,0x52);  //bg min
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,16,23,0x5);  //ver pre y0
				WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,24,31,0xf);  //ver pre y1
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, 0x12c);
				WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, 0x57);
				WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, 0x0);
				WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
				//WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,12,12,0x0); //only mv
				WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,15,15,0x1); //only occl
		   
				WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x1);		
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x1);  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x1);		  
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x1);
				WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
				FrameHoldflag_214=0;
				
            	WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,0x0); //disable me1 flag 2022.06.23
		   
			}
		   //--------------------------------- ----------------------------------//
		
		   if(occl_more_1)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
		
			   occl_more_hold1 = 5;
			   occl_more_flag1 = 1;
		   }
		   else if(occl_more_hold1 > 0)
		   {
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x2); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x2);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x2);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x2);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
			   occl_more_hold1--;
		   }
		   else if(occl_more_flag1)
		   {
			   occl_more_flag1 = 0;
			   WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,0,1,0x3);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0x0); 	   
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8,0x1);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0x0);  
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14,0x0); 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0x0);		 
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0x0);
			   WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29,0x0);
		   }
		
		   if(occl_more_2)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   occl_more_hold2 = 5;
			   occl_more_flag2 = 1;
		   }
		   else if(occl_more_hold2 > 0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x1);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1); //divide en
			   occl_more_hold2 --;
		   }
		   else if(occl_more_flag2)
		   {
			   occl_more_flag2 = 0;
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0x0);  //penalty_en
			   WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0); //divide en
		   }
		
		   if(occl_more_3)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   occl_more_hold3 = 5;
			   occl_more_flag3 = 1;
		   }
		   else if(occl_more_hold3 > 0)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x12c); //extend4 posdiff
			   occl_more_hold3--;
		   }
		   else if(occl_more_flag3)
		   {
			   WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c); //extend posdiff th
			   WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc); //extend4 posdiff
			   occl_more_flag3 = 0;
		   }
//djntest
                    ReadRegister(HARDWARE_HARDWARE_44_reg, 0, 0, &readval0014); //0x1809D5B0
                    if(readval0014)
                    {
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,44); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); ///////
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); 
                            
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,5); 
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,4); 
                           // WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,5); 
                          //  WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,5); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,10); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,15); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30,8); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15,8); 
                         //   WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0x9); 
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0x9); 
                        //    WriteRegister(0xb809eb78,0,6,8);//cov more
                        //    WriteRegister(0xb809eb78,8,14,8);//cov less
                        //    WriteRegister(0xb809eb78,16,22,8);//ucov more
                        //    WriteRegister(0xb809eb78,24,30,8);//ucov less
                            //WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x1);//judge divide en

                            //WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,1); //ver_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,37);    
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
                            
 	                   // WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xa);//cov_th0                           
    	                    //WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,10);//cov_th1
                        
                            v_0014 = 1;
                    } 
                    else if(v_0014==1)
                    {
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); //black protect
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,8,14,37); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,10,13,9); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,5,7,3); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,16,18,7); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,21,23,7); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,0,4,8); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_34_reg,8,12,4); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30,6); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15,6); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_7_reg,8,12,0xf); 

                            WriteRegister(0xb809eb78,0,6,12);//cov more
                            WriteRegister(0xb809eb78,8,14,5);//cov less
                            WriteRegister(0xb809eb78,16,22,12);//ucov more
                            WriteRegister(0xb809eb78,24,30,5);//ucov less
                            v_0014 = 0;
                    	    WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0x0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,0); 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1); 
 	                    WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,16,20,0xf);//cov_th0                           
	                    WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,24,28,0x4);//cov_th1

                    }   

           
                    ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,20 ,20 , &soccerhalo);
                    if(soccerhalo==1)
                    {
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);
                            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);
                            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
                            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
                            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);           
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0);

                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,0);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);//gmv_th_y0
                            WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,0);//bad cut en                    
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,1);//posdiff4             
                            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,26,1023);     

                            WriteRegister(0xb809ebac,4,13,400);//cond4 posdiff th
                            WriteRegister(0xb809eb78,0,6,8);//cov more
                            WriteRegister(0xb809eb78,8,14,8);//cov less
                            WriteRegister(0xb809eb78,16,22,8);//ucov more
                            WriteRegister(0xb809eb78,24,30,8);//ucov less
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,0x2);//occl cut 
                            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,0x2); //occl cut   
                            v_soccerhalo = 1;
                            //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x1);
                         
                    }
                    else if(v_soccerhalo==1)
                    {
                            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
                            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);  
                            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x1);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
                            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
                            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
                            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,18,18,1);//dh_pred_bg_change_cond_en
                            WriteRegister(0xb809ebac,4,13,700);//cond4 posdiff th
                            v_soccerhalo=0;
                    }

                    
                    ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,16 ,16 , &readval);
                    if(readval==1)
                    {
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en         
        		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
        		WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);
                        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); 
                        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
                        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);
                         WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); //black protect
		        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26,0x0);                         
                    }


		   	ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg,8 , 8 , &readval8);
			if(!readval8)
			{
						if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)//if(Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)
						{
							MEMC_dehalo_2k_normal_setting(pParam  ,pOutput) ;
							MEMC_dehalo_2k_special_setting(pParam  ,pOutput) ;
						}
			}   
			if(i_dehalo_tightest_setting){
				ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_2_reg,18 ,18 , &readval);   // for KTC general settting 
				if(readval==0)
				{
	                 WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); //logo protect	Tulia for KTC always close  dehalo logo protect 
				}
			}
        }
        else
        {
		/*WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6,bg_useless_fix_bg_th_init);//198
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,posdiff_judge_divide_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,posdiff_judge_penalty_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,posdiff_judge_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,10,11,pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,26,30,pred_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_A_reg,26,30,pred_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,20,20,occl_correct_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,bg_extend_cov_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,bg_extend_cov_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,bg_extend_ucov_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,bg_extend_ucov_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_33_reg,2,2,pred_ver_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,16,16,pred_me1_diff_cut_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_9_reg,16,25,gmv_th_y2_init);          
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,bg_extend_cond3_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,occl_filter_ucov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1F_reg,8,14,bg_extend_bg_sum_max_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,color_protect_th0_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,color_protect_th1_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,color_protect_th1_min_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,occl_filter_cov_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,10,13,extend_correct_cut_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,0,7,judge_max_th0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,8,15,judge_max_th1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,6,6,fg_protect_by_apl_en_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,14,14,old_pred_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,pred_old_diff_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,bad_pred_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,bad_old_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,bg_change_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_37_reg,6,6,pred_bad_cut_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,gmv_th_y0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15, bg_extend_cond4_en_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,0,6, useless_max_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, extend_mvdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25, extend_posdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30, extend_flag_num_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_F_reg,16,25, clear_y0_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,0,9, clear_y1_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_11_reg,16,25, clear_y2_init); 
		WriteRegister(KME_DEHALO5_PHMV_FIX_10_reg,24,31, clear_posdiff_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,25,30, pfv_bg_change_th_init);
		WriteRegister(KME_DEHALO5_PHMV_FIX_36_reg,10,15, ppfv_bg_change_th_init);*/
		//  WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0); // reg_dh_postflt_bypass
        }

	/*
        ReadRegister(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg,12,23,&unconf_val1);
        ReadRegister(KME_ME1_TOP2_KME_ME1_TOP2_BC_reg,0,11,&unconf_val2);
        rtd_pr_memc_info("grp1=%d grp0=%d\n",unconf_val1,unconf_val2);

        for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
           {
               ReadRegister(KME_ME1_TOP7_ME1_STATIS_SAD_01_reg+4*rgnIdx ,0,24,&u32_RB_val);   
               SAD_rgn[rgnIdx] = u32_RB_val ;

           }
       for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
           {  
               sum_sad+=SAD_rgn[rgnIdx];
           } 
       avr_sad=sum_sad/32;

        
	rtd_pr_memc_info("sad=%d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d %d avr=%d\n",SAD_rgn[0],SAD_rgn[1],SAD_rgn[2],SAD_rgn[3],SAD_rgn[4],SAD_rgn[5],SAD_rgn[6],SAD_rgn[7],SAD_rgn[8],SAD_rgn[9],SAD_rgn[10],SAD_rgn[11],SAD_rgn[12],SAD_rgn[13],SAD_rgn[14],SAD_rgn[15],SAD_rgn[16],SAD_rgn[17],SAD_rgn[18],SAD_rgn[19],SAD_rgn[20],SAD_rgn[21],SAD_rgn[22],SAD_rgn[23],SAD_rgn[24],SAD_rgn[25],SAD_rgn[26],SAD_rgn[27],SAD_rgn[28],SAD_rgn[29],SAD_rgn[30],SAD_rgn[31],avr_sad);

	*/


	/*
		if(pParam->u1_me1_dehalo_Newalgo_print==1)
		{
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_divide_en==1)
			{
			    //rtd_pr_memc_info("dh_condition_divide_en");
			    rtd_pr_memc_info("dh_1");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_virtical==1)
			{
			   // rtd_pr_memc_info("dh_condition_virtical");
			   rtd_pr_memc_info("dh_2");
			} 			
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_large_mv_th_y2==1)
			{
			//	rtd_pr_memc_info("dh_condition_large_mv_th_y2");
			rtd_pr_memc_info("dh_3");
		    }
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_small_mv_th_y0==1)
			{
			//	rtd_pr_memc_info("dh_condition_small_mv_th_y0");
			rtd_pr_memc_info("dh_4");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_black_protect_off==1)
			{
			//	rtd_pr_memc_info("dh_condition_black_protect_off");
			rtd_pr_memc_info("dh_5");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_correct_cut_th==1)
			{
				//rtd_pr_memc_info("dh_condition_correct_cut_th");
				rtd_pr_memc_info("dh_6");
			}
			if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_aplfix_en==1)
			{
			  //  rtd_pr_memc_info("dh_condition_aplfix_en");
			  rtd_pr_memc_info("dh_7");
			}
		    if(s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_white_protect_on==1)
			{
			//	rtd_pr_memc_info("dh_condition_white_protect_on\n");
			rtd_pr_memc_info("dh_8\n");
			}
	   }
	   */
	}
} 	

VOID MEMC_dehalo_newalgo_bgmaskBase_WrtAction_addT(const _PARAM_WRT_COM_REG *pParam,_OUTPUT_WRT_COM_REG *pOutput)
{
    const _PQLCONTEXT *s_pContext = GetPQLContext();
    int flag_IDT=0;
    static int v_IDT;
    //T add
    int flag_CGF=0,flag_Aeon=0,flag_skating=0,flag_filmj=0,flag_fof=0,flag_Flyingdagger=0,flag_FILM_JUDDER30s=0,flag_closer=0,flag_crown=0,flag_boys=0;
    static int v_CGF,v_Aeon,v_skating,v_skating_test,v_filmj,v_fof,v_Flyingdagger,v_FILM_JUDDER30s,v_closer,video_me1prooff=0,v_flag_crown=0,v_flag_boys = 0;
    int srmvx,srmvy,u11_gmv_mvx,u10_gmv_mvy;
    int rgnIdx,rmvx[32]={0},rmvy[32]={0};
    int readval23=0,saddataen=0,mvcor_on=0,mvcor_off = 0,me1s2prooff=0;
    for(rgnIdx =0 ; rgnIdx< 32; rgnIdx++)
    {

    rmvx[rgnIdx] =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[rgnIdx]	;
    rmvy[rgnIdx] =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[rgnIdx]	;		 
    }
    
    u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
    u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;

//gongban T add 
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,29,29, &flag_IDT);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,28,28, &flag_CGF);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,27,27, &flag_Aeon);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,26,26, &flag_skating);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,25,25, &flag_filmj);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,24,24, &flag_fof);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,23,23, &flag_Flyingdagger);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,22,22, &flag_FILM_JUDDER30s);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,21,21, &flag_closer);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,20,20, &flag_crown);
    ReadRegister(SOFTWARE3_SOFTWARE3_29_reg,19,19, &flag_boys);

	
    ReadRegister(KME_ME1_BG1_ME_BG_DUMMY_0_reg,21,21, &v_skating_test);
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,23 , 23 , &readval23);//d964
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,22 , 22 , &saddataen);//d964
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,21 , 21 , &mvcor_on);//d964 mvcov on
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,20 , 20 , &mvcor_off);//d964 mvcov off
    ReadRegister(SOFTWARE3_SOFTWARE3_25_reg,19 , 19 , &me1s2prooff);//d964 me1s2prooff

if(readval23==0)
{

    if(flag_CGF)
    {
        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
        WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  
		
        WriteRegister(0xb809ee28,30,30,1);
        WriteRegister(0xb809ee28,31,31,1);
        WriteRegister(0xb809ee2c,12,21,400);
        WriteRegister(0xb809ee2c,22,31,800);
        WriteRegister(0xb809ee2c,2,11,800);
        WriteRegister(0xb809efa4,20,29,400);
        WriteRegister(0xb809efa4,10,19,800);
        WriteRegister(0xb809efa4,0,9,800);

        WriteRegister(0xb809eb78,0,6,4);
        WriteRegister(0xb809eb78,8,14,20);
        WriteRegister(0xb809eb78,16,22,4);
        WriteRegister(0xb809eb78,24,30,20);
        WriteRegister(0xb809eb70,8,14,25);
        WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x3ff);
        WriteRegister(0xb809ebac,4,13,400);


        WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut

        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
        //WriteRegister(0xb809d7c4, 31, 31, 0);
       // WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0x1);
       // WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,	0x1);
       // WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,    0x1);
       // WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,	  0x1);
        //varlpf
        WriteRegister(MC2_MC2_68_reg,18,19,2);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26, 0x0);  //skin protect
        v_CGF = 1;

        WriteRegister(0xb809eb10,0,4,4);
        WriteRegister(0xb809eb10,8,12,4);
        WriteRegister(0xb809cef4,1,2,2);//occlpred_diff_th_gain
        //WriteRegister(0xb809ce60,0,1,1);//occl_extend_mode


        
    }
    else if(v_CGF==1)
    {
        WriteRegister(0xb809eb78,0,6,12);
        WriteRegister(0xb809eb78,8,14,5);
        WriteRegister(0xb809eb78,16,22,12);
        WriteRegister(0xb809eb78,24,30,5);
        WriteRegister(0xb809eb70,8,14,37);
        WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
        WriteRegister(0xb809ebac,4,13,700);

        WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
        WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     

        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,0x12c);	//large
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,0x78);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,0x190);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,0x78);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,0x12c);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,0x190);

        WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
        //WriteRegister(0xb809ebd8,23,23,0);
        //WriteRegister(0xb809cd10,0,0,1);		
        //WriteRegister(0xb809d7c4, 31, 31, 1);
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
        //WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0);
        //WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,    0);
        //WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,	  0);
        //WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,	 0);
        WriteRegister(MC2_MC2_68_reg,18,19,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26, 0x1);  //skin protect
        v_CGF = 0;
        WriteRegister(0xb809eb10,0,4,4);
        WriteRegister(0xb809eb10,8,12,4);
        WriteRegister(0xb809cef4,1,2,1);//occlpred_diff_th_gain
        //WriteRegister(0xb809ce60,0,1,3);//occl_extend_mode

    }
    
	//if(flag_skating && v_skating_test)
	if(flag_skating)
	{
 
   	WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);//dh on
   	//lrl
   	WriteRegister(0xb809c528,8,17,16); //me1_mvd_dgain_y1
   	WriteRegister(0xb809c528,18,27,16);//me1_mvd_dgain_y2
   	WriteRegister(0xb809ed10,18,18,0);//me1_undo_mask_en
	WriteRegister(0xb809c488,6,6,0);//me1_post_pfv_en
	WriteRegister(0xb809b300,0,0,1);//me1_gmv_sel
	WriteRegister(0xb809c42c,0,12,0);//me1_ip_cddpnt_gmv
	WriteRegister(0xb809c46c,0,12,0);//me1_pi_cddpnt_gmv
	
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,1,1,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,4,4,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,6,6,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,7,7,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,8,8,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,9,9,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,10,10,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,14,14,0x0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,16,16,0x0);
	//WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg, 0, 12, 0);

	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 0, 0, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 5, 5, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 6, 6, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 7, 7, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 8, 8, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 9, 9, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 13, 13, 0);
	WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 0);
	
//ed
	 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, (rmvx[13]+rmvx[21]+1)>>1);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0);

	 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
	 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, (rmvx[13]+rmvx[21]+1)>>1);
	 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0);
	 WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

	 WriteRegister(0xb809ef8c,24,24,1);         
	WriteRegister(0xb809ef88,8,15,220);        
	WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);  //bg_mv_rep_range_max_y_1        
	WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);        
	WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);        
	WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);        
	WriteRegister(0xb809ee28,30,30,1);        
	WriteRegister(0xb809ee28,31,31,1); 
	WriteRegister(0xb809ee34,27,27,1);
	//WriteRegister(0xb809ee40,31,31,1);//pfv cor en
	
	 //me1 s2_apl_protect.	
	 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0);

	 //dh_color_protect
	 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);

        WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut

        WriteRegister(0xb809cef4,1,2,2);//occlpred_diff_th_gain
        WriteRegister(0xb809b254,18,18,0);//logo enable

        v_skating= 1;

	
    }
    else if(v_skating==1)
    {

	 WriteRegister(0xb809c488,6,6,1);//me1_post_pfv_en

	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,1,1,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,4,4,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,6,6,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,7,7,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,8,8,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,9,9,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,10,10,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,14,14,0x1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,16,16,0x1);
	 //WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg, 0, 12, 0);

	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 0, 0, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 5, 5, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 6, 6, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 7, 7, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 8, 8, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 9, 9, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 13, 13, 1);
	 WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 1);
	 
         WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);

	 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);  //gmv_bg_en
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
        WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,u10_gmv_mvy);

        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
        WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
	 WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1);

	 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);

	    //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 16, 19, 1);
        WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
        //WriteRegister(0xb809ebd8,23,23,0);
        //WriteRegister(0xb809cd10,0,0,1);		
        WriteRegister(0xb809d7c4, 31, 31, 1);
        WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0); 
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
        WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0);
        WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,    0);
        WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,	  0);
        WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,	 0);
        WriteRegister(0xb809cef4,1,2,1);//occlpred_diff_th_gain
        WriteRegister(0xb809b254,18,18,1);//logo enable
        v_skating = 0;
    }

    if(flag_Aeon)
    {
	 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);  //bg_mv_rep_range_max_y_1
	 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
	 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
	 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
	 WriteRegister(0xb809ee38,10,20,-40);
 
	 WriteRegister(0xb809ee28,30,30,1);
	 WriteRegister(0xb809ee28,31,31,1);
	 WriteRegister(0xb809ee2c,12,21,400);
	 WriteRegister(0xb809ee2c,22,31,800);
	 WriteRegister(0xb809ee2c,2,11,800);
	 WriteRegister(0xb809efa4,20,29,400);
	 WriteRegister(0xb809efa4,10,19,800);
	 WriteRegister(0xb809efa4,0,9,800);
 
	 WriteRegister(0xb809eb00,13,13,0);
 
	 WriteRegister(0xb809eb14,15,15,0);
	 WriteRegister(0xb809eb18,7,7,0);
 
	 WriteRegister(0xb809eb18,6,6,0);
 
	 WriteRegister(0xb809ebe0,16,16,0);
	 WriteRegister(0xb809ebe4,0,0,0);
	 WriteRegister(0xb809ebe4,6,6,0);
	 WriteRegister(0xb809ebd8,18,18,0);
	 WriteRegister(0xb809ebd8,24,24,0);
 
	 WriteRegister(0xb809eb8c,16,16,0);
	 WriteRegister(0xb809eb20,0,9,40);
	 WriteRegister(0xb809eb24,0,9,55);
		   
	 WriteRegister(0xb809eb10,8,12,4);
	 WriteRegister(0xb809eb70,0,6,87);
	 WriteRegister(0xb809eb70,8,14,28);
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26, 0x0);  //skin protect
        v_Aeon= 1;
    }
    else if(v_Aeon)
    {
        WriteRegister(0xb809ee28,30,30,1);
        WriteRegister(0xb809ee28,31,31,1);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,22,31,0x12c);	//large
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,12,21,0x78);
        WriteRegister(KME_ME1_BG0_ME1_BG_12_reg,2,11,0x190);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,20,29,0x78);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,10,19,0x12c);
        WriteRegister(KME_ME1_BG1_ME_BG_S3_0_reg,0,9,0x190);

        WriteRegister(0xb809eb00,13,13,1);

        WriteRegister(0xb809eb14,15,15,1);
        WriteRegister(0xb809eb18,7,7,1);

        WriteRegister(0xb809eb18,6,6,1);

        WriteRegister(0xb809ebe0,16,16,1);
        WriteRegister(0xb809ebe4,0,0,1);
        WriteRegister(0xb809ebe4,6,6,1);
        WriteRegister(0xb809ebd8,18,18,1);
        WriteRegister(0xb809ebd8,24,24,1);

        WriteRegister(0xb809eb8c,16,16,1);
        WriteRegister(0xb809eb20,0,9,10);
        WriteRegister(0xb809eb24,0,9,48);

        WriteRegister(0xb809eb10,8,12,4);
        WriteRegister(0xb809eb70,8,14,37);
        WriteRegister(0xb809eb70,0,6,84);
        WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
        WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,26,26, 0x1);  //skin protect
        v_Aeon = 0;
    }



    

	
	srmvx =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[2]	;
	srmvy =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[2]	;		 
	if(flag_filmj)
	{
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,0x19); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,0x19); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,0x19); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,0x1e);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0); 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef); 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0); 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 1);	
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,srmvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, srmvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28,srmvy);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

            WriteRegister(0xb809eb78,0,6,8);
            WriteRegister(0xb809eb78,8,14,8);
            WriteRegister(0xb809eb78,16,22,8);
            WriteRegister(0xb809eb78,24,30,8);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,2);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,2);
            WriteRegister(0xb809ebac,4,13,400);
		
		v_filmj = 1;
	}
	else if(v_filmj)
	{
            v_filmj = 0;
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,20); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,25);
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 1);	
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0x1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,1);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);	//gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
            WriteRegister(0xb809eb78,0,6,12);
            WriteRegister(0xb809eb78,8,14,5);
            WriteRegister(0xb809eb78,16,22,12);
            WriteRegister(0xb809eb78,24,30,5);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,4);
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);
            WriteRegister(0xb809ebac,4,13,700);

	}


	if(flag_fof)
	{
  		//me1

            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x0);

            //DEhalo

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);  //bg_mv_rep_range_max_y_1
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);				
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,60);
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,60); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,60); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,65);
            v_fof = 1;
	}
	else if(v_fof)
	{
            v_fof = 0;
            //me1

            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0,0x1);

            //DEhalo

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,20); 
            WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,20); 
            WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,25);

	}



	srmvx =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[15];
	srmvy =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[15];		 
	if(flag_Flyingdagger)
	{
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,-70);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18,-70);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28,0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);  //bg_mv_rep_range_max_y_1
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
		v_Flyingdagger = 1;
	}
	else if(v_Flyingdagger)
	{
            v_Flyingdagger = 0;
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);	//gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en

	}

	srmvx =	  s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[14];
	srmvy =	  s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[14];		 
	if(flag_FILM_JUDDER30s)
	{
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,srmvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, srmvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28,srmvy);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 0);  //gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,135);  //bg_mv_rep_range_max_y_1
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,240);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0, 0x0);	//me1 black protect
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);  //me1 black protect en 	
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_dis                
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_dis 
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0);

            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut
            WriteRegister(0xB809ebe0,16,16,0);

            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);

            WriteRegister(SOFTWARE3_SOFTWARE3_63_reg,0,0,1);
            WriteRegister(SOFTWARE3_SOFTWARE3_63_reg,1,2,2);


            v_FILM_JUDDER30s = 1;
	}
	else if(v_FILM_JUDDER30s==1)
	{
            v_FILM_JUDDER30s = 0;
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,u11_gmv_mvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18, u11_gmv_mvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31, 1);	//gmv_bg_en
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg,0,0, 0x1);	//me1 black protect
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);  //me1 black protect en 	
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1); //bg_s3_ucov_data_dis                
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1); //bg_s3_cov_data_dis 
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);

            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
            WriteRegister(0xB809ebe0,16,16,1);
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);
     	     WriteRegister(SOFTWARE3_SOFTWARE3_63_reg,0,0,0);
            WriteRegister(SOFTWARE3_SOFTWARE3_63_reg,1,2,0);

	}

//last golf

    if(flag_IDT)
     {
		 WriteRegister(0xb8099768, 18, 19,0x1);
		 WriteRegister(MC2_MC2_50_reg,0,1,0x0);
		 WriteRegister(HARDWARE_HARDWARE_24_reg , 19, 28, 0);
		 WriteRegister(HARDWARE_HARDWARE_24_reg , 31, 31, 0); 
		
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31,0x1);// 0xb809EE38
		 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 10, 20,0x0);
		 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 21, 30,0x0);
		
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,  8, 15,240);// 0xb809EF3C 
		 WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg, 24, 31,135);
		 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,  0,  9,3);//	 0xb809EFA8
		 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg, 10, 19,3);
		 WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg, 20, 29,8);
		 WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,  0,  7,3);//	 0xb809EE34
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x0);  //s1_clr_prot_en
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,1); //bg_s1_num_yth2
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x1); //bg_s1_num_yth1
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa); //bg_s1_xth2
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2); //bg_s1_xth1
		 WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x1);  //bg_s1_slope
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x0); //s2_clr_prot_en			   
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x1);	 //bg_s2_num_yth2
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0x1); //bg_s2_num_yth1
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc); //bg_s2_xth2
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2); //bg_s2_xth1
		 WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x1); //bg_s2_slope
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,0x1);//	 0xb809EE28
		 WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,0x1);//
		 WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,0x0);//0xb809EE30
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,4); //bg_s3_dubt_cov_num_yth2_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,1); // bg_s3_dubt_cov_num_yth1_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,3);   //bg_s3_dubt_cov_shift_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,2); //bg_s3_dubt_cov_slope_init
		
		 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21, 1); //bg_s3_dubt_ucov_yth1_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14, 4); //bg_s3_dubt_ucov_yth2_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,  3); //bg_s3_dubt_ucov_shift_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,  2); // bg_s3_dubt_ucov_slope_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,0);  //fg_hold_en_init
		 WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,0,4,25);	 //fg_hold_th
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x1);
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg, 16, 25,   0x2  );//0xb809EB94
		 WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg, 0, 11,	0x32 );//0xb809EB0C
		 WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg, 24, 24,    0x1);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg, 4,  4,	0x1);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg, 16, 25,   0x3ff);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 0, 6,	0x5   );
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 8, 14,	 0xc	);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 16, 22,   0x5	);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg, 24, 30,   0xc	);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg, 4, 13,	 0x32  );
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg, 15, 15,	 0x0	  );
		 WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 7,  7,	0x0 	);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 6,  6,	0x0 	 );
		 WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg, 0,	0,	 0x0	 );
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 16, 21,	 0xa);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg, 24, 29,	  0xa);
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 16, 16,  0x1);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 0, 7,	0x0);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 8, 15,	0x50);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg, 17, 17,  0x1);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 16, 23,  0x82);
		 WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg, 24, 31,  0xff);
		
		   //WriteRegister(0xb809d7c4, 31, 31, 0);//mark
		 WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 24, 26,  0x2);//7
		 WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 16, 18,	0x2);//7
		 WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 9, 11,    0x2);//7
		 WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg, 2, 4,	  0x2);//7
		
		 WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15); 
		 WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8, 30); // Dehalo rim.
		 WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,9,17, 270);

 
		 WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,0);
		 //WriteRegister(KME_DEHALO_KME_DEHALO_E4_reg,9,17,210);
        v_IDT = 1;
    }
    else if(v_IDT)
    {
		WriteRegister(HARDWARE_HARDWARE_24_reg , 19, 28, 0x3FF);
		WriteRegister(HARDWARE_HARDWARE_24_reg , 31, 31, 1); 
		WriteRegister(0xb8099768, 18, 19,0x2);
		  //WriteRegister(0xb809d564, 15, 15,0x0);
		  //WriteRegister(0xb8099750, 0, 1,0x3);
		  WriteRegister(MC2_MC2_50_reg,0,1,0x1);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,31,31,0);
		  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20,0);
		  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30,0);
		  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,8,15,0);
		  WriteRegister(KME_ME1_BG1_ME_BG_RANGE_2_reg,24,31,0);
		  WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,0,9,12);
		  WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,10,19,12);
		  WriteRegister(KME_ME1_BG1_ME_BG_TH0_reg,20,29,25);
		  WriteRegister(KME_ME1_BG0_ME1_BG_14_reg,0,7,12);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,0,0,0x1);	//s1_clr_prot_en
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,8,12,0x10);
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,13,17,0x4);
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,18,22,0xa);
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,23,27,0x2);
		  WriteRegister(KME_ME1_BG0_ME1_BG_1_reg,28,31,0x3);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,0,0,0x1); //s2_clr_prot_en
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,8,12,0x14);
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,13,17,0xa);
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,18,22,0xc);
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,23,27,0x2);
		  WriteRegister(KME_ME1_BG0_ME1_BG_2_reg,28,31,0x3);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30,1);
		  WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31,1);
		  WriteRegister(KME_ME1_BG0_ME1_BG_13_reg,26,26,1);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,15,21,0xa);
		  WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,8,14,0x22);
		  WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,4,7,0x1);
		  WriteRegister(KME_ME1_BG0_ME1_BG_5_reg,0,3,0x2);
		
		  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,15,21,0x8);
		  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,8,14,0x1e);
		  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,4,7,0x1);
		  WriteRegister(KME_ME1_BG0_ME1_BG_6_reg,0,3,0x3);
		  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,5,5,0x0);   //fg_hold_en
		  WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,0,4,0x19);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0x0);//white protect
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_25_reg,16,25,0x14);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_3_reg,0,11,0x384);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_29_reg,24,24,0);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_2_reg,4,4,0);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,0,6,12);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,8,14,5);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,16,22,12);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_1E_reg,24,30,5);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_2A_reg,4,13,0x2bc);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,24,29,0x28);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,16,21,0x14);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,1);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,0,7,0);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,8,15,0x22);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,17,17,0);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,16,23,150);
		  WriteRegister(KME_DEHALO5_PHMV_FIX_21_reg,24,31,255);
		  //WriteRegister(SOFTWARE1_SOFTWARE1_49_reg,31,31,1);
		  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26,0);
		  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,0);
		  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11,0);
		  WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,0);
		
		  WriteRegister(KME_DEHALO5_PHMV_FIX_8_reg,0,9,0x15);
		  //WriteRegister(0xb809d7c4, 31, 31, 0);//mark
		  //WriteRegister(KME_DEHALO_KME_DEHALO_E4_reg,9,17,269);
		  WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,0,8, 0); // Dehalo rim.
		  WriteRegister(KME_DEHALO_KME_DEHALO_E0_reg,9,17, 479);

		  WriteRegister(KME_DEHALO5_PHMV_FIX_0_reg,13,13,1);
                v_IDT = 0;
    }

	srmvx = (_ABS_(rmvx[0])>_ABS_(rmvx[7]))?rmvx[0]:rmvx[7];
	if(flag_closer)
	{
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 0);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, srmvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, 0);

            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 1);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18,srmvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, 0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 1);//gmv_sel_en

            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  


            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);//dh on
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0); 
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,0);//dh_pred_bg_change_cond_en
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut

		
		v_closer = 1;
	}
	else if(v_closer==1)
	{
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg, 31, 31, 1);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,10,20, u11_gmv_mvx);
            WriteRegister(KME_ME1_BG0_ME1_BG_15_reg,21,30, u10_gmv_mvy);

            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,0,0, 0);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,8,18,u11_gmv_mvx);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg,19,28, u10_gmv_mvy);
            WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0, 0);//gmv_sel_en
            v_closer = 0;
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);//dh on
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1); 
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,24,24,1);//dh_pred_bg_change_cond_en
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut


	}



    if(flag_crown == 1)
    {
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);       
	    WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x1);//force bg en
	    WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,25,25,0x1);//force bg edge en
            WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,15);
            WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,30);
            WriteRegister(KME_ME1_BG1_ME_BG_S4_5_reg,12,16,14);//force bg fgcnt th
            WriteRegister(KME_ME1_BG1_ME_BG_S4_5_reg,1,10,300);        //force bg sad th 
            
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x0);
            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);//reg_dh_bypass 
            v_flag_crown = 1;

    }
    else if(v_flag_crown==1)
    {
            WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);       
            WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,24,24,0x0);//force bg en
            WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,8,15,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_S4_3_reg,0,7,0xff);
            WriteRegister(KME_ME1_BG1_ME_BG_S4_4_reg,25,25,0x0);//force bg edge en
            WriteRegister(KME_ME1_BG1_ME_BG_S4_5_reg,12,16,0x1f);
            WriteRegister(KME_ME1_BG1_ME_BG_S4_5_reg,1,10,0x3ff);

            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,16,16,0x1);
    
            v_flag_crown = 0;

    }


    if(flag_boys)
    {
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
            WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
            WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  

            WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0x0);//reg_dh_bypass 
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
            WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en
      
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30,127);//flag_num
            WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,1023);//posdiff_th
      
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,4);//cov cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);//ucov cut
      
            WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,0);//pred_old_diff_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,0);//bad_pred_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,0);//bad_old_cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,0);//cov/ucov sim cut
            WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x14);

            
            v_flag_boys = 1;
    }
    else if(v_flag_boys==1)
    {

        WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,15,15,0x1); // extend cond4
        WriteRegister(KME_DEHALO5_PHMV_FIX_1_reg,14,14,0x1);//reg_dh_bg_extend_cond3_en
        WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,24,30,0x57);
        WriteRegister(KME_DEHALO5_PHMV_FIX_1D_reg,16,25,0x12c);
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,0,4,4);//cov cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_4_reg,8,12,4);//ucov cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_5_reg,15,15,1);//pred_old_diff_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,7,7,1);//bad_pred_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_6_reg,6,6,1);//bad_old_cut
        WriteRegister(KME_DEHALO5_PHMV_FIX_38_reg,0,0,1);//cov/ucov sim cut
        v_flag_boys = 0;
         WriteRegister(KME_DEHALO5_PHMV_FIX_1C_reg,16,23, 0x0);
   }




        if(saddataen)
        {
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,31,31, 0x1);  //bg_s3_cov_data_en     
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,30,30, 0x1);  //bg_s3_ucov_data_en     
        }
        if(mvcor_on)
        {
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0xef);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x86);  
        }
        if(mvcor_off)
        {
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,0,7,0x0);   //full range 
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,8,15,0x0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,16,23,0x0);
                WriteRegister(KME_ME1_BG1_ME_BG_RANGE_1_reg,24,31,0x0);  
        }
        if(me1s2prooff)
        {
                WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 0);         
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x0);
                video_me1prooff = 1;
        }
        else if(video_me1prooff==1)
        {
                video_me1prooff = 0;
                WriteRegister(KME_ME1_BG0_ME1_BG_3_reg, 0, 0, 1);         
                WriteRegister(KME_ME1_BG0_ME1_BG_11_reg,0,0, 0x1);
        }




}

}


VOID dhLogoProc_BypassLvlCtrl(unsigned char case_level)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	unsigned int dh_logo_bypass[15][5] =
	{
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
		{0x7,0x7,0x7,0x7,0x1},
	};

	if(case_level ==0 || case_level ==255)
	{
		dh_logo_bypass[0][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[0][0];
		dh_logo_bypass[0][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[0][1];
		dh_logo_bypass[0][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[0][2];
		dh_logo_bypass[0][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[0][3];
		dh_logo_bypass[0][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[0][4];

		dh_logo_bypass[1][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][0];
		dh_logo_bypass[1][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][1];
		dh_logo_bypass[1][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][2];
		dh_logo_bypass[1][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][3];
		dh_logo_bypass[1][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][4];

		dh_logo_bypass[2][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[2][0];
		dh_logo_bypass[2][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[2][1];
		dh_logo_bypass[2][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[2][2];
		dh_logo_bypass[2][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[2][3];
		dh_logo_bypass[2][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[2][4];

		dh_logo_bypass[3][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[3][0];
		dh_logo_bypass[3][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[3][1];
		dh_logo_bypass[3][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[3][2];
		dh_logo_bypass[3][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[3][3];
		dh_logo_bypass[3][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[3][4];

		dh_logo_bypass[4][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[4][0];
		dh_logo_bypass[4][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[4][1];
		dh_logo_bypass[4][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[4][2];
		dh_logo_bypass[4][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[4][3];
		dh_logo_bypass[4][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[4][4];

		dh_logo_bypass[5][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[5][0];
		dh_logo_bypass[5][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[5][1];
		dh_logo_bypass[5][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[5][2];
		dh_logo_bypass[5][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[5][3];
		dh_logo_bypass[5][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[5][4];

		dh_logo_bypass[6][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[6][0];
		dh_logo_bypass[6][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[6][1];
		dh_logo_bypass[6][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[6][2];
		dh_logo_bypass[6][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[6][3];
		dh_logo_bypass[6][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[6][4];

		dh_logo_bypass[7][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[7][0];
		dh_logo_bypass[7][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[7][1];
		dh_logo_bypass[7][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[7][2];
		dh_logo_bypass[7][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[7][3];
		dh_logo_bypass[7][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[7][4];

		dh_logo_bypass[8][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[8][0];
		dh_logo_bypass[8][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[8][1];
		dh_logo_bypass[8][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[8][2];
		dh_logo_bypass[8][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[8][3];
		dh_logo_bypass[8][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[8][4];

		dh_logo_bypass[9][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[9][0];
		dh_logo_bypass[9][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[9][1];
		dh_logo_bypass[9][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[9][2];
		dh_logo_bypass[9][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[9][3];
		dh_logo_bypass[9][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[9][4];

		dh_logo_bypass[10][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[10][0];
		dh_logo_bypass[10][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[10][1];
		dh_logo_bypass[10][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[10][2];
		dh_logo_bypass[10][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[10][3];
		dh_logo_bypass[10][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[10][4];

		dh_logo_bypass[11][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][0];
		dh_logo_bypass[11][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][1];
		dh_logo_bypass[11][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][2];
		dh_logo_bypass[11][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][3];
		dh_logo_bypass[11][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][4];

		dh_logo_bypass[12][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][0];
		dh_logo_bypass[12][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][1];
		dh_logo_bypass[12][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][2];
		dh_logo_bypass[12][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][3];
		dh_logo_bypass[12][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][4];

		dh_logo_bypass[13][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][0];
		dh_logo_bypass[13][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][1];
		dh_logo_bypass[13][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][2];
		dh_logo_bypass[13][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][3];
		dh_logo_bypass[13][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][4];

		dh_logo_bypass[14][0] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[14][0];
		dh_logo_bypass[14][1] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[14][1];
		dh_logo_bypass[14][2] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[14][2];
		dh_logo_bypass[14][3] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[14][3];
		dh_logo_bypass[14][4] = s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[1][4];
	}

	WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 0, 2, dh_logo_bypass[0][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 4, 6, dh_logo_bypass[0][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 12, 14, dh_logo_bypass[0][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 8, 10, dh_logo_bypass[0][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 15, 15, dh_logo_bypass[0][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 1, 3, dh_logo_bypass[0][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 4, 6, dh_logo_bypass[0][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 10, 12, dh_logo_bypass[0][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 7, 9, dh_logo_bypass[0][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 0, 0, dh_logo_bypass[0][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 0, 2, dh_logo_bypass[2][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 3, 5, dh_logo_bypass[2][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 9, 11, dh_logo_bypass[2][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 6, 8, dh_logo_bypass[2][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 12, 12, dh_logo_bypass[2][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 0, 2, dh_logo_bypass[3][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 3, 5, dh_logo_bypass[3][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 9, 11, dh_logo_bypass[3][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 6, 8, dh_logo_bypass[3][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 12, 12, dh_logo_bypass[3][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 16, 18, dh_logo_bypass[4][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 19, 21, dh_logo_bypass[4][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 25, 27, dh_logo_bypass[4][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 22, 24, dh_logo_bypass[4][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 28, 28, dh_logo_bypass[4][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 0, 2, dh_logo_bypass[5][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 3, 5, dh_logo_bypass[5][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 9, 11, dh_logo_bypass[5][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 6, 8, dh_logo_bypass[5][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 12, 12, dh_logo_bypass[5][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 16, 18, dh_logo_bypass[6][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 19, 21, dh_logo_bypass[6][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 25, 27, dh_logo_bypass[6][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 22, 24, dh_logo_bypass[6][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 28, 28, dh_logo_bypass[6][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 0, 2, dh_logo_bypass[7][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 3, 5, dh_logo_bypass[7][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 9, 11, dh_logo_bypass[7][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 6, 8, dh_logo_bypass[7][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 12, 12, dh_logo_bypass[7][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 16, 18, dh_logo_bypass[8][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 19, 21, dh_logo_bypass[8][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 25, 27, dh_logo_bypass[8][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 22, 24, dh_logo_bypass[8][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 28, 28, dh_logo_bypass[8][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 0, 2, dh_logo_bypass[9][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 3, 5, dh_logo_bypass[9][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 9, 11, dh_logo_bypass[9][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 6, 8, dh_logo_bypass[9][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 12, 12, dh_logo_bypass[9][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 16, 18, dh_logo_bypass[10][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 19, 21, dh_logo_bypass[10][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 25, 27, dh_logo_bypass[10][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 22, 24, dh_logo_bypass[10][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 28, 28, dh_logo_bypass[10][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 0, 2, dh_logo_bypass[11][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 3, 5, dh_logo_bypass[11][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 9, 11, dh_logo_bypass[11][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 6, 8, dh_logo_bypass[11][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 12, 12, dh_logo_bypass[11][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 16, 18, dh_logo_bypass[12][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 19, 21, dh_logo_bypass[12][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 25, 27, dh_logo_bypass[12][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 22, 24, dh_logo_bypass[12][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 28, 28, dh_logo_bypass[12][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 0, 2, dh_logo_bypass[13][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 3, 5, dh_logo_bypass[13][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 9, 11, dh_logo_bypass[13][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 6, 8, dh_logo_bypass[13][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 12, 12, dh_logo_bypass[13][4]);

	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 16, 18, dh_logo_bypass[14][0]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 19, 21, dh_logo_bypass[14][1]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 25, 27, dh_logo_bypass[14][2]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 22, 24, dh_logo_bypass[14][3]);
	WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 28, 28, dh_logo_bypass[14][4]);

}


VOID logoDetect_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	PQL_OUTPUT_RESOLUTION output_Resolution = s_pContext->_external_data._output_resolution;
	
	static unsigned char u1_pre_dh_logo_bypass_en = 0;
	static unsigned char u1_pre_logo_HaloEnahce_en = 0;
	static unsigned char u1_pre_logo_DynOBME_en = 0;
	unsigned char case_level = 255; /* 255->load defaule */
	unsigned int fast_motion_algo_en, still_logo_det_en = 0;
	unsigned char dynamic_tunning_case1 = 0, dynamic_tunning_case2 = 0, dynamic_tunning_case3 = 0;
	static unsigned char dynamic_tunning_case1_pre = 255, dynamic_tunning_case2_pre = 255, dynamic_tunning_case3_pre = 255;
	// HS merlin7
		unsigned int u32_RB_val;
	// HS merlin7
		ReadRegister(SOFTWARE3_SOFTWARE3_28_reg, 31, 31, &fast_motion_algo_en);
		ReadRegister(SOFTWARE2_SOFTWARE2_48_reg, 31, 31, &still_logo_det_en);

	ReadRegister(SOFTWARE3_SOFTWARE3_28_reg, 31, 31, &fast_motion_algo_en);

	pOutput->u1_LG_mb_wrt_en = 0;

	if(pParam->u1_logoCtrl_wrt_en == 0)
		return;

	// dehal logo process related
	if(u1_pre_dh_logo_bypass_en == 0 && pParam->u1_dh_logo_bypass_en == 1)
	{
		case_level = 1;
		dhLogoProc_BypassLvlCtrl(case_level);
		u1_pre_dh_logo_bypass_en = 1;
	}

	if(u1_pre_dh_logo_bypass_en == 1 && pParam->u1_dh_logo_bypass_en == 0)
	{
		case_level = 0;
		dhLogoProc_BypassLvlCtrl(case_level);
		u1_pre_dh_logo_bypass_en = 0;
	}
#if 1
if(still_logo_det_en == 0){
	ReadRegister(KME_DEHALO6_dh_logo_ctrl_func_en_tmv_mode_reg, 30, 30, &u32_RB_val); // bool_dh_logo_15rgn_ctrl_en
	if( u32_RB_val == 0 )	// 3 regions
	{
		if(pParam->u1_logo_dhRgnProc_en){

			// region 0 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // dh_logo_mv_d_diff_th_rg0
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 0 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][0]); // rgn0_mvd_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][0]); // rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg, 0, 7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[4][0]); // rgn0_tmv_mv_t_th
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 1 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, 128); // rgn0_mvd_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, ReadComReg_Calib_Data(35, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg, 0, 7, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn0_tmv_mv_t_th
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 2 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, 160); // rgn0_mvd_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg, 0, 7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn0_tmv_mv_t_th
			}
			else
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][0]); // rgn0_mvd_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][0]); // rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg, 0, 7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[4][0]); // rgn0_tmv_mv_t_th
			}

			// region 1 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_BG_still_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, 32); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn1_tmv_mv_t_th					
			}	
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 0 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][1]); // rgn1_mvd_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[3][1]); // rgn1_tmv_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[5][1]); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 0, 5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][1]); // rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[4][1]); // rgn1_tmv_mv_t_th
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 1 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, ReadComReg_Calib_Data(128, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false)); // rgn1_mvd_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, ReadComReg_Calib_Data(128, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false)); // rgn1_tmv_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, 51); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[5][1]); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 0, 5, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) ); // rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn1_tmv_mv_t_th
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 2 )
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, ReadComReg_Calib_Data(255, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false)); // rgn1_mvd_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, ReadComReg_Calib_Data(192, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false)); // rgn1_tmv_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, 17); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[5][1]); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 0, 5, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) ); // rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn1_tmv_mv_t_th
			}
			else
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][1]); // rgn1_mvd_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[3][1]); // rgn1_tmv_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[5][1]); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 0, 5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][1]); // rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[4][1]); // rgn1_tmv_mv_t_th
			}		


			// region 2 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 13, 18, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // rgn2_mvd_mv_d_diff_th
			}else{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 13, 18, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][2]); // rgn2_mvd_mv_d_diff_th
			}					
			
		}
		else
		{	
			// region 0 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // dh_logo_mv_d_diff_th_rg0
			}		
			else
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][0]); // rgn0_mvd_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][0]); // rgn0_mvd_mv_d_diff_th			
			}

			// region 1 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_BG_still_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, 32); // rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); // rgn1_tmv_mv_t_th					
			}	
			
			else
			{
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[0][1]); // rgn1_mvd_sad
				//WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[3][1]); // rgn1_tmv_sad
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[5][1]); // rgn1_tmv_num			
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 0, 7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[4][1]); // rgn1_tmv_mv_t_th
			}		

			// region 2 control
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 13, 18, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); // rgn2_mvd_mv_d_diff_th
			}else{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 13, 18, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr[2][2]); // rgn2_mvd_mv_d_diff_th
			}		
			
		}
	}
	else if( u32_RB_val == 1 )	// 15 regions
	{
		if(pParam->u1_logo_dhRgnProc_en){



//========dynamic_tunning_case1================================================================= 		
			// region 0, 4, 10, 14 control (mapping to region 0 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1)
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));  // rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(15, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge
				dynamic_tunning_case1 = 1;
			}
			else if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status >= 5 && s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status <=7 )
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge

				if(s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 7){
					WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 0, 5, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4	
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4		
				}
				dynamic_tunning_case1 = 1;
				
			}
			else if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 10 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 2 )
			{
				//WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 16, 23, 80);	//tmv_num_rga				
				//WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg, 0, 7, 80);		//tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 0, 7, 80);		//tmv_num_rgd
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 16, 23, 80);		//tmv_num_rge
				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));		//mv_t_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg, 8, 15, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));		//mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 8, 15, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));		//mv_t_th_rgd
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));		//mv_t_th_rge

				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 10, 19, ReadComReg_Calib_Data(100, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));			//sad_t_th_rga								
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg, 10, 19, ReadComReg_Calib_Data(100, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));			//sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg, 10, 19, ReadComReg_Calib_Data(100, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));			//sad_t_th_rgd								
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 10, 19, ReadComReg_Calib_Data(100, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));			//sad_t_th_rge
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 10, 19, 100);			//sad_t_th_rga								
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg, 10, 19, 100);			//sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg, 10, 19, 100);			//sad_t_th_rgd								
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 10, 19, 100);			//sad_t_th_rge
				#endif
				dynamic_tunning_case1 = 1;
				
			}
			else if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 9 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 8 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 2 )
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 16, 23, 80);	// dh_logo_tmv_num_rga  
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 16, 23, 80);	// dh_logo_tmv_num_rge
				dynamic_tunning_case1 = 1;
			}
			else if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status >= 5 && s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status <=7 )
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge

				if(s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 7){
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(20, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4		
				}
				
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 0 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][0]); 	// rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][4]);		// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][10]);	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][14]);	// dh_logo_mv_d_diff_th_rge
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][0]); 	// rgn0_tmv_mv_t_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][4]);		// dh_logo_mv_t_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][10]);	// dh_logo_mv_t_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][14]);	// dh_logo_mv_t_th_rge
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][10]);	// dh_logo_tmv_num_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][14]);	// dh_logo_tmv_num_rge	
				dynamic_tunning_case1 = 1;
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, ReadComReg_Calib_Data(35, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(35, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(35, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(35, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,          0,  7, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// rgn0_tmv_mv_t_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rge
				dynamic_tunning_case1 = 1;
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[0] == 2 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,          0,  7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// rgn0_tmv_mv_t_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rge				
				dynamic_tunning_case1 = 1;
			}
			else
			{	
				if(0)//(MEMC_switch_table[0][5]==1)
				{
					WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][0]);		// rgn0_mvd_mv_d_diff_th
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][4]);		// dh_logo_mv_d_diff_th_rg4
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][10]);	// dh_logo_mv_d_diff_th_rga
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][14]);	// dh_logo_mv_d_diff_th_rge
					
					WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][0]);		// rgn0_tmv_mv_t_th
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][4]);		// dh_logo_mv_t_th_rg4
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][10]);	// dh_logo_mv_t_th_rga
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][14]);	// dh_logo_mv_t_th_rge
				}
		
				dynamic_tunning_case1 = 0;
			}			

			if(dynamic_tunning_case1==0){

				if(dynamic_tunning_case1_pre!=dynamic_tunning_case1){
					WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][0]);		// rgn0_mvd_mv_d_diff_th
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][4]);		// dh_logo_mv_d_diff_th_rg4
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][10]);	// dh_logo_mv_d_diff_th_rga
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][14]);	// dh_logo_mv_d_diff_th_rge
					
					WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][0]);		// rgn0_tmv_mv_t_th
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][4]);		// dh_logo_mv_t_th_rg4
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][10]);	// dh_logo_mv_t_th_rga
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][10]);		//dh_logo_mv_t_th_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][13]);		//dh_logo_mv_t_th_rgd
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][14]);	// dh_logo_mv_t_th_rge	
					
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][10]);	// dh_logo_tmv_num_rga
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 0, 7,  s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	//dh_logo_tmv_num_rgd
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][14]);	// dh_logo_tmv_num_rge	

					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 10, 19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][10]);			//sad_t_th_rga								
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg, 10, 19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);			//sad_t_th_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg, 10, 19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);			//sad_t_th_rgd								
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 10, 19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][14]);			//sad_t_th_rge
				}
				
				dynamic_tunning_case1_pre = dynamic_tunning_case1;
			}else{
				dynamic_tunning_case1_pre = dynamic_tunning_case1;
			}
//=========================================================================			

//======dynamic_tunning_case2=================================================================== 		

			// region 1, 2, 3, 5, 6, 7, 8, 9, 11, 13 control (mapping to region 1 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_BG_still_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, 32);	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, 32);	// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, 32);	// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, 32);	// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, 32);	// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, 32);	// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, 32);	// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, 32);	// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, 32);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, 32);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// rgn1_tmv_mv_t_th					
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgd
				dynamic_tunning_case2 = 1;
			}	
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 0 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][1]); 	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][2]);		// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][3]);		// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][5]);		// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][6]);		// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][7]);		// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][8]);		// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][9]);		// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,          0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][1]); 	// rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg,         13, 18, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][2]);		// mv_d_diff_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][3]);		// dh_logo_mv_d_diff_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][5]);		// dh_logo_mv_d_diff_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][6]);		// dh_logo_mv_d_diff_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][7]);		// dh_logo_mv_d_diff_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][8]);		// dh_logo_mv_d_diff_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][9]);		// dh_logo_mv_d_diff_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][11]);	// dh_logo_mv_d_diff_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][13]);	// dh_logo_mv_d_diff_th_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][1]); 	// rgn1_tmv_mv_t_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][2]);		// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][3]);		// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][5]);		// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][6]);		// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][7]);		// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][8]);		// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][9]);		// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][11]);	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][13]);	// dh_logo_mv_t_th_rgd				
				dynamic_tunning_case2 = 1;
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][1]); 	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][2]);		// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][3]);		// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][5]);		// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][6]);		// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][7]);		// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][8]);		// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][9]);		// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,          0,  5, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) ); 	// rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg,         13, 18, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// mv_d_diff_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     26, 31, ReadComReg_Calib_Data(40, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false) );	// dh_logo_mv_d_diff_th_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); 	// rgn1_tmv_mv_t_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, ReadComReg_Calib_Data(8, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgd	
				dynamic_tunning_case2 = 1;
				
			}
			else if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_lvl[1] == 2 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][1]); 	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][2]);		// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][3]);		// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][5]);		// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][6]);		// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][7]);		// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][8]);		// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][9]);		// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,          0,  5, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false)); 	// rgn1_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg,         13, 18, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// mv_d_diff_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     26, 31, ReadComReg_Calib_Data(52, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false)); 	// rgn1_tmv_mv_t_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgd	
				dynamic_tunning_case2 = 1;
			}
			else
			{
				dynamic_tunning_case2 = 0;				
			}		

			if(dynamic_tunning_case2==0){

				if(dynamic_tunning_case2_pre!=dynamic_tunning_case2){
					WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][1]); 	// rgn1_tmv_num
					WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][2]);		// tmv_num_rg2
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][3]);		// dh_logo_tmv_num_rg3
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][5]);		// dh_logo_tmv_num_rg5
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][6]);		// dh_logo_tmv_num_rg6				
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][7]);		// dh_logo_tmv_num_rg7
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][8]);		// dh_logo_tmv_num_rg8
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][9]);		// dh_logo_tmv_num_rg9
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);	// dh_logo_tmv_num_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	// dh_logo_tmv_num_rgd
					
					WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,          0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][1]); 	// rgn1_mvd_mv_d_diff_th
					WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg,         13, 18, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][2]);		// mv_d_diff_th_rg2
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][3]);		// dh_logo_mv_d_diff_th_rg3
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][5]);		// dh_logo_mv_d_diff_th_rg5
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][6]);		// dh_logo_mv_d_diff_th_rg6
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][7]);		// dh_logo_mv_d_diff_th_rg7
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][8]);		// dh_logo_mv_d_diff_th_rg8
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][9]);		// dh_logo_mv_d_diff_th_rg9
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][11]);	// dh_logo_mv_d_diff_th_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][13]);	// dh_logo_mv_d_diff_th_rgd
					
					WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][1]); 	// rgn1_tmv_mv_t_th
					WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][2]);		// mv_t_th_rg2
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][3]);		// dh_logo_mv_t_th_rg3
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][5]);		// dh_logo_mv_t_th_rg5
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][6]);		// dh_logo_mv_t_th_rg6
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][7]);		// dh_logo_mv_t_th_rg7
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][8]);		// dh_logo_mv_t_th_rg8
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][9]);		// dh_logo_mv_t_th_rg9
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][11]);	// dh_logo_mv_t_th_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][13]);	// dh_logo_mv_t_th_rgd					
				}				
				dynamic_tunning_case2_pre = dynamic_tunning_case2;
			}else{
				dynamic_tunning_case2_pre = dynamic_tunning_case2;
			}
//=========================================================================			
			
//========dynamic_tunning_case3=================================================================				
			if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[1] == 1  )
			{
				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgc		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgd
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,  10,  19, 150);// dh_logo_sad_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,  10,  19, 150);// dh_logo_sad_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,  10,  19, 150);// dh_logo_sad_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,  10,  19, 150);// dh_logo_sad_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, 150);// dh_logo_sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, 150);// dh_logo_sad_t_th_rgc		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, 150);// dh_logo_sad_t_th_rgd
				#endif
				dynamic_tunning_case3 = 1;
			}
			else
			{
				dynamic_tunning_case3 = 0;
			}

			if(dynamic_tunning_case3==0){

				if(dynamic_tunning_case3_pre!=dynamic_tunning_case3){		
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][6]);// dh_logo_sad_t_th_rg6
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][7]);// dh_logo_sad_t_th_rg7		
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][8]);// dh_logo_sad_t_th_rg8	
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][9]);// dh_logo_sad_t_th_rg9	
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][11]);// dh_logo_sad_t_th_rgb
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][12]);// dh_logo_sad_t_th_rgc		
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][13]);// dh_logo_sad_t_th_rgd								
				}				
				dynamic_tunning_case3_pre = dynamic_tunning_case3;
			}else{
				dynamic_tunning_case3_pre = dynamic_tunning_case3;
			}
//=========================================================================			

			// region 12 control (mapping to region 2 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg, 26, 31, 12);	// dh_logo_mv_d_diff_th_rgc				
			}else{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][12]);	// dh_logo_mv_d_diff_th_rgc		
			}			

			if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[1] == 1  )
			{
				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgc		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,	19, ReadComReg_Calib_Data(150, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rgd		
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,  10,  19, 150);// dh_logo_sad_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,  10,  19, 150);// dh_logo_sad_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,  10,  19, 150);// dh_logo_sad_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,  10,  19, 150);// dh_logo_sad_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, 150);// dh_logo_sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, 150);// dh_logo_sad_t_th_rgc		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, 150);// dh_logo_sad_t_th_rgd		
				#endif
			}
			else
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][6]);// dh_logo_sad_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][7]);// dh_logo_sad_t_th_rg7		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][8]);// dh_logo_sad_t_th_rg8	
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][9]);// dh_logo_sad_t_th_rg9	
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][11]);// dh_logo_sad_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][12]);// dh_logo_sad_t_th_rgc		
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][13]);// dh_logo_sad_t_th_rgd							
			}

			if(s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[2] ==1){
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg, 20, 25, ReadComReg_Calib_Data(31, CALIB_PARAM_DHLOGO_MV_TH, 0, 0x3f, false));
			}else{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg, 20, 25, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[1][3]);	
			}

			if(0)//(MEMC_switch_table[0][5]==1)
			{
				if((s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_H_Moving_case==1) && (s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[3] ==1))
				{
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 0, 9, 56);	
				}else{
					WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 0, 9, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[0][10]);	
				}
			}

			if(s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_H_Moving_case==2){
				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg, 0, 9, ReadComReg_Calib_Data(50, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));	
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg, 0, 9, 50);	
				#endif
			}else{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg, 0, 9, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[0][3]);	
			}

			if( (s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_H_Moving_case==1) && (s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[3] ==1)){
				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 0, 9, ReadComReg_Calib_Data(56, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 0, 9, 56);
				#endif
			}else{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 0, 9, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[0][10]);	
			}

			if( s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[3] == 2 )
			{
				#if 1
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,  10,  19, ReadComReg_Calib_Data(70, CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false));// dh_logo_sad_t_th_rga	
				#else
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,  10,  19, 70);// dh_logo_sad_t_th_rga	
				#endif
			}
			else
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,  10,  19, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[3][10]);
			}
			
		}
		else 
		{	
			// region 0, 4, 10, 14 control (mapping to region 0 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,	   0,  5, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, ReadComReg_Calib_Data(10, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rge
			}		
			else
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,      0,  5, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][0]); 	// rgn0_mvd_mv_d_diff_th
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][4]);		// dh_logo_mv_d_diff_th_rg4
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][10]);	// dh_logo_mv_d_diff_th_rga
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][14]);	// dh_logo_mv_d_diff_th_rge				
			}

			// region 1, 2, 3, 5, 6, 7, 8, 9, 11, 13 control (mapping to region 1 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_BG_still_status == 1 )
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, 32);	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, 32);	// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, 32);	// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, 32);	// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, 32);	// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, 32);	// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, 32);	// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, 32);	// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, 32);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, 32);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// rgn1_tmv_mv_t_th					
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, ReadComReg_Calib_Data(4, CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false));	// dh_logo_mv_t_th_rgd				
			}				
			else
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][1]); 	// rgn1_tmv_num
				WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][2]);		// tmv_num_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][3]);		// dh_logo_tmv_num_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][5]);		// dh_logo_tmv_num_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][6]);		// dh_logo_tmv_num_rg6				
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][7]);		// dh_logo_tmv_num_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][8]);		// dh_logo_tmv_num_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][9]);		// dh_logo_tmv_num_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][11]);	// dh_logo_tmv_num_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[5][13]);	// dh_logo_tmv_num_rgd
				
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,          0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][1]); 	// rgn1_tmv_mv_t_th
				WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,         10, 17, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][2]);		// mv_t_th_rg2
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][3]);		// dh_logo_mv_t_th_rg3
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][5]);		// dh_logo_mv_t_th_rg5
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][6]);		// dh_logo_mv_t_th_rg6
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][7]);		// dh_logo_mv_t_th_rg7
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][8]);		// dh_logo_mv_t_th_rg8
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][9]);		// dh_logo_mv_t_th_rg9
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][11]);	// dh_logo_mv_t_th_rgb
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[4][13]);	// dh_logo_mv_t_th_rgd				
			}		

			// region 12 control (mapping to region 2 control in 3 regions)
			if( s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 1 )
			{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg, 26, 31, ReadComReg_Calib_Data(12, CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false));	// dh_logo_mv_d_diff_th_rgc	
			}else{
				WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg, 26, 31, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_RgnThr_15rgn[2][12]);	// dh_logo_mv_d_diff_th_rgc
			}		
			
		}	
	}
}
#endif 

#ifdef CONFIG_SUPPORT_SLD_BY_MEMC_DEMURA
	if (/*strcmp(webos_strToolOption.eBackLight, "oled") == 0*/ /*SLD_SW_En == 1*/MEMC_Pixel_LOGO_For_SW_SLD == 1)
	{
		if( pParam->u1_logo_pxldfth_dyn_en == 1)
		{
			WriteRegister(KME_LOGO2_KME_LOGO2_00_reg, 0, 7, s_pContext->_output_FRC_LgDet.u8_PxlRgnDfy[0]);
			WriteRegister(KME_LOGO2_KME_LOGO2_00_reg, 8, 15, s_pContext->_output_FRC_LgDet.u8_PxlRgnDfy[1]);
			WriteRegister(KME_LOGO2_KME_LOGO2_00_reg, 16, 23, s_pContext->_output_FRC_LgDet.u8_PxlRgnDfy[2]);
		}
		if (pParam->u1_logo_pxlrgclr_en == 1)
		{
			WriteRegister(KME_LOGO1_KME_LOGO1_E4_reg, 0, 31, s_pContext->_output_FRC_LgDet.u32_PxlRgClrSig);
		}
	}
#endif

	if (s_pContext->_output_FRC_LgDet.u32_logo_closeVar_hold_cnt > 0)
	{
	    WriteRegister(MC2_MC2_98_reg, 8, 8, 0x0);
	}
	else
	{
	    WriteRegister(MC2_MC2_98_reg, 8, 8, s_pContext->_output_FRC_LgDet.DefaultVal.reg_mc_logo_vlpf_en);
	}

	//clear write action
	if (pParam->u1_LGClr_wrt_en == 1)
	{
		//sw ctrl
		//unsigned int logo_clr_idx = s_pContext->_output_FRC_LgDet.u32_blklogo_clr_idx | s_pContext->_output_frc_sceneAnalysis.u32_RgPan_idx | s_pContext->_output_FRC_LgDet.u32_Rg_unstatic_idx;
		unsigned int logo_clr_idx = s_pContext->_output_FRC_LgDet.u32_blklogo_clr_idx;

		// logo hsty clear clear logo
		if ((pParam->u1_LGPixHstyClr_wrt_en == 1 || pParam->u1_LGBlkHstyClr_wrt_en == 1) && pParam->u1_LGHstyClr_ClrLG_wrt_en == 1)
		{
			logo_clr_idx = logo_clr_idx | s_pContext->_output_FRC_LgDet.u32_logo_hsty_clr_lgclr_idx;
		}
#ifdef CONFIG_SUPPORT_SLD_BY_MEMC_DEMURA
		if (/*strcmp(webos_strToolOption.eBackLight, "oled") == 0*//*SLD_SW_En == 1*/MEMC_Pixel_LOGO_For_SW_SLD == 1 || MEMC_Pixel_LOGO_For_SW_SLD == 2)
		{
			// Just clear the block logo result by dilaiton threshold setting
			if( logo_clr_idx == 0xffffffff )
			{		
				WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 12, 	14, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 10, 	12, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 25, 	27, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 25, 	27, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 25, 	27, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 25, 	27, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 25, 	27, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 9, 	11, 0);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 25, 	27, 0);
			}
			else
			{
				WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg, 12, 	14, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_A8_reg, 10, 	12, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_14_reg, 25, 	27, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_18_reg, 25, 	27, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_1C_reg, 25, 	27, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_20_reg, 25, 	27, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 25, 	27, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 9, 	11, 7);
				WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 25, 	27, 7);
			}
		}
		else
		{
			WriteRegister(KME_LOGO1_KME_LOGO1_E0_reg, 30, 30, (1-s_pContext->_output_FRC_LgDet.u1_sw_clr_en_out)); // awlays 0
			WriteRegister(KME_LOGO1_KME_LOGO1_E4_reg, 0, 31, logo_clr_idx);
		}
#else
		WriteRegister(KME_LOGO1_KME_LOGO1_E0_reg, 30, 30, (1-s_pContext->_output_FRC_LgDet.u1_sw_clr_en_out)); // awlays 0
		WriteRegister(KME_LOGO1_KME_LOGO1_E4_reg, 0, 31, logo_clr_idx);
#endif
	}

	if (pParam->u1_LGSC_ctrl_wrt_en == 1)
	{
		if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag ==2)
			WriteRegister(KME_LOGO0_KME_LOGO0_10_reg, 0, 4, 0x1f);
		else
			WriteRegister(KME_LOGO0_KME_LOGO0_10_reg, 0, 4, s_pContext->_output_FRC_LgDet.DefaultVal.reg_km_logo_iir_alpha);
	}
	else
	{
		// pql adjust
		WriteRegister(KME_LOGO0_KME_LOGO0_10_reg, 0, 4, s_pContext->_output_FRC_LgDet.u5_iir_alpha_out);
	}


	if(s_pContext->_output_frc_sceneAnalysis.u1_fadeInOut_logo_clr)
	{
		WriteRegister(MC2_MC2_20_reg, 0, 1, 0x0);
	}
	else if(s_pContext->_output_wrt_comreg.u1_MC_Logo_Close_true)  // use force disable mc logo
	{
		WriteRegister(MC2_MC2_20_reg, 0, 1, 0x0);
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u1_Swing_true )  // need refine
	{
		WriteRegister(MC2_MC2_20_reg, 0, 1, 0x0);
	}
	else if (pParam->u1_LG_SC_PtClose_wrt_en)
	{
		if (s_pContext->_output_FRC_LgDet.u1_logo_sc_status == 1)
		{
			WriteRegister(MC2_MC2_20_reg, 0, 1, 0x1);
		}
		else
		{
			WriteRegister(MC2_MC2_20_reg, 0, 1, s_pContext->_output_FRC_LgDet.DefaultVal.reg_mc_logo_en);
		}
	}
	else
	{
		WriteRegister(MC2_MC2_20_reg, 0, 1, s_pContext->_output_FRC_LgDet.DefaultVal.reg_mc_logo_en);
	}

	if(pParam->u1_logo_sc_FastDet_wrt_en == 1)
	{
		if(s_pContext->_output_FRC_LgDet.u1_logo_sc_FastDet_status == 1)
		{
			// right top corner
			WriteRegister(KME_LOGO0_KME_LOGO0_C8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[4]/2);
			WriteRegister(KME_LOGO0_KME_LOGO0_B8_reg,  0,  7, (s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[4]*7)>>4);
			// left bot corner
			//WriteRegister(KME_LOGO0_KME_LOGO0_CC_reg,  16,  23, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[10]/2);
			//WriteRegister(KME_LOGO0_KME_LOGO0_BC_reg,  16,  23, (s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[10]*7)>>4);
			// mid bot
			//WriteRegister(KME_LOGO0_KME_LOGO0_D0_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[12]/2);
			//WriteRegister(KME_LOGO0_KME_LOGO0_C0_reg,  0,  7, (s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[12]*7)>>4);
		}
		else
		{
			// right top corner
			WriteRegister(KME_LOGO0_KME_LOGO0_C8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[4]);
			WriteRegister(KME_LOGO0_KME_LOGO0_B8_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[4]);
			// left bot corner
			//WriteRegister(KME_LOGO0_KME_LOGO0_CC_reg,  16,  23, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[10]);
			//WriteRegister(KME_LOGO0_KME_LOGO0_BC_reg,  16,  23, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[10]);
			// mid bot
			//WriteRegister(KME_LOGO0_KME_LOGO0_D0_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_a[12]);
			//WriteRegister(KME_LOGO0_KME_LOGO0_C0_reg,  0,  7, s_pContext->_output_FRC_LgDet.DefaultVal.blksamethr_h[12]);
		}
	}

	// adjust logo threshold to decrease the hsty energy when seek
	if(s_pContext->_output_frc_sceneAnalysis.u8_VOSeek_prt_logo_apply > 0)
	{
		WriteRegister(KME_LOGO0_KME_LOGO0_68_reg, 0, 10, 0x800);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 8, 8, 0x0);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 0, 3, 0xf);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 4, 7, 0x0);
	}
	else
	{
		WriteRegister(KME_LOGO0_KME_LOGO0_68_reg, 0, 10, s_pContext->_output_FRC_LgDet.DefaultVal.reg_km_logo_blkgrdsum2_th);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 8, 8, s_pContext->_output_FRC_LgDet.DefaultVal.reg_km_logo_blkadphstystep_en);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 0, 3, s_pContext->_output_FRC_LgDet.DefaultVal.reg_km_logo_blkhsty_nstep);
		WriteRegister(KME_LOGO0_KME_LOGO0_EC_reg, 4, 7, s_pContext->_output_FRC_LgDet.DefaultVal.reg_km_logo_blkhsty_pstep);
	}

	// merlin6 new algo control	
//	ReadRegister(HARDWARE_HARDWARE_58_reg, 0, 31, &u32_RB_val);//bit 8
//	if ( ((u32_RB_val >>  8) & 0x01) ==1 ){
//			rtd_pr_memc_emerg("[%s][%d][,%d,%d]\n",__FUNCTION__, __LINE__,s_pContext->_output_me_sceneAnalysis.u2_panning_flag, ,s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true);
//	}
#if	1
	if(pParam->u1_logo_HaloEnahce_en == 0){//d754[30]
		WriteRegister(KME_DEHALO3_KME_DEHALO3_0C_reg, 12, 12, 0);
		u1_pre_logo_HaloEnahce_en = pParam->u1_logo_HaloEnahce_en;
	}else{

		if( (s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status==3 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status== 4)&&(s_pContext->_output_FRC_LgDet.u1_logo_NearRim_logo_status==1)){
			WriteRegister(KME_DEHALO3_KME_DEHALO3_0C_reg, 12, 12, 0);

			if(0)//(MEMC_switch_table[0][5]==1)
			{
				WriteRegister(MC_MC_18_reg, 17, 20, 3);
			}
			else
			{
				WriteRegister(MC_MC_18_reg, 17, 20, MEMC_PARAM_TABLE.LOGO_Param[output_Resolution].MC_LOGO_EROSION_TH_Param.u4_logo_erosion_th_panning);
			}

			WriteRegister(KME_LOGO2_KME_LOGO2_28_reg, 9, 14, 2);
		}else if((s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_H_Moving_case == 1) && (s_pContext->_output_FRC_LgDet.u3_logo_dhRgnProc_case[3] ==1)){
			WriteRegister(KME_LOGO2_KME_LOGO2_28_reg, 9, 14, 2);
		}else if( (s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status == 2 || s_pContext->_output_wrt_comreg.u1_SquidGame_subTitle_flag ==1 )){
			WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 6, 	8, 7);
			WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 22, 	24, 7);
			WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 6, 	8, 7);
			WriteRegister(KME_LOGO2_KME_LOGO2_28_reg, 9, 14, 3);
			WriteRegister(KME_LOGO2_KME_LOGO2_2C_reg, 9, 16, 4);
			//logo_check_K24014_flag =1;
		}else{
			WriteRegister(KME_DEHALO3_KME_DEHALO3_0C_reg, 12, 12, 1);

			if(0)//(MEMC_switch_table[0][5]==1)
			{
				WriteRegister(MC_MC_18_reg, 17, 20, 6);
			}
			else
			{
				if(fast_motion_algo_en /*&& s_pContext->_output_me_sceneAnalysis.u1_fast_motion_logo*/) {
					WriteRegister(MC_MC_18_reg, 17, 20, MEMC_PARAM_TABLE.LOGO_Param[output_Resolution].MC_LOGO_EROSION_TH_Param.u4_logo_erosion_th_fastmotion);
				}else{
					WriteRegister(MC_MC_18_reg, 17, 20, MEMC_PARAM_TABLE.LOGO_Param[output_Resolution].MC_LOGO_EROSION_TH_Param.u4_logo_erosion_th_normal);
				}
			}

			WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 6, 8, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[11][3]);
			WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg, 22, 24, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[12][3]);
			WriteRegister(KME_DEHALO2_KME_DEHALO2_28_reg, 6, 8, s_pContext->_output_FRC_LgDet.DefaultVal.dh_logo_bypass[13][3]);
			WriteRegister(KME_LOGO2_KME_LOGO2_28_reg, 9, 14, s_pContext->_output_FRC_LgDet.DefaultVal.u6_logo_blklogopostdlt_th);
			WriteRegister(KME_LOGO2_KME_LOGO2_2C_reg, 9, 16, s_pContext->_output_FRC_LgDet.DefaultVal.u6_logo_pxllogopostdlt_th);
			//logo_check_K24014_flag =0;
		}	
	}
#else	
	if(u1_pre_logo_HaloEnahce_en == 1 && pParam->u1_logo_HaloEnahce_en == 0)
	{
		WriteRegister(KME_DEHALO3_KME_DEHALO3_0C_reg, 12, 12, 0);
		u1_pre_logo_HaloEnahce_en = 0;
	}
	if(u1_pre_logo_HaloEnahce_en == 0 && pParam->u1_logo_HaloEnahce_en == 1)
	{
		WriteRegister(KME_DEHALO3_KME_DEHALO3_0C_reg, 12, 12, 1);
		u1_pre_logo_HaloEnahce_en = 1;
	}
#endif	

	if(u1_pre_logo_DynOBME_en == 1 && pParam->u1_logo_DynOBME_en == 0)
	{
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_48_reg, 31, 31, 0);
		WriteRegister(KME_ME1_TOP10_LOGO_HALO_reg, 0, 0, 0);
		u1_pre_logo_DynOBME_en = 0;
	}
	if(u1_pre_logo_DynOBME_en == 0 && pParam->u1_logo_DynOBME_en == 1)
	{
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_48_reg, 31, 31, 1);
		WriteRegister(KME_ME1_TOP10_LOGO_HALO_reg, 0, 0, 1);
		u1_pre_logo_DynOBME_en = 1;
	}

}


VOID Logo_Count_Speed_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	static unsigned int u32_logo_frame_count = 0x0;
	signed short u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	signed short u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
	unsigned int zmv_all_cnt = 0, gmv_th = 4, logo_frame_count = 3, slowly_count_logo_en = 0, force_slowly_count_logo = 0, log_en = 0;
	unsigned char u8_i = 0;
	bool small_gmv_cond = false, almost_zmv_cond = false;

	ReadRegister(SOFTWARE3_SOFTWARE3_47_reg, 19, 19, &log_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_47_reg, 20, 20, &force_slowly_count_logo);
	ReadRegister(SOFTWARE3_SOFTWARE3_47_reg, 21, 24, &logo_frame_count);
	ReadRegister(SOFTWARE3_SOFTWARE3_47_reg, 25, 29, &gmv_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_47_reg, 30, 30, &slowly_count_logo_en);

	if(slowly_count_logo_en==false){
		return;
	}

	for(u8_i=0; u8_i<32; u8_i++) {
		zmv_all_cnt += s_pContext->_output_read_comreg.me1_bv_stats_rg_cnt[u8_i];
	}
	small_gmv_cond = ((_ABS_(u11_gmv_mvx)+_ABS_(u10_gmv_mvy)) < gmv_th) ? true : false;
	almost_zmv_cond = (zmv_all_cnt >= 240*135*85/100) ? true : false;

	if(almost_zmv_cond)
	{
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 0, 3, 0x0);//km_logo_blkhsty_pstep_y0 = 0
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 4, 7, 0x0);//km_logo_blkhsty_pstep_y1 = 0
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 8, 11, 0x0);//km_logo_blkhsty_pstep_y2 = 0
	}
	else if(small_gmv_cond)
	{
		u32_logo_frame_count = u32_logo_frame_count + 1;
		//if( u32_logo_frame_count % logo_frame_count == 0 && scalerVIP_Get_MEMCPatternFlag_Identification(2,8) == FALSE) // #321 halo sudden increase
		if( u32_logo_frame_count % logo_frame_count == 0 )
		{
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 0, 3, 0x1);//km_logo_blkhsty_pstep_y0 = 1
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 4, 7, 0x1);//km_logo_blkhsty_pstep_y1 = 1
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 8, 11, 0x1);//km_logo_blkhsty_pstep_y2 = 1
		}
		else
		{
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 0, 3, 0x0);//km_logo_blkhsty_pstep_y0 = 0
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 4, 7, 0x0);//km_logo_blkhsty_pstep_y1 = 0
			WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 8, 11, 0x0);//km_logo_blkhsty_pstep_y2 = 0
		}
	}
	else
	{
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 0, 3, 0x0);//km_logo_blkhsty_pstep_y0 = 0
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 4, 7, 0x3);//km_logo_blkhsty_pstep_y1 = 3
		WriteRegister(KME_LOGO0_KME_LOGO0_E4_reg, 8, 11, 0x5);//km_logo_blkhsty_pstep_y2 = 5
	}

	if(log_en){
		rtd_pr_memc_emerg("[%s] cond,%d,%d, zmv_all_cnt,%u, gmv,%d,%d, u32_logo_frame_count,%u\n", __FUNCTION__, 
			almost_zmv_cond, small_gmv_cond, zmv_all_cnt, u11_gmv_mvx, u10_gmv_mvy, u32_logo_frame_count);
	}
}

extern unsigned char g_8008_flag,g_62_flag, g_72_60_flag, g_166_flag, g_186_flag, g_510_flag, g_511_flag, g_474_flag, g_476_flag, g_480_flag, g_291_flag, g_244_flag, g_244_9_flag, g_246_flag, g_62_20_flag, g_cad_transient_flag;
VOID DehaloLogo_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int dehalo_logo_alpha_blend[15];
	unsigned int alpha_th1 = 0, alpha_th2 = 800, alpha_th0 = 50;

	//                                      			 mv_d_th, mv_d_diff_th, sad_d_th,  mv_t_th, sad_t_th,  tmv_num  
	//unsigned int dehalo_logo_weakest[6] = {      31,         3,         250,      16,       16,       37};	// for #474 
	unsigned int dehalo_logo_weakest[6] =  {      32,         1,         50,      16,       16,       38};	// for #166 
	unsigned int dehalo_logo_logo_pan[6] = {       4,         3,         250,      16,       16,       38}; // {       4,         3,         250,      16,       16,       37};
	unsigned int dehalo_logo_default[6] =    {       4,         6,         250,      16,       48,       38}; // {       4,        8,         255,       16,      64,       38};	// less broken	
	//unsigned int dehalo_logo_medium[6] =    {       3,        10,         255,       8,      150,       35};
	unsigned int dehalo_logo_strong[6] =    {       1,        63,         512,       1,      255,       32};	// for #182 sniper	
	unsigned int non_logo_region_setting[6], logo_region_setting[6];
	unsigned int dehalo_logo_setting[6][15];
	int i = 0, j = 0;
	unsigned int still_logo_det_en = 0, test_en = 0, test_en2 = 0, test_mode2 = 0;
	signed short u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	signed short u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
	bool panning_cond, mv_cond, long_term_logo_cond;
	unsigned int gmv_abs_th = 0;
	ReadRegister(SOFTWARE2_SOFTWARE2_48_reg, 31, 31, &still_logo_det_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_48_reg, 25, 25, &test_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_48_reg, 17, 18, &test_mode2);
	ReadRegister(SOFTWARE2_SOFTWARE2_48_reg, 16, 16, &test_en2);
	ReadRegister(SOFTWARE2_SOFTWARE2_49_reg, 12, 23, &gmv_abs_th);
	ReadRegister(SOFTWARE2_SOFTWARE2_48_reg,  0, 7, &alpha_th1);

	

	if(pParam->u1_logoCtrl_wrt_en == 0)
		return;



	if(still_logo_det_en == 1){
	// 1. calculating alpha_blending[15] from s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[32]
	// 8x4 to 5x3 mapping 

	// by average
	if(test_en){
		dehalo_logo_alpha_blend[0]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 0], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 1]);
		dehalo_logo_alpha_blend[1]  =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 2];
		dehalo_logo_alpha_blend[2]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 3], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 4]);
		dehalo_logo_alpha_blend[3]  =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 5];
		dehalo_logo_alpha_blend[4]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 6], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 7]);

		dehalo_logo_alpha_blend[5]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 8], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 9], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[16], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[17])));
		dehalo_logo_alpha_blend[6]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[10], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[18]);
		dehalo_logo_alpha_blend[7]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[11], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[12], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[19], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[20])));
		dehalo_logo_alpha_blend[8]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[13], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[21]);
		dehalo_logo_alpha_blend[9]  = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[14], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[15], MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[22], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[23])));

		dehalo_logo_alpha_blend[10] = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[24], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[25]);
		dehalo_logo_alpha_blend[11] =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[26];
		dehalo_logo_alpha_blend[12] = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[27], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[28]);
		dehalo_logo_alpha_blend[13] =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[29];
		dehalo_logo_alpha_blend[14] = MAX(s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[30], s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[31]);
	}else{
		dehalo_logo_alpha_blend[0]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 0]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 1]) / 2;
		dehalo_logo_alpha_blend[1]  =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 2];
		dehalo_logo_alpha_blend[2]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 3]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 4]) / 2;
		dehalo_logo_alpha_blend[3]  =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 5];
		dehalo_logo_alpha_blend[4]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 6]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 7]) / 2;

		dehalo_logo_alpha_blend[5]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 8]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[ 9] + s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[16]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[17]) / 4;
		dehalo_logo_alpha_blend[6]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[10]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[18]) / 2;
		dehalo_logo_alpha_blend[7]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[11]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[12] + s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[19]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[20]) / 4;
		dehalo_logo_alpha_blend[8]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[13]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[21]) / 2;
		dehalo_logo_alpha_blend[9]  = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[14]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[15] + s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[22]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[23]) / 4;

		dehalo_logo_alpha_blend[10] = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[24]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[25]) / 2;
		dehalo_logo_alpha_blend[11] =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[26];
		dehalo_logo_alpha_blend[12] = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[27]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[28]) / 2;
		dehalo_logo_alpha_blend[13] =  s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[29];
		dehalo_logo_alpha_blend[14] = (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[30]+s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[31]) / 2;
	}
	// 2. calculating dh 6 register settings for 5x3 regions 

	// patch for #204~#206 for km_logo_hog_sample_mode_sel
	panning_cond = ( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 ) ? 1 : 0;
	mv_cond = ( (u11_gmv_mvx >= 63) && (u11_gmv_mvx <= 66) && ( _ABS_(u10_gmv_mvy ) <= 1) ) ? 1 : 0;
	long_term_logo_cond = ( (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[26] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[27] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[28] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[29] > alpha_th2) ) ? 1 : 0;	

	//logo_region_setting
	for(i=0; i<6; i++)
	{
		#if 1
		non_logo_region_setting[i] = dehalo_logo_default[i];
		#else
		if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag > 0 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status > 0)
		{
			non_logo_region_setting[i] = dehalo_logo_strong[i];	// strong dehalo logo setting for panning
		}
		else
		{
			non_logo_region_setting[i] = dehalo_logo_medium[i];
		}
		#endif

		//if( ( _ABS_(u11_gmv_mvx) + _ABS_(u10_gmv_mvy ) ) > gmv_abs_th )
		//{
		//	logo_region_setting[i] = dehalo_logo_logo_pan[i];
		//}
		//else
		//{
		//	logo_region_setting[i] = dehalo_logo_logo_default[i];
		//}
		//if(g_190_flag && test_en2){
		//	test_mode2 = 2;
		//}
		
		if(test_mode2 == 1){
			logo_region_setting[i] = dehalo_logo_weakest[i]; // table_a
		}
		else if(test_mode2 == 2){
			logo_region_setting[i] = dehalo_logo_logo_pan[i]; // dehalo_logo_default[i]; // table_b
		}
		else{ // table_c'
			logo_region_setting[i] = dehalo_logo_default[i]; // dehalo_logo_logo_pan[i];
			if( panning_cond && mv_cond && long_term_logo_cond && i == 4)
			{
				logo_region_setting[i] = 32;
			}
		}
	}


	for(j=0; j<15; j++)	// dh logo 15 regions
	{
		for(i=0; i<6; i++)	// dh logo 6 registers
		{
			if(test_en2){
				if( (g_8008_flag && (13 == j || j==14))|| (g_166_flag && (j == 10)) || ((g_510_flag) && (11 <= j && j<=13)) || (g_474_flag && (j == 4)) || (g_480_flag && (6 <= j && j<=8))){
					logo_region_setting[i] = dehalo_logo_weakest[i]; // table_a
					
				}
			}
			if( dehalo_logo_alpha_blend[j] < alpha_th0 )
			{
				dehalo_logo_setting[i][j] = dehalo_logo_strong[i];
			}
			else if( dehalo_logo_alpha_blend[j] < alpha_th1 )
			{
				dehalo_logo_setting[i][j] = ( dehalo_logo_default[i]*dehalo_logo_alpha_blend[j] + dehalo_logo_strong[i]*(alpha_th1-dehalo_logo_alpha_blend[j]) ) / alpha_th1; // non_logo_region_setting[i];
			}
			else if( dehalo_logo_alpha_blend[j] > alpha_th2 )
			{
				dehalo_logo_setting[i][j] = logo_region_setting[i];
			}
			else
			{
				// alpha blending		
				dehalo_logo_setting[i][j] = ( logo_region_setting[i]*(dehalo_logo_alpha_blend[j]-alpha_th1) + non_logo_region_setting[i]*(alpha_th2-dehalo_logo_alpha_blend[j]) ) / (alpha_th2-alpha_th1);
			}

			if(test_en2){
				if(g_244_flag && j == 4 && _ABS_(u11_gmv_mvx)>=30){
					dehalo_logo_setting[i][j] = dehalo_logo_weakest[i];
				}
			}
		}
	}
	
	if(test_en2 && g_511_flag && dehalo_logo_alpha_blend[12] >= 320){
		WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg,  28, 28, 1); // bypass tmv for region_c
	}
	else{
		WriteRegister(KME_DEHALO2_KME_DEHALO2_24_reg,  28, 28, 0); // bypass tmv for region_c
	}
	if(test_en2 && g_cad_transient_flag && dehalo_logo_alpha_blend[0] >= 400){
		WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg,  8, 10, 7); // bypass tmv for region_c
		WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg,  15, 15, 1); // bypass tmv for region_c
	}
	else{
		WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg,  8, 10, 4); // bypass tmv for region_c
		WriteRegister(KME_DEHALO2_KME_DEHALO2_90_reg,  15, 15, 0); // bypass tmv for region_c
	}

	for(i=0; i<15; i++){
		dehalo_logo_setting[dhLogo_sad_d][i] =	  ReadComReg_Calib_Data(dehalo_logo_setting[dhLogo_sad_d][i], CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false);
		dehalo_logo_setting[dhLogo_mv_d_d][i] =	  ReadComReg_Calib_Data(dehalo_logo_setting[dhLogo_mv_d_d][i], CALIB_PARAM_DHLOGO_MV_TH, 0, 0x3f, false);
		dehalo_logo_setting[dhLogo_mv_d_diff][i] = ReadComReg_Calib_Data(dehalo_logo_setting[dhLogo_mv_d_diff][i], CALIB_PARAM_DHLOGO_MV_DIFF_TH, 0, 0x3f, false);
		dehalo_logo_setting[dhLogo_sad_t][i] =	  ReadComReg_Calib_Data(dehalo_logo_setting[dhLogo_sad_t][i], CALIB_PARAM_DHLOGO_SAD_TH, 0, 0x3ff, false);
		dehalo_logo_setting[dhLogo_mv_t][i] =	  ReadComReg_Calib_Data(dehalo_logo_setting[dhLogo_mv_t][i], CALIB_PARAM_DHLOGO_MV_TH, 0, 0xff, false);
	}

	// 3. Setting dehalo registers
	// dh logo rg0 setting
	WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,  6, 11, dehalo_logo_setting[0][0]); // dh_logo_mv_d_th_rg0
	WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg,  0,  5, dehalo_logo_setting[1][0]); // dh_logo_mv_d_diff_th_rg0
	WriteRegister(KME_DEHALO2_KME_DEHALO2_84_reg, 12, 21, dehalo_logo_setting[2][0]); // dh_logo_sad_d_th_rg0
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,  0,  7, dehalo_logo_setting[3][0]); // dh_logo_mv_t_th_rg0
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg, 16, 25, dehalo_logo_setting[4][0]); // dh_logo_sad_t_th_rg0
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A0_reg,  8, 15, dehalo_logo_setting[5][0]); // dh_logo_tmv_num_rg0

	// dh logo rg1 setting
	WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,  6, 11, dehalo_logo_setting[0][1]); // dh_logo_mv_d_th_rg1
	WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg,  0,  5, dehalo_logo_setting[1][1]); // dh_logo_mv_d_diff_th_rg1
	WriteRegister(KME_DEHALO2_KME_DEHALO2_AC_reg, 12, 21, dehalo_logo_setting[2][1]); // dh_logo_sad_d_th_rg1
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,  0,  7, dehalo_logo_setting[3][1]); // dh_logo_mv_t_th_rg1
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg, 16, 25, dehalo_logo_setting[4][1]); // dh_logo_sad_t_th_rg1
	WriteRegister(KME_DEHALO2_KME_DEHALO2_A4_reg,  8, 15, dehalo_logo_setting[5][1]); // dh_logo_tmv_num_rg1

	// dh logo rg2 setting
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 19, 24, dehalo_logo_setting[0][2]); // mv_d_th_rg2
	WriteRegister(KME_DEHALO2_KME_DEHALO2_E8_reg, 13, 18, dehalo_logo_setting[1][2]); // mv_d_diff_th_rg2
	WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg,  0,  9, dehalo_logo_setting[2][2]); // sad_d_th_rg2
	WriteRegister(KME_DEHALO2_KME_DEHALO2_08_reg, 10, 17, dehalo_logo_setting[3][2]); // mv_t_th_rg2
	WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,  8, 17, dehalo_logo_setting[4][2]); // sad_t_th_rg2
	WriteRegister(KME_DEHALO2_KME_DEHALO2_10_reg,  0,  7, dehalo_logo_setting[5][2]); // tmv_num_rg2

	// dh logo rg3 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     20, 25, dehalo_logo_setting[0][3]); // dh_logo_mv_d_th_rg3
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     26, 31, dehalo_logo_setting[1][3]); // dh_logo_mv_d_diff_th_rg3
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,      0,  9, dehalo_logo_setting[2][3]); // dh_logo_sad_d_th_rg3
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  8, 15, dehalo_logo_setting[3][3]); // dh_logo_mv_t_th_rg3
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg3_reg,     10, 19, dehalo_logo_setting[4][3]); // dh_logo_sad_t_th_rg3
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg,  0,  7, dehalo_logo_setting[5][3]); // dh_logo_tmv_num_rg3

	// dh logo rg4 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg,     20, 25, dehalo_logo_setting[0][4]); // dh_logo_mv_d_th_rg4
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg,     26, 31, dehalo_logo_setting[1][4]); // dh_logo_mv_d_diff_th_rg4
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg,      0,  9, dehalo_logo_setting[2][4]); // dh_logo_sad_d_th_rg4
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 24, 31, dehalo_logo_setting[3][4]); // dh_logo_mv_t_th_rg4
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg4_reg,     10, 19, dehalo_logo_setting[4][4]); // dh_logo_sad_t_th_rg4
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg3_rg4_reg, 16, 23, dehalo_logo_setting[5][4]); // dh_logo_tmv_num_rg4

	// dh logo rg5 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     20, 25, dehalo_logo_setting[0][5]); // dh_logo_mv_d_th_rg5
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     26, 31, dehalo_logo_setting[1][5]); // dh_logo_mv_d_diff_th_rg5
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,      0,  9, dehalo_logo_setting[2][5]); // dh_logo_sad_d_th_rg5
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  8, 15, dehalo_logo_setting[3][5]); // dh_logo_mv_t_th_rg5
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg5_reg,     10, 19, dehalo_logo_setting[4][5]); // dh_logo_sad_t_th_rg5
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg,  0,  7, dehalo_logo_setting[5][5]); // dh_logo_tmv_num_rg5

	// dh logo rg6 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     20, 25, dehalo_logo_setting[0][6]); // dh_logo_mv_d_th_rg6
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     26, 31, dehalo_logo_setting[1][6]); // dh_logo_mv_d_diff_th_rg6
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,      0,  9, dehalo_logo_setting[2][6]); // dh_logo_sad_d_th_rg6
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 24, 31, dehalo_logo_setting[3][6]); // dh_logo_mv_t_th_rg6
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg6_reg,     10, 19, dehalo_logo_setting[4][6]); // dh_logo_sad_t_th_rg6
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg5_rg6_reg, 16, 23, dehalo_logo_setting[5][6]); // dh_logo_tmv_num_rg6

	// dh logo rg7 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     20, 25, dehalo_logo_setting[0][7]); // dh_logo_mv_d_th_rg7
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     26, 31, dehalo_logo_setting[1][7]); // dh_logo_mv_d_diff_th_rg7
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,      0,  9, dehalo_logo_setting[2][7]); // dh_logo_sad_d_th_rg7
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  8, 15, dehalo_logo_setting[3][7]); // dh_logo_mv_t_th_rg7
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg7_reg,     10, 19, dehalo_logo_setting[4][7]); // dh_logo_sad_t_th_rg7
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg,  0,  7, dehalo_logo_setting[5][7]); // dh_logo_tmv_num_rg7

	// dh logo rg8 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     20, 25, dehalo_logo_setting[0][8]); // dh_logo_mv_d_th_rg8
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     26, 31, dehalo_logo_setting[1][8]); // dh_logo_mv_d_diff_th_rg8
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,      0,  9, dehalo_logo_setting[2][8]); // dh_logo_sad_d_th_rg8
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 24, 31, dehalo_logo_setting[3][8]); // dh_logo_mv_t_th_rg8
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg8_reg,     10, 19, dehalo_logo_setting[4][8]); // dh_logo_sad_t_th_rg8
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg7_rg8_reg, 16, 23, dehalo_logo_setting[5][8]); // dh_logo_tmv_num_rg8

	// dh logo rg9 setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     20, 25, dehalo_logo_setting[0][9]); // dh_logo_mv_d_th_rg9
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     26, 31, dehalo_logo_setting[1][9]); // dh_logo_mv_d_diff_th_rg9
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,      0,  9, dehalo_logo_setting[2][9]); // dh_logo_sad_d_th_rg9
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  8, 15, dehalo_logo_setting[3][9]); // dh_logo_mv_t_th_rg9
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rg9_reg,     10, 19, dehalo_logo_setting[4][9]); // dh_logo_sad_t_th_rg9
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg,  0,  7, dehalo_logo_setting[5][9]); // dh_logo_tmv_num_rg9

	// dh logo rga setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,     20, 25, dehalo_logo_setting[0][10]); // dh_logo_mv_d_th_rga
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,     26, 31, dehalo_logo_setting[1][10]); // dh_logo_mv_d_diff_th_rga
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,      0,  9, dehalo_logo_setting[2][10]); // dh_logo_sad_d_th_rga
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 24, 31, dehalo_logo_setting[3][10]); // dh_logo_mv_t_th_rga
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rga_reg,     10, 19, dehalo_logo_setting[4][10]); // dh_logo_sad_t_th_rga
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rg9_rga_reg, 16, 23, dehalo_logo_setting[5][10]); // dh_logo_tmv_num_rga

	// dh logo rgb setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     20, 25, dehalo_logo_setting[0][11]); // dh_logo_mv_d_th_rgb
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     26, 31, dehalo_logo_setting[1][11]); // dh_logo_mv_d_diff_th_rgb
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,      0,  9, dehalo_logo_setting[2][11]); // dh_logo_sad_d_th_rgb
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  8, 15, dehalo_logo_setting[3][11]); // dh_logo_mv_t_th_rgb
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgb_reg,     10, 19, dehalo_logo_setting[4][11]); // dh_logo_sad_t_th_rgb
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg,  0,  7, dehalo_logo_setting[5][11]); // dh_logo_tmv_num_rgb

	// dh logo rgc setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,     20, 25, dehalo_logo_setting[0][12]); // dh_logo_mv_d_th_rgc
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,     26, 31, dehalo_logo_setting[1][12]); // dh_logo_mv_d_diff_th_rgc
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,      0,  9, dehalo_logo_setting[2][12]); // dh_logo_sad_d_th_rgc
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg, 24, 31, dehalo_logo_setting[3][12]); // dh_logo_mv_t_th_rgc
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgc_reg,     10, 19, dehalo_logo_setting[4][12]); // dh_logo_sad_t_th_rgc
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgb_rgc_reg, 16, 23, dehalo_logo_setting[5][12]); // dh_logo_tmv_num_rgc

	// dh logo rgd setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     20, 25, dehalo_logo_setting[0][13]); // dh_logo_mv_d_th_rgd
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     26, 31, dehalo_logo_setting[1][13]); // dh_logo_mv_d_diff_th_rgd
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,      0,  9, dehalo_logo_setting[2][13]); // dh_logo_sad_d_th_rgd
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  8, 15, dehalo_logo_setting[3][13]); // dh_logo_mv_t_th_rgd
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rgd_reg,     10, 19, dehalo_logo_setting[4][13]); // dh_logo_sad_t_th_rgd
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg,  0,  7, dehalo_logo_setting[5][13]); // dh_logo_tmv_num_rgd

	// dh logo rge setting
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg,     20, 25, dehalo_logo_setting[0][14]); // dh_logo_mv_d_th_rge
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg,     26, 31, dehalo_logo_setting[1][14]); // dh_logo_mv_d_diff_th_rge
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg,      0,  9, dehalo_logo_setting[2][14]); // dh_logo_sad_d_th_rge
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 24, 31, dehalo_logo_setting[3][14]); // dh_logo_mv_t_th_rge
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_1_rge_reg,     10, 19, dehalo_logo_setting[4][14]); // dh_logo_sad_t_th_rge
	WriteRegister(KME_DEHALO6_dh_logo_ctrl_2_rgd_rge_reg, 16, 23, dehalo_logo_setting[5][14]); // dh_logo_tmv_num_rge	

	#if (IC_K24)
	if( panning_cond && mv_cond && long_term_logo_cond )
	{
		WriteRegister(KME_LOGO3_km_logo_switch_merlin8_reg, 13, 15, 3);	
	}
	else
	{
		WriteRegister(KME_LOGO3_km_logo_switch_merlin8_reg, 13, 15, 0);
	}
	#endif

	
	}
	else{
		#if (IC_K24)
		WriteRegister(KME_LOGO3_km_logo_switch_merlin8_reg, 13, 15, 0);	
		#endif
	}
}


VOID blk_logo_480_wrtAction(VOID)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLCONTEXT *s_pContext_w = GetPQLContext_m();
	#if (IC_K24)
	kme_logo3_km_logo_blk_480x270_1_RBUS kme_logo3_km_logo_blk_480x270_1_reg;
	kme_logo3_km_logo_blk_480x270_2_RBUS kme_logo3_km_logo_blk_480x270_2_reg;
	kme_logo3_km_logo_blk_480x270_3_RBUS kme_logo3_km_logo_blk_480x270_3_reg;
	mc3_logo_dh_ctrl_RBUS mc3_logo_dh_ctrl_reg;
	#endif
	kme_dm_top1_kme_dm_top1_a0_RBUS kme_dm_top1_kme_dm_top1_a0_reg;
	kme_logo0_kme_logo0_ec_RBUS kme_logo0_kme_logo0_ec_reg;
	signed short u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	signed short u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
	unsigned short u11_max_1st_rmv = s_pContext->_output_me_sceneAnalysis.u11_max_1st_rmv_with_logo; 
	unsigned short u11_max_2nd_rmv = s_pContext->_output_me_sceneAnalysis.u11_max_2nd_rmv_with_logo; 
	unsigned int blk_logo_480_th_en = 0, blk_logo_480_en = 0, hlogo_hnum_wrt_en = 0, blk_logo_480_wrt_en = 0;
	unsigned int u10_gmv_abs_th = 0, blk_logo_th_big_mv = 0, blk_logo_th_small_mv = 0;
	unsigned int u16_logo_th = 0, u8_corner_mv_th = 0, u8_rmv_th = 0, log_en = 0, logo_log_en = 0, mode_log_en = 0, mode_ver = 0, erosion_en = 0, ero_val_en = 0;
	unsigned int u8_max_mv_diff_th = 0, max_drastic_chg_cnt = 0, max_high_speed_cnt = 0;
	unsigned short u16_lt_max_mv = 0, u16_rt_max_mv = 0, u16_lb_max_mv = 0, u16_rb_max_mv = 0;
	bool u1_lt_logo = false, u1_rt_logo = false, u1_lb_logo = false, u1_rb_logo = false;
	bool u1_lt_speed = false, u1_rt_speed = false, u1_lb_speed = false, u1_rb_speed = false;
	bool u1_corner_logo_high_speed = false, u1_corner_logo_mv_drastic_chg = false;
	static unsigned char u8_ero_type_hold_cnt = 0, u8_corner_logo_high_speed_cnt = 0, u8_corner_logo_mv_drastic_chg_cnt = 0;
	static unsigned short u16_lt_max_mv_pre = 0, u16_rt_max_mv_pre = 0, u16_lb_max_mv_pre = 0, u16_rb_max_mv_pre = 0;
	unsigned int test_en = 0, test_en2 = 0, test_mode = 0;
	unsigned int i = 0, logo_credit[32] = {0};
	bool panning_cond, mv_cond, long_term_logo_cond;
	unsigned int alpha_th2 = 800;
	unsigned char u8_case_id = 0;
	#if (IC_K24)
	unsigned int replace_mv_en = 0;
	#endif
	
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg,  0,  9, &u10_gmv_abs_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 10, 14, &blk_logo_th_big_mv);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 15, 19, &blk_logo_th_small_mv);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 24, 24, &erosion_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 25, 25, &ero_val_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 27, 27, &blk_logo_480_th_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 28, 28, &blk_logo_480_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 30, 30, &hlogo_hnum_wrt_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_33_reg, 31, 31, &blk_logo_480_wrt_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg,  0,  9, &u16_logo_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 10, 10, &log_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 11, 11, &logo_log_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 12, 12, &mode_log_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 13, 13, &mode_ver);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 16, 23, &u8_corner_mv_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_44_reg, 24, 31, &u8_rmv_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_32_reg,  0,  7, &max_drastic_chg_cnt);
	ReadRegister(SOFTWARE3_SOFTWARE3_32_reg,  8, 15, &max_high_speed_cnt);
	ReadRegister(SOFTWARE3_SOFTWARE3_32_reg, 16, 23, &u8_max_mv_diff_th);
	ReadRegister(SOFTWARE2_SOFTWARE2_47_reg, 0, 0, &test_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_47_reg, 1, 3, &test_mode);
	ReadRegister(SOFTWARE2_SOFTWARE2_47_reg, 4, 4, &test_en2);
	#if (IC_K24)
	ReadRegister(SOFTWARE3_SOFTWARE3_54_reg, 26, 26, &replace_mv_en);
	#endif

	#if (IC_K24)
	kme_logo3_km_logo_blk_480x270_1_reg.regValue = IoReg_Read32(KME_LOGO3_km_logo_blk_480x270_1_reg);
	kme_logo3_km_logo_blk_480x270_2_reg.regValue = rtd_inl(KME_LOGO3_km_logo_blk_480x270_2_reg);
	kme_logo3_km_logo_blk_480x270_3_reg.regValue = rtd_inl(KME_LOGO3_km_logo_blk_480x270_3_reg);
	mc3_logo_dh_ctrl_reg.regValue = rtd_inl(MC3_logo_dh_ctrl_reg);
	#endif
	kme_dm_top1_kme_dm_top1_a0_reg.regValue = rtd_inl(KME_DM_TOP1_KME_DM_TOP1_A0_reg);
	kme_logo0_kme_logo0_ec_reg.regValue = rtd_inl(KME_LOGO0_KME_LOGO0_EC_reg);
	// patch for #204~#206 for km_logo_hog_sample_mode_sel
	panning_cond = ( s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1 ) ? 1 : 0;
	mv_cond = ( (u11_gmv_mvx >= 63) && (u11_gmv_mvx <= 66) && ( _ABS_(u10_gmv_mvy ) <= 1) ) ? 1 : 0;
	long_term_logo_cond = ( (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[26] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[27] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[28] > alpha_th2) && (s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[29] > alpha_th2) ) ? 1 : 0;	

	for(i=0; i<32; i++){
		logo_credit[i] = s_pContext->_output_FRC_LgDet.u32_still_logo_cnt[i];
	}

	if(blk_logo_480_wrt_en==0){//d9d8[31]
		return;
	}

	// detect corner max rmv
	u16_lt_max_mv = _MAX_(s_pContext->_output_me_sceneAnalysis.u11_lt_1st_max_rmv, s_pContext->_output_me_sceneAnalysis.u11_lt_2nd_max_rmv);
	u16_rt_max_mv = _MAX_(s_pContext->_output_me_sceneAnalysis.u11_rt_1st_max_rmv, s_pContext->_output_me_sceneAnalysis.u11_rt_2nd_max_rmv);
	u16_lb_max_mv = _MAX_(s_pContext->_output_me_sceneAnalysis.u11_lb_1st_max_rmv, s_pContext->_output_me_sceneAnalysis.u11_lb_2nd_max_rmv);
	u16_rb_max_mv = _MAX_(s_pContext->_output_me_sceneAnalysis.u11_rb_1st_max_rmv, s_pContext->_output_me_sceneAnalysis.u11_rb_2nd_max_rmv);
	// detect corner logo
	u1_lt_logo = (s_pContext->_output_FRC_LgDet.lt_logo_cnt_avg_IIR > u16_logo_th) ? 1 : 0;
	u1_rt_logo = (s_pContext->_output_FRC_LgDet.rt_logo_cnt_avg_IIR > u16_logo_th) ? 1 : 0;
	u1_lb_logo = (s_pContext->_output_FRC_LgDet.lb_logo_cnt_avg_IIR > u16_logo_th) ? 1 : 0;
	u1_rb_logo = (s_pContext->_output_FRC_LgDet.rb_logo_cnt_avg_IIR > u16_logo_th) ? 1 : 0;
	// turn on flag when corner spped is high
	u1_lt_speed = (u16_lt_max_mv > u8_corner_mv_th) ? 1 : 0;
	u1_rt_speed = (u16_rt_max_mv > u8_corner_mv_th) ? 1 : 0;
	u1_lb_speed = (u16_lb_max_mv > u8_corner_mv_th) ? 1 : 0;
	u1_rt_speed = (u16_rb_max_mv > u8_corner_mv_th) ? 1 : 0;

	// detect corner rmv. To prevent logo broken when rmv is large
	if((u1_lt_logo&&u1_lt_speed) || (u1_rt_logo&&u1_rt_speed) || (u1_lb_logo&&u1_lb_speed) || (u1_rb_logo&&u1_rb_speed)){
		u1_corner_logo_high_speed = true;
		u8_corner_logo_high_speed_cnt = max_high_speed_cnt;
	}else if(u8_corner_logo_high_speed_cnt>0){
		u8_corner_logo_high_speed_cnt--;
	}

	// detect corner max rmv_diff. To prevent logo broken when rmv_diff is large.
	if((u1_lt_logo && _ABS_DIFF_(u16_lt_max_mv_pre, u16_lt_max_mv)>u8_max_mv_diff_th) || (u1_rt_logo && _ABS_DIFF_(u16_rt_max_mv_pre, u16_rt_max_mv)>u8_max_mv_diff_th) || 
		(u1_lb_logo && _ABS_DIFF_(u16_lb_max_mv_pre, u16_lb_max_mv)>u8_max_mv_diff_th) || (u1_rb_logo && _ABS_DIFF_(u16_rb_max_mv_pre, u16_rb_max_mv)>u8_max_mv_diff_th)){
		u1_corner_logo_mv_drastic_chg = true;
		u8_corner_logo_mv_drastic_chg_cnt = max_drastic_chg_cnt;
	}else if(u8_corner_logo_mv_drastic_chg_cnt>0){
		u8_corner_logo_mv_drastic_chg_cnt--;
	}

	if( ( _ABS_(u11_gmv_mvx) + _ABS_(u10_gmv_mvy ) ) <= u10_gmv_abs_th )
	{
		// blk logo 480 on
		if(blk_logo_480_en == 1)
		{
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_mc_pxl_logo_source_sel = 0x1;
			#endif
		}
		if(hlogo_hnum_wrt_en == 1)
		{
			kme_dm_top1_kme_dm_top1_a0_reg.kme_hlogo_hnum = 38; // for 4k
		}
		if(blk_logo_480_th_en == 1)
		{
	//		kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = blk_logo_th_small_mv;
	//		kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = blk_logo_th_small_mv;
		}
	}
	else
	{
		// blk logo 480 off
		if(blk_logo_480_en == 1)
		{
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_mc_pxl_logo_source_sel = 0x0;
			#endif
		}
		if(hlogo_hnum_wrt_en == 1)
		{
			kme_dm_top1_kme_dm_top1_a0_reg.kme_hlogo_hnum = 8; // for 4k
		}
		if(blk_logo_480_th_en == 1)
		{
	//		kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = blk_logo_th_big_mv;
	//		kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = blk_logo_th_big_mv;
		}
	}

	if(erosion_en == 1) {
		if(u1_corner_logo_high_speed || (_MAX_( _ABS_(u11_gmv_mvx), _ABS_(u10_gmv_mvy ) ) >= 14 /*&& s_pContext->_output_me_sceneAnalysis.u2_uniform_panning == 1*/) ){
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 10;	// logo bigger, weak erosion
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 10;
			#endif
			s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 3;
			u8_ero_type_hold_cnt = 8;
		}
		else if(u8_ero_type_hold_cnt>0){
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 10;	// logo bigger, weak erosion
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 10;
			#endif
			s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 2;
			u8_ero_type_hold_cnt--;
		}
		else { 
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 22;	// logo small, strong erosion
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 26;
			#endif
			s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 1;
		}
	}

	if(test_en){
		if(test_en2){
			if(mode_ver==0){
				if(((logo_credit[0] >= 400 || logo_credit[1] >= 400 || logo_credit[6] >= 400 || logo_credit[7] >= 400 
					|| logo_credit[24] >= 400 || logo_credit[25] >= 400 || logo_credit[26] >= 400 || logo_credit[27] >= 400
					|| logo_credit[28] >= 400 || logo_credit[29] >= 400 || logo_credit[30] >= 400 || logo_credit[31] >= 400)
					&& (logo_credit[2] < 400 && logo_credit[3] < 400 && logo_credit[4] < 400 && logo_credit[5] < 400
					&& logo_credit[8] < 400 && logo_credit[9] < 400 && logo_credit[10] < 400 && logo_credit[11] < 400
					&& logo_credit[12] < 400 && logo_credit[13] < 400 && logo_credit[14] < 400 && logo_credit[15] < 400
					&& logo_credit[16] < 400 && logo_credit[17] < 400 && logo_credit[18] < 400 && logo_credit[19] < 400
					&& logo_credit[20] < 400 && logo_credit[21] < 400 && logo_credit[22] < 400 && logo_credit[23] < 400) /*&& (_ABS_(u11_gmv_mvx) < 14 && _ABS_(u10_gmv_mvy) < 14)*/)
					|| g_480_flag){
					test_mode = 3;
					u8_case_id = 1;
				}else{
					test_mode = 0; // for #317
					u8_case_id = 2;
				}
				if(s_pContext_w->_output_wrt_comreg.u1_sutitle3==true || ( panning_cond && mv_cond && long_term_logo_cond ) || g_474_flag || g_476_flag || g_510_flag){
					test_mode = 4;
					u8_case_id += 10;
				}
				else if(g_291_flag){
					if(_ABS_(u11_gmv_mvx) >= 20 && u10_gmv_mvy == 0){
						test_mode = 0;
						u8_case_id += 20;
					}
					else{
						test_mode = 2;
						u8_case_id += 30;
					}
				}
				else if(g_244_flag){
					if(_ABS_(u11_gmv_mvx) >= 30){
						test_mode = 0;
						u8_case_id += 40;
					}
				}
				else if(g_186_flag || g_511_flag || g_246_flag){
					test_mode = 0;
					u8_case_id += 50;
				}
				else if(g_62_flag){
					test_mode = 1;
					u8_case_id += 60;
				}

				
			}else{//mode_ver=1

				test_mode = 10;
				u8_case_id = 100;
				if(s_pContext_w->_output_wrt_comreg.u1_sutitle3==true || ( panning_cond && mv_cond && long_term_logo_cond ) || g_474_flag || g_476_flag || g_510_flag){
					test_mode = 4;
					u8_case_id += 10;
				}
				else if(g_291_flag){
					if(_ABS_(u11_gmv_mvx) >= 20 && u10_gmv_mvy == 0){
						test_mode = 0;
						u8_case_id += 20;
					}
				}
				else if(g_244_flag){
					if(_ABS_(u11_gmv_mvx) >= 30){
						test_mode = 0;
						u8_case_id += 30;
					}
				}
				else if(g_186_flag || g_511_flag || g_246_flag || g_244_9_flag){
					test_mode = 0;
					u8_case_id += 40;
				}
				else if(g_62_20_flag && _ABS_(u11_gmv_mvx) > 35 && _ABS_(u10_gmv_mvy) <= 4){
					test_mode = 0;
					u8_case_id += 60;
				}
				//else if(s_pContext->_output_me_sceneAnalysis.u1_detect_kimyuna){
					//test_mode = 0;
					//u8_case_id += 50;
				//}
				#if 0
				else if(_ABS_(u11_gmv_mvx) >= 60 || _ABS_(u10_gmv_mvy) >= 60){
					test_mode = 0;
					u8_case_id += 50;
				}
				else if(_ABS_(u11_gmv_mvx) >= 40 || _ABS_(u10_gmv_mvy) >= 40){
					test_mode = 1;
					u8_case_id += 60;
				}
				else if(_ABS_(u11_gmv_mvx) >= 20 || _ABS_(u10_gmv_mvy) >= 20){
					test_mode = 3;
					u8_case_id += 70;
				}
				#endif
			}
		}

		if(test_mode == 0){ // table_a
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 10;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 10;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 1;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;
			#endif
		}
		else if(test_mode == 1){ // table_b
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 22;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 15;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 1;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;
			#endif
		}
		else if(test_mode == 2){ // table_c
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 25;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 20;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 5;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 5;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;
			#endif
		}
		else if(test_mode == 3){ // table_d
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 22;	// logo small, strong erosion
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 26;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 1;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;
			#endif
		}
		else if(test_mode == 4){ // table_e
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 0;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 0;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 22;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 26;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 12;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 12;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;
			#endif
		}
		else if(test_mode == 10){ // general setting
			#if (IC_K24)
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 20;
			kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 63;

			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 5;
			kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 5;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_en = 1;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_en = 1;

			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogohstydlt_eroen = 0;
			kme_logo3_km_logo_blk_480x270_3_reg.km_logo_blk_480x270_blklogocurdlt_eroen = 0;
			#endif

			kme_logo0_kme_logo0_ec_reg.km_logo_blklogohstydlt_eroen = 0;
			kme_logo0_kme_logo0_ec_reg.km_logo_blklogocurdlt_eroen = 0;
		}
	}
	else{
		if(erosion_en == 1) {
			if(u1_corner_logo_high_speed || (_MAX_( _ABS_(u11_gmv_mvx), _ABS_(u10_gmv_mvy ) ) >= 14 /*&& s_pContext->_output_me_sceneAnalysis.u2_uniform_panning == 1*/) ){
				#if (IC_K24)
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 10;	// logo bigger, weak erosion
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 10;
				#endif
				s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 3;
				u8_ero_type_hold_cnt = 8;
			}
			else if(u8_ero_type_hold_cnt>0){
				#if (IC_K24)
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 10;	// logo bigger, weak erosion
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 10;
				#endif
				s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 2;
				u8_ero_type_hold_cnt--;
			}
			else { 
				#if (IC_K24)
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_ero_th = 22;	// logo small, strong erosion
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_th = 26;
				#endif
				s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 1;
			}
		}

		if(ero_val_en) {
			if((u11_max_1st_rmv < u8_rmv_th && u11_max_2nd_rmv < u8_rmv_th && /*(u1_lt_logo==false && u1_rt_logo==false) &&*/ u8_corner_logo_mv_drastic_chg_cnt == 0) ||
				s_pContext_w->_output_wrt_comreg.u1_sutitle3==true){
				//#389
				#if (IC_K24)
				kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 12;
				kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 12;
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 0;
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 0;
				#endif
				s_pContext_w->_output_wrt_comreg.u2_logo_ero_type = 0;
			}
			else{
				#if (IC_K24)
				kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodltcur_th = 1;
				kme_logo3_km_logo_blk_480x270_2_reg.km_logo_blk_480x270_blklogodlthsty_th = 1;
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopostdlt_en = 1;
				kme_logo3_km_logo_blk_480x270_1_reg.km_logo_blk_480x270_blklogopost_eroen = 1;
				#endif
			}
		}
	}

#if (IC_K24)
	if(replace_mv_en == 1) {
		if((u11_max_1st_rmv <= u8_rmv_th && u11_max_2nd_rmv < u8_rmv_th && /*(u1_lt_logo==false && u1_rt_logo==false) &&*/ u8_corner_logo_mv_drastic_chg_cnt == 0) ||
			s_pContext_w->_output_wrt_comreg.u1_sutitle3==true)
		{
			// replace mv on
			mc3_logo_dh_ctrl_reg.mc_logo_dh_en = 1;
			s_pContext_w->_output_wrt_comreg.u1_logo_replace_mv = 1;
		}
		else{
			// replace mv off
			mc3_logo_dh_ctrl_reg.mc_logo_dh_en = 0;
			s_pContext_w->_output_wrt_comreg.u1_logo_replace_mv = 0;
		}
	}
#else
	s_pContext_w->_output_wrt_comreg.u1_logo_replace_mv = 0;
#endif
	
	s_pContext_w->_output_wrt_comreg.u8_corner_logo_mv_drastic_chg_cnt = u8_corner_logo_mv_drastic_chg_cnt;
	s_pContext_w->_output_wrt_comreg.u8_corner_logo_high_speed_cnt = u8_corner_logo_high_speed_cnt;

	if(log_en){//d9b0[10]
		rtd_pr_memc_emerg("max_rmv,%d,%d,  replace_mv,%d,  ero_type,%d, u1_lt_logo,%d,%d,  logo_speed,%d,%d,%d,%d\n", u11_max_1st_rmv, u11_max_2nd_rmv, 
			s_pContext_w->_output_wrt_comreg.u1_logo_replace_mv, s_pContext_w->_output_wrt_comreg.u2_logo_ero_type, u1_lt_logo, u1_rt_logo,
			(u1_lt_logo&&u1_lt_speed)?1:0, (u1_rt_logo&&u1_rt_speed)?1:0, (u1_lb_logo&&u1_lb_speed)?1:0, (u1_rb_logo&&u1_rb_speed)?1:0);
	}

	if(logo_log_en){//d9b0[11]
		rtd_pr_memc_emerg("[MEMC] cnt,%d,%d,  logo,%d,%d,%d,%d,  speed_flg,%d,%d,%d,%d,  gmv,%d,%d,  logo_IIR,%d,%d,%d,%d,  rmv,%d,%d,%d,%d\n", 
			u8_corner_logo_high_speed_cnt, u8_corner_logo_mv_drastic_chg_cnt,
			u1_lt_logo, u1_rt_logo, u1_lb_logo, u1_rb_logo, u1_lt_speed, u1_rt_speed, u1_lb_speed, u1_rb_speed, u11_gmv_mvx, u10_gmv_mvy,
			s_pContext->_output_FRC_LgDet.lt_logo_cnt_avg_IIR, s_pContext->_output_FRC_LgDet.rt_logo_cnt_avg_IIR,
			s_pContext->_output_FRC_LgDet.lb_logo_cnt_avg_IIR, s_pContext->_output_FRC_LgDet.rb_logo_cnt_avg_IIR,
			u16_lt_max_mv, u16_rt_max_mv, u16_lb_max_mv, u16_rb_max_mv);
	}
	
	if(mode_log_en){//d9b0[12]
		rtd_pr_memc_emerg("mode,%d, case,%d, info,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d, info2,%d,%d,  gmv,%d,%d\n", test_mode, u8_case_id, 
			g_62_flag, g_186_flag, g_244_flag, g_244_9_flag, g_246_flag, g_474_flag, g_476_flag, g_480_flag, g_510_flag, g_511_flag,
			s_pContext_w->_output_wrt_comreg.u1_sutitle3, (panning_cond && mv_cond && long_term_logo_cond) ? 1 : 0,
			u11_gmv_mvx, u10_gmv_mvy);
	}

#if (IC_K24)
	rtd_outl(KME_LOGO3_km_logo_blk_480x270_1_reg, kme_logo3_km_logo_blk_480x270_1_reg.regValue);
	rtd_outl(KME_LOGO3_km_logo_blk_480x270_2_reg, kme_logo3_km_logo_blk_480x270_2_reg.regValue);
	rtd_outl(KME_LOGO3_km_logo_blk_480x270_3_reg, kme_logo3_km_logo_blk_480x270_3_reg.regValue);
	rtd_outl(MC3_logo_dh_ctrl_reg, mc3_logo_dh_ctrl_reg.regValue);
#endif
	rtd_outl(KME_DM_TOP1_KME_DM_TOP1_A0_reg,kme_dm_top1_kme_dm_top1_a0_reg.regValue);
	rtd_outl(KME_LOGO0_KME_LOGO0_EC_reg, kme_logo0_kme_logo0_ec_reg.regValue);

	u16_lt_max_mv_pre = u16_lt_max_mv;
	u16_rt_max_mv_pre = u16_rt_max_mv;
	u16_lb_max_mv_pre = u16_lb_max_mv;
	u16_rb_max_mv_pre = u16_rb_max_mv;
}


VOID NearRimDetect_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	unsigned int  logo_cnt_temp = 0, logo_cnt_top = 0, debug_en = 0;
	//signed short u10_gmv_mvy = (s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb);
	//signed short u11_gmv_mvx = (s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb);
	unsigned char cur_cadence = s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];
	static unsigned char u8_near_rim_hold = 0;
	unsigned char regional_v_panning_flag = 0, global_v_panning_flag = 0, regional_h_panning_flag = 0, global_h_panning_flag = 0, over_search_range_flag = 0;

	mc3_mc_nrea_rim_blend_RBUS mc3_mc_nrea_rim_blend_reg;
	mc3_mc_nrea_rim_blend_h_RBUS mc3_mc_nrea_rim_blend_h_reg;
	mc3_mc_nrea_rim_blend_reg.regValue = rtd_inl(MC3_MC_NREA_RIM_BLEND_reg);
	mc3_mc_nrea_rim_blend_h_reg.regValue = rtd_inl(MC3_MC_NREA_RIM_BLEND_H_reg);
	ReadRegister(SOFTWARE2_SOFTWARE2_56_reg, 5, 7, &debug_en);
	regional_v_panning_flag = s_pContext->_output_me_sceneAnalysis.u1_boundary_v_panning_flag;
	global_v_panning_flag = s_pContext->_output_me_sceneAnalysis.u1_vpan_for_nearrim;
	regional_h_panning_flag = s_pContext->_output_me_sceneAnalysis.u1_boundary_h_panning_flag;
	global_h_panning_flag = s_pContext->_output_me_sceneAnalysis.u1_hpan_for_nearrim;
	over_search_range_flag = s_pContext->_output_me_sceneAnalysis.u1_over_searchrange;
	
#if 1//logo info: if top region has to many logo detect, top region doesnt count --> this is to fix little shaking of logo on top region
		ReadRegister(KME_LOGO2_KME_LOGO2_80_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_84_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_88_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_8C_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_90_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_94_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_98_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
		ReadRegister(KME_LOGO2_KME_LOGO2_9C_reg,20,29,&logo_cnt_temp);
		logo_cnt_top += logo_cnt_temp;
#endif
	if (pParam->u1_mc_near_rim_blending_en == 1)
	{

		#if 1
		if (regional_h_panning_flag)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 1;
		}
		else if (regional_v_panning_flag)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		else if (over_search_range_flag)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 1;
		}
		else if (((debug_en>>0)&0x1) == 1)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		else
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		
		if(cur_cadence != _CAD_VIDEO 
			&& (regional_h_panning_flag || regional_v_panning_flag || over_search_range_flag)){
			u8_near_rim_hold = 3;
		}
		if(u8_near_rim_hold > 0){
			u8_near_rim_hold--;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 1;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 0;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 0;
			if(logo_cnt_top > 150 && MEMC_Pixel_LOGO_For_SW_SLD == 0){
				WriteRegister(MC_MC_18_reg, 25, 25, 1);//YE Test Logo
			}
		}
		else
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 0;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 1; // make 100 not good (line garbage)
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 2;
			#if IC_K7LP
			WriteRegister(MC_MC_18_reg, 25, 25, 0);//YE Test Logo
			#endif
		}

		if(((debug_en>>2)&0x1) == 1){
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 0;
		}
		if(((debug_en>>1)&0x1) == 1){
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 0;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 0;
		}
		#else

		if (u11_gmv_mvx > 2*u10_gmv_mvy && _ABS_(u10_gmv_mvy) < 10)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 1;
		}
		else if (u10_gmv_mvy > 2*u11_gmv_mvx && _ABS_(u11_gmv_mvx) < 10)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 1;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		else if (((debug_en>>0)&0x1) == 1)
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		else
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_top_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_bot_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_lft_en = 0;
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_det_rht_en = 0;
		}
		
		if(((s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status==3 || s_pContext->_output_FRC_LgDet.u1_logo_PurePanning_status== 4)&&(s_pContext->_output_FRC_LgDet.u1_logo_NearRim_logo_status==1))
			|| (s_pContext->_output_frc_sceneAnalysis.u8_dh_condition_dhbypass == 1 /*&& (Get_DISPLAY_PANEL_TYPE() == P_LVDS_2K1K)*/) || (((debug_en>>2)&0x1) == 1)){
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 0;
			//printk("[YE_MEMC_Logo]  =Case 1= logo_cnt_top=%d ",logo_cnt_top );
			if(logo_cnt_top > 150 && MEMC_Pixel_LOGO_For_SW_SLD == 0){
				WriteRegister(MC_MC_18_reg, 25, 25, 1);//YE Test Logo
			}	
		}
		else if(s_pContext->_output_me_sceneAnalysis.u1_boundary_v_panning_flag == 1){
			// WriteRegister(MC3_MC_NREA_RIM_BLEND_reg_addr, 0, 0, 1);
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 1;
			//rtd_pr_rtc_info("[YE_MEMC_Logo] ==Case 2== logo_cnt_top=%d ",logo_cnt_top );
			if(logo_cnt_top > 150 && MEMC_Pixel_LOGO_For_SW_SLD == 0){
				WriteRegister(MC_MC_18_reg, 25, 25, 1);//YE Test Logo
			}	
		}
		else
		{
			mc3_mc_nrea_rim_blend_reg.mc_near_rim_blending_en = 1;
			WriteRegister(MC_MC_18_reg, 25, 25, 0);//YE Test Logo
			//rtd_pr_memc_info("[YE_MEMC_Logo] ===Case 3=== logo_cnt_top=%d ",logo_cnt_top);
		}

		if((s_pContext->_output_me_sceneAnalysis.u1_over_searchrange == 1) || (s_pContext->_output_me_sceneAnalysis.u1_vpan_for_nearrim ==1)){
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 0;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 0;
		}
		else if (((debug_en>>1)&0x1) == 1){
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 0;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 0;
		}
		else{
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_invld_bypass = 1;
			mc3_mc_nrea_rim_blend_h_reg.mc_near_rim_blending_duplicate_sel = 2;
		}
		#endif
		// rtd_pr_memc_notice("[MEMC] VPanning: %d\n", s_pContext->_output_me_sceneAnalysis.u1_boundary_h_panning_flag);
		rtd_outl(MC3_MC_NREA_RIM_BLEND_reg, mc3_mc_nrea_rim_blend_reg.regValue);
		rtd_outl(MC3_MC_NREA_RIM_BLEND_H_reg, mc3_mc_nrea_rim_blend_h_reg.regValue);
	}
	
}

VOID Mc2_var_lpf_en_wrtRegister(unsigned char value)
{
	WriteRegister(MC2_MC2_50_reg,0,1, value);
}


VOID Mc2_var_lpf_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	PQL_INPUT_FRAME_RATE in_fmRate = s_pContext->_external_data._input_frameRate;
	unsigned char  u8_cadence_Id = s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];
	unsigned char u1_ori_reg_mc_var_lpf_en = 0x3;

	static unsigned char status = 0;
	unsigned int log_en = 0;

	if(s_pParam->_param_frc_sceneAnalysis.u1_mc2_var_lpf_wrt_en == 0) // 0906,lisa,temporal use, can be change if sync all dynamicPQ from K2
		return;


	if(s_pContext->_external_data.u8_InputVSXral_FrameRepeatMode > 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u8_HDR_PicChg_prt_apply > 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u8_OSDBrightnessBigChg_prt_apply > 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u8_OSDContrastBigChg_prt_apply> 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else 	if(s_pContext->_output_filmDetectctrl.u8_flbk_lvl_cad_cnt > 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_external_info.u16_MEMCMode == 3)  // MEMC OFF
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if((in_fmRate == _PQL_IN_60HZ || in_fmRate == _PQL_IN_50HZ ) && u8_cadence_Id == _CAD_VIDEO)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1  && s_pContext->_output_frc_sceneAnalysis.u1_still_frame == 0)
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag ==2)  // pure slow pan
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else if(s_pContext->_output_frc_sceneAnalysis.u1_Swing_true )
	{
		u1_ori_reg_mc_var_lpf_en= 0x0;
	}
	else
	{
		if(s_pContext->_external_data._output_mode == _PQL_OUT_VIDEO_MODE)//sync from Mid_Mode_SetInOutMode() setting
			u1_ori_reg_mc_var_lpf_en = 0x3;
		if(s_pContext->_external_data._output_mode == _PQL_OUT_PC_MODE)
			u1_ori_reg_mc_var_lpf_en = 0x0;
	}

	Mc2_var_lpf_en_wrtRegister(u1_ori_reg_mc_var_lpf_en);

	if(u8_K24987_flag){
		if(status == 0){
			//WriteRegister(MC2_MC2_58_reg, 0, 7, 32); // x_th
			//WriteRegister(MC2_MC2_58_reg, 8, 11, 4); // slope
			WriteRegister(MC2_MC2_58_reg, 12, 15, 3); // y_min
			//WriteRegister(MC2_MC2_68_reg, 18, 19, 0); // 9 tap
			status = 1;
		}
	}else{
		if(status == 1){
			//WriteRegister(MC2_MC2_58_reg, 0, 7, 32); // x_th
			//WriteRegister(MC2_MC2_58_reg, 8, 11, 4); // slope
			WriteRegister(MC2_MC2_58_reg, 12, 15, 8); // y_min
			//WriteRegister(MC2_MC2_68_reg, 18, 19, 2); // 33 tap
			status = 0;
		}
	}
	if(log_en){
		rtd_pr_memc_notice("[%s][%x]\n", __FUNCTION__, rtd_inl(MC2_MC2_58_reg));
	}

}

VOID MC_Unsharp_Mask_wrtRegister(unsigned char mc_poly_intp_en, unsigned char mc_mvd_intp_en)
{
	WriteRegister(MC_MC_40_reg,0,1, mc_poly_intp_en);
	WriteRegister(MC_MC_40_reg,6,7, mc_mvd_intp_en);
}


VOID MC_Unsharp_Mask_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	PQL_INPUT_FRAME_RATE in_fmRate = s_pContext->_external_data._input_frameRate;
	unsigned char  u8_cadence_Id = s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];
	static  unsigned int u5_Unsharp_Mask_holdfrm =0x0;
	unsigned char mc_poly_intp_en=0x3;
	unsigned char mc_mvd_intp_en=0x3;
	short  u11_gmv_mvx = s_pContext->_output_read_comreg.s11_me_GMV_1st_vx_rb;
	short  u10_gmv_mvy = s_pContext->_output_read_comreg.s10_me_GMV_1st_vy_rb;
	unsigned int  u25_me_aDTL = s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	unsigned int slow_en;
	ReadRegister(SOFTWARE3_SOFTWARE3_50_reg, 28, 28, &slow_en);

	if(pParam->u1_Unsharp_Mask_wrt_en== 0)
		return;

	if(s_pContext->_external_data._output_mode == _PQL_OUT_VIDEO_MODE)
	{
		if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag || s_pContext->_output_wrt_comreg.u1_ME1_rnd_Slow_Convergence_true)
		{
			mc_poly_intp_en = 0x0;
			mc_mvd_intp_en =0x0;
			u5_Unsharp_Mask_holdfrm=0X10;
		}
		else if((in_fmRate == _PQL_IN_60HZ || in_fmRate == _PQL_IN_50HZ ) && u8_cadence_Id == _CAD_VIDEO)
		{
			mc_poly_intp_en = 0x0;
			mc_mvd_intp_en =0x0;
			u5_Unsharp_Mask_holdfrm=0X10;
		}
		else if(s_pContext->_output_me_sceneAnalysis.u1_RP_detect_true >= 1  && s_pContext->_output_frc_sceneAnalysis.u1_still_frame == 0)
		{
			mc_poly_intp_en = 0x0;
			mc_mvd_intp_en =0x0;
			u5_Unsharp_Mask_holdfrm=0X10;
		}
		else if(_ABS_(u11_gmv_mvx)<=12&&_ABS_(u10_gmv_mvy)<=12&&u25_me_aDTL>=900000&&slow_en)//RepeatMode_OFF
		{
			mc_poly_intp_en = 0x0;
			mc_mvd_intp_en =0x0;
			u5_Unsharp_Mask_holdfrm=0X10;
		}
		else if(u5_Unsharp_Mask_holdfrm >0)
		{
			u5_Unsharp_Mask_holdfrm--;
		}
		else
		{
			mc_poly_intp_en = 0x3;
			mc_mvd_intp_en =0x3;
		}

		MC_Unsharp_Mask_wrtRegister( mc_poly_intp_en,  mc_mvd_intp_en);

	}
}


static _str_MC_SObj_table  MC_SObj_table[3]={
	{CTRL_N,CTRL_N},	/*0.load default*/
	{0x8,CTRL_N,CTRL_N},		/*1*/
	{0xa,0xa,CTRL_N},		/*2*/
};

_str_MC_SObj_table *fwif_MEMC_get_MC_SObj_table(unsigned char level)
{
//	if (MC_SObj_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 2)
		return (_str_MC_SObj_table *)&MC_SObj_table[0];
	else
		return (_str_MC_SObj_table *)&MC_SObj_table[level];
}

VOID   MC_SObj_wrtRegister(_str_MC_SObj_table *MC_SObj_table)
{
	WriteRegister(MC_MC_B8_reg, 12, 15, 	MC_SObj_table->mc_sobj_slop1);
	WriteRegister(MC_MC_BC_reg, 16, 19,	MC_SObj_table->mc_sobj_ymin0);
	WriteRegister(MC_MC_BC_reg, 8, 13, 	MC_SObj_table->mc_sobj_ymin1);
}


VOID MC_SObj_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_MC_SObj_table *tmp_MC_SObj_table = NULL;

	if(pParam->u1_MCSobj_wrt_en== 0)
		return;

	if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 2){   // pure slow pan
		table_level = 1;
		tmp_MC_SObj_table = fwif_MEMC_get_MC_SObj_table(table_level);
		tmp_MC_SObj_table->mc_sobj_ymin0= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_ymin1;
		tmp_MC_SObj_table->mc_sobj_ymin1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_slop1;
	}
	#if Pro_tv030
	else if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag == 1){   //  normal pan
		table_level = 2;
		tmp_MC_SObj_table = fwif_MEMC_get_MC_SObj_table(table_level);
		tmp_MC_SObj_table->mc_sobj_ymin1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_slop1;
	}
	#endif
	else if(s_pContext->_output_wrt_comreg.u1_MC_SmallObject_type==1)
	{
		table_level = 2;
		tmp_MC_SObj_table = fwif_MEMC_get_MC_SObj_table(table_level);
		tmp_MC_SObj_table->mc_sobj_ymin1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_slop1;
	}
	else{
		table_level = 0;
		tmp_MC_SObj_table = fwif_MEMC_get_MC_SObj_table(table_level);

		tmp_MC_SObj_table->mc_sobj_slop1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_ymin0;
		tmp_MC_SObj_table->mc_sobj_ymin0= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_ymin1;
		tmp_MC_SObj_table->mc_sobj_ymin1= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_mc_sobj_slop1;
	}
	MC_SObj_wrtRegister(tmp_MC_SObj_table);
}


static _str_ME2_SObj_table  ME2_SObj_table[5]={
	{CTRL_N,CTRL_N,CTRL_N,CTRL_N},		/*0.load default*/
	{CTRL_N,0x80,CTRL_N,CTRL_N},		/*1*/
	{CTRL_N,CTRL_N,CTRL_N,0x20},			/*2*/
	{CTRL_N,0x10,CTRL_N,0x20},			/*3*/
	{0x1c00,0x380,0x38,0x0},	/*4*/
};

_str_ME2_SObj_table *fwif_MEMC_get_ME2_SObj_table(unsigned char level)
{
//	if (ME2_SObj_table == NULL) {
//		return NULL;
//	}
//	if( level==255 || level==0)
	if(level > 4)
		return (_str_ME2_SObj_table *)&ME2_SObj_table[0];
	else
		return (_str_ME2_SObj_table *)&ME2_SObj_table[level];
}

VOID   ME2_SObj_wrtRegister(_str_ME2_SObj_table *ME2_SObj_table)
{
	WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_D4_reg, 17, 29, 		ME2_SObj_table->me2_sec_small_object_sad_th);
	WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_D8_reg, 0, 9, 		ME2_SObj_table->me2_sec_small_object_sm_mv_th);
	WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_D8_reg, 10, 15,		ME2_SObj_table->me2_sec_small_object_ip_pi_mvdiff_gain);
	WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_D8_reg, 16, 21, 		ME2_SObj_table->me2_sec_small_object_ph_mvdiff_gain);
}

VOID ME2_SObj_Update_Type(VOID)
{
	_PQLCONTEXT* s_pContext_w = GetPQLContext_m();
	unsigned int u3_type = 0;

	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg, 24, 26, &u3_type);

	if(u3_type!=0){
		s_pContext_w->_output_wrt_comreg.u1_ME2_SmallObject_type = u3_type;
	}
}

VOID ME2_SObj_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	//_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char table_level = 255;/* 255->load defaule */
	_str_ME2_SObj_table *tmp_ME2_SObj_table = NULL;

	if(pParam->u1_ME2Sobj_wrt_en== 0)
		return;

	ME2_SObj_Update_Type();

	if(s_pContext->_output_wrt_comreg.u1_ME2_SmallObject_type==1)  // more me1
	{
		table_level = 1;
		tmp_ME2_SObj_table =fwif_MEMC_get_ME2_SObj_table(table_level);
		tmp_ME2_SObj_table->me2_sec_small_object_sad_th			=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sad_th;
		tmp_ME2_SObj_table->me2_sec_small_object_ip_pi_mvdiff_gain	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ip_pi_mvdiff_gain;
		tmp_ME2_SObj_table->me2_sec_small_object_ph_mvdiff_gain		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ph_mvdiff_gain;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME2_SmallObject_type==2)  // more me2
	{
		table_level = 1;
		tmp_ME2_SObj_table =fwif_MEMC_get_ME2_SObj_table(table_level);
		tmp_ME2_SObj_table->me2_sec_small_object_sad_th			=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sad_th;
		tmp_ME2_SObj_table->me2_sec_small_object_sm_mv_th		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sm_mv_th;
		tmp_ME2_SObj_table->me2_sec_small_object_ip_pi_mvdiff_gain	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ip_pi_mvdiff_gain;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME2_SmallObject_type==3)  // more me2
	{
		table_level = 1;
		tmp_ME2_SObj_table =fwif_MEMC_get_ME2_SObj_table(table_level);
		tmp_ME2_SObj_table->me2_sec_small_object_sad_th			=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sad_th;
		tmp_ME2_SObj_table->me2_sec_small_object_ip_pi_mvdiff_gain	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ip_pi_mvdiff_gain;
	}
	else if(s_pContext->_output_wrt_comreg.u1_ME2_SmallObject_type==4)  // force me1
	{
		table_level = 1;
		tmp_ME2_SObj_table =fwif_MEMC_get_ME2_SObj_table(table_level);
	}
	else{
		table_level = 1;
		tmp_ME2_SObj_table =fwif_MEMC_get_ME2_SObj_table(table_level);
		tmp_ME2_SObj_table->me2_sec_small_object_sad_th			=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sad_th;
		tmp_ME2_SObj_table->me2_sec_small_object_sm_mv_th			=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_sm_mv_th;
		tmp_ME2_SObj_table->me2_sec_small_object_ip_pi_mvdiff_gain	=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ip_pi_mvdiff_gain;
		tmp_ME2_SObj_table->me2_sec_small_object_ph_mvdiff_gain		=	s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_me2_sec_small_object_ph_mvdiff_gain;
	}

	ME2_SObj_wrtRegister(tmp_ME2_SObj_table);

}

VOID MC_blend_for_small_object(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int u1_force_g_sport = 0, u1_force_g_sport_db = 0;
	static bool u1_set_pre = false;
	mc_mc_b0_RBUS mc_mc_b0;
	mc_mc_28_RBUS mc_mc_28;
	mc_mc_b0.regValue = rtd_inl(MC_MC_B0_reg);
	mc_mc_28.regValue = rtd_inl(MC_MC_28_reg);

	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg,  0, 0, &u1_force_g_sport_db);
	ReadRegister(SOFTWARE2_SOFTWARE2_38_reg,  1, 1, &u1_force_g_sport);

	if(g_ProjectID==VIP_Project_ID_TV010 && u1_force_g_sport_db){
		if(u1_force_g_sport){
			g_new_sport_mode = true;
		}else {
			g_new_sport_mode = false;
		}
	}

	if(pParam->u1_mc_blend_for_small_object_en== 0) //d8a0[31]
		return;

	if(g_new_sport_mode && s_pContext->_output_me_sceneAnalysis.u1_SportScene){
		mc_mc_b0.mc_bld_bypass = 1;
		//mc_mc_b0.mc_bld_med3_bypass = 1;//z_med3
		//mc_mc_b0.mc_bld_z_type_med3 = 2;//zz_avg
		//mc_mc_b0.mc_bld_w_type = 2;//ww_avg
		mc_mc_b0.mc_bld_z_type_flbk = 0;//zero block
		mc_mc_b0.mc_bld_flbk_bypass = 2;
		mc_mc_28.mc_fb_lvl_force_en = 1;
		mc_mc_28.mc_fb_lvl_force_value = 64;
		//mc_mc_28.mc_fb_izpz_mod = 2;//zz_avg
		u1_set_pre = true;
	}else if(u1_set_pre==true){
		mc_mc_b0.mc_bld_bypass = 0;
		//mc_mc_b0.mc_bld_med3_bypass = 0;//z_med3
		//mc_mc_b0.mc_bld_z_type_med3 = 3;//zz_avg
		//mc_mc_b0.mc_bld_w_type = 3;//ww_avg
		mc_mc_b0.mc_bld_z_type_flbk = 3;//zz_avg
		mc_mc_b0.mc_bld_flbk_bypass = 0;
		mc_mc_28.mc_fb_lvl_force_en = 0;
		mc_mc_28.mc_fb_lvl_force_value = 0;
		//mc_mc_28.mc_fb_izpz_mod = 3;//zz_avg
		u1_set_pre = false;
	}
	rtd_outl(MC_MC_B0_reg, mc_mc_b0.regValue);
	rtd_outl(MC_MC_28_reg, mc_mc_28.regValue);
}


VOID MC_blend_alpha_wrtRegister(unsigned int kmc_blend_y_alpha,unsigned int blend_uv_alpha)
{
	WriteRegister(IPPRE_IPPRE_04_reg, 4, 11, kmc_blend_y_alpha);
	WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, blend_uv_alpha);
}

VOID MC_blend_alpha_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	static  unsigned int u32_debounce =0x0,u5_blend_alpha_holdfrm =0x0;
	unsigned int u26_aAPL_th,u26_aDTL_th;
	unsigned int u26_aAPLi_rb=s_pContext->_output_read_comreg.u26_me_aAPLi_rb;
	unsigned int u26_aAPLp_rb=s_pContext->_output_read_comreg.u26_me_aAPLp_rb;
	unsigned int u26_aDTL_rb=s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	unsigned int tmp_kmc_blend_y_alpha=0;
	unsigned int tmp_blend_uv_alpha =0;

	if(u32_debounce ==0x0)
	{
		u26_aAPL_th = 0x140000;
		u26_aDTL_th = 0x60000;
	}
	else
	{
		u26_aAPL_th = 0x1e0000;  // 0x140000 *3/2
		u26_aDTL_th = 0x40000;  // 0x60000 *2/3
	}

	if(((u26_aAPLi_rb+ u26_aAPLp_rb)/2  < (u26_aAPL_th+u32_debounce)) && (u26_aDTL_rb >u26_aDTL_th))
	{
		tmp_kmc_blend_y_alpha = 0xf0;
		tmp_blend_uv_alpha	= 0x30;

		u32_debounce = 0x30000;
		u5_blend_alpha_holdfrm =0x10;
	}
	else if(u5_blend_alpha_holdfrm >0)
	{
		u5_blend_alpha_holdfrm = u5_blend_alpha_holdfrm -1;
	}
	else
	{
		u32_debounce = 0x0;
		u5_blend_alpha_holdfrm = 0x0;

		tmp_kmc_blend_y_alpha = s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_kmc_blend_y_alpha;
		tmp_blend_uv_alpha	= s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_kmc_blend_uv_alpha;
	}

	MC_blend_alpha_wrtRegister(tmp_kmc_blend_y_alpha,tmp_blend_uv_alpha);

}

#if 0 //move to memc_identify_ctrl.c
#define MEMC_PERFORMANCE_SETTING_TABLE_MAX 35 //256
#define MEMC_PERFORMANCE_SETTING_ITEM_MAX 45
const unsigned int MEMC_setting_Table[/*MEMC_PERFORMANCE_SETTING_TABLE_MAX*/][MEMC_PERFORMANCE_SETTING_ITEM_MAX][MEMC_PERFORMANCE_SETTING_MAX] = 
{
	//#0
	//do nothing -> return all values
	{},

	//#1
	/*casino_royale_halo_1_09_00.mp4*/
	/*THE MATRIX RELOADED.4khdr_5_short.mp4*/
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0xffffffff},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0xffffffff},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
	},

	//#2
	/*THE_ECLIPSE.fhd24_01.mkv*/
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0x11111111},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0x11111111},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
	},

	//#3
	/*fusion_PW_120Hz_l_Robot_(SD_NTSC)_02.mpg*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{KME_DEHALO_KME_DEHALO_FC_reg, 23, 23, 1},//FRC_TOP__KME_DEHALO__dh_dtl_gain_en
		{KME_DEHALO_KME_DEHALO_FC_reg, 20, 22, 5},//FRC_TOP__KME_DEHALO__dh_fb_dtl_shift
		{KME_DEHALO_KME_DEHALO_F8_reg, 24, 31, 128},//FRC_TOP__KME_DEHALO__reg_dh_dtl_curve_y1
 	},
	
	//#4
	/*4K.znds.com]ShutUpAndPlay.Berlin.2014.2160p.HDTV.HEVC-jTV-50p-3840x2160*/
	//0:40-0:43
	{
		{KME_DEHALO_KME_DEHALO_FC_reg, 23, 23, 0},
	},

	//#5 undo mask
	/*25 0:20, 1:24, 03:17*/
	/* 3:32*/
	{
		{KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, 0},
	},

	//#6 meander
	{
		{KME_TOP_KME_TOP_08_reg, 2, 2, 1}, //reg_frame_meander_force_en
		{KME_TOP_KME_TOP_08_reg, 3, 3, 1}, //reg_frame_scan_meander_value
	},

	//#7 HALO
	/*Martian.4KHDR_4_contrast.mp4*/
	/*Blade Runner.4khdr_06.mp4*/
	/*CAPTAIN_AMERICA__THE_FIRST_AVENGER_4KHDR15.mp4*/
	/*Transformers.4khdr_1.mp4*/
	/*MI_III.c03.short.mp4*/
	/*DTS X????mkv 2:40, 9:11*/
	/*30006 33s*/
	/*7002 _25Hz_ 5:46*/
	/*60017 1 0:07*/
	/* 0:10 0:40*/
	/*C0013 1:08*/
	/*60026*/
	/*7006 0:20*/
	/* 0:12~0:18*/
	/* 01 15s~21s*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{KME_DEHALO5_PHMV_FIX_35_reg, 22,22, 1},
	},
		
	//#8
	/*Satelite_1920x1080_24_362.avi*/
	/*4K.znds.com]ShutUpAndPlay.Berlin.2014.2160p.HDTV.HEVC-jTV-50p-3840x2160*/
	//0:28-0:29   0:58-1:00   01:46-01:48	 02:33-02:34
	{
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
	},

	//#9
	/*MI3_17_M2TS*/
	/*TobyFree.com - 8K UHD Test Pattern H.264 MP4 [4320p].mp4*/
	/*1080P-motion-res-test-pattern*/
	/*7.12.02.movZonePlate_AVC1080P60.mp4*/
	/*Transformer.3.fly_men_short*/
	/*avsync_cont-4000*/
	{
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 255},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
	},

	//#10 FB
	/*8004_ 0:05*/
	/*4K023transporter_explosion*/
	/*30012_IDT_Eureka_moon*/
	/*c001 0:01*/
	
	{
		{KMC_BI_bi_top_01_reg, 0, 0, 0},
		{MC_MC_28_reg,		  14,14, 1},
		{MC_MC_28_reg,		  15,22, 0},
	},

	//#11
	/*7.12.02.movZonePlate_AVC1080P60.mp4*/
	/*01.E_CMO-23_98psf.mp4*/
	{
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
		//{KIWI_REG(FRC_TOP__PQL_1__pql_fb_ctrl_en_ADDR), 0},//Merlin7 do not have it 
		{MC_MC_B0_reg, 20, 27, 0},//FRC_TOP__MC__reg_mc_bld_flbk_lvl_ADDR
	},

	//#12
	/*DNM_cityscapes 720p60*/
	{
		{MC_MC_28_reg, 14, 14, 1},
		{MC_MC_28_reg, 15, 22, 0},
		{KME_ME1_TOP1_ME1_COMMON1_10_reg, 8, 17, 32},
		{KME_ME1_TOP1_ME1_COMMON1_10_reg,18, 27, 32},
		{KME_ME1_TOP1_ME1_COMMON1_12_reg, 16, 31, 65532},
		{KME_TOP_KME_TOP_04_reg, 29, 29, 0},
	},

	//#13 HALO+FB
	/*#240001_Satelite 0:04*/
	/*8008*/
	/* 2:08*/
	/*60015-Woke from home 13s*/
	/*60016_work form home2 10s 12s*/
	/*DTS X????mkv 4:56*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{KME_DEHALO5_PHMV_FIX_35_reg, 22,22, 1},
		{KMC_BI_bi_top_01_reg, 0, 0, 0},
		{MC_MC_28_reg,		  14,14, 1},
		{MC_MC_28_reg,		  15,22, 0},
	},

	//#14 flp_alp
	{
		{KME_IPME_KME_IPME_8C_reg,  0,  8, 0x16},
		{KME_IPME_KME_IPME_8C_reg,  9, 17, 0x16},
		{KME_IPME_KME_IPME_8C_reg, 18, 26, 0x14},
		{KME_IPME_KME_IPME_90_reg,  0,  8, 0x14},
		{KME_IPME_KME_IPME_90_reg,  9, 17, 0x12},
		{KME_IPME_KME_IPME_90_reg, 18, 26, 0x12},
		{KME_IPME_KME_IPME_94_reg,  0,  8, 0x10},	
		{KME_IPME_KME_IPME_94_reg,  9, 17, 0x16},
		{KME_IPME_KME_IPME_94_reg, 18, 26, 0x16},
		{KME_IPME_KME_IPME_98_reg,  0,  8, 0x14},
		{KME_IPME_KME_IPME_98_reg,  9, 17, 0x14},
		{KME_IPME_KME_IPME_98_reg, 18, 26, 0x12},
		{KME_IPME_KME_IPME_04_reg,  0,  8, 0x12},
		{KME_IPME_KME_IPME_04_reg,  9, 17, 0x10},
	},

	//#15
	/*06.Sharks.mp4*/	
	/*H_Move_fast(1080_24p)*/
	/* 01 15s~21s*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
		{IPPRE_IPPRE_04_reg, 4, 11, 100},//FRC_TOP__IPPRE__reg_kmc_blend_y_alpha
		{IPPRE_IPPRE_04_reg, 16, 23, 255},//FRC_TOP__IPPRE__reg_kmc_blend_uv_alpha
	},

	//#16
	/*taxi3_ntsc_n1.m2t*/
	/*The Art of Flight disk: 46"26 antenna broken when scene pans*/
	/* 01 15s~21s*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
		{KME_ME2_CALC0_KME_ME2_CALC0_D4_reg, 16, 16, 0},//FRC_TOP__KME_ME2_CALC0__reg_kme_me2_sec_small_object_en
		{KME_ME2_CALC0_KME_ME2_CALC0_DC_reg, 0, 0, 0},//FRC_TOP__KME_ME2_CALC0__reg_kme_me2_fst_small_object_en
	},

	//#17
	/*Happy_Gilmore_Longdrive_1080I60*/
	/* 01 15s~21s*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{MC_MC_B4_reg, 16, 23, 255},//FRC_TOP__MC__reg_mc_bld_mvd_y_min
		{MC_MC_B4_reg, 24 ,31, 255},//FRC_TOP__MC__reg_mc_bld_mvd_y_max
		{MC_MC_B8_reg,11,11, 0},//FRC_TOP__MC__reg_mc_sobj_en_ADDR
	},

	//#18
	/*FRC_Spideman_hd_demo_04.mkv*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 1},//FRC_TOP__KME_DEHALO__reg_dh_en
		{KME_DEHALO_KME_DEHALO_70_reg, 4, 4,1},//FRC_TOP__KME_DEHALO__dh_pfv_conf_gen_andor_fb_sel
		{KME_DEHALO_KME_DEHALO_B0_reg, 12, 19,0},//FRC_TOP__KME_DEHALO__reg_dh_occl_gen_sim_thr
		{KME_DEHALO_KME_DEHALO_D4_reg, 6, 11,63},//FRC_TOP__KME_DEHALO__dh_pfv_gen_force_dehalo_level
		{KME_DEHALO_KME_DEHALO_D4_reg, 18, 23,63},//FRC_TOP__KME_DEHALO__dh_pfv_gen_force_dehalo_level2
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 95},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
	},

	//#19
	//youtube: Above NYC-Filmed in 12K
	//playback 8K-Switzerland-24p-20180713.mp4(tv030)
	{	
		{KME_ME1_TOP0_KME_ME1_DRP_reg, 31, 31, 0x1},//FRC_TOP__KME_ME1_TOP0__me1_drp_en_ADDR
	},

	//#20
	/*00027.m2ts*/
	{
		{MC2_MC2_50_reg,0,1, 0},//FRC_TOP__MC2__reg_mc_var_lpf_en
	},

	//#21
	/*DMN Cityscapes 720p60-breakup.mp4*/
	/*Samsara 54"42:fire black hole*/
	/*Samsara 1"29"14:sun light flash when passing through high frequency*/
	/*Valley of fire_breakup.mp4*/
	/*HQV_text_rot35_MPG1080P24.m2ts*/
	{
		{KME_DEHALO_KME_DEHALO_10_reg, 0, 0, 0},//FRC_TOP__KME_DEHALO__reg_dh_en
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
		//{FRC_TOP__PQL_0__pql_patch_dummy_e4_ADDR, 29, 28, 0},//Merlin7 does not have it
		{MC2_MC2_20_reg, 0, 2, 0},//logo off
	},

	//#22
	/*Midway.4khdr_13_Propeller*/
	{
		{MC2_MC2_20_reg, 0, 1, 0},//FRC_TOP__MC2__reg_mc_logo_en
		{KME_DEHALO_KME_DEHALO_F8_reg, 24, 31, 0x32},//FRC_TOP__KME_DEHALO__reg_dh_dtl_curve_y1
		{KME_DEHALO_KME_DEHALO_FC_reg, 20, 22, 6},//FRC_TOP__KME_DEHALO__dh_fb_dtl_shift
	},
	
	//#23
	/*Valley of fire_breakup.mp4*/	
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg,15,15,1},//reg_vbuf_ip_1st_gmv_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg,16,16,1},//reg_vbuf_ip_1st_zmv_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg,15,15,1},//reg_vbuf_pi_1st_gmv_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg,16,16,1},//reg_vbuf_pi_1st_zmv_en
		{KME_ME1_TOP2_KME_ME1_TOP2_34_reg,0,0,0},//FRC_TOP__KME_ME1_TOP2__me1_acdc_pk_en
		{KME_ME2_CALC0_KME_ME2_CALC0_A4_reg,9,9,0},//FRC_TOP__KME_ME2_CALC0__me2_acdc_pk_en
	},

	//#24
	//Montage_M_ROT-720p50.mpg
	{
		//{FRC_TOP__PQL_0__pql_patch_dummy_e4_ADDR,7,7, 0},//Merlin7 does not have it
		{KME_DEHALO_KME_DEHALO_F8_reg, 24, 31, 0},//FRC_TOP__KME_DEHALO__reg_dh_dtl_curve_y1
		{KME_DEHALO_KME_DEHALO_FC_reg,7,0, 0x00},//FRC_TOP__KME_DEHALO__reg_dh_dtl_curve_y2_ADDR
		{KMC_BI_bi_top_01_reg,2,3, 0},//FRC_TOP__KMC_BI__bi_fb_mode_ADDR
		//{FRC_TOP__PQL_1__pql_wr_dhclose_wrt_en_ADDR,4,4, 0},//Merlin7 does not have it
		{KME_DEHALO_KME_DEHALO_BC_reg,22,17, 0x3f},//FRC_TOP__KME_DEHALO__reg_dh_pst_occl_type_thr_ADDR
		{MC_MC_B8_reg,11,11, 0},//FRC_TOP__MC__reg_mc_sobj_en_ADDR
		{MC_MC_B4_reg,23,16, 0x00},//FRC_TOP__MC__reg_mc_bld_mvd_y_min_ADDR
		{MC_MC_B4_reg,31,24, 0x00},//FRC_TOP__MC__reg_mc_bld_mvd_y_min_ADDR
		//{KIWI_REG(FRC_TOP__PQL_1__pql_fb_ctrl_en_ADDR), 0},//Merlin7 do not have it 
		{MC_MC_B0_reg, 20 ,27, 0},//FRC_TOP__MC__reg_mc_bld_flbk_lvl
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
	},

	//#25
	//Emperor_offical_trailer  33s
	{
		//	BG repeat detect
		//{FRC_TOP__PQL_0__pql_patch_dummy_e8_ADDR, 11, 11, 1},//Merlin7 does not have it
		//gmvd
		//pOutput->u1_casino_RP_detect_true =1;
		
		//	lfsr_mask
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0x33333333},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0x33333333},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
		// ME1 cddpnt rnd
		{KME_ME1_TOP0_KME_ME1_TOP0_24_reg, 16, 23, 0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_ip_cddpnt_rnd0_ADDR
		{KME_ME1_TOP0_KME_ME1_TOP0_24_reg, 24, 31, 0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_ip_cddpnt_rnd1_ADDR
		{KME_ME1_TOP0_KME_ME1_TOP0_28_reg, 0, 7,   0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_ip_cddpnt_rnd2_ADDR
		{KME_ME1_TOP0_KME_ME1_TOP0_64_reg, 16, 23, 0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_pi_cddpnt_rnd0_ADDR
		{KME_ME1_TOP0_KME_ME1_TOP0_64_reg, 24, 31, 0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_pi_cddpnt_rnd1_ADDR
		{KME_ME1_TOP0_KME_ME1_TOP0_68_reg, 0, 7,   0xff},//FRC_TOP__KME_ME1_TOP0__reg_me1_pi_cddpnt_rnd2_ADDR
		// ME1 adptpnt rnd curve
		{KME_ME1_TOP1_ME1_COMMON1_23_reg, 0, 5,  0x3f},//  FRC_TOP__KME_ME1_TOP1__reg_me1_adptpnt_rnd_y1_ADDR
		{KME_ME1_TOP1_ME1_COMMON1_23_reg, 8, 13, 0x3f},// FRC_TOP__KME_ME1_TOP1__reg_me1_adptpnt_rnd_y2_ADDR
		{KME_ME1_TOP1_ME1_COMMON1_23_reg, 14, 19,0x3f},// FRC_TOP__KME_ME1_TOP1__reg_me1_adptpnt_rnd_y3_ADDR
		{KME_ME1_TOP1_ME1_COMMON1_23_reg, 20, 25,0x3f},//FRC_TOP__KME_ME1_TOP1__reg_me1_adptpnt_rnd_y4_ADDR
	},

	//#26
	////Art of Flight 00:02:28
	//Art of Flight  2:23
	//Art of Flight 00:34 /2:23
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update1_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update2_en
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_40_reg, 13, 16, 1},//FRC_TOP__KME_ME2_VBUF_TOP__reg_kme_me2_vbuf_lfsr_y_mask
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_40_reg, 9, 12, 1},//FRC_TOP__KME_ME2_VBUF_TOP__reg_kme_me2_vbuf_lfsr_x_mask
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0x11111111},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0x11111111},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
	},

	//#27
	/*Passion Cocoa Milk Buns*/ // standing at the middle
	{
		{KME_DEHALO_KME_DEHALO_FC_reg, 23, 23, 1},//FRC_TOP__KME_DEHALO__dh_dtl_gain_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update1_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update2_en
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_40_reg, 13, 16, 1},//FRC_TOP__KME_ME2_VBUF_TOP__reg_kme_me2_vbuf_lfsr_y_mask
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_40_reg, 9, 12, 1},//FRC_TOP__KME_ME2_VBUF_TOP__reg_kme_me2_vbuf_lfsr_x_mask
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0x11111111},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0x11111111},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
	},

	//#28
	//S&M saech on a hammock
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 12, 12, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update1_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 13, 13, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_update2_en
		{KME_ME1_TOP0_KME_ME1_TOP0_2C_reg, 0, 12, 0},//FRC_TOP__KME_ME1_TOP0__reg_me1_ip_cddpnt_gmv
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_zmv_en
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg, 28, 29, 3},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_1st_dc_obme_mode
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg, 30, 31, 3},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_2nd_dc_obme_mode
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg, 21, 22, 0},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_1st_ac_obme_mode
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_D8_reg, 23, 24, 0},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_2nd_ac_obme_mode
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg, 2, 2, 0},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_1st_dc_obme_mode_sel
		{KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_DC_reg, 3, 3, 0},//FRC_TOP__KME_ME2_VBUF_TOP__kme_me2_vbuf_2nd_dc_obme_mode_sel
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 18, 19, 3},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_dc_obme_mode
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 20, 21, 3},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_dc_obme_mode
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 22, 22, 0},//FRC_TOP__KME_VBUF_TOP__vbuf_ip_dc_obme_mode_sel
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 23, 23, 0},//FRC_TOP__KME_VBUF_TOP__vbuf_pi_dc_obme_mode_sel
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 24, 25, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_ac_obme_mode
		{KME_VBUF_TOP_KME_VBUF_TOP_8C_reg, 26, 27, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_ac_obme_mode
	},


	//#29 repeat OFF
	{
		{SOFTWARE3_SOFTWARE3_63_reg,  0,  0, 1},
		{SOFTWARE3_SOFTWARE3_63_reg,  1,  2, 0},
	},

	//#30 repeat MID
	{
		{SOFTWARE3_SOFTWARE3_63_reg,  0,  0, 1},
		{SOFTWARE3_SOFTWARE3_63_reg,  1,  2, 2},
	},

	//#31
	/*DNM_hrnm 720p60*/ //walking stick
	{
		{MC_MC_28_reg, 14, 14, 1},//FRC_TOP__MC__reg_mc_fb_lvl_force_en
		{MC_MC_28_reg, 15, 22, 0},//FRC_TOP__MC__reg_mc_fb_lvl_force_value
		{KME_ME1_TOP1_ME1_COMMON1_10_reg, 8, 17, 32},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_dgain_y1
		{KME_ME1_TOP1_ME1_COMMON1_10_reg, 18, 27, 32},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_dgain_y2
		{KME_ME1_TOP1_ME1_COMMON1_12_reg, 16, 31, 65530},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_dgain_slope2
		{KME_TOP_KME_TOP_04_reg, 29, 29, 0},//FRC_TOP__KME_TOP__reg_frame_meander_enable
		{KME_ME1_TOP1_ME1_COMMON1_06_reg, 0, 9, 0},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_x1
		{KME_ME1_TOP1_ME1_COMMON1_06_reg, 10, 19, 40},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_x2
		{KME_ME1_TOP1_ME1_COMMON1_06_reg, 20 ,29, 120},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_x3
		{KME_ME1_TOP1_ME1_COMMON1_07_reg, 0, 9, 0},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_y1
		{KME_ME1_TOP1_ME1_COMMON1_07_reg, 10, 19, 21},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_y2
		{KME_ME1_TOP1_ME1_COMMON1_07_reg, 20 ,29, 32},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_y3
		{KME_ME1_TOP1_ME1_COMMON1_08_reg, 0 ,12, 34},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_slope1
		{KME_ME1_TOP1_ME1_COMMON1_08_reg, 13, 25, 9},//FRC_TOP__KME_ME1_TOP1__reg_me1_mvd_cuv_slope2
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 0, 0, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand0_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 1, 1, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand1_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 2, 2, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand2_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand7_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 8, 8, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand8_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 9, 9, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand9_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 10, 10, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_update0_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 11, 11, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_update1_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 12, 12, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_update2_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 13, 13, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_update3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 14, 14, 1},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_gmv_en
		{KME_VBUF_TOP_KME_VBUF_TOP_5C_reg, 0, 31, 0x33333333},//reg_vbuf_pi_1st_lfsr_mask 0~3 x&y
		{KME_VBUF_TOP_KME_VBUF_TOP_0C_reg, 0, 31, 0x33333333},//reg_vbuf_ip_1st_lfsr_mask 0~3 x&y
	},

	//#32
	/*7_Harry Potter and The Sorerer's Stone*/
	/*DNM_hrnm 720p60*/ //0:47 rolling-blade girl
	/*07_Montage_P*/ //0:48-0:51 rolling-blade girl
	{
		{0xb802b500, 0, 0, 0},//  sharpness peaking
		{0xb802b950, 0, 0, 0},//  sharpness dlti
		{0xb8023c00, 0, 0, 0},//  Multiband peaking
		{0xb8023c30, 0, 0, 1},//  Multiband peaking DB apply
		{KME_DEHALO_KME_DEHALO_70_reg, 4, 4,1},//FRC_TOP__KME_DEHALO__dh_pfv_conf_gen_andor_fb_sel
		{KME_DEHALO_KME_DEHALO_B0_reg, 12, 19,0},//FRC_TOP__KME_DEHALO__reg_dh_occl_gen_sim_thr
		{KME_DEHALO_KME_DEHALO_D4_reg, 6, 11,63},//FRC_TOP__KME_DEHALO__dh_pfv_gen_force_dehalo_level
		{KME_DEHALO_KME_DEHALO_D4_reg, 18, 23,63},//FRC_TOP__KME_DEHALO__dh_pfv_gen_force_dehalo_level2
	},

	//#33
	/*7.9.09.IDT_HD_H_R_MPG1080P24.mp4*/
	{
		{0xb802b500, 0, 0, 0},//  sharpness peaking
		{0xb802b950, 0, 0, 0},//  sharpness dlti
		{0xb8023c00, 0, 0, 0},//  Multiband peaking
		{0xb8023c30, 0, 0, 1},//  Multiband peaking DB apply
		{KME_DEHALO_KME_DEHALO_70_reg, 4, 4,1},//FRC_TOP__KME_DEHALO__dh_pfv_conf_gen_andor_fb_sel
		{KME_DEHALO_KME_DEHALO_B0_reg, 12, 19,0},//FRC_TOP__KME_DEHALO__reg_dh_occl_gen_sim_thr
		{KME_DEHALO_KME_DEHALO_D4_reg, 6, 11,15},//FRC_TOP__KME_DEHALO__dh_pfv_gen_force_dehalo_level
		{MC2_MC2_50_reg,0,1, 0},//FRC_TOP__MC2__reg_mc_var_lpf_en
		//{FRC_TOP__PQL_0__pql_patch_dummy_e4_ADDR,7,7, 0},//Merlin7 does not have it
		{MC2_MC2_20_reg, 0 ,1, 0},	//FRC_TOP__MC2__reg_mc_logo_en	
		//{FRC_TOP__PQL_0__pql_patch_dummy_e4_ADDR,5,5, 0},//Merlin7 does not have it
	},

	//#34
	/*3.QTEK_6.5PPF_00081*/ 
	/*monosco4K_Hscroll_10pix_50Hz_long_50p-3840*2160*/
	{
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 3, 3, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand2_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 8, 8, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_ip_1st_cand7_en
	
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 2, 2, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand2_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 3, 3, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand3_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 4, 4, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand4_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 5, 5, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand5_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 6, 6, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand6_en
		{KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 7, 7, 0},//FRC_TOP__KME_VBUF_TOP__reg_vbuf_pi_1st_cand7_en
		{0xb802b500, 0, 0, 0},//  sharpness peaking
		{0xb802b950, 0, 0, 0},//  sharpness dlti
		{0xb8023c00, 0, 0, 0},//  Multiband peaking
		{0xb8023c30, 0, 0, 1},//  Multiband peaking DB apply
	},

};

extern unsigned char Scaler_MEMC_Get_Performance_Checking_Database_index(void);

void MEMC_Performance_Checking_Database(void)
{
	static unsigned int register_return[MEMC_PERFORMANCE_SETTING_ITEM_MAX] = {};
	int i = 0;
	unsigned int check_en = 0;
	unsigned int check_index = Scaler_MEMC_Get_Performance_Checking_Database_index();
	static unsigned int pre_check_index = 0;
	ReadRegister(SOFTWARE1_SOFTWARE1_42_reg, 19, 19, &check_en);	//to clear any other MEMC isuue is not related to the desgin

	if(check_en == 0 || (pre_check_index == 0 && check_index == 0) || (pre_check_index >= MEMC_PERFORMANCE_SETTING_TABLE_MAX) || (check_index >= MEMC_PERFORMANCE_SETTING_TABLE_MAX) || (check_index > (sizeof(MEMC_setting_Table)/sizeof(MEMC_setting_Table[0]))-1))
		return;

	//Return value when switching(first time no need to return value)
	if(pre_check_index != check_index && pre_check_index != 0)
	{
		for(i = 0; i < sizeof(MEMC_setting_Table[pre_check_index])>>4; i++) // 4 (MEMC_PERFORMANCE_SETTING_MAX) * 4(unsigned int) = 16
		{
			if(MEMC_setting_Table[pre_check_index][i][0] != 0)
				WriteRegister(MEMC_setting_Table[pre_check_index][i][0], MEMC_setting_Table[pre_check_index][i][1], MEMC_setting_Table[pre_check_index][i][2], register_return[i]);
		}
	}
	
	for(i = 0; i < sizeof(MEMC_setting_Table[check_index])>>4; i++) // 4 (MEMC_PERFORMANCE_SETTING_MAX) * 4(unsigned int) = 16
	{
		//store the value when switching
		if((pre_check_index != check_index) && (check_index != 0) && MEMC_setting_Table[check_index][i][0] != 0)
		{
			ReadRegister(MEMC_setting_Table[check_index][i][0], MEMC_setting_Table[check_index][i][1], MEMC_setting_Table[check_index][i][2],&register_return[i]);
		}
		//write table value
		if(check_index != 0 && MEMC_setting_Table[check_index][i][0] != 0)
		{
			WriteRegister(MEMC_setting_Table[check_index][i][0], MEMC_setting_Table[check_index][i][1], MEMC_setting_Table[check_index][i][2], MEMC_setting_Table[check_index][i][3]);
		}
	}
	pre_check_index = check_index;
}

#endif
VOID Identification_Pattern_preProcess(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{	
	if(g_MEMC_Identify_Pattern_En==false && g_MEMC_Identify_Pattern_Clear==false){
		return;
	}

	Identificaton_other_Pre(pParam, pOutput);

//	Identification_Pattern_preProcess_TV001(pParam, pOutput);//set by Identify_ctrl_wrtAction
//	if(Pro_tv002)
//		Identification_Pattern_preProcess_TV002(pParam, pOutput);//set by Identify_ctrl_wrtAction
//	if( vpq_project_id == 0x00060000 || vpqex_project_id == 0x00060000 )
//		Identification_Pattern_preProcess_TV006(pParam, pOutput);//set by Identify_ctrl_wrtAction
//	if(g_ProjectID==VIP_Project_ID_TV010)
//		Identification_Pattern_preProcess_TV010(pParam, pOutput);//set by Identify_ctrl_wrtAction
	if(Pro_tv011)
		Identification_Pattern_preProcess_TV011(pParam, pOutput);
	if(Pro_tv030)
		Identification_Pattern_preProcess_TV030(pParam, pOutput);
#if 0
	Identification_Pattern_preProcess_TV043(pParam, pOutput);
#endif
	#if NEW_IDENTIFY_ENTRANCE
	Identify_ctrl_Status_wrtAction(pParam, pOutput); //UNIFORM_IDENRIFY
	#endif
}

VOID Identification_Pattern_Update(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	static unsigned char u5_blend_holdfrm_preProcess_a[255] = {0};
	static unsigned char nIdentifiedNum_preProcess_a[255] = {0};
	unsigned char u8_Index;

	//for YE Test temp test
	static unsigned int u32_ID_Log_en=0;//,ES_Test_Value=0;

	if(g_MEMC_Identify_Pattern_En==false && g_MEMC_Identify_Pattern_Clear==false){
		return;
	}

	// clear data when bypass identify pattern
	if(g_MEMC_Identify_Pattern_Clear){
		memset(&u5_blend_holdfrm_preProcess_a, 0, sizeof(u5_blend_holdfrm_preProcess_a));
	}

	ReadRegister(SOFTWARE1_SOFTWARE1_22_reg, 24,  24, &u32_ID_Log_en);//YE Test debug dummy register

	if(pParam->u1_Identification_Pattern_en== 0)
		return;
	
	//reset
	pOutput->u1_Pattern_Update_true=0;

 //#128
#if 0
    if((scalerVIP_Get_MEMCPatternFlag_Identification(0,124) == TRUE)  || (scalerVIP_Get_MEMCPatternFlag_Identification(0,126) == TRUE) ) 
    {
        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 19, 23, 0x2);
        //rtd_pr_memc_info("128in");
        //WriteRegister(MC_MC_B0_reg,20,27,  0);
        //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0);
        //WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x1);

        u5_blend_holdfrm_preProcess_a[100] = 15;
        nIdentifiedNum_preProcess_a[100]=124;

//+apply new code
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,0,7,240);//ip0
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,8,15,240);	 
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,16,23,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,24,31,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,0,7,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,8,15,240);	 
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,16,23,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,24,31,240);
		
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,0,7,240);//pi0
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,8,15,240);	 
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,16,23,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,24,31,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,0,7,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,8,15,240);	 
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,16,23,240);
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,24,31,240);
		
		
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_18_reg,1,1,0);	  //ip_adptpnt_gmv_en
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_58_reg,1,1,0);	  //pi_adptpnt_gmv_en
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg,0,12,0);    //me1_ip_cddpnt_gmv
		WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_6C_reg,0,12,0);   //me1_pi_cddpnt_gmv
		WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0,1);//gmv_sel
//end apply new code

    }
    else if(u5_blend_holdfrm_preProcess_a[100] >0)
    {
        //rtd_pr_memc_info("128in");

        //WriteRegister(MC_MC_B0_reg,20,27,  0);
        //WriteRegister(KME_DEHALO5_PHMV_FIX_35_reg,23,23,0);
        //WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x1);
        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 19, 23, 0x2);
      //  WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x1);         
        u5_blend_holdfrm_preProcess_a[100]--;

		//+apply new code
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,0,7,240);//ip0
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,8,15,240);	 
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,16,23,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,24,31,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,0,7,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,8,15,240);	 
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,16,23,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,24,31,240);
				
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,0,7,240);//pi0
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,8,15,240);	 
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,16,23,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,24,31,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,0,7,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,8,15,240);	 
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,16,23,240);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,24,31,240);
				
				
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_18_reg,1,1,0);	  //ip_adptpnt_gmv_en
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_58_reg,1,1,0);	  //pi_adptpnt_gmv_en
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg,0,12,0);    //me1_ip_cddpnt_gmv
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_6C_reg,0,12,0);   //me1_pi_cddpnt_gmv
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0,1);//gmv_sel
		//end apply new code

    }
    else if(nIdentifiedNum_preProcess_a[100] == 124 )
    {
		//rtd_pr_memc_info("128out");
		
		//+apply new code
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,0,7,28);//ip0
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,8,15,36);	
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,16,23,29);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_1C_reg,24,31,40);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,0,7,40);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,8,15,40);	
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,16,23,40);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_20_reg,24,31,48);
				
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,0,7,28);//pi0
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,8,15,36);	
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,16,23,29);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_5C_reg,24,31,40);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,0,7,40);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,8,15,48);	
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,16,23,48);
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_60_reg,24,31,48);
				
				
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_18_reg,1,1,1);	  //ip_adptpnt_gmv_en
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_58_reg,1,1,1);	  //pi_adptpnt_gmv_en
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_2C_reg,0,12,1);    //me1_ip_cddpnt_gmv
				WriteRegister(KME_ME1_TOP0_KME_ME1_TOP0_6C_reg,0,12,1);   //me1_pi_cddpnt_gmv
				WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_00_reg,0,0,0);//gmv_sel
		//end apply new code
        

    if (pParam->u1_FBLevelWr_en == 1)
	{
		WriteRegister(MC_MC_B0_reg,20,27,  pOutput->u8_FB_lvl);
	}
    else
    {
        WriteRegister(MC_MC_B0_reg,20,27,  0);        
    }        
        dhClose_wrtAction(pParam);        
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 19, 23, 0x1);
        //WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x0);
        //  WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x0);        
        nIdentifiedNum_preProcess_a[100] = 0;
    }

#endif
//#128 end


//#298  

    if((scalerVIP_Get_MEMCPatternFlag_Identification(0,125) == TRUE)||(scalerVIP_Get_MEMCPatternFlag_Identification(0,108) == TRUE)) 
    {

		WriteRegister(HARDWARE_HARDWARE_25_reg, 2,2,0x1);  
		if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)
		{
			u5_blend_holdfrm_preProcess_a[0] = 60;
			WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//th4_en //20220426
		}
		else
		{			 
			u5_blend_holdfrm_preProcess_a[0] = 15;
		}

        nIdentifiedNum_preProcess_a[0]=125;

    }
    else if(u5_blend_holdfrm_preProcess_a[0] >0)
    {
	   WriteRegister(HARDWARE_HARDWARE_25_reg,2,2,0x1);  
	   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);
	   if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)
	   {
		   WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//th4_en //20220426
	   }
	   u5_blend_holdfrm_preProcess_a[0]--;

    }
    else if(nIdentifiedNum_preProcess_a[0] == 125 )
    {
        //WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 24, 27, 0x3);
        WriteRegister(HARDWARE_HARDWARE_25_reg,2,2,0x0);  
        if(Scaler_MEMC_GetPanelSizeByDisp() == MEMC_SIZE_2K)
        {
            WriteRegister(KME_DEHALO5_PHMV_FIX_23_reg,20,20,0x0);//th4_en //20220426
        }

      //  WriteRegister(HARDWARE_HARDWARE_25_reg,0,0,0x0);        
        nIdentifiedNum_preProcess_a[0] = 0;
    }
//#298 end

	//#13m2v 
		if((scalerVIP_Get_MEMCPatternFlag_Identification(0,127) == TRUE)) 
		{
			u5_blend_holdfrm_preProcess_a[1] = 15;
			nIdentifiedNum_preProcess_a[1]=127;
		}
		else if(u5_blend_holdfrm_preProcess_a[1] >0)
		{
			u5_blend_holdfrm_preProcess_a[1]--;
		}
		else if(nIdentifiedNum_preProcess_a[1] == 127 )
		{	 
			nIdentifiedNum_preProcess_a[1] = 0;
		}
	
	//#13m2v end
	
	
	//#339
		if((scalerVIP_Get_MEMCPatternFlag_Identification(0,128) == TRUE)) 
		{

			WriteRegister(HARDWARE_HARDWARE_25_reg,7,7,0x1);  
	
			u5_blend_holdfrm_preProcess_a[2] = 15;
			nIdentifiedNum_preProcess_a[2]=128;
		   // rtd_pr_memc_info("tulia 339 test\n");
	
		}
		else if(u5_blend_holdfrm_preProcess_a[2] >0)
		{

		   WriteRegister(HARDWARE_HARDWARE_25_reg,7,7,0x1);  
			u5_blend_holdfrm_preProcess_a[2]--;
		}
		else if(nIdentifiedNum_preProcess_a[2] == 128 )
		{
	
			WriteRegister(HARDWARE_HARDWARE_25_reg,7,7,0x0);	   
			nIdentifiedNum_preProcess_a[2] = 0;
		}
	
	//#339 end


	//=======================
	//===debug show
	for(u8_Index =0;u8_Index<3;u8_Index++)
	{
		if(nIdentifiedNum_preProcess_a[u8_Index] !=0){			
			
			if(u32_ID_Log_en==1)
				rtd_pr_memc_emerg("==Pattern_Update===nIdentifiedNum_a>>[%d][%d]   ,\n", u8_Index, nIdentifiedNum_preProcess_a[u8_Index]);
	
			pOutput->u1_Pattern_Update_true=1;
		}
	}
	//===

}
VOID Identification_Pattern_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	unsigned int debug_en = 0, debug_type = 0;
	ReadRegister(SOFTWARE2_SOFTWARE2_56_reg, 8, 8, &debug_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_56_reg, 9, 9, &debug_type);


	if(g_MEMC_Identify_Pattern_En==false && g_MEMC_Identify_Pattern_Clear==false){
		return;
	}


	Identificaton_other(pParam, pOutput);

	Identification_Pattern_wrtAction_TV001(pParam, pOutput); //set by Identify_ctrl_wrtAction
//	if(g_ProjectID==VIP_Project_ID_TV002)
//		Identification_Pattern_wrtAction_TV002(pParam, pOutput); //set by Identify_ctrl_wrtAction
//	if( vpq_project_id == 0x00060000 || vpqex_project_id == 0x00060000 )
//		Identification_Pattern_wrtAction_TV006(pParam, pOutput);
	//if(g_ProjectID==VIP_Project_ID_TV010){
//		Identification_Pattern_wrtAction_TV010(pParam, pOutput); //set by Identify_ctrl_wrtAction
	//}
	if(Pro_tv011)
		Identification_Pattern_wrtAction_TV011(pParam, pOutput);	
	if(g_ProjectID==VIP_Project_ID_TV030)
		Identification_Pattern_wrtAction_TV030(pParam, pOutput);
#if 0
	Identification_Pattern_wrtAction_TV043(pParam, pOutput);
#endif
	#if NEW_IDENTIFY_ENTRANCE
	Identify_ctrl_wrtAction(pParam, pOutput);//UNIFORM_IDENRIFY
	#endif
	g_MEMC_Identify_Pattern_Clear = false;

	if(debug_en == 1){
		if(debug_type == 1){
			WriteRegister(MC2_MC2_50_reg, 0, 1, 3);
		}else{
			WriteRegister(MC2_MC2_50_reg, 0, 1, 0);
		}
	}
}

VOID Dh_MV_Corr_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
    unsigned int u32_RB_val;
	unsigned int u32_en_val;
	unsigned int  u32_oft_val;
	bool rgn_en[32]={0} ;
	int rmvx_sum =0 ;
	int rmvy_sum =0 ;
	int cnt =0 ;
	int rmvx_temp =0 ;
	int rmvy_temp =0 ;
	unsigned int u32_i = 0 ;
	int  sw_mvx  = 0 ;
	int  sw_mvy =0 ;
	int oft =0 ;
	//dehalo new  algo fw auto set
	// 32 regional mv use

	if(pParam->u1_Dh_MV_Corr_en==0)
		return;
	
	if(1)
	{
		//ReadRegister(HARDWARE_HARDWARE_25_reg, 0, 31, &u32_en_val);
		u32_en_val = 0x8080 ; 
		ReadRegister(HARDWARE_HARDWARE_24_reg, 0, 7, &u32_oft_val);
		//7seg_0 [0~31]
		rgn_en[0] = u32_en_val & 0x1;
		rgn_en[1] = (u32_en_val >> 1)  & 0x1;
		rgn_en[2] = (u32_en_val >> 2)  & 0x1;
		rgn_en[3] = (u32_en_val >> 3)  & 0x1;
		rgn_en[4] = (u32_en_val >> 4)  & 0x1;
		rgn_en[5] = (u32_en_val >> 5)  & 0x1;
		rgn_en[6] = (u32_en_val >> 6)  & 0x1;
		rgn_en[7] = (u32_en_val >> 7)  & 0x1;
		rgn_en[8] = (u32_en_val >> 8)  & 0x1;
		rgn_en[9] = (u32_en_val >> 9)  & 0x1;
		rgn_en[10] = (u32_en_val >> 10)  & 0x1;
		rgn_en[11] = (u32_en_val >> 11)  & 0x1;
		rgn_en[12] = (u32_en_val >> 12)  & 0x1;
		rgn_en[13] = (u32_en_val >> 13)  & 0x1;
		rgn_en[14] = (u32_en_val >> 14)  & 0x1;
		rgn_en[15] = (u32_en_val >> 15)  & 0x1;
		rgn_en[16] = (u32_en_val >> 16)  & 0x1;
		rgn_en[17] = (u32_en_val >> 17)  & 0x1;
		rgn_en[18] = (u32_en_val >> 18)  & 0x1;
		rgn_en[19] = (u32_en_val >> 19)  & 0x1;
		rgn_en[20] = (u32_en_val >> 20)  & 0x1;
		rgn_en[21] = (u32_en_val >> 21)  & 0x1;
		rgn_en[22] = (u32_en_val >> 22)  & 0x1;
		rgn_en[23] = (u32_en_val >> 23)  & 0x1;
		rgn_en[24] = (u32_en_val >> 24)  & 0x1;
		rgn_en[25] = (u32_en_val >> 25)  & 0x1;
		rgn_en[26] = (u32_en_val >> 26)  & 0x1;
		rgn_en[27] = (u32_en_val >> 27)  & 0x1;
		rgn_en[28] = (u32_en_val >> 28)  & 0x1;
		rgn_en[29] = (u32_en_val >> 29)  & 0x1;
		rgn_en[30] = (u32_en_val >> 20)  & 0x1;
		rgn_en[31] = (u32_en_val >> 31)  & 0x1;

		for (u32_i = 0; u32_i < 32; u32_i ++)
		{
		       if(rgn_en[u32_i] )
		       {
				ReadRegister(KME_ME1_TOP4_KME_ME1_TOP4_00_reg + 8 * u32_i, 0, 20, &u32_RB_val);
				rmvx_temp = ((u32_RB_val >> 10) &1) == 0? (u32_RB_val         & 0x7ff) : ((u32_RB_val & 0x7ff) - (1<<11));
				rmvy_temp = ((u32_RB_val >> 20) &1) == 0? ((u32_RB_val >> 11) & 0x3ff) : (((u32_RB_val >> 11) & 0x3ff) - (1<<10));
				cnt++;
				rmvx_sum+=rmvx_temp ;
				rmvy_sum+=rmvy_temp ;
			}
		}
		oft =  ((u32_oft_val >> 7) &1) == 0? (u32_oft_val & 0xff) : ((u32_oft_val & 0xff) - (1<<8));
		if(cnt!=0)
		{
			sw_mvx =( rmvx_sum+(cnt>>1))/cnt ;
		       sw_mvy =( rmvy_sum+(cnt>>1))/cnt ;
			sw_mvx =    sw_mvx - oft ;

			//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg , 8 , 18 , sw_mvx );
			//WriteRegister(KME_ME1_TOP2_KME_ME1_TOP2_80_reg , 19 , 28 , sw_mvy);
		}
		// 7seg_1 [0~]
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 0, 10, sw_mvx);
		//WriteRegister(KPOST_TOP_KPOST_TOP_A4_reg, 16, 25, sw_mvy);

	}

}

VOID MEMC_SmallObject_wrtAction(const _PARAM_WRT_COM_REG *pParam)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	kme_me1_top10_pred_mv_cand_1_RBUS kme_me1_top10_pred_mv_cand_1;
	kme_me1_top10_pred_mv_cand_2_RBUS kme_me1_top10_pred_mv_cand_2;
	kme_me1_top10_pred_mv_cand_3_RBUS kme_me1_top10_pred_mv_cand_3;
	static bool u1_SmallObject_en = false;

	if(!pParam->u1_SmallObject_en){//d910[20]
		return;
	}

	if(s_pContext->_output_me_sceneAnalysis.u1_SportScene == true) {
		kme_me1_top10_pred_mv_cand_1.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_1_reg);
		kme_me1_top10_pred_mv_cand_2.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_2_reg);
		kme_me1_top10_pred_mv_cand_3.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_3_reg);
		
		kme_me1_top10_pred_mv_cand_1.me1_apl_maskpred_cand_en = 1;
		kme_me1_top10_pred_mv_cand_1.me1_apl_blk_mode = 0;
		kme_me1_top10_pred_mv_cand_1.me1_apl_mask_up_th = 255;
		kme_me1_top10_pred_mv_cand_1.me1_apl_mask_low_th = 170;
		kme_me1_top10_pred_mv_cand_2.me1_cddpnt_aplpred = 10;
		kme_me1_top10_pred_mv_cand_2.me1_apl_conti_b_th = 7;
		kme_me1_top10_pred_mv_cand_2.me1_apl_conti_s_th = 3;
		kme_me1_top10_pred_mv_cand_3.me1_small_obj_cand2_en = 0;
		kme_me1_top10_pred_mv_cand_3.me1_small_obj_cand3_en = 0;
		
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_1_reg, kme_me1_top10_pred_mv_cand_1.regValue);
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_2_reg, kme_me1_top10_pred_mv_cand_2.regValue);
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_3_reg, kme_me1_top10_pred_mv_cand_3.regValue);

		u1_SmallObject_en = true;
	}
	else if(u1_SmallObject_en) {
		kme_me1_top10_pred_mv_cand_1.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_1_reg);
		kme_me1_top10_pred_mv_cand_2.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_2_reg);
		kme_me1_top10_pred_mv_cand_3.regValue = rtd_inl(KME_ME1_TOP10_PRED_MV_CAND_3_reg);
		
		kme_me1_top10_pred_mv_cand_1.me1_apl_maskpred_cand_en = 0;
		kme_me1_top10_pred_mv_cand_1.me1_apl_blk_mode = 0;
		kme_me1_top10_pred_mv_cand_1.me1_apl_mask_up_th = 255;
		kme_me1_top10_pred_mv_cand_1.me1_apl_mask_low_th = 140;
		kme_me1_top10_pred_mv_cand_2.me1_cddpnt_aplpred = 256;
		kme_me1_top10_pred_mv_cand_2.me1_apl_conti_b_th = 13;
		kme_me1_top10_pred_mv_cand_2.me1_apl_conti_s_th = 7;
		kme_me1_top10_pred_mv_cand_3.me1_small_obj_cand2_en = 0;
		kme_me1_top10_pred_mv_cand_3.me1_small_obj_cand3_en = 0;
		
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_1_reg, kme_me1_top10_pred_mv_cand_1.regValue);
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_2_reg, kme_me1_top10_pred_mv_cand_2.regValue);
		rtd_outl(KME_ME1_TOP10_PRED_MV_CAND_3_reg, kme_me1_top10_pred_mv_cand_3.regValue);

		u1_SmallObject_en = false;
	}
}

VOID Pred_MV_Cand_dis(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{ 

	unsigned int u32_RB_val =0 ;
	unsigned int u32_predmv_en =0 ;
	signed short  u11_gmv_mvx =0 ;
	signed short u10_gmv_mvy=0 ;

	ReadRegister(KME_ME1_TOP2_KME_ME1_TOP2_B0_reg, 0, 31, &u32_RB_val);
	ReadRegister(HARDWARE_HARDWARE_24_reg, 9, 9, &u32_predmv_en);  //small obj  pql
	u11_gmv_mvx = ((u32_RB_val >> 10) &1) == 0? (u32_RB_val         & 0x7ff) : ((u32_RB_val         & 0x7ff)  - (1<<11));
	u10_gmv_mvy = ((u32_RB_val >> 20) &1) == 0? ((u32_RB_val >> 11) & 0x3ff) : (((u32_RB_val >> 11) & 0x3ff)  - (1<<10));
       if(u32_predmv_en==1)
       {
		if((( u10_gmv_mvy<-65)||(u10_gmv_mvy>35))/*&&( u11_gmv_mvx<10|| u11_gmv_mvx>-10)*/)
		{    
			WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  0  );  // new algo switch  disable
			//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 1);
		}
		else
		{
			WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  1 );  
			//WriteRegister(KPOST_TOP_KPOST_TOP_A0_reg, 0, 3, 0);
		}
       }

}
VOID Dh_OCCL_Ext_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	unsigned char occl_ext_level = 0;
	unsigned char post_corr_level = 0;
	
	unsigned char occl_ext_level_sel = 0;
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	const _PQLPARAMETER *s_pParam = GetPQLParameter();

	static unsigned char u1_force_prot_off_pre = 0;
	static unsigned int u1_occl_ext_prot_pre[7] = {0};

	const unsigned char ExtLevelSetting[6][20] =
	{
		// post corr : [0] occl cnt [1] mvAB ratio [2] small dtl [3] small apl
		// re-judge  : [4] ucov cnt [5] cov cnt
		// ext range : [6] cov x bg  [7] cov y bg  [8] ucov x bg [9] ucov y bg [10] cov x fg [11] cov y fg [12] ucov x fg [13] ucov y fg
		// err ext   : [14] mvAB diff [15] mvAB GMV [16] curBGMV
		// ext stop  : [17] SAD [18] APL
		// other     : [20] mv sync en
		//			 0  1   2   3        4  5      6  7  8  9 10 11 12 13     14 15 16      17  18 19
		/*0*/ { /**/ 6, 1,  0,  0, /**/ 12,12, /**/0, 0, 0, 0, 0, 0, 0, 0, /**/1, 1, 1, /**/32, 40, 1 },
		/*1*/ { /**/ 7, 1,  5,  1, /**/ 12,12, /**/1, 0, 1, 0, 1, 0, 1, 0, /**/1, 1, 1, /**/32, 40, 1 },
		/*2*/ { /**/ 8, 1, 10,  3, /**/ 12,12, /**/1, 0, 1, 0, 2, 0, 2, 0, /**/1, 1, 1, /**/32, 40, 1 },
		/*3*/ { /**/10, 1, 16,  4, /**/ 12,12, /**/1, 0, 1, 0, 3, 0, 3, 0, /**/1, 1, 1, /**/32, 40, 1 }, // current setting
		/*4*/ { /**/10, 1, 16,  8, /**/ 12,12, /**/1, 0, 1, 0, 4, 0, 4, 0, /**/1, 1, 1, /**/32, 40, 0 },
		/*5*/ { /**/10, 1, 16, 16, /**/ 12,12, /**/1, 0, 1, 0, 5, 0, 5, 0, /**/1, 1, 1, /**/32, 40, 0 }
	};

	if( pParam->u1_OcclExt_wrt_en == 0 )
		return;

	occl_ext_level_sel = s_pContext->_output_me_sceneAnalysis.u3_occl_ext_level;

	// force level
	if( s_pParam->_param_me_sceneAnalysis.u1_occl_ext_force_lvl_en == 1 )
	{
		occl_ext_level = _MIN_(s_pParam->_param_me_sceneAnalysis.u3_occl_ext_force_lvl, 5);
	}
	if( s_pParam->_param_me_sceneAnalysis.u1_dh_postcorr_force_lvl_en == 1 )
	{
		post_corr_level = _MIN_(s_pParam->_param_me_sceneAnalysis.u3_dh_postcorr_force_lvl, 5);
	}

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_1_reg,4,8,  ExtLevelSetting[post_corr_level][0]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_1_reg,13,13,  ExtLevelSetting[post_corr_level][1]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_1_reg,16,23, ExtLevelSetting[post_corr_level][2]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_1_reg,24,31, ExtLevelSetting[post_corr_level][3]);

	WriteRegister(KME_DEHALO2_KME_DEHALO_POSTCORR_reg,0,3, ExtLevelSetting[occl_ext_level][4]);
	WriteRegister(KME_DEHALO2_KME_DEHALO_POSTCORR_reg,4,7,  ExtLevelSetting[occl_ext_level][5]);

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,2,4,  ExtLevelSetting[occl_ext_level][6]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,5,7,  ExtLevelSetting[occl_ext_level][7]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,9,11, ExtLevelSetting[occl_ext_level][8]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,12,14, ExtLevelSetting[occl_ext_level][9]);

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,16,18,  ExtLevelSetting[occl_ext_level][10]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,19,21,  ExtLevelSetting[occl_ext_level][11]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,24,26, ExtLevelSetting[occl_ext_level][12]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,27,29, ExtLevelSetting[occl_ext_level][13]);

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,4,5,  ExtLevelSetting[occl_ext_level][14]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,8,9, ExtLevelSetting[occl_ext_level][15]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,12,14,   ExtLevelSetting[occl_ext_level][16]);

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,8,15, ExtLevelSetting[occl_ext_level][17]);
	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,24,31, ExtLevelSetting[occl_ext_level][18]);

	WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_0_reg,8,8, ExtLevelSetting[occl_ext_level][19]);

	if( s_pParam->_param_me_sceneAnalysis.u1_occl_ext_force_protection_off != u1_force_prot_off_pre )
	{
		if( s_pParam->_param_me_sceneAnalysis.u1_occl_ext_force_protection_off != 0 )
		{
			ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,0,0, &u1_occl_ext_prot_pre[0]);
			ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,1,1, &u1_occl_ext_prot_pre[1]);
			ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,2,2, &u1_occl_ext_prot_pre[2]);
			//ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,3,3, &u1_occl_ext_prot_pre[3]);
			//ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,2,2, &u1_occl_ext_prot_pre[4]);
			//ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,1,1, &u1_occl_ext_prot_pre[5]);
			//ReadRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,0,0, &u1_occl_ext_prot_pre[6]);

			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,0,0, 0);
			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,1,1, 0);
			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,2,2, 0);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,3,3, 0);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,2,2, 0);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,1,1, 0);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,0,0, 0);
		}
		else
		{
			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,0,0, u1_occl_ext_prot_pre[0]);
			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,1,1, u1_occl_ext_prot_pre[1]);
			WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_2_reg,2,2, u1_occl_ext_prot_pre[2]);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,3,3, u1_occl_ext_prot_pre[3]);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,2,2, u1_occl_ext_prot_pre[4]);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,1,1, u1_occl_ext_prot_pre[5]);
			//WriteRegister(KME_DEHALO2_DH_OCCL_EXTEND_3_reg,0,0, u1_occl_ext_prot_pre[6]);
		}

		u1_force_prot_off_pre = s_pParam->_param_me_sceneAnalysis.u1_occl_ext_force_protection_off;
	}
}

VOID ZMV_AdaptPNT_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned int u32_y2 = 0, u32_y1 = 0, u32_x2 = 0, u32_x1 = 0, u32_slope = 0,u32_div=0;

	ReadRegister(KME_ME1_TOP1_ME1_COMMON1_39_reg,0,12, &u32_y2);
	ReadRegister(KME_ME1_TOP1_ME1_COMMON1_37_reg,16,28, &u32_x2);
	ReadRegister(KME_ME1_TOP1_ME1_COMMON1_37_reg,0,12, &u32_x1);

	u32_div = _ABS_DIFF_(u32_x2 , u32_x1)==0 ? 1:_ABS_DIFF_(u32_x2 , u32_x1);

	if(s_pParam->_param_frc_sceneAnalysis.u1_zmv_adapt_pnt_en)
	{
		if(s_pContext->_output_frc_sceneAnalysis.u1_zmv_adapt_pnt_GMV_Small)
		{
			u32_y1 = s_pParam->_param_frc_sceneAnalysis.u13_zmv_adapt_pnt_GMV_Small_Y1;
			u32_slope = (_ABS_DIFF_(u32_y2 , u32_y1) << 3) / u32_div;

			WriteRegister(KME_ME1_TOP1_ME1_COMMON1_38_reg,16,28, u32_y1);
			WriteRegister(KME_ME1_TOP1_ME1_COMMON1_40_reg,0,15, u32_slope);
		}
		else
		{
			u32_y1 = s_pParam->_param_frc_sceneAnalysis.u13_zmv_adapt_pnt_GMV_Big_Y1;
			u32_slope = (_ABS_DIFF_(u32_y2 , u32_y1) << 3) / u32_div;

			WriteRegister(KME_ME1_TOP1_ME1_COMMON1_38_reg,16,28, u32_y1);
			WriteRegister(KME_ME1_TOP1_ME1_COMMON1_40_reg,0,15, u32_slope);
		}
	}
}

VOID PFV_CDD_Number_wrtRegister(unsigned char  u5_phfv0_candi_num, unsigned char  u5_phfv1_candi_num)
{
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_30_reg,0,4, u5_phfv0_candi_num);
	WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_30_reg,8,12, u5_phfv1_candi_num);
}


VOID PFV_CDD_Number_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned char  u5_phfv0_candi_num = s_pParam->_param_dh_close.u5_phfv0_candi_num;
	unsigned char  u5_phfv1_candi_num = s_pParam->_param_dh_close.u5_phfv1_candi_num;
//	unsigned int u25me_Detail_rb    = s_pContext->_output_read_comreg.u25_me_aDTL_rb;

	if(s_pParam->_param_dh_close.u1_pfv_cdd_num_en)
	{
		if(s_pContext->_output_frc_sceneAnalysis.u8_SC_PFV_CDD_hold_cnt > 0)
		{
			PFV_CDD_Number_wrtRegister(u5_phfv0_candi_num, u5_phfv1_candi_num);
		}
		else
		{
			if((s_pContext->_output_dh_close.u5_dh_sml_rgnAction_holdfrm > 0) &&
			   (s_pContext->_output_frc_sceneAnalysis.u1_fastMotion_det == 0))
			{
				u5_phfv0_candi_num =0;
				u5_phfv1_candi_num =0;
			}
			else
			{
				PFV_CDD_Number_wrtRegister(u5_phfv0_candi_num, u5_phfv1_candi_num);
			}
		}
	}
}

VOID ME_Vst_en_wrtRegister(unsigned char me2_vst_enable)
{
	WriteRegister(KME_ME2_CALC1_KME_ME2_CALC1_VST_CTRL_0_reg,31,31, me2_vst_enable);
}

VOID ME_Vst_boundary_wrtRegister(unsigned char me2_vst_apply_boundary_xsta, unsigned char me2_vst_apply_boundary_xend)
{
	WriteRegister(KME_ME2_CALC1_KME_ME2_CALC1_VST_CTRL_2_reg,16,23, me2_vst_apply_boundary_xsta);
	WriteRegister(KME_ME2_CALC1_KME_ME2_CALC1_VST_CTRL_2_reg,24,31, me2_vst_apply_boundary_xend);
}



VOID ME_Vst_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	static unsigned int u32_print_counter = 0;
	unsigned char me2_vst_enable =0;
	unsigned char me2_vst_apply_boundary_xsta =0;
	unsigned char me2_vst_apply_boundary_xend =0;

	if(pParam->u1_ME_vst_en == 0)
		return;

	me2_vst_apply_boundary_xsta =  s_pContext->_output_me_vst_ctrl.u8_boundarySta;
	me2_vst_apply_boundary_xend	= s_pContext->_output_me_vst_ctrl.u8_boundaryEnd;

	#if (IC_K5LP || IC_K6LP || IC_K8LP)

	u32_print_counter++;
	if(u32_print_counter >= 10)
		u32_print_counter = 0;

	if(s_pContext->_output_me_vst_ctrl.u1_detect == 1)
	{
		me2_vst_enable = 0x1;
		ME_Vst_boundary_wrtRegister(me2_vst_apply_boundary_xsta,  me2_vst_apply_boundary_xend);
	}
	else
	{
		me2_vst_enable = 0x0;
	}

	ME_Vst_en_wrtRegister( me2_vst_enable);

#if 0
	if(u32_print_counter == 0)
		rtd_pr_memc_info("[%s] en = %d, %d to %d\r\n",
			__func__, s_pContext->_output_me_vst_ctrl.u1_detect,
			s_pContext->_output_me_vst_ctrl.u8_boundarySta,
			s_pContext->_output_me_vst_ctrl.u8_boundaryEnd);
#endif

	#endif
}

VOID MC_RMV_blending_ReginaolFB_wrtAction(VOID)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();

	unsigned int u32_wr_val = 0;
	int i=0;

#if (IC_K6LP || IC_K8LP)
		//if(1) //me2 block =2x2
		//{
		//	WriteRegister(KMC_BI_bi_size_ctrl_reg,
		//		0,
		//		0, 0x0); // 0:480x270, 1:240x135
		//}

		if(s_pContext->_output_read_comreg.u8_gmv_blend_en == 1)
		{
			//blending RMV
			for(i=0; i<32; i++)
			{
				u32_wr_val = (s_pContext->_output_bRMV_rFB_ctrl.u10_fb_rgn00_mvy[i] << 11) | s_pContext->_output_bRMV_rFB_ctrl.u11_fb_rgn00_mvx[i];

				WriteRegister(KMC_BI_bi_rmv11_reg + i*4, 0, 31, u32_wr_val);
			}

			//blending alpha
			for(i=0; i<8; i++)
			{
				u32_wr_val = (s_pContext->_output_bRMV_rFB_ctrl.u8_fb_rmv_alpha[i*4+3] << 24) | (s_pContext->_output_bRMV_rFB_ctrl.u8_fb_rmv_alpha[i*4+2] << 16) |
							 (s_pContext->_output_bRMV_rFB_ctrl.u8_fb_rmv_alpha[i*4+1] <<  8) |  s_pContext->_output_bRMV_rFB_ctrl.u8_fb_rmv_alpha[i*4];

				WriteRegister(KMC_BI_bi_beta_00_reg + i*4, 0, 31, u32_wr_val);
			}
		}

		if(s_pContext->_output_read_comreg.u8_regional_fb_en == 1)
		{
			for(i=0; i<8; i++)
			{
				//blending FB_lvl
				u32_wr_val = (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_level[i*4+3] << 24) | (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_level[i*4+2] << 16) |
							 (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_level[i*4+1] <<  8) |  s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_level[i*4];

				WriteRegister(KMC_BI_bi_fb_00_reg + i*4, 0, 31, u32_wr_val);

				//blending alpha
				u32_wr_val = (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_alpha[i*4+3] << 24) | (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_alpha[i*4+2] << 16) |
							 (s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_alpha[i*4+1] <<  8) |  s_pContext->_output_bRMV_rFB_ctrl.u8_rFB_alpha[i*4];

				WriteRegister(KMC_BI_bi_gama_00_reg + i*4, 0, 31, u32_wr_val);
			}
			// panning scene
			#if 1  //YE Test it will hold  mc_fb_lvl_force_en and can't cotrol AutoGUI temp mark 
			if ((s_pParam->_param_wrt_comreg.u1_mc_localfb_en == 1)&&(s_pContext->_output_bRMV_rFB_ctrl.u8_ES_Test_0_flag ==1)) //from LearnRPG
			{
				if(s_pContext->_output_bRMV_rFB_ctrl.u1_rFB_panning)
				{
					WriteRegister(MC_MC_28_reg, 14, 14, 1);
					WriteRegister(MC_MC_28_reg, 15, 22, 0);
				}
				else
				{
					WriteRegister(MC_MC_28_reg, 14, 14, 0);
				}
			}
			#endif
		}

#endif

}

VOID Over_SearchRange_wrtAction(VOID)
{
	extern MEMC_APP_DATA_ST gstAppData;

	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	PQL_OUTPUT_RESOLUTION output_Resolution = s_pContext->_external_data._output_resolution;

	if((s_pParam->_param_me_sceneAnalysis.u1_over_searchrange_en == 1 || (gstAppData.stMEMCData.enMemcMode == MEMC_USER && gstAppData.stMEMCData.uiDejudderLevel >= 70 && gstAppData.stMEMCData.uiDejudderLevel <= 96)) 
		&& s_pContext->_output_me_sceneAnalysis.u1_over_searchrange == 1)
	{
		//extend limitation of ME1 search range
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,
					  9,
					 15, MEMC_PARAM_TABLE.MV_SEARCHRANGE_Param[output_Resolution].SEARCH_RANGE_CLIP_PARAM[SEARCH_RANGE_TYPE_NORMAL].u7_ME1_Y);

		//reset limitation of ME2 search range
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,
		              8,
		             14, MEMC_PARAM_TABLE.MV_SEARCHRANGE_Param[output_Resolution].SEARCH_RANGE_CLIP_PARAM[SEARCH_RANGE_TYPE_NORMAL].u7_ME1_Y);
		
		// Merlin5 LBMC mapping_index enable
		WriteRegister(KPHASE_kphase_7C_reg,
					  4,
					  7, 4);
		WriteRegister(KPHASE_kphase_7C_reg,
					  0,
					  3, 8);
		WriteRegister(KPHASE_kphase_7C_reg,
					  8,
					  8, 1);
	}
	else
	{
		//reset limitation of ME1 search range
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_3C_reg,
					  9,
					  15, 0x2a);

		//reset limitation of ME2 search range
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_E0_reg,
		              8,
		              14, 0x2a);


		// Merlin5 LBMC mapping_index disable
		WriteRegister(KPHASE_kphase_7C_reg,
					  8,
					  8, 0);
	}


}

VOID ME_Median_Filter_wrtAction(VOID)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned int log_en, table_level=0;
	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 29, 29, &log_en);//0xB809D9EC[29]

	if(s_pParam->_param_me_sceneAnalysis.u2_medFLT_sel != 0 && s_pContext->_output_me_sceneAnalysis.b_do_ME_medFLT == 1 && s_pContext->_output_wrt_comreg.u1_casino_RP_detect_true!=1)
	{
		//enable ME1 median filter
		WriteRegister(KME_ME1_TOP10_MV_MED_reg,
					  0,
					  0, 0x1);

		//enable ME2 median filter
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_58_reg,
		              0,
		              0, 0x1);
	}
	else
	{
		WriteRegister(KME_ME1_TOP10_MV_MED_reg,
					  0,
					  0, 0x0);

		//enable ME2 median filter
		WriteRegister(KME_ME2_CALC0_KME_ME2_CALC0_58_reg,
		              0,
					  0, 0x0);

	}
	
	//o------ adaptive med9FLT ------o
	if(s_pParam->_param_me_sceneAnalysis.b_medFLT_adpt_en == 1)
	{
		WriteRegister(KME_ALGO_ME2_PFVD_PENALTY_CTRL_00_reg, 31, 31, s_pContext->_output_me_sceneAnalysis.b_do_adpt_med9flt);
	}

	//o------ pfvd for ME2 candidate penalty ------o	
	if(s_pParam->_param_me_sceneAnalysis.b_FixRepeat_en && 
		s_pContext->_output_me_sceneAnalysis.u8_RepeatMode!=RepeatMode_OFF)
	{
		table_level=2;
		if(s_pContext->_output_me_sceneAnalysis.u1_casino_RP_detect_true) {
			WriteRegister(KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, 0);
		}
		//else if(s_pContext->_output_me_sceneAnalysis.u2_panning_flag) {
		//	WriteRegister(KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, 1);
		//}
		//else {
		//	WriteRegister(KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, 0);
		//}			
	}
	else if(s_pParam->_param_me_sceneAnalysis.b_pfvd_en == 1)
	{
		table_level=3;
		WriteRegister(KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, s_pContext->_output_me_sceneAnalysis.b_do_pfvd);	
	}
	else
	{
		table_level=4;
		WriteRegister(KME_ALGO_ME1_MEDFLT_CTRL_00_reg, 18, 18, 1);
	}

	if(log_en) { //D9EC[29]
		rtd_pr_memc_emerg("[Undo mask][table_level][%d]\n", table_level);
	}
}

#if 0 //to sync tv006


VOID PanningDetect_wrtRegister(_str_PanningDetect_table *PanningDetect_table)
{
	WriteRegister(MC_MC_28_reg,14,14, PanningDetect_table->mc_fb_lvl_force_en);
	WriteRegister(MC_MC_0C_reg,29,29, PanningDetect_table->mc_logo_phase_fb_phase_en);
	WriteRegister(MC_MC_0C_reg,30,30, PanningDetect_table->mc_pre_phase_fb_phase_en);
	WriteRegister(MC_MC_0C_reg,31,31, PanningDetect_table->mc_pt_phase_fb_phase_en);
	WriteRegister(MC_MC_28_reg,15,22, PanningDetect_table->mc_fb_lvl_force_value);
}

VOID PanningDetect_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	unsigned int u32_rb_val = 0;
	static unsigned char u1_panning_state;
	_str_PanningDetect_table *tmp_PanningDetect_table = NULL;


	if(s_pParam->_param_read_comreg.u1_jerry_PanAct_en == 1){
		if((s_pContext->_output_me_sceneAnalysis.u2_panning_flag >= 1)){
			if(u1_panning_state == 0){
				ReadRegister(MC_MC_28_reg,14,14, &u32_rb_val);
				mc_fb_lvl_force_en_tmp = u32_rb_val;
				ReadRegister(MC_MC_0C_reg,29,29, &u32_rb_val);
				mc_logo_phase_fb_phase_en = u32_rb_val;
				ReadRegister(MC_MC_0C_reg,30,30, &u32_rb_val);
				mc_pre_phase_fb_phase_en = u32_rb_val;
				ReadRegister(MC_MC_0C_reg,31,31, &u32_rb_val);
				mc_pt_phase_fb_phase_en = u32_rb_val;
				ReadRegister(MC_MC_28_reg,15,22, &u32_rb_val);
				mc_fb_lvl_force_value = u32_rb_val;

				tmp_PanningDetect_table->mc_fb_lvl_force_en = 1;
				tmp_PanningDetect_table->mc_logo_phase_fb_phase_en =0;
				tmp_PanningDetect_table->mc_pre_phase_fb_phase_en =0;
				tmp_PanningDetect_table->mc_pt_phase_fb_phase_en =0;
				tmp_PanningDetect_table->mc_fb_lvl_force_value = 0;

				u1_panning_state = 1;
			}
		}else{
			if(u1_panning_state == 1){

				tmp_PanningDetect_table->mc_fb_lvl_force_en 			= mc_fb_lvl_force_en_tmp;
				tmp_PanningDetect_table->mc_logo_phase_fb_phase_en 	=mc_logo_phase_fb_phase_en;
				tmp_PanningDetect_table->mc_pre_phase_fb_phase_en 	=mc_pre_phase_fb_phase_en;
				tmp_PanningDetect_table->mc_pt_phase_fb_phase_en 	=mc_pt_phase_fb_phase_en;
				tmp_PanningDetect_table->mc_fb_lvl_force_value 		= mc_fb_lvl_force_value;

				u1_panning_state = 0;
			}
		}
	}

	if(tmp_PanningDetect_table != NULL){
		PanningDetect_wrtRegister(tmp_PanningDetect_table);
	}
}
#endif

VOID IPPRE_POST_CSCMode_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLPARAMETER *s_pParam       = GetPQLParameter();
	PQL_INPUT_FRAME_RATE in_fmRate = s_pContext->_external_data._input_frameRate;
	unsigned char  u8_cadence_Id = s_pContext->_output_filmDetectctrl.u8_cur_cadence_out[_FILM_ALL];

    if(s_pContext->_external_info.u16_MEMCMode == 3)  // MEMC OFF
	{
		if(s_pContext->_output_me_sceneAnalysis.u1_SportScene==false || s_pParam->_param_me_sceneAnalysis.u1_chg_color_matrix_en==false){
			HAL_IP_SetIPPRECSCMode(CSC_MODE_RGB_YUV_709_FULL);
		}
		HAL_POST_SetCSCMode(CSC_MODE_YUV_RGB_709_FULL);
	}
	else if((in_fmRate == _PQL_IN_60HZ || in_fmRate == _PQL_IN_50HZ ) && u8_cadence_Id == _CAD_VIDEO)    //  panel 60 Hz
	{
		if(s_pContext->_output_me_sceneAnalysis.u1_SportScene==false || s_pParam->_param_me_sceneAnalysis.u1_chg_color_matrix_en==false){
			HAL_IP_SetIPPRECSCMode(CSC_MODE_RGB_YUV_709_FULL);
		}
		HAL_POST_SetCSCMode(CSC_MODE_YUV_RGB_709_FULL);
	}
	else   //  only RGB input
	{
		if(s_pContext->_external_data._output_mode == _PQL_OUT_VIDEO_MODE)
		{
			if(s_pContext->_output_me_sceneAnalysis.u1_SportScene==false || s_pParam->_param_me_sceneAnalysis.u1_chg_color_matrix_en==false){
				HAL_IP_SetIPPRECSCMode(CSC_MODE_RGB_YUV_709_LIMIT);
			}
			HAL_POST_SetCSCMode(CSC_MODE_YUV_RGB_709_LIMIT);
		}
		else if(s_pContext->_external_data._output_mode == _PQL_OUT_PC_MODE)
		{
			if(s_pContext->_output_me_sceneAnalysis.u1_SportScene==false || s_pParam->_param_me_sceneAnalysis.u1_chg_color_matrix_en==false){
				HAL_IP_SetIPPRECSCMode(CSC_MODE_RGB_YUV_709_LIMIT);
			}
			HAL_IP_SetIPPRECSCEnable(FALSE);
			HAL_POST_SetCSCMode(CSC_MODE_YUV_RGB_709_LIMIT);
			HAL_POST_SetCSCEnable(FALSE);
		}
	}

}

VOID debug_info_show_writeRegister(unsigned char enable, bool u1_show_identify)
{
	if(u1_show_identify){
		WriteRegister(MC_MC_DC_reg,28,28, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,24,24, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,25,25, 0);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,26,26, 0);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,27,27, 0);
	}else{
		WriteRegister(MC_MC_DC_reg,28,28, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,24,24, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,25,25, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,26,26, enable);
		WriteRegister(KPOST_TOP_KPOST_TOP_A8_reg,27,27, enable);
	}
}

VOID debug_info_show(const _PARAM_WRT_COM_REG *pParam)
{
	unsigned int u32_RB_val;
	unsigned char u1_show_debug_info_en;
	bool u1_show_identify = false;

	ReadRegister(SOFTWARE2_SOFTWARE2_45_reg, 3,3,&u32_RB_val);
	u1_show_identify = (u32_RB_val==1) ? true : false;

	if(pParam->u1_pql_debug_info_Show_en == 1)
	{
		u1_show_debug_info_en = 1;
	}
	else
	{
		u1_show_debug_info_en = 0;
	}
	debug_info_show_writeRegister(u1_show_debug_info_en, u1_show_identify);
}

extern VOID MEMC_LibPowerSaveing(VOID);
VOID MEMC_HDMI_PowerSaving(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	MEMC_LibPowerSaveing();
}

unsigned int MEMC_OutputFrame_cnt = 0;
unsigned int MEMC_OutputFrame_pre_cnt = 0;
extern VOID MEMC_LibBlueScreen(unsigned char is_BlueScreen);
extern VOID MEMC_Lib_set_BlueScreen_Recall_flag(unsigned char u1_enable);
extern unsigned char MEMC_Lib_get_BlueScreen_Recall_flag(VOID);
extern unsigned short Scaler_DispGetInputInfoByDisp(unsigned char channel, SLR_INPUT_INFO infoList);
extern unsigned int Scaler_get_MEMC_unmute_ready_flag(void);
extern unsigned char HAL_VBE_Panel_Get_DlgEnable(void);
extern bool g_doing_PCMode_change;

bool ihsr_offon_en=0;
BOOL MEMC_HSR_ON_OFF_ChangeStatus(void)
{
 	static unsigned char hsr_offon_en=255;
	//bool ihsr_offon_en=0;
	if(hsr_offon_en!=HAL_VBE_Panel_Get_DlgEnable()){
		if(hsr_offon_en==255){
			ihsr_offon_en=0;	
		}
		else{
			ihsr_offon_en=1;
		}
		hsr_offon_en=HAL_VBE_Panel_Get_DlgEnable();
		
		return ihsr_offon_en;
	}
	else
		return 0;
}

extern unsigned int dma_cnt;

BOOL Check_MEMC_DMA_Error(void)
{
	unsigned int dma0=0,dma1=0,dma2=0,dma3=0,dma4=0,dma5=0;

	ReadRegister(PQC_PQDC_MC_LF_PQ_CMP_IRQ_ST_reg, 0, 31, &dma0);//MEMC LF PQC 
	ReadRegister(PQC_PQDC_MC_LF_PQ_CMP_IRQ_ST_reg, 0, 31, &dma1);//MEMC HF PQC 
	ReadRegister(MC_DMA_MC_LF_DMA_WR_status_reg, 0, 5, &dma2);//MC_LF_DMA_WR_status
	ReadRegister(MC_DMA_MC_HF_DMA_WR_status_reg, 0, 5, &dma3);//MC_HF_DMA_WR_status
	ReadRegister(PQC_PQDC_MC_LF_PQ_DECMP_IRQ_st_reg, 16, 27, &dma4);//MEMC LF Repeat Iframe PQDC
	ReadRegister(PQC_PQDC_MC_HF_PQ_DECMP_IRQ_st_reg, 16, 27, &dma5);//MEMC HF Repeat Iframe PQDC

	if(dma_cnt!=0|| dma0!=0|| dma1!=0|| dma2!=0|| dma3!=0|| dma4!=0|| dma5!=0)
	{
		
		return 1;
	}
	else
		return 0;
}

extern bool u1_input_size_error;
unsigned int memc_dma_error_cnt=0;
VOID MEMC_DisableMute(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
#ifdef CONFIG_MEMC_NOTSUPPORT // for code size reduce, when MEMC_BYPASS
		return;
#else

	unsigned int memc_mute_state = 0;
	unsigned int memc_mute_ctrl_en = 0;
	unsigned char memc_mute_en_chg = 0;
	static unsigned char memc_mute_cnt = 0;
	unsigned int test_en = 0, test_val = 0;

	unsigned char scaler_force_bg_status = 1;
	unsigned char scaler_main_bg = 0, scaler_sub_active = 0, scaler_sub_enable = 0;

	unsigned int log_en = 0;

	const _PQLCONTEXT *s_pContext = GetPQLContext();
	PQL_INPUT_FRAME_RATE in_fmRate = 0;
	PQL_OUTPUT_FRAME_RATE  out_fmRate = 0;
	static unsigned int mc_write_pre = 0, idx_chg_cnt = 0;
	unsigned int mc_write = 0, bsize = 0;

	static bool u1_hsr_status_change=0;

	unsigned int memc_dma_cnt=200;
	unsigned char frame_num = 9;

#if 0

#endif
	if(get_MEMC_bypass_status_refer_platform_model() == TRUE) {
		return;
	}

	ReadRegister(KPHASE_kphase_90_reg, 0, 2, &mc_write);
	ReadRegister(KPHASE_kphase_10_reg, 12, 15, &bsize);

#if 1
	in_fmRate = s_pContext->_external_data._input_frameRate;
	out_fmRate = s_pContext->_external_data._output_frameRate;
	ReadRegister(SOFTWARE1_SOFTWARE1_60_reg, 24, 24, &test_en);

	if(test_en){
		ReadRegister(SOFTWARE1_SOFTWARE1_61_reg, 24, 31, &test_val);
	}
	else if(in_fmRate == _PQL_IN_24HZ){
		if(out_fmRate == _PQL_OUT_48HZ){
			test_val = (frame_num*48/24);
		}
		else if(out_fmRate == _PQL_OUT_60HZ){
			test_val = (frame_num*60/24);
		}
		else if(out_fmRate == _PQL_OUT_96HZ){
			test_val = (frame_num*96/24);
		}
		else if(out_fmRate == _PQL_OUT_120HZ){
			test_val = (frame_num*120/24);
		}
		else{
			test_val = (frame_num*60/24);
		}
	}
	else if(in_fmRate == _PQL_IN_25HZ){
		if(out_fmRate == _PQL_OUT_50HZ){
			test_val = (frame_num*50/25);
		}
		else if(out_fmRate == _PQL_OUT_100HZ){
			test_val = (frame_num*100/25);
		}
		else{
			test_val = (frame_num*50/25);
		}
	}
	else if(in_fmRate == _PQL_IN_30HZ){
		if(out_fmRate == _PQL_OUT_60HZ){
			test_val = (frame_num*60/30);
		}
		else if(out_fmRate == _PQL_OUT_120HZ){
			test_val = (frame_num*120/30);
		}
		else{
			test_val = (frame_num*60/30);
		}
	}
	else if(in_fmRate == _PQL_IN_48HZ){
		if(out_fmRate == _PQL_OUT_48HZ){
			test_val = (frame_num*48/48);
		}
		else if(out_fmRate == _PQL_OUT_96HZ){
			test_val = (frame_num*96/48);
		}
		else{
			test_val = (frame_num*60/48);
		}
	}
	else if(in_fmRate == _PQL_IN_50HZ){
		if(out_fmRate == _PQL_OUT_50HZ){
			test_val = (frame_num*50/50);
		}
		else if(out_fmRate == _PQL_OUT_100HZ){
			test_val = (frame_num*100/50);
		}
		else{
			test_val = (frame_num*50/50);
		}
	}
	else if(in_fmRate == _PQL_IN_60HZ){
		if(out_fmRate == _PQL_OUT_60HZ){
			test_val = (frame_num*60/60);
		}
		else if(out_fmRate == _PQL_OUT_120HZ){
			test_val = (frame_num*120/60);
		}
		else{
			test_val = (frame_num*60/60);
		}
	}
	else if(in_fmRate == _PQL_IN_96HZ){
		if(out_fmRate == _PQL_OUT_96HZ){
			test_val = (frame_num*96/96);
		}
		else{
			test_val = (frame_num*120/96);
		}
	}
	else if(in_fmRate == _PQL_IN_100HZ){
		test_val = (frame_num*100/100);
	}
	else if(in_fmRate == _PQL_IN_120HZ){
		test_val = (frame_num*120/120);
	}
	else{
		ReadRegister(SOFTWARE1_SOFTWARE1_61_reg, 24, 31, &test_val);
	}

	if(test_val < 31){
		test_val = 31;
	}
		
	#else
	ReadRegister(SOFTWARE1_SOFTWARE1_61_reg, 24, 31, &test_val);
	#endif

	ReadRegister(SOFTWARE1_SOFTWARE1_61_reg, 24, 31, &test_val);
	ReadRegister(SOFTWARE1_SOFTWARE1_63_reg, 28, 28, &memc_mute_ctrl_en);
	//memc_mute_state = (rtd_inl(PPOVERLAY_MEMC_MUX_CTRL_reg)>>12)&0x1;
	ReadRegister(KPOST_TOP_KPOST_TOP_60_reg, 30, 30, &memc_mute_state);
	ReadRegister(SOFTWARE1_SOFTWARE1_60_reg, 25, 25, &log_en);
	memc_mute_en_chg = (memc_mute_state == pOutput->u1_memc_mute_state_pre) ? 0 : 1;
#if 0
	//scaler_force_bg_status = ((rtd_inl(0xB8028300)&0x00000002)>>1);//PPOVERLAY_Main_Display_Control_RSV_get_m_force_bg
#else
	scaler_main_bg = ((rtd_inl(PPOVERLAY_Main_Display_Control_RSV_reg)&0x00000002)>>1);
	scaler_sub_enable = (rtd_inl(PPOVERLAY_MP_Layout_Force_to_Background_reg)&0x1);
	//scaler_sub_active = (Scaler_DispGetInputInfoByDisp(SLR_SUB_DISPLAY, SLR_INPUT_STATE) == _MODE_STATE_ACTIVE);
	scaler_sub_active = (Scaler_DispGetInputInfoByDisp(1/*SLR_SUB_DISPLAY*/, 41/*SLR_INPUT_STATE*/) == 2/*_MODE_STATE_ACTIVE*/);

	if( scaler_main_bg == 0 )
	{
		scaler_force_bg_status = 0;
	}
	else if( scaler_sub_active != 0 && scaler_sub_enable != 0 )
	{
		scaler_force_bg_status = 0;
	}
	if(log_en){
		rtd_pr_memc_notice("[MEMC_DisableMute_02][%d,]\n", scaler_sub_active);
	}
#endif

	if(memc_mute_en_chg == 1 && memc_mute_state == 1 && memc_mute_ctrl_en == 1){
		memc_mute_cnt = test_val;//10;//
		idx_chg_cnt = bsize+1;
		rtd_pr_memc_notice("[MEMC_DisableMute_01][%d, %d][FRM,%d,%d,][idx_chg_cnt,%d,](90K = %d)\n", memc_mute_cnt, memc_mute_state, in_fmRate, out_fmRate, idx_chg_cnt, rtd_inl(TIMER_SCPU_CLK90K_LO_reg));
	}


	if((MEMC_Lib_get_BlueScreen_Recall_flag() == 1) && (memc_mute_cnt > 0)){
		memc_mute_cnt = test_val;
		idx_chg_cnt = bsize+1;
		MEMC_Lib_set_BlueScreen_Recall_flag(0);
		rtd_pr_memc_notice("[MEMC_DisableMute_check1][,%d,%d,]\n", in_fmRate, out_fmRate);
		rtd_pr_memc_notice("[MEMC_DisableMute_check1][,%d,%d,][idx_chg_cnt,%d,](90K = %d)\n", memc_mute_cnt, memc_mute_state, idx_chg_cnt, rtd_inl(TIMER_SCPU_CLK90K_LO_reg));
	}

	if((memc_mute_cnt <=5)  && (memc_mute_state == 1)&& (memc_mute_ctrl_en == 1) && ((g_doing_PCMode_change) || (scaler_force_bg_status !=0) || Scaler_get_MEMC_unmute_ready_flag() == 0  || idx_chg_cnt > 0) ){
		memc_mute_cnt+=3;
	}

	if((memc_mute_state == 1) && (memc_mute_ctrl_en == 1)){
		if(MEMC_HSR_ON_OFF_ChangeStatus()){
			u1_hsr_status_change=1;
			rtd_pr_memc_notice("[MEMC_DisableMute],MEMC_HSR_ON_OFF_ChangeStatus\n");
                  	memc_dma_error_cnt=0;
		}
	
		if(Check_MEMC_DMA_Error() && u1_hsr_status_change && memc_dma_cnt>memc_dma_error_cnt){	
			if(31>memc_mute_cnt)
				memc_mute_cnt=31;
			
			memc_dma_error_cnt++;
		}
	}

	if((memc_mute_cnt <= 3) && (memc_mute_state == 1) && (memc_mute_ctrl_en == 1)){
	//if((memc_mute_cnt <= 3 || (u1_input_size_error==1 && idx_chg_cnt ==0)) && (memc_mute_state == 1) && (memc_mute_ctrl_en == 1)){	
		MEMC_LibBlueScreen(0);
		//WriteRegister(KPOST_TOP_KPOST_TOP_60_reg, 30, 30, 0x0);
		memc_dma_error_cnt=0;
		u1_hsr_status_change=0;
		u1_input_size_error=0;
		rtd_pr_memc_notice("[MEMC_DisableMute_03][%d, %d](90K = %d)\n", memc_mute_cnt, memc_mute_state,rtd_inl(TIMER_SCPU_CLK90K_LO_reg));
	}

	if(memc_mute_cnt > 0){
		memc_mute_cnt--;
		if(log_en){
			rtd_pr_memc_notice("[MEMC_DisableMute_02][%d, %d](90K = %d)\n", memc_mute_cnt, memc_mute_state,rtd_inl(TIMER_SCPU_CLK90K_LO_reg));
		}
	}
	else{
		memc_mute_cnt = 0;
	}

	if(mc_write != mc_write_pre && idx_chg_cnt > 0){
		idx_chg_cnt--;
		rtd_pr_memc_notice("[MEMC_DisableMute_07]idx_chg_cnt=%d",idx_chg_cnt);
	}

	pOutput->u1_memc_mute_state_pre = memc_mute_state;
	mc_write_pre = mc_write;

	MEMC_OutputFrame_cnt++;
	if(MEMC_OutputFrame_cnt > 80000000){
		MEMC_OutputFrame_cnt = 1;
	}

#endif
}

VOID DW_fmdet_4region_En_wrtAction(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();

	unsigned short u16_vip_source_type = 0;
	u16_vip_source_type = s_pContext->_external_info.u16_source_type;

	if (pParam->u1_DW_fmdet_4region_En == 1)
	{
		if ( (u16_vip_source_type >= 24) && (u16_vip_source_type<=33))//only apply in DTV
		{
			WriteRegister(KME_IPME_KME_IPME_7C_reg, 0, 0, 0x1);
		}
		else
		{
			WriteRegister(KME_IPME_KME_IPME_7C_reg, 0, 0, 0x0);
		}
	}

}

VOID MEMC_LBMC_Apply(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	WriteRegister(LBMC_LBMC_EC_reg, 2, 2, 0x1); // lbmc_db_apply
}
//////////////////////////////////////////////////////////////////////////

VOID Wrt_ComReg_Project_Init(VOID)
{
	if(g_ProjectID==VIP_Project_ID_TV010){
		scCtrl_table[3].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0x660000;
		scCtrl_table[0].me1_sc_me1_hold_ctrl.CTRL_TYPE = CTRL_N;
		scCtrl_table[0].me1_sc_me1_hold_ctrl.me1_sc_me1_hold_cnt = 0;
	}
}

VOID Wrt_ComReg_Init(_OUTPUT_WRT_COM_REG *pOutput)
{
	PQL_OUTPUT_RESOLUTION output_Resolution = GetPQLContext()->_external_data._output_resolution;

	scCtrl_table[scCtrl_table_VideoCad].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = MEMC_PARAM_TABLE.SC_Param[output_Resolution].SC_TUNING_TH_PARAM.u32_tuning_threshold_PureVideo;
	scCtrl_table[scCtrl_table_Panning].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = MEMC_PARAM_TABLE.SC_Param[output_Resolution].SC_TUNING_TH_PARAM.u32_tuning_threshold_Panning;

	pOutput->u8_lf_lbmcMode_pre         = _MC_NORMAL_;
	pOutput->u8_hf_lbmcMode_pre         = _MC_NORMAL_;

	if(Get_DISP_ACT_END_VPOS() <= 1088) {
		scCtrl_table[2].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0xAF0000;
	}
	else {
		scCtrl_table[2].me1_sc_saddiff_ctrl.me1_sc_saddiff_th = 0x980000;
	}

	Wrt_ComReg_Project_Init();
}

void Wrt_ComReg_Update_Project_Setting(VOID)
{
	SLR_VIP_TABLE *gVip_Table = fwif_colo_get_AP_vip_table_gVIP_Table();
	static unsigned char ProjectID_pre = VIP_Project_ID_TV001;

	g_ProjectID = gVip_Table->MEMC_PARAMS.ProjectID;

	if(ProjectID_pre==g_ProjectID){
		return;
	}
	MEMC_SetRTKhdf_Project();
	Wrt_ComReg_Project_Init();

	ProjectID_pre = g_ProjectID;
}

extern VOID MEMC_Lib_MEMC_Self_Check(VOID);
VOID Wrt_ComReg_Proc_intputInterrupt(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	if(get_MEMC_Karaoke_flg()==false){
		mc_lbmcMode_wrtAction(pParam, pOutput);
		logoDetect_wrtAction(pParam, pOutput);
		DehaloLogo_wrtAction(pParam, pOutput);
		ZMV_AdaptPNT_wrtAction(pParam, pOutput);
		PFV_CDD_Number_wrtAction(pParam, pOutput);

		// Willy 20180528
		ME_Vst_wrtAction(pParam, pOutput);
	}
	FB_NoNeedToDoFRC_wrtAction(pParam, pOutput);

	if(get_MEMC_Karaoke_flg()==false){
		NearRimDetect_wrtAction(pParam, pOutput);

		// Q-17543
		MEMC_Lib_ME_overflow_Check();	
	}

	// SKY2885NR-2537
	Wrt_ComReg_Update_Project_Setting();
}



extern VOID MEMC_Lib_MC_IndexCheck(VOID);
extern VOID MEMC_LibResetFlow(VOID);
extern VOID MEMC_Lib_VR360_Flow(VOID);
extern VOID MEMC_Lib_CadenceChangeCtrl(VOID);
extern VOID MEMC_LibSet_PQC_DB_apply(VOID);
extern VOID MEMC_LibSet_MCDMA_DB_apply(VOID);
extern VOID Scaler_MEMC_Set_Lib_Freeze(unsigned char enable);
extern VOID MEMC_Lib_SetLineMode(unsigned char u1_enable);
extern unsigned char MEMC_Lib_get_LineMode_flag(VOID);
extern VOID MEMC_LibSet_PQC_DB_en(unsigned int u1_enable);
extern VOID MEMC_LibSet_MCDMA_DB_en(unsigned int u1_enable);
extern VOID MEMC_Lib_DelayTime_Calc(VOID);
extern VOID Mid_Mode_Color_Protect(VOID);
extern VOID Mid_Mode_MEDEN_Checking(VOID);
extern VOID MEMC_Lib_SetLbmcVtrigDelayMode(unsigned char u1_enable);
extern unsigned char MEMC_Lib_get_LbmcTrig_flag(VOID);
extern VOID LowFrameProc(VOID);
//extern VOID Mid_Mode_MEDEN_Checking(VOID);
extern unsigned char MEMC_Lib_get_LbmcTrig_flag(VOID);
extern void Scaler_MEMC_CMA_Memory_Release_StateMachine(void);
extern unsigned char lowdelay_state_chg_cnt;

VOID Wrt_ComReg_Proc_outputInterrupt(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{
	
	unsigned int Freeze_en = 0, test_en = 0, log_en = 0, MEMC_RepeatMode = 0;
	unsigned char LineMode_flag_chg = 0, LbmcTrig_flag_chg = 0;
	static unsigned char LineMode_flag_pre = 0, LbmcTrig_stage_pre = 0, line_mode_states = 0;
	static unsigned char MEMC_ID_cnt = 0;
	static unsigned int mc_write_pre = 0;
	unsigned int mc_write = 0, bsize = 0;
	LineMode_flag_chg = (LineMode_flag_pre == MEMC_Lib_get_LineMode_flag()) ? 0 : 1;
	LbmcTrig_flag_chg = (LbmcTrig_stage_pre == MEMC_Lib_get_LbmcTrig_flag()) ? 0 : 1;
	
	ReadRegister(SOFTWARE1_SOFTWARE1_00_reg, 25, 25, &Freeze_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_63_reg, 30, 30, &test_en);
	ReadRegister(SOFTWARE2_SOFTWARE2_63_reg, 29, 29, &log_en);
	ReadRegister(LBMC_LBMC_24_reg, 4, 4, &MEMC_RepeatMode);
	ReadRegister(SOFTWARE1_SOFTWARE1_60_reg, 25, 25, &log_en);
	ReadRegister(KPHASE_kphase_90_reg, 0, 2, &mc_write);
	ReadRegister(KPHASE_kphase_10_reg, 12, 15, &bsize);

	if(pParam->u1_Wrt_ComReg_Proc_en && MEMC_RepeatMode==0)
	{
		#if PQL_DYNAMIC_ADJUST_FIX_ISSUE
		Identification_Pattern_preProcess(pParam,pOutput);
		#endif

		if(get_MEMC_Karaoke_flg()==false){
			fbCtrl_wrtAction(pParam, pOutput);

			dhClose_wrtAction(pParam);

			ME_obmeSelection_wrtAction(pParam);
			
			MC_VarLpf_Coef_WrtAction();

			mv_accord_wrtAction(pParam);

			//dhLocalFbLvl_wrtAction(pParam);
			dynamicME_wrtAction(pParam,pOutput);


			//if(g_ProjectID==VIP_Project_ID_TV010)
			#if TV010_SMALL_OBJECT_ALGO
			{
				MC_blend_for_small_object(pParam);

				FixTriBall();
			}
			#endif
		}//scalerVIP_is_karaoke_4k60()==false

		Identification_Pattern_Update(pParam, pOutput);

		if(get_MEMC_Karaoke_flg()==false){
#ifdef BG_MV_GET
			gmvCtrl_wrtAction(pParam);//ed
#endif
			Logo_Count_Speed_wrtAction(pParam, pOutput);
			blk_logo_480_wrtAction();

#if PQL_DYNAMIC_ADJUST_FIX_ISSUE

			scCtrl_wrtAction(pParam, pOutput);

			sc_enCtrl_wrtAction(pParam, pOutput);

			Mc2_var_lpf_wrtAction(pParam,pOutput);

			MC_Unsharp_Mask_wrtAction(pParam,pOutput);

			MC_SObj_wrtAction(pParam,pOutput);

			ME2_SObj_wrtAction(pParam,pOutput);
			//IPPRE_POST_CSCMode_wrtAction(pParam,pOutput);
			//MC_blend_alpha_wrtAction(pParam,pOutput);

			Dh_Local_FB_wrtAction(pParam,pOutput);

			Dh_OCCL_Ext_wrtAction(pParam,pOutput);

			DW_fmdet_4region_En_wrtAction(pParam,pOutput);
			
			FixLogoPanning();
			//FixRepeatBroken(pOutput);
			FixHighFreqFlick();

			MEMC_me1_bgmask_newalgo_WrtAction(pParam,pOutput);	

			MEMC_dehalo_newalgo_bgmaskBase_WrtAction (pParam,pOutput);
			MEMC_dehalo_newalgo_bgmaskBase_WrtAction_addT (pParam,pOutput);
		}//if(scalerVIP_is_karaoke_4k60()==false)

		Identification_Pattern_wrtAction(pParam,pOutput);

		if(get_MEMC_Karaoke_flg()==false){
			Dh_MV_Corr_wrtAction(pParam,pOutput);

			Pred_MV_Cand_dis(pParam,pOutput) ;          //pred mv cand disable

			MEMC_Performance_Checking_Database();
		}//if(scalerVIP_is_karaoke_4k60()==false)
#endif
	}

	Wrt_7segment_show(pParam);

	debug_info_show(pParam);

	MEMC_HDMI_PowerSaving(pParam, pOutput);

	//-----line mode state machine
	if(LineMode_flag_chg){
		if(MEMC_Lib_get_LineMode_flag() == 1){
			line_mode_states = 1;
		}else{
			line_mode_states = bsize+3; // 7;
		}
	}

	
	if(line_mode_states == 1){
		if(MEMC_Lib_get_LineMode_flag() == 1)
			MEMC_Lib_SetLineMode(1);
		else
			MEMC_Lib_SetLineMode(0);
	}
	if(line_mode_states > 0){
		line_mode_states--;
	}
	
	mc_write_pre = mc_write;

	
	if(log_en){
		rtd_pr_memc_notice("[%s][,%d,][,%d,%d,%d,]\n\r", __FUNCTION__, __LINE__, LineMode_flag_chg, lowdelay_state_chg_cnt, line_mode_states);
	}
	//-----

	//-----lbmc trig state machine
	if(LbmcTrig_flag_chg){
		if(MEMC_Lib_get_LbmcTrig_flag() == 1)
			MEMC_Lib_SetLbmcVtrigDelayMode(1);
		else
			MEMC_Lib_SetLbmcVtrigDelayMode(0);
	}
	//-----


	MEMC_DisableMute(pParam, pOutput);

	MEMC_Lib_MC_IndexCheck();

	MEMC_Lib_DelayTime_Calc();

	MEMC_LibResetFlow();
//	if(MEMC_RepeatMode==0 && get_MEMC_Karaoke_flg()==false){
	MEMC_Lib_CadenceChangeCtrl();
//	}
	/*
	if(Freeze_en)
		Scaler_MEMC_Set_Lib_Freeze(1);
	else
		Scaler_MEMC_Set_Lib_Freeze(0);
	*/

	MEMC_Lib_VR360_Flow();

	if(MEMC_RepeatMode==0 && get_MEMC_Karaoke_flg()==false){

		MC_RMV_blending_ReginaolFB_wrtAction();

		Over_SearchRange_wrtAction();

		ME_Median_Filter_wrtAction();
		//normal check

		MEMC_SmallObject_wrtAction(pParam);
		//MEMC_Lib_MEMC_Self_Check();		
	}

	#if 0
	// CMA release statemachine
	if(MEMC_Lib_Get_CMA_Release_Stage() >= 1){
		Scaler_MEMC_CMA_Memory_Release_StateMachine();
	}
	#endif

	//update status
	LineMode_flag_pre = MEMC_Lib_get_LineMode_flag();
	LbmcTrig_stage_pre = MEMC_Lib_get_LbmcTrig_flag();
	//MEMC double apply  
	MEMC_LBMC_Apply(pParam, pOutput);
	MEMC_LibSet_PQC_DB_apply();
	MEMC_LibSet_MCDMA_DB_apply();

	Mid_Mode_Color_Protect();
	//work around-> MEshareDMA not work
	Mid_Mode_MEDEN_Checking();
	
	VarLpf_Coef_wrtAction();
	
	//MEMC Self check
	if(MEMC_RepeatMode==0 && get_MEMC_Karaoke_flg()==false){
		MEMC_Lib_MEMC_Self_Check();
	}
	
	MEMC_Lib_Cadence55_speical_setting(pParam,pOutput);

	// MEMC_ID_test
	if(test_en){
		if( MEMC_ID_GetFlag(0, 1) == TRUE ){
			MEMC_ID_cnt = 60;
		}

		if(MEMC_ID_cnt > 0){
			MEMC_ID_cnt--;
			MEMC_ID_flag = 1;
		}
		else{
			MEMC_ID_flag = 0;
		}
	}
	else{
		MEMC_ID_cnt = 0;
		MEMC_ID_flag = 0;
	}
	MEMC_ID_cnt = mc_write;
}
MEMC_ColorTable_Pair Ori_ColorTable = {
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
	{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
};

MEMC_ColorTable_Pair ColorTable_startMtx = {
	{980, 2783, 333, 32299, 31189, 2048, 2048, 30908, 32580, 0, 512, 512},
	{4096, 32672, 6210, 4096, 31904, 30610, 4096, 7504, 32526, 3332, 378, 3188},
};
MEMC_ColorTable_Pair ColorTable_endMtx = {
	{1964, 1465, 667, 32299, 31189, 2048, 2048, 30908, 32580, 0, 512, 512},
	{4096, 31805, 4044, 4096, 31037, 28444, 4096, 6637, 30360, 3711, 757, 3567},
};

#define Negative_Shift(Val,Bits) (Val<0) ? Val+(1<<Bits) : Val;

MEMC_ColorTable_Pair GetColorTable(unsigned char u8_scale, unsigned char u8_id)
{
	MEMC_ColorTable_Pair Result;
	short u16_scale;
	u8_scale = (u8_scale<=1) ? 1 : u8_scale-1;
	u8_id = (u8_id>=u8_scale) ? u8_scale : u8_id;
	u16_scale = (1<<15)/u8_scale*u8_id;
	Result.YUV2RGB.R00 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R00-ColorTable_startMtx.YUV2RGB.R00)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R00, 15);
	Result.YUV2RGB.R01 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R01-ColorTable_startMtx.YUV2RGB.R01)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R01, 15);
	Result.YUV2RGB.R02 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R02-ColorTable_startMtx.YUV2RGB.R02)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R02, 15);
	Result.YUV2RGB.R10 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R10-ColorTable_startMtx.YUV2RGB.R10)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R10, 15);
	Result.YUV2RGB.R11 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R11-ColorTable_startMtx.YUV2RGB.R11)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R11, 15);
	Result.YUV2RGB.R12 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R12-ColorTable_startMtx.YUV2RGB.R12)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R12, 15);
	Result.YUV2RGB.R20 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R20-ColorTable_startMtx.YUV2RGB.R20)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R20, 15);
	Result.YUV2RGB.R21 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R21-ColorTable_startMtx.YUV2RGB.R21)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R21, 15);
	Result.YUV2RGB.R22 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.R22-ColorTable_startMtx.YUV2RGB.R22)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.R22, 15);
	Result.YUV2RGB.T0 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.T0-ColorTable_startMtx.YUV2RGB.T0)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.T0, 12);
	Result.YUV2RGB.T1 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.T1-ColorTable_startMtx.YUV2RGB.T1)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.T1, 12);
	Result.YUV2RGB.T2 = Negative_Shift(((((short)ColorTable_endMtx.YUV2RGB.T2-ColorTable_startMtx.YUV2RGB.T2)*u16_scale)>>15)+ColorTable_startMtx.YUV2RGB.T2, 12);
  
  	Result.RGB2YUV.R00 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R00-ColorTable_startMtx.RGB2YUV.R00)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R00, 15);
	Result.RGB2YUV.R01 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R01-ColorTable_startMtx.RGB2YUV.R01)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R01, 15);
	Result.RGB2YUV.R02 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R02-ColorTable_startMtx.RGB2YUV.R02)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R02, 15);
	Result.RGB2YUV.R10 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R10-ColorTable_startMtx.RGB2YUV.R10)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R10, 15);
	Result.RGB2YUV.R11 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R11-ColorTable_startMtx.RGB2YUV.R11)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R11, 15);
	Result.RGB2YUV.R12 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R12-ColorTable_startMtx.RGB2YUV.R12)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R12, 15);
	Result.RGB2YUV.R20 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R20-ColorTable_startMtx.RGB2YUV.R20)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R20, 15);
	Result.RGB2YUV.R21 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R21-ColorTable_startMtx.RGB2YUV.R21)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R21, 15);
	Result.RGB2YUV.R22 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.R22-ColorTable_startMtx.RGB2YUV.R22)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.R22, 15);
	Result.RGB2YUV.T0 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.T0-ColorTable_startMtx.RGB2YUV.T0)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.T0, 12);
	Result.RGB2YUV.T1 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.T1-ColorTable_startMtx.RGB2YUV.T1)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.T1, 12);
	Result.RGB2YUV.T2 = Negative_Shift(((((short)ColorTable_endMtx.RGB2YUV.T2-ColorTable_startMtx.RGB2YUV.T2)*u16_scale)>>15)+ColorTable_startMtx.RGB2YUV.T2, 12);

	return Result;
}

VOID Wrt_ComReg_Set_colormatrix(MEMC_ColorTable_Pair *ColorTable)
{
	WriteRegister(IPPRE_IPPRE_80_reg,  0, 14,ColorTable->RGB2YUV.R00);
	WriteRegister(IPPRE_IPPRE_80_reg, 15, 29,ColorTable->RGB2YUV.R01);
	WriteRegister(IPPRE_IPPRE_84_reg,  0, 14,ColorTable->RGB2YUV.R02);
	WriteRegister(IPPRE_IPPRE_84_reg, 15, 29,ColorTable->RGB2YUV.R10);
	WriteRegister(IPPRE_IPPRE_88_reg,  0, 14,ColorTable->RGB2YUV.R11);
	WriteRegister(IPPRE_IPPRE_88_reg, 15, 29,ColorTable->RGB2YUV.R12);
	WriteRegister(IPPRE_IPPRE_8C_reg,  0, 14,ColorTable->RGB2YUV.R20);
	WriteRegister(IPPRE_IPPRE_8C_reg, 15, 29,ColorTable->RGB2YUV.R21);
	WriteRegister(IPPRE_IPPRE_90_reg,  0, 14,ColorTable->RGB2YUV.R22);
	WriteRegister(IPPRE_IPPRE_90_reg, 15, 26,ColorTable->RGB2YUV.T0);
	WriteRegister(IPPRE_IPPRE_94_reg,  0, 11,ColorTable->RGB2YUV.T1);
	WriteRegister(IPPRE_IPPRE_94_reg, 12, 23,ColorTable->RGB2YUV.T2);

	WriteRegister(IPPRE_IPPRE_9C_reg,  0, 14,ColorTable->RGB2YUV.R00);
	WriteRegister(IPPRE_IPPRE_9C_reg, 15, 29,ColorTable->RGB2YUV.R01);
	WriteRegister(IPPRE_IPPRE_A0_reg,  0, 14,ColorTable->RGB2YUV.R02);
	WriteRegister(IPPRE_IPPRE_A0_reg, 15, 29,ColorTable->RGB2YUV.R10);
	WriteRegister(IPPRE_IPPRE_A4_reg,  0, 14,ColorTable->RGB2YUV.R11);
	WriteRegister(IPPRE_IPPRE_A4_reg, 15, 29,ColorTable->RGB2YUV.R12);
	WriteRegister(IPPRE_IPPRE_A8_reg,  0, 14,ColorTable->RGB2YUV.R20);
	WriteRegister(IPPRE_IPPRE_A8_reg, 15, 29,ColorTable->RGB2YUV.R21);
	WriteRegister(IPPRE_IPPRE_AC_reg,  0, 14,ColorTable->RGB2YUV.R22);
	WriteRegister(IPPRE_IPPRE_AC_reg, 15, 26,ColorTable->RGB2YUV.T0);
	WriteRegister(IPPRE_IPPRE_B0_reg,  0, 11,ColorTable->RGB2YUV.T1);
	WriteRegister(IPPRE_IPPRE_B0_reg, 12, 23,ColorTable->RGB2YUV.T2);

	WriteRegister(KPOST_TOP_KPOST_TOP_80_reg,  0, 14,ColorTable->YUV2RGB.R00);
	WriteRegister(KPOST_TOP_KPOST_TOP_80_reg, 15, 29,ColorTable->YUV2RGB.R01);
	WriteRegister(KPOST_TOP_KPOST_TOP_84_reg,  0, 14,ColorTable->YUV2RGB.R02);
	WriteRegister(KPOST_TOP_KPOST_TOP_84_reg, 15, 29,ColorTable->YUV2RGB.R10);
	WriteRegister(KPOST_TOP_KPOST_TOP_88_reg,  0, 14,ColorTable->YUV2RGB.R11);
	WriteRegister(KPOST_TOP_KPOST_TOP_88_reg, 15, 29,ColorTable->YUV2RGB.R12);
	WriteRegister(KPOST_TOP_KPOST_TOP_8C_reg,  0, 14,ColorTable->YUV2RGB.R20);
	WriteRegister(KPOST_TOP_KPOST_TOP_8C_reg, 15, 29,ColorTable->YUV2RGB.R21);
	WriteRegister(KPOST_TOP_KPOST_TOP_90_reg,  0, 14,ColorTable->YUV2RGB.R22);
	WriteRegister(KPOST_TOP_KPOST_TOP_90_reg, 15, 26,ColorTable->YUV2RGB.T0);
	WriteRegister(KPOST_TOP_KPOST_TOP_94_reg,  0, 11,ColorTable->YUV2RGB.T1);
	WriteRegister(KPOST_TOP_KPOST_TOP_94_reg, 12, 23,ColorTable->YUV2RGB.T2);
}

VOID MEMC_Lib_Manual_colormatrix(const _PARAM_ME_SCENE_ANALYSIS *pParam, _OUTPUT_ME_SCENE_ANALYSIS *pSceneInfo)
{
	bool u1_SportScene = pSceneInfo->u1_SportScene;
	unsigned char u8_scale = 51, u8_keepLen = 5;
	unsigned int u32_post_out_vtotal_int, Uzudtg_line_count_read_out, Memcdtg_line_count_read_out;
	unsigned int log_en, log_en2, dis_force, forcetable, forcetableid;
	static unsigned char u8_table_cnt = 0;
	unsigned char u8_table_id=0;
	MEMC_ColorTable_Pair ColorTable;
	
	ReadRegister(SOFTWARE3_SOFTWARE3_05_reg, 1, 1, &log_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_05_reg, 2, 2, &log_en2);
	ReadRegister(SOFTWARE3_SOFTWARE3_05_reg, 8,14, &forcetableid);
	ReadRegister(SOFTWARE3_SOFTWARE3_05_reg,15,15, &forcetable);
	ReadRegister(SOFTWARE3_SOFTWARE3_05_reg,30,30, &dis_force);

	if(pParam->u1_chg_color_matrix_en==false) {
		return;
	}

	if(forcetable){//d914[15]
		u8_table_id = (forcetableid>=u8_scale) ? u8_scale-1 : forcetableid;
		ColorTable = GetColorTable(u8_scale,u8_table_id);

		Wrt_ComReg_Set_colormatrix(&ColorTable);

		WriteRegister(IPPRE_IPPRE_94_reg,25,28,0x8);
		WriteRegister(IPPRE_IPPRE_B0_reg,25,28,0x8);
		WriteRegister(KPOST_TOP_KPOST_TOP_94_reg,25,28,0x8);
		if(log_en) {
			rtd_pr_memc_emerg("[%s][%d] cnt>>%d id>>%d\n", __FUNCTION__, __LINE__, u8_table_cnt, u8_table_id);
		}
	}
	else if(dis_force || u1_SportScene==false){
		//resume
		u8_table_id = u8_table_cnt/u8_keepLen;
		u8_table_cnt = (u8_table_cnt>=1) ? u8_table_cnt-1 : 0;
		
		if(u8_table_cnt==0) {
			WriteRegister(IPPRE_IPPRE_94_reg,25,28,0x2);
			WriteRegister(IPPRE_IPPRE_B0_reg,25,28,0x2);
			WriteRegister(KPOST_TOP_KPOST_TOP_94_reg,25,28,0x3);
			
			Wrt_ComReg_Set_colormatrix(&Ori_ColorTable);
		}
		else {
			ColorTable = GetColorTable(u8_scale,u8_table_id);
			
			Wrt_ComReg_Set_colormatrix(&ColorTable);
			
			WriteRegister(IPPRE_IPPRE_94_reg,25,28,0x8);
			WriteRegister(IPPRE_IPPRE_B0_reg,25,28,0x8);
			WriteRegister(KPOST_TOP_KPOST_TOP_94_reg,25,28,0x8);

		}
		if(log_en) {
			rtd_pr_memc_emerg("[%s][%d] cnt>>%d id>>%d\n", __FUNCTION__, __LINE__, u8_table_cnt, u8_table_id);
		}
	}
	else {//u1_SportScene==true
		u8_table_id = u8_table_cnt/u8_keepLen;
		u8_table_cnt = (u8_table_cnt>=(u8_keepLen*u8_scale)-1) ? (u8_keepLen*u8_scale)-1 : u8_table_cnt+1;
		ColorTable = GetColorTable(u8_scale,u8_table_id);

		Wrt_ComReg_Set_colormatrix(&ColorTable);

		WriteRegister(IPPRE_IPPRE_94_reg,25,28,0x8);
		WriteRegister(IPPRE_IPPRE_B0_reg,25,28,0x8);
		WriteRegister(KPOST_TOP_KPOST_TOP_94_reg,25,28,0x8);

		if(log_en) {
			rtd_pr_memc_emerg("[%s][%d] cnt>>%d id>>%d\n", __FUNCTION__, __LINE__, u8_table_cnt, u8_table_id);
		}
	}

#if 1
	if(0) {//d914[2]
		ReadRegister(KPOST_TOP_KPOST_TOP_04_reg,20,31,&u32_post_out_vtotal_int);
		ReadRegister(PPOVERLAY_new_meas1_linecnt_real_reg,16,28,&Uzudtg_line_count_read_out);
		ReadRegister(PPOVERLAY_new_meas1_linecnt_real_reg,0,12,&Memcdtg_line_count_read_out);	
		
		rtd_pr_memc_emerg("[%s][%d][%d,%d][d004,%x,][Uzudtg_line_cnt,%d,][MEMC_line_cnt,%d,][90K,%d,]\n", 
			__FUNCTION__, u1_SportScene, u8_table_id, u8_table_cnt,u32_post_out_vtotal_int, Uzudtg_line_count_read_out, Memcdtg_line_count_read_out, rtd_inl(TIMER_SCPU_CLK90K_LO_reg));
	}
#endif
}

VOID MEMC_Lib_Cadence55_speical_setting(const _PARAM_WRT_COM_REG *pParam, _OUTPUT_WRT_COM_REG *pOutput)
{

#if Pro_tv0302875P

	const _PQLCONTEXT *s_pContext = GetPQLContext();
	PQL_OUTPUT_FRAME_RATE  out_fmRate = 0;
	out_fmRate = s_pContext->_external_data._output_frameRate;

	if(s_pContext->_output_filmDetectctrl.u8_cur_cadence_Id[_FILM_ALL]==_CAD_55 && out_fmRate<=_PQL_OUT_60HZ)
	{

		//logo
		WriteRegister(0xb809bee4,0,3,0);//
		WriteRegister(0xb809bee4,4,7,1);//
		WriteRegister(0xb809bee4,8,11,1);//

	}
#endif
}

void FixTriBall(void)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	bool u1_tri_ball_Detected = s_pContext->_output_me_sceneAnalysis.u1_SportScene;
	static unsigned char u6_tri_ball_hold_cnt = 0;
	unsigned int Algo_en, log_en, Force_en, Force_dis;
	mc_mc_b4_RBUS mc_mc_b4_reg;
	unsigned int mvd_y_max = 224, mvd_y_min = 128, uv_alpha = 32, u1_sbj_cad_en=0;
	bool u1_double_scan = false;
	ReadRegister(SOFTWARE3_SOFTWARE3_17_reg,31, 31, &u1_sbj_cad_en);

	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,0,0,&Algo_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,1,1,&Force_dis);
	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,2,2,&Force_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,3,3,&log_en);
	
	mc_mc_b4_reg.regValue = rtd_inl(MC_MC_B4_reg);
	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,8,15,&mvd_y_min);
	ReadRegister(SOFTWARE3_SOFTWARE3_04_reg,16,23,&mvd_y_max);//d978
	ReadRegister(SOFTWARE3_SOFTWARE3_17_reg, 0, 8, &uv_alpha);

	if(Algo_en == 0) //d910[0]
		return;

	//set
	if(Force_dis||s_pContext->_external_info.u1_CloseTriball==true) {//d910[1]
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  0);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7,  140);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26, 13);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31,  7);
//		WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, 32);  //uv_alpha
		mc_mc_b4_reg.mc_bld_mvd_y_max = 0xc0; //d978[16-23]
		mc_mc_b4_reg.mc_bld_mvd_y_min = 0x68; //d978[8-15]
		u6_tri_ball_hold_cnt = 0;
	}
	else if(s_pContext->_output_me_sceneAnalysis.u1_SportScene == true){
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  1);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31,  3);
//		WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, 110);  //uv_alpha
		if(g_new_sport_mode){
			u1_double_scan = true;
			mc_mc_b4_reg.mc_bld_mvd_y_max = 0xff;
			mc_mc_b4_reg.mc_bld_mvd_y_min = 0xff;
		}else{
			mc_mc_b4_reg.mc_bld_mvd_y_max = mvd_y_max;//0xe0; 
			mc_mc_b4_reg.mc_bld_mvd_y_min = mvd_y_min;//0xf0;
		}
		u6_tri_ball_hold_cnt = 8;
	}
	else if(u1_tri_ball_Detected||Force_en) {//d910[2]
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  1);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7,  170);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26,  7);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31,  3);
//		WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, uv_alpha);  //uv_alpha
		if(g_new_sport_mode){
			u1_double_scan = true;
			mc_mc_b4_reg.mc_bld_mvd_y_max = 0xff;
			mc_mc_b4_reg.mc_bld_mvd_y_min = 0xff;
		}else{
			mc_mc_b4_reg.mc_bld_mvd_y_max = mvd_y_max;//0xe0; 
			mc_mc_b4_reg.mc_bld_mvd_y_min = mvd_y_min;//0xf0;
		}
		u6_tri_ball_hold_cnt = 8;
	}
	else if(u6_tri_ball_hold_cnt>0){
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  1);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7,  170);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26,  7);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31,  3);
//		WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, uv_alpha);  //uv_alpha
		mc_mc_b4_reg.mc_bld_mvd_y_max = mvd_y_max;//0xe0;
		mc_mc_b4_reg.mc_bld_mvd_y_min = mvd_y_min;//0xf0;
		u6_tri_ball_hold_cnt--;
	}
	else {
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 28, 28,  0);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_1_reg, 0, 7,  140);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 22, 26, 13);
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_2_reg, 27, 31,  7);
//		WriteRegister(IPPRE_IPPRE_04_reg, 16, 23, 32);  //uv_alpha
		mc_mc_b4_reg.mc_bld_mvd_y_max = 0xc0;
		mc_mc_b4_reg.mc_bld_mvd_y_min = 0x68;
	}

	if(u1_double_scan){
		WriteRegister(KME_TOP_KME_TOP_08_reg, 2, 2, 1);
	}else {
		WriteRegister(KME_TOP_KME_TOP_08_reg, 2, 2, 0);
	}

	if(u1_sbj_cad_en){
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 0, 15, 0xc3f3);
	}else {
		WriteRegister(KME_ME1_TOP10_PRED_MV_CAND_3_reg, 0, 15, 0xf3);
	}

	rtd_outl(MC_MC_B4_reg, mc_mc_b4_reg.regValue);

	if(log_en) { //d910[3]
	       rtd_pr_memc_emerg("flag:%d,%d mvd:%d,%d\n", u1_tri_ball_Detected, g_new_sport_mode, mc_mc_b4_reg.mc_bld_mvd_y_min,mc_mc_b4_reg.mc_bld_mvd_y_max);
	}
}

VOID FixLogoPanning(void)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	unsigned int algo_en = 0, log_en = 0, logo_th = 0, logo_cnt[2] = {0};
	bool u2_uniform_panning = s_pContext->_output_me_sceneAnalysis.u2_uniform_panning;
	static bool u1_set_pre = false;
	static unsigned char u8_cnt = 0;

	if(g_ProjectID!=VIP_Project_ID_TV010) {
		return;
	}

	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 31, 31, &algo_en);
	if(!algo_en){
		u8_cnt = 0;
		if(u1_set_pre==true){
			WriteRegister(SOFTWARE3_SOFTWARE3_63_reg, 0, 0, 0); //D9A0
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 16, 16, 0);//zmv candidate
			WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 0);//zmv candidate
			u1_set_pre = false;
		}
		return;
	}

	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg,  0,  7, &logo_th);
	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 30, 30, &log_en);

	ReadRegister(KME_LOGO2_KME_LOGO2_A0_reg, 20, 29, &logo_cnt[0]);
	ReadRegister(KME_LOGO2_KME_LOGO2_C0_reg, 20, 29, &logo_cnt[1]);

	if((logo_cnt[0]+logo_cnt[1])>logo_th && u2_uniform_panning>=MEMC_Uniform_Panning_Mid) {
		u8_cnt = (u8_cnt>=16) ? 16 : u8_cnt+1;
	}else {
		u8_cnt = (u8_cnt<=1) ? 0 : u8_cnt-1;
	}

	if(u8_cnt>10) {
		WriteRegister(SOFTWARE3_SOFTWARE3_63_reg, 0, 0, 1); //D9A0
		WriteRegister(SOFTWARE3_SOFTWARE3_63_reg, 1, 2, 0); //D9A0
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 16, 16, 1);//zmv candidate
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 1);//zmv candidate
		u1_set_pre = true;
	}
	else if(u1_set_pre==true && u8_cnt==0){
		WriteRegister(SOFTWARE3_SOFTWARE3_63_reg, 0, 0, 0); //D9A0
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg, 16, 16, 0);//zmv candidate
		WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg, 15, 15, 0);//zmv candidate
		u1_set_pre = false;
	}

	if(log_en) {//d9ec[30]
		rtd_pr_memc_emerg("[%d] [%d,%d] cnt,%d logo_cnt,%d, %d\n", u1_set_pre, u2_uniform_panning, ((logo_cnt[0]+logo_cnt[1])>logo_th ? 1 : 0), u8_cnt, logo_cnt[0], logo_cnt[1]);
	}
}

VOID FixHighFreqFlick(void)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	_PQLCONTEXT *s_pContext_w = GetPQLContext_m();
	unsigned int  u25_me_aDTL = s_pContext->_output_read_comreg.u25_me_aDTL_rb;
	unsigned int  u12_unconf = s_pContext->_output_read_comreg.u12_me_GMV_1st_unconf_rb;
	unsigned int blending_mode=0, Algo_en=0, log_en=0;
	unsigned short u16_max_vx, u16_max_vy;
	unsigned char u8_i;
	bool u1_ApplySet = false;
	static bool u1_ApplySet_pre = false;
	static unsigned int u3_mode_pre=0;//u1_gmv_en_ip_pre=0, u1_gmv_en_pi_pre=0;
	static unsigned char u8_HighFreg_cnt=0, u8_nonHighFreg_cnt=0;
	unsigned int u1_force_ON, u1_force_OFF;

	if(g_ProjectID!=VIP_Project_ID_TV010) {
		return;
	}
	
	ReadRegister(SOFTWARE3_SOFTWARE3_13_reg, 31, 31, &u1_force_ON);
	ReadRegister(SOFTWARE3_SOFTWARE3_13_reg, 30, 30, &u1_force_OFF);

	ReadRegister(MC_MC_B0_reg,0,2, &blending_mode);
	ReadRegister(SOFTWARE3_SOFTWARE3_13_reg, 24, 24, &Algo_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_13_reg, 25, 25, &log_en);
	if(Algo_en==0) {//d930[0]
		return;
	}
	if(blending_mode!=0&&blending_mode!=4){
		u8_HighFreg_cnt = 0;
		u8_nonHighFreg_cnt = 0;
		u1_ApplySet_pre = false;
		return;
	}

	u16_max_vx = _ABS_(s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[0]);
	u16_max_vy = _ABS_(s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[0]);
	for(u8_i=1; u8_i<32; u8_i++) {
		if(u16_max_vx < _ABS_(s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[u8_i])) {
			u16_max_vx = _ABS_(s_pContext->_output_read_comreg.s11_me_rMV_1st_vx_rb[u8_i]);
		}
		if(u16_max_vy < _ABS_(s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[u8_i])) {
			u16_max_vy = _ABS_(s_pContext->_output_read_comreg.s10_me_rMV_1st_vy_rb[u8_i]);
		}
	}

	if( (u16_max_vx<=16&&u16_max_vy<=16&&u25_me_aDTL>=900000&&u12_unconf<4) || 
		(u16_max_vx<=8&&u16_max_vy<=8&&u25_me_aDTL>=850000&&u12_unconf<3) ) {
		u8_HighFreg_cnt = (u8_HighFreg_cnt>=32) ? 32 : u8_HighFreg_cnt+1;
		u8_nonHighFreg_cnt = (u8_nonHighFreg_cnt<2) ? 0 : u8_nonHighFreg_cnt-2;
	}
	else {
		u8_nonHighFreg_cnt = (u8_nonHighFreg_cnt>=32) ? 32 : u8_nonHighFreg_cnt+1;
		u8_HighFreg_cnt = (u8_HighFreg_cnt<2) ? 0 : u8_HighFreg_cnt-2;
	}

	if(u8_HighFreg_cnt>16) {
		u1_ApplySet = true;
	}
	else if(u8_nonHighFreg_cnt>16) {
		u1_ApplySet = false;
	}
	else {
		u1_ApplySet = u1_ApplySet_pre;
	}

	if(u1_force_ON){
		u1_ApplySet = true;
	}
	else if(u1_force_OFF) {
		u1_ApplySet = false;
	}
	
	if(u1_ApplySet == true) {
		if(u1_ApplySet!=u1_ApplySet_pre) {
			ReadRegister(MC_MC_B0_reg, 0, 2, &u3_mode_pre);
			//ReadRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,15,15, &u1_gmv_en_ip_pre);
			//ReadRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,14,14, &u1_gmv_en_pi_pre);
		}
		WriteRegister(MC_MC_B0_reg, 0, 2, 4);
		//WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,15,15, 0);
		//WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,14,14, 0);
	}
	else {
		if(u1_ApplySet!=u1_ApplySet_pre) {
			WriteRegister(MC_MC_B0_reg, 0, 2, u3_mode_pre);
			//WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_10_reg,15,15, u1_gmv_en_ip_pre);
			//WriteRegister(KME_VBUF_TOP_KME_VBUF_TOP_14_reg,14,14, u1_gmv_en_pi_pre);
		}

	}
	s_pContext_w->_external_data.u1_FixHighFreqFlick = u1_ApplySet;
	u1_ApplySet_pre = u1_ApplySet;

	if(log_en) {//d930[1]
		rtd_pr_memc_emerg("[%s][%d] apply set:%d cnt:%d %d dtl:%d rmv x:%d y:%d unconf:%d\n",  __FUNCTION__, __LINE__,
			u1_ApplySet, u8_HighFreg_cnt, u8_nonHighFreg_cnt, u25_me_aDTL, 
			u16_max_vx, u16_max_vy, u12_unconf);
	}
}

#if 0
#define FLP_ALP_COE_NUM	(7)
#define FLP_ALP_COE_SUM (256)
unsigned char flp_alp_table[FLP_ALP_NUM][FLP_ALP_COE_NUM] = {
	{64,48,32,16, 0, 0, 0,}, //repeat off
	{32,28,24,20,16,14,10,}, //repeat low/mid/high
};
#endif

#if 0
void finetume_flp_alp_cof(unsigned char *flp_alp_cof)
{
	char u8_j=0;
	unsigned char u8_k=0;
	unsigned short flp_alp_sum = flp_alp_cof[0]+2*(flp_alp_cof[1]+flp_alp_cof[2]+flp_alp_cof[3]+flp_alp_cof[4]+flp_alp_cof[5]+flp_alp_cof[6]);
	short compensation_num = 0;
 
	if(flp_alp_sum==FLP_ALP_COE_SUM){
		return;
	}

	// if sum of coefficient is odd, modify the coefficient0. let sum of coefficient be even
	if(((flp_alp_sum>>1)<<1)!=flp_alp_sum) {
		if(flp_alp_sum>FLP_ALP_COE_SUM){
			flp_alp_cof[0] -= 1;
		}else{
			flp_alp_cof[0] += 1;
		}
	}
	
	flp_alp_sum = flp_alp_cof[0]+2*(flp_alp_cof[1]+flp_alp_cof[2]+flp_alp_cof[3]+flp_alp_cof[4]+flp_alp_cof[5]+flp_alp_cof[6]);
	if(flp_alp_sum==FLP_ALP_COE_SUM){
		return;
	}
	
	if(flp_alp_sum>FLP_ALP_COE_SUM){
		compensation_num = (flp_alp_sum-FLP_ALP_COE_SUM)>>1;
		u8_k = FLP_ALP_COE_NUM-1;
		for(u8_j=0; u8_j<compensation_num; u8_j++){
			
			if(flp_alp_cof[u8_k]>1){
				flp_alp_cof[u8_k] -= 1;
			}else {
				u8_j--;
			}
			u8_k = (u8_k==0) ? FLP_ALP_COE_NUM-1 : u8_k-1;
		}
	}
	else{
		compensation_num = (FLP_ALP_COE_SUM-flp_alp_sum)>>1;
		u8_k = FLP_ALP_COE_NUM-1;
		for(u8_j=0; u8_j<compensation_num; u8_j++){
			flp_alp_cof[u8_k]+=1;
			u8_k = (u8_k==0) ? FLP_ALP_COE_NUM-1 : u8_k-1;
		}
	}
	
	 //flp_alp_sum = flp_alp_cof[0]+2*(flp_alp_cof[1]+flp_alp_cof[2]+flp_alp_cof[3]+flp_alp_cof[4]+flp_alp_cof[5]+flp_alp_cof[6]);
	 //printf("[ ][%d] %d,%d,%d,%d,%d,%d,%d\n\n",flp_alp_sum, flp_alp_cof[0], flp_alp_cof[1], flp_alp_cof[2], flp_alp_cof[3], flp_alp_cof[4], flp_alp_cof[5], flp_alp_cof[6]);

}
#endif

VOID Wrt_ComReg_SetRepeatMode(unsigned char Repeat_Mode)
{
	_PQLCONTEXT *s_pContext = GetPQLContext_m();
	static unsigned char u8_cnt=0;
	static unsigned char Repeat_Mode_Pre=0;
	unsigned char Repeat_Mode_Set = Repeat_Mode;
	unsigned int u8_cnt_max1, u8_cnt_max2, log_en;
	ReadRegister(SOFTWARE3_SOFTWARE3_11_reg,0,5,&u8_cnt_max1);
	ReadRegister(SOFTWARE3_SOFTWARE3_11_reg,8,13,&u8_cnt_max2);
	ReadRegister(SOFTWARE3_SOFTWARE3_14_reg,31,31,&log_en);

	if(Repeat_Mode == RepeatMode_SC) {
		u8_cnt=0;
		Repeat_Mode_Pre = RepeatMode_OFF;
		Repeat_Mode_Set = RepeatMode_OFF;
	}
	else {
		if(Repeat_Mode_Pre!=Repeat_Mode) {
			if(Repeat_Mode_Pre==RepeatMode_MID){
				u8_cnt = u8_cnt_max2;
				Repeat_Mode_Pre = Repeat_Mode;
			}
			else { //Repeat_Mode_Pre==RepeatMode_OFF
				u8_cnt = u8_cnt_max1;
				Repeat_Mode_Pre = Repeat_Mode;
			}
		}

		if(u8_cnt>0){
			u8_cnt--;
			Repeat_Mode_Set = RepeatMode_LOW;
		}
	}

	if(log_en){//d92c[31]
		rtd_pr_memc_crit("Pre,%d, Det,%d, Set,%d, cnt,%d,%d,%d,\n",
			Repeat_Mode_Pre, Repeat_Mode, Repeat_Mode_Set,u8_cnt, u8_cnt_max1, u8_cnt_max2 );
	}

	switch(Repeat_Mode_Set)
	{
		case RepeatMode_OFF:
		case RepeatMode_SC:
			s_pContext->_output_me_sceneAnalysis.u8_RepeatMode = RepeatMode_OFF;
			break;

		case RepeatMode_LOW:
			s_pContext->_output_me_sceneAnalysis.u8_RepeatMode = RepeatMode_LOW;
			break;

		case RepeatMode_MID:
			s_pContext->_output_me_sceneAnalysis.u8_RepeatMode = RepeatMode_MID;
			break;
			
		default:
			break;
	}

}

VOID FixSparkleByMouse(void)
{
	const _PQLCONTEXT *s_pContext = GetPQLContext();
	const unsigned char u8_max_bad_rgn_cnt = 18;
	const unsigned char u8_max_bad_rgn_cnt_th = 10;
	unsigned char u5_bad_rgn = s_pContext->_output_dh_close.u5_dh_bad_rgn_num;
	unsigned int u30_sad = s_pContext->_output_read_comreg.u30_me_aSAD_rb;
	unsigned int u31_sad_th = 0, u1_algo_en = 0, log_en = 0;
	bool u1_fix_sparkle = false, u1_detect_bad_rgn = false, u1_detect_same_scene = false;
	static bool u1_fix_sparkle_pre = false;
	static unsigned char u8_bad_rgn_cnt = 0;

	if(g_ProjectID!=VIP_Project_ID_TV010) {
		return;
	}

	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 24, 24, &u1_algo_en);
	ReadRegister(SOFTWARE3_SOFTWARE3_59_reg, 25, 25, &log_en);
	if(!u1_algo_en){
		if(u1_fix_sparkle_pre==true && u1_fix_sparkle==false) {
			WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg, 9, 9, 1);
		}
		u1_fix_sparkle_pre = false;
		return;
	}

	if(u5_bad_rgn<=1){
		u8_bad_rgn_cnt = (u8_bad_rgn_cnt<u8_max_bad_rgn_cnt) ? u8_bad_rgn_cnt+1 : u8_max_bad_rgn_cnt;
	}
	else if(u5_bad_rgn<=6){
		u8_bad_rgn_cnt = (u8_bad_rgn_cnt>u5_bad_rgn) ? u8_bad_rgn_cnt-u5_bad_rgn : 0;
	}
	else {
		u8_bad_rgn_cnt = 0;
	}

	u31_sad_th = rtd_inl(KME_ME1_TOP1_ME1_SCENE1_07_reg)&0x7fffffff;
	
	u1_detect_bad_rgn = (u8_bad_rgn_cnt>=u8_max_bad_rgn_cnt_th) ? true : false;
	u1_detect_same_scene = (u30_sad < 154*(u31_sad_th>>8)) ? true : false;

	u1_fix_sparkle = (u1_detect_bad_rgn && u1_detect_same_scene);

	if(log_en){
		rtd_pr_memc_emerg("[FixSparkleByMouse][,%d,%d,%d,], %d, %d, %d, 		[,%d,], %d, %d,	\n", u1_fix_sparkle,u1_detect_bad_rgn,u1_detect_same_scene,
			s_pContext->_output_dh_close.u5_dh_good_rgn_num, s_pContext->_output_dh_close.u5_dh_bad_rgn_num, u8_bad_rgn_cnt,
			s_pContext->_output_read_comreg.u30_me_aSAD_rb>(rtd_inl(KME_ME1_TOP1_ME1_SCENE1_07_reg)&0x7fffffff) ? 1 : 0,
			s_pContext->_output_read_comreg.u30_me_aSAD_rb, rtd_inl(KME_ME1_TOP1_ME1_SCENE1_07_reg)&0x7fffffff);
	}

	if(u1_fix_sparkle) {
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg, 9, 9, 0);
	}
	else if(u1_fix_sparkle_pre==true && u1_fix_sparkle==false) {
		WriteRegister(KME_ME1_TOP1_ME1_SCENE1_00_reg, 9, 9, 1);
	}
	u1_fix_sparkle_pre = u1_fix_sparkle;
}

void FixSubtitleBroken_Set(void)//50001_carOnGround_25fps.avi
{
	const _PQLCONTEXT *s_pContext=GetPQLContext();

	if(s_pContext->_output_me_sceneAnalysis.u1_FixSubtitleBroken_en==1)
	{
		//apply me2 zmv
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_30_reg, 16, 16, 1);	
	}
	else
	{
		WriteRegister(KME_ME2_VBUF_TOP_KME_ME2_VBUF_TOP_30_reg, 16, 16, s_pContext->_output_me_sceneAnalysis.SIS_MEMC.MEMC_STATUS.reg_kme_me2_vbuf_1st_zmv_en);	
	}
}



