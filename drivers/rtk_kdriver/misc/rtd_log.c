#include <linux/kernel.h>
#include <linux/module.h>
#include <rtk_kdriver/rtd_log.h>
#include <linux/string.h>
#define RTD_LOG_MODULE(module) {RTD_LOG_MODULE_##module,6,#module,1}
struct MODULE_MAP module_map[RTD_LOG_MODULE_MAX_ID] =
{
    RTD_LOG_MODULE(OTHER),
    RTD_LOG_MODULE(RTDLOG),
    RTD_LOG_MODULE(MEASURE),
    RTD_LOG_MODULE(QOS),
    RTD_LOG_MODULE(RMM),
    RTD_LOG_MODULE(SPI_DEV),
    RTD_LOG_MODULE(SPI_NOR),
    RTD_LOG_MODULE(RTK_TEE),
    RTD_LOG_MODULE(RPC),
    RTD_LOG_MODULE(CRT),
    RTD_LOG_MODULE(PLATFORM),
    RTD_LOG_MODULE(POWER),
    RTD_LOG_MODULE(MACH_RTK),
    RTD_LOG_MODULE(HW_MONITOR),
    RTD_LOG_MODULE(DFT),
    RTD_LOG_MODULE(VENUSFB),
    RTD_LOG_MODULE(GDECMP),
    RTD_LOG_MODULE(UART),
    RTD_LOG_MODULE(RTICE),
    RTD_LOG_MODULE(SWITCH),
    RTD_LOG_MODULE(PCB_MGR),
    RTD_LOG_MODULE(OMX),
    RTD_LOG_MODULE(CRM),
    RTD_LOG_MODULE(RTC),
    RTD_LOG_MODULE(VDEC),
    RTD_LOG_MODULE(USB_GADGET),
    RTD_LOG_MODULE(ZQ),
    RTD_LOG_MODULE(DDR_SCAN),
    RTD_LOG_MODULE(CPU_FREQ),
    RTD_LOG_MODULE(OHCI_PLAT),
    RTD_LOG_MODULE(RTK_USB),
    RTD_LOG_MODULE(OTG_PLAT),
    RTD_LOG_MODULE(XHCI_DRD),
    RTD_LOG_MODULE(XHCI_PLAT),
    RTD_LOG_MODULE(EHCI_PLAT),
    RTD_LOG_MODULE(AVD),
    RTD_LOG_MODULE(ADC),
    RTD_LOG_MODULE(VDC),
    RTD_LOG_MODULE(VBI),
    RTD_LOG_MODULE(ONMS),
    RTD_LOG_MODULE(OFFMS),
    RTD_LOG_MODULE(MEMC),
    RTD_LOG_MODULE(MEMC_LIB),
    RTD_LOG_MODULE(NEW_GAME_MODE),
    RTD_LOG_MODULE(SCALER_MEMORY),
    RTD_LOG_MODULE(VBE),
    RTD_LOG_MODULE(VPQ),
    RTD_LOG_MODULE(VPQ_GSR),
    RTD_LOG_MODULE(HDMITX),
    RTD_LOG_MODULE(VFE),
    RTD_LOG_MODULE(VSC),
    RTD_LOG_MODULE(I3DDMA),
    RTD_LOG_MODULE(IOREG),
    RTD_LOG_MODULE(SMT),
    RTD_LOG_MODULE(HDR),
    RTD_LOG_MODULE(VR),
    RTD_LOG_MODULE(VT),
    RTD_LOG_MODULE(VO),
    RTD_LOG_MODULE(VGIP_ISR),
    RTD_LOG_MODULE(DDOMAIN_ISR),
    RTD_LOG_MODULE(PIF_ISR),
    RTD_LOG_MODULE(HIST),
    RTD_LOG_MODULE(VPQ_AI),
    RTD_LOG_MODULE(VPQEX),
    RTD_LOG_MODULE(VPQUT),
    RTD_LOG_MODULE(VPQMASK),
    RTD_LOG_MODULE(VIP_RINGBUF),
    RTD_LOG_MODULE(VPQMASK_COLOR),
    RTD_LOG_MODULE(SRNN),
    RTD_LOG_MODULE(VPQ_OD),
    RTD_LOG_MODULE(VPQ_FCIC),
    RTD_LOG_MODULE(VPQ_ISR),
    RTD_LOG_MODULE(AI_DBG),
    RTD_LOG_MODULE(RTK_UTIL_TASKS),
    RTD_LOG_MODULE(SE),
    RTD_LOG_MODULE(GDMA),
    RTD_LOG_MODULE(DPRX),
    RTD_LOG_MODULE(QUICK_SHOW),
    RTD_LOG_MODULE(SM),
    RTD_LOG_MODULE(HDCP),
    RTD_LOG_MODULE(DELI),
    RTD_LOG_MODULE(SE_FILM),
    RTD_LOG_MODULE(DPQ),
    RTD_LOG_MODULE(PQ),
    RTD_LOG_MODULE(EMMC),
    RTD_LOG_MODULE(EVENTLOG),
    RTD_LOG_MODULE(CARD),
    RTD_LOG_MODULE(SPI),
    RTD_LOG_MODULE(rtk_spi_master),
    RTD_LOG_MODULE(USB_BB),
    RTD_LOG_MODULE(USB_HUB),
    RTD_LOG_MODULE(PCIE),
    RTD_LOG_MODULE(ETH),
    RTD_LOG_MODULE(HDMI),
    RTD_LOG_MODULE(AMP),
    RTD_LOG_MODULE(AudioHW),
    RTD_LOG_MODULE(ADSP),
    RTD_LOG_MODULE(TP),
    RTD_LOG_MODULE(DEMUX),
    RTD_LOG_MODULE(ATSC3),
    RTD_LOG_MODULE(ATSC3ALP),
    RTD_LOG_MODULE(JAPAN4K),
    RTD_LOG_MODULE(DEMOD),
    RTD_LOG_MODULE(DISEQC),
    RTD_LOG_MODULE(LNBUART),
    RTD_LOG_MODULE(LNBGPIO),
    RTD_LOG_MODULE(MD),
    RTD_LOG_MODULE(CW),
    RTD_LOG_MODULE(MCP),
    RTD_LOG_MODULE(OTP),
    RTD_LOG_MODULE(RCP),
    RTD_LOG_MODULE(RNG),
    RTD_LOG_MODULE(RSA),
    RTD_LOG_MODULE(WRAP),
    RTD_LOG_MODULE(DCMT),
    RTD_LOG_MODULE(HWM),
    RTD_LOG_MODULE(THERMAL),
    RTD_LOG_MODULE(SEMAPHORE),
    RTD_LOG_MODULE(CEC),
    RTD_LOG_MODULE(DDC),
    RTD_LOG_MODULE(DDC_CI),
    RTD_LOG_MODULE(RTK_EXTCON),
    RTD_LOG_MODULE(GPIO),
    RTD_LOG_MODULE(KEYPAD),
    RTD_LOG_MODULE(LED),
    RTD_LOG_MODULE(LEDSERIAL),
    RTD_LOG_MODULE(LSADC),
    RTD_LOG_MODULE(I2C),
    RTD_LOG_MODULE(IR),
    RTD_LOG_MODULE(IRMD),
    RTD_LOG_MODULE(IRTX),
    RTD_LOG_MODULE(PCMCIA),
    RTD_LOG_MODULE(PWM),
    RTD_LOG_MODULE(PWM_LD),
    RTD_LOG_MODULE(SCD),
    RTD_LOG_MODULE(CIUSB),
    RTD_LOG_MODULE(EMCU),
    RTD_LOG_MODULE(MISC),
    RTD_LOG_MODULE(MISC_DRIVER_INTERRUPT),
    RTD_LOG_MODULE(USBDUMP),
    RTD_LOG_MODULE(ONLINE_HELP),
    RTD_LOG_MODULE(LG_COUNTRY_TYPE),
    RTD_LOG_MODULE(KILLER),
    RTD_LOG_MODULE(ADJUSTER),
    RTD_LOG_MODULE(DSCD),
    RTD_LOG_MODULE(VIDEO_COMMON),
    RTD_LOG_MODULE(UVC),
    RTD_LOG_MODULE(WOV),
    RTD_LOG_MODULE(PWR_MONITOR),
};
EXPORT_SYMBOL(module_map);

bool check_log_levle(char *level_buf,unsigned int module_id)
{
    int level = 0;

    level = simple_strtoul(level_buf+1, NULL, 10);

    if((module_id == module_map[module_id].module_id)&&(level <= module_map[module_id].level)&&(1 == module_map[module_id].save_flag))
        return true;

    return false;
}
bool check_log_level_and_module(char *level_buf,unsigned int module_id)
{
    if(module_id >= (sizeof(module_map)/sizeof(struct MODULE_MAP)))
        return false;

    if(check_log_levle(level_buf,module_id) == false)
        return false;

    return true;
}
EXPORT_SYMBOL(check_log_level_and_module);
MODULE_LICENSE("GPL");
